"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[944],{86615:function(G,I,e){var w=e(1413),d=e(91),R=e(22270),r=e(78045),D=e(67294),c=e(83607),Z=e(31649),F=e(85893),$=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],P=D.forwardRef(function(p,a){var O=p.fieldProps,g=p.options,j=p.radioType,B=p.layout,J=p.proFieldProps,X=p.valueEnum,Q=(0,d.Z)(p,$);return(0,F.jsx)(Z.Z,(0,w.Z)((0,w.Z)({valueType:j==="button"?"radioButton":"radio",ref:a,valueEnum:(0,R.h)(X,void 0)},Q),{},{fieldProps:(0,w.Z)({options:g,layout:B},O),proFieldProps:J,filedConfig:{customLightMode:!0}}))}),h=D.forwardRef(function(p,a){var O=p.fieldProps,g=p.children;return(0,F.jsx)(r.ZP,(0,w.Z)((0,w.Z)({},O),{},{ref:a,children:g}))}),o=(0,c.G)(h,{valuePropName:"checked",ignoreWidth:!0}),i=o;i.Group=P,i.Button=r.ZP.Button,i.displayName="ProFormComponent",I.Z=i},60467:function(G,I,e){e.r(I),e.d(I,{default:function(){return me}});var w=e(97857),d=e.n(w),R=e(15009),r=e.n(R),D=e(99289),c=e.n(D),Z=e(5574),F=e.n(Z),$=e(37476),P=e(5966),h=e(86615),o=e(17186),i=e(24739),p=e(90930),a=e(51390),O=e(7529),g=e(64317),j=e(59530),B=function(){var _=c()(r()().mark(function s(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/easy-flowable/deployment/page",{method:"POST",data:t}));case 1:case"end":return l.stop()}},s)}));return function(t){return _.apply(this,arguments)}}(),J=function(){var _=c()(r()().mark(function s(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/easy-flowable/processInstance/start",{method:"POST",data:t}));case 1:case"end":return l.stop()}},s)}));return function(t){return _.apply(this,arguments)}}(),X=null,Q=function(){var _=c()(r()().mark(function s(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/easy-flowable/deployment/deploymentState/".concat(t)));case 1:case"end":return l.stop()}},s)}));return function(t){return _.apply(this,arguments)}}(),q=function(){var _=c()(r()().mark(function s(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/easy-flowable/deployment/flowUserList/".concat(t)));case 1:case"end":return l.stop()}},s)}));return function(t){return _.apply(this,arguments)}}(),ee=function(s){return"/easy-flowable/deployment/deploymentImage/".concat(s)},re=function(){var _=c()(r()().mark(function s(t){return r()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.abrupt("return",(0,j.request)("/easy-flowable/deployment/deploymentXml/".concat(t)));case 1:case"end":return l.stop()}},s)}));return function(t){return _.apply(this,arguments)}}(),K=e(67294),L=e(66309),ae=e(78239),ne=function(){var _=c()(r()().mark(function s(t){var E,l,W,x,k;return r()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return E={current:t.current||1,size:t.pageSize||10},l={name:t.name,modelType:t.modelType,flowKey:t.key},T.next=4,B(d()(d()({},E),{},{params:l}));case 4:return W=T.sent,x=W.success,k=W.result,T.abrupt("return",{success:x,total:k.totalRow||0,data:k.records||[]});case 8:case"end":return T.stop()}},s)}));return function(t){return _.apply(this,arguments)}}(),ue=[{valueType:"index",title:"\u5E8F\u53F7"},{dataIndex:"name",title:"\u5B9A\u4E49\u540D\u79F0"},{dataIndex:"key",title:"\u5B9A\u4E49\u6807\u8BC6"},{dataIndex:"modelType",title:"\u6D41\u7A0B\u7C7B\u578B",valueType:"select",request:function(){return ae.m}},{dataIndex:"version",search:!1,title:"\u5B9A\u4E49\u7248\u672C",render:function(s,t){var E=t.version;return E?K.createElement(L.Z,{color:"success"},"V "+s):K.createElement(L.Z,{},"\u672A\u5B9A\u4E49")}},{dataIndex:"suspensionState",title:"\u5B9A\u4E49\u72B6\u6001",search:!1,render:function(s,t){var E=t.suspensionState;return E?K.createElement(L.Z,{color:"error"},"\u7EC8\u6B62"):K.createElement(L.Z,{color:"success"},"\u6FC0\u6D3B")}}],te=e(78957),U=e(14726),le=e(85418),se=e(2453),V=e(17788),oe=e(35930),ie=e(85265),de=e(80882),ce=e(96944),u=e(85893),pe=function(){var s=(0,j.useModel)("@@initialState"),t=s.initialState,E=t.users,l=t.groups,W=E.concat({value:"${initiator}",label:"\u6D41\u7A0B\u53D1\u8D77\u4EBA"}),x=(0,K.useRef)(),k=(0,K.useState)({open:!1,list:[]}),z=F()(k,2),T=z[0],Y=z[1],fe=[{title:"\u64CD\u4F5C",align:"center",search:!1,render:function(H,m){return(0,u.jsxs)(te.Z,{children:[(0,u.jsx)(U.ZP,{onClick:c()(r()().mark(function f(){var b,n,v,C;return r()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,Q(m.processDefinitionId);case 2:b=A.sent,n=b.success,n&&((v=x.current)===null||v===void 0||(C=v.reloadAndRest)===null||C===void 0||C.call(v));case 5:case"end":return A.stop()}},f)})),style:{color:m.suspensionState?"#bae637":"#ff4d4f"},type:"link",children:m.suspensionState?"\u6FC0\u6D3B":"\u7EC8\u6B62"}),(0,u.jsx)(le.Z,{menu:{items:[{label:(0,u.jsxs)($.Y,{request:c()(r()().mark(function f(){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",{processDefinitionId:m.processDefinitionId,flowKey:m.key,skipFirstNode:!0});case 1:case"end":return n.stop()}},f)})),onFinish:function(){var f=c()(r()().mark(function b(n){var v,C,y;return r()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return v={},n.variables&&n.variables.length&&n.variables.forEach(function(M){v[M.key]=M.value}),S.next=4,J(d()(d()({},n),{},{variables:v}));case 4:return C=S.sent,y=C.success,y&&se.ZP.success("\u6D41\u7A0B\u542F\u52A8\u6210\u529F!"),S.abrupt("return",y);case 8:case"end":return S.stop()}},b)}));return function(b){return f.apply(this,arguments)}}(),modalProps:{destroyOnClose:!0},title:"\u542F\u52A8\u6D41\u7A0B",trigger:(0,u.jsx)(U.ZP,{type:"link",style:{color:"#ff7a45"},children:"\u{1F680} \u542F\u52A8\u6D41\u7A0B"}),children:[(0,u.jsx)(P.Z,{label:"\u6D41\u7A0B\u5B9A\u4E49ID",disabled:!0,name:"processDefinitionId"}),(0,u.jsx)(P.Z,{label:"\u6D41\u7A0B\u6807\u8BC6",disabled:!0,name:"flowKey"}),(0,u.jsx)(P.Z,{label:"\u4E1A\u52A1\u4E3B\u952E",name:"businessKey",rules:[{required:!0,message:"\u4E1A\u52A1\u4E3B\u952E\u4E0D\u80FD\u4E3A\u7A7A"}],tooltip:"\u8BE5\u53C2\u6570\u4E00\u822C\u4E3A\u4E3B\u8868\u4E2DID\uFF0C\u4E14\u5728\u6D41\u7A0B\u5B9E\u4F8B\u4E2D\u552F\u4E00\uFF0C\u5EFA\u8BAE\u4F7F\u7528UUID\u6216\u96EA\u82B1\u7B97\u6CD5\u751F\u6210"}),(0,u.jsx)(h.Z.Group,{label:"\u662F\u5426\u8DF3\u8FC7\u5F00\u59CB\u8282\u70B9",name:"skipFirstNode",options:[{label:"\u662F",value:!0},{lebel:"\u5426",value:!1}]}),(0,u.jsx)(P.Z,{label:"\u6D41\u7A0B\u540D\u79F0",name:"processName",rules:[{required:!0,message:"\u4E1A\u52A1\u4E3B\u952E\u4E0D\u80FD\u4E3A\u7A7A"}],tooltip:"\u5728\u6D41\u7A0B\u5F15\u64CE\u4E2D\u540D\u79F0"}),(0,u.jsx)(o.u,{name:"variables",creatorButtonProps:{creatorButtonText:"\u6DFB\u52A0\u6D41\u7A0B\u53D8\u91CF"},children:(0,u.jsxs)(i.UW,{children:[(0,u.jsx)(P.Z,{label:"key",name:"key",rules:[{required:!0,message:"\u6D41\u7A0B\u53D8\u91CFkey\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,u.jsx)(P.Z,{label:"value",name:"value",width:"md",rules:[{required:!0,message:"\u6D41\u7A0B\u53D8\u91CFvalue\u4E0D\u80FD\u4E3A\u7A7A"}]})]})})]}),key:"start"},{label:(0,u.jsx)(U.ZP,{type:"link",children:"\u26FA \u6D41\u7A0B\u56FE\u9884\u89C8"}),key:"flow",onClick:function(){var f=c()(r()().mark(function n(){var v,C,y,A;return r()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,re(m.processDefinitionId);case 2:v=M.sent,C=v.success,y=v.result,C&&(A=V.Z.info({footer:!1,width:"50%",centered:!0,closable:!0,icon:null,content:(0,u.jsx)(ce.s,{data:y})}));case 6:case"end":return M.stop()}},n)}));function b(){return f.apply(this,arguments)}return b}()},{label:(0,u.jsx)(U.ZP,{type:"link",style:{color:"#5b8c00"},children:"\u{1F3DE}\uFE0F \u90E8\u7F72\u56FE\u7247"}),key:"image",onClick:function(){var f=c()(r()().mark(function n(){var v;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:v=V.Z.info({footer:!1,width:"50%",centered:!0,closable:!0,icon:null,content:(0,u.jsx)(oe.Z,{preview:!1,src:ee(m.processDefinitionId)})});case 1:case"end":return y.stop()}},n)}));function b(){return f.apply(this,arguments)}return b}()},{label:(0,u.jsx)(U.ZP,{type:"link",style:{color:"#08979c"},children:"\u{1F468} \u7528\u6237\u4EFB\u52A1"}),key:"userTask",onClick:function(){var f=c()(r()().mark(function n(){var v;return r()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,q(m.key);case 2:v=y.sent,v.success&&Y({open:!0,list:v.result});case 4:case"end":return y.stop()}},n)}));function b(){return f.apply(this,arguments)}return b}()},{label:(0,u.jsx)(U.ZP,{type:"link",style:{color:"#6d37be"},children:"\u{1F3B8} \u6D41\u7A0B\u5B9E\u4F8B"}),key:"processInstance",onClick:function(){j.history.push("/processInstance",{processDefinitionId:m.processDefinitionId,name:m.name})}}]},children:(0,u.jsxs)(U.ZP,{type:"link",children:["\u66F4\u591A",(0,u.jsx)(de.Z,{})]})})]})}}];return(0,u.jsxs)(p._z,{children:[(0,u.jsx)(a.Z,{actionRef:x,request:ne,scroll:{y:670},rowKey:"id",columns:ue.concat(fe)}),(0,u.jsx)(ie.Z,{open:T.open,onClose:function(){return Y(d()(d()({},T),{},{open:!1}))},title:"\u7528\u6237\u4EFB\u52A1\u5217\u8868",children:(0,u.jsx)(O.Rs,{metas:{title:{dataIndex:"name"},subTitle:{dataIndex:"id",render:function(H,m){return(0,u.jsx)(L.Z,{color:"success",children:m.id})}},description:{render:function(H,m){return m.candidateUsers.length?(0,u.jsx)(g.Z,{readonly:!0,fieldProps:{value:m.candidateUsers},label:"\u5019\u9009\u4EBA",mode:"multiple",request:c()(r()().mark(function f(){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",E);case 1:case"end":return n.stop()}},f)}))}):m.candidateGroups.length?(0,u.jsx)(g.Z,{readonly:!0,fieldProps:{value:m.candidateGroups},label:"\u5019\u9009\u7EC4",mode:"multiple",request:c()(r()().mark(function f(){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",l);case 1:case"end":return n.stop()}},f)}))}):(0,u.jsx)(g.Z,{readonly:!0,label:"\u6267\u884C\u4EBA",fieldProps:{value:m.assignee},request:c()(r()().mark(function f(){return r()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",W);case 1:case"end":return n.stop()}},f)}))})}}},dataSource:T.list})})]})},me=pe},78239:function(G,I,e){e.d(I,{m:function(){return $},o:function(){return F}});var w=e(15009),d=e.n(w),R=e(97857),r=e.n(R),D=e(99289),c=e.n(D),Z=e(36921),F=function(){var P=c()(d()().mark(function h(o){var i,p,a,O,g;return d()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return i={current:o.current||1,size:o.pageSize||10},p={name:o.name,modelType:o.modelType,key:o.key},B.next=4,(0,Z.JR)(r()(r()({},i),{},{params:p}));case 4:return a=B.sent,O=a.success,g=a.result,B.abrupt("return",{success:O,total:g.total||0,data:g.records||[]});case 8:case"end":return B.stop()}},h)}));return function(o){return P.apply(this,arguments)}}(),$=[{label:"\u5047\u52E4",value:"11"},{label:"\u6218\u7565\u89C4\u5212",value:"0"},{label:"\u7EC4\u7EC7\u8BBE\u8BA1",value:"1"},{label:"\u4EBA\u529B\u8D44\u6E90",value:"2"},{label:"\u4EA7\u54C1\u5F00\u53D1",value:"3"},{label:"\u5E02\u573A\u8425\u9500",value:"4"},{label:"\u9500\u552E\u670D\u52A1",value:"5"},{label:"\u8D22\u52A1\u7BA1\u7406",value:"6"},{label:"IT\u652F\u6301",value:"7"},{label:"\u6CD5\u5F8B\u4E8B\u52A1",value:"8"},{label:"\u653F\u52A1\u5BA1\u6279",value:"9"},{label:"\u5176\u4ED6",value:"10"}]},36921:function(G,I,e){e.d(I,{Fy:function(){return P},JR:function(){return c},Jp:function(){return F},a1:function(){return Z},ve:function(){return $}});var w=e(15009),d=e.n(w),R=e(99289),r=e.n(R),D=e(59530),c=function(){var h=r()(d()().mark(function o(i){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("/easy-flowable/model/pageQuery",{method:"POST",data:i}));case 1:case"end":return a.stop()}},o)}));return function(i){return h.apply(this,arguments)}}(),Z=function(){var h=r()(d()().mark(function o(i){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("/easy-flowable/model/save",{method:"POST",data:i}));case 1:case"end":return a.stop()}},o)}));return function(i){return h.apply(this,arguments)}}(),F=function(){var h=r()(d()().mark(function o(i){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("/easy-flowable/model/remove/".concat(i)));case 1:case"end":return a.stop()}},o)}));return function(i){return h.apply(this,arguments)}}(),$=function(){var h=r()(d()().mark(function o(i){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("/easy-flowable/model/info/".concat(i)));case 1:case"end":return a.stop()}},o)}));return function(i){return h.apply(this,arguments)}}(),P=function(){var h=r()(d()().mark(function o(i){return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,D.request)("/easy-flowable/deployment/".concat(i)));case 1:case"end":return a.stop()}},o)}));return function(i){return h.apply(this,arguments)}}()}}]);
