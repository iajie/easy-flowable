var MD=Object.defineProperty,kD=Object.defineProperties;var ID=Object.getOwnPropertyDescriptors;var nl=Object.getOwnPropertySymbols;var C0=Object.prototype.hasOwnProperty,P0=Object.prototype.propertyIsEnumerable;var S0=(ge,re,N)=>re in ge?MD(ge,re,{enumerable:!0,configurable:!0,writable:!0,value:N}):ge[re]=N,Be=(ge,re)=>{for(var N in re||(re={}))C0.call(re,N)&&S0(ge,N,re[N]);if(nl)for(var N of nl(re))P0.call(re,N)&&S0(ge,N,re[N]);return ge},Gt=(ge,re)=>kD(ge,ID(re));var R0=(ge,re)=>{var N={};for(var J in ge)C0.call(ge,J)&&re.indexOf(J)<0&&(N[J]=ge[J]);if(ge!=null&&nl)for(var J of nl(ge))re.indexOf(J)<0&&P0.call(ge,J)&&(N[J]=ge[J]);return N};var Io=(ge,re,N)=>new Promise((J,K)=>{var pe=j=>{try{P(N.next(j))}catch(Z){K(Z)}},Ie=j=>{try{P(N.throw(j))}catch(Z){K(Z)}},P=j=>j.done?J(j.value):Promise.resolve(j.value).then(pe,Ie);P((N=N.apply(ge,re)).next())});(self.webpackChunk=self.webpackChunk||[]).push([[436],{40056:function(ge,re,N){"use strict";N.d(re,{Z:function(){return dn}});var J=N(67294),K=N(89739),pe=N(4340),Ie=N(97937),P=N(21640),j=N(78860),Z=N(93967),Fe=N.n(Z),Ze=N(29372),Sn=N(64217),Yt=N(42550),fn=N(96159),fi=N(53124),Jt=N(11568),Ge=N(14747),tt=N(83559);const se=(de,_e,Oe,Ce,nt)=>({background:de,border:`${(0,Jt.bf)(Ce.lineWidth)} ${Ce.lineType} ${_e}`,[`${nt}-icon`]:{color:Oe}}),$=de=>{const{componentCls:_e,motionDurationSlow:Oe,marginXS:Ce,marginSM:nt,fontSize:Dt,fontSizeLG:en,lineHeight:rt,borderRadiusLG:k,motionEaseInOutCirc:Kt,withDescriptionIconSize:di,colorText:Nt,colorTextHeading:Ut,withDescriptionPadding:ii,defaultPadding:tn}=de;return{[_e]:Object.assign(Object.assign({},(0,Ge.Wf)(de)),{position:"relative",display:"flex",alignItems:"center",padding:tn,wordWrap:"break-word",borderRadius:k,[`&${_e}-rtl`]:{direction:"rtl"},[`${_e}-content`]:{flex:1,minWidth:0},[`${_e}-icon`]:{marginInlineEnd:Ce,lineHeight:0},"&-description":{display:"none",fontSize:Dt,lineHeight:rt},"&-message":{color:Ut},[`&${_e}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${Oe} ${Kt}, opacity ${Oe} ${Kt},
        padding-top ${Oe} ${Kt}, padding-bottom ${Oe} ${Kt},
        margin-bottom ${Oe} ${Kt}`},[`&${_e}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${_e}-with-description`]:{alignItems:"flex-start",padding:ii,[`${_e}-icon`]:{marginInlineEnd:nt,fontSize:di,lineHeight:0},[`${_e}-message`]:{display:"block",marginBottom:Ce,color:Ut,fontSize:en},[`${_e}-description`]:{display:"block",color:Nt}},[`${_e}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},L=de=>{const{componentCls:_e,colorSuccess:Oe,colorSuccessBorder:Ce,colorSuccessBg:nt,colorWarning:Dt,colorWarningBorder:en,colorWarningBg:rt,colorError:k,colorErrorBorder:Kt,colorErrorBg:di,colorInfo:Nt,colorInfoBorder:Ut,colorInfoBg:ii}=de;return{[_e]:{"&-success":se(nt,Ce,Oe,de,_e),"&-info":se(ii,Ut,Nt,de,_e),"&-warning":se(rt,en,Dt,de,_e),"&-error":Object.assign(Object.assign({},se(di,Kt,k,de,_e)),{[`${_e}-description > pre`]:{margin:0,padding:0}})}}},q=de=>{const{componentCls:_e,iconCls:Oe,motionDurationMid:Ce,marginXS:nt,fontSizeIcon:Dt,colorIcon:en,colorIconHover:rt}=de;return{[_e]:{"&-action":{marginInlineStart:nt},[`${_e}-close-icon`]:{marginInlineStart:nt,padding:0,overflow:"hidden",fontSize:Dt,lineHeight:(0,Jt.bf)(Dt),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${Oe}-close`]:{color:en,transition:`color ${Ce}`,"&:hover":{color:rt}}},"&-close-text":{color:en,transition:`color ${Ce}`,"&:hover":{color:rt}}}}},ee=de=>({withDescriptionIconSize:de.fontSizeHeading3,defaultPadding:`${de.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${de.paddingMD}px ${de.paddingContentHorizontalLG}px`});var Y=(0,tt.I$)("Alert",de=>[$(de),L(de),q(de)],ee),U=function(de,_e){var Oe={};for(var Ce in de)Object.prototype.hasOwnProperty.call(de,Ce)&&_e.indexOf(Ce)<0&&(Oe[Ce]=de[Ce]);if(de!=null&&typeof Object.getOwnPropertySymbols=="function")for(var nt=0,Ce=Object.getOwnPropertySymbols(de);nt<Ce.length;nt++)_e.indexOf(Ce[nt])<0&&Object.prototype.propertyIsEnumerable.call(de,Ce[nt])&&(Oe[Ce[nt]]=de[Ce[nt]]);return Oe};const te={success:K.Z,info:j.Z,error:pe.Z,warning:P.Z},ae=de=>{const{icon:_e,prefixCls:Oe,type:Ce}=de,nt=te[Ce]||null;return _e?(0,fn.wm)(_e,J.createElement("span",{className:`${Oe}-icon`},_e),()=>({className:Fe()(`${Oe}-icon`,{[_e.props.className]:_e.props.className})})):J.createElement(nt,{className:`${Oe}-icon`})},ne=de=>{const{isClosable:_e,prefixCls:Oe,closeIcon:Ce,handleClose:nt,ariaProps:Dt}=de,en=Ce===!0||Ce===void 0?J.createElement(Ie.Z,null):Ce;return _e?J.createElement("button",Object.assign({type:"button",onClick:nt,className:`${Oe}-close-icon`,tabIndex:0},Dt),en):null};var Cn=J.forwardRef((de,_e)=>{const{description:Oe,prefixCls:Ce,message:nt,banner:Dt,className:en,rootClassName:rt,style:k,onMouseEnter:Kt,onMouseLeave:di,onClick:Nt,afterClose:Ut,showIcon:ii,closable:tn,closeText:ut,closeIcon:Tn,action:wr,id:Oo}=de,Bo=U(de,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[Gi,Sr]=J.useState(!1),zn=J.useRef(null);J.useImperativeHandle(_e,()=>({nativeElement:zn.current}));const{getPrefixCls:Rt,direction:Vt,alert:Ye}=J.useContext(fi.E_),Ne=Rt("alert",Ce),[Hn,Ui,Gn]=Y(Ne),Vi=Lt=>{var sn;Sr(!0),(sn=de.onClose)===null||sn===void 0||sn.call(de,Lt)},ie=J.useMemo(()=>de.type!==void 0?de.type:Dt?"warning":"info",[de.type,Dt]),it=J.useMemo(()=>typeof tn=="object"&&tn.closeIcon||ut?!0:typeof tn=="boolean"?tn:Tn!==!1&&Tn!==null&&Tn!==void 0?!0:!!(Ye!=null&&Ye.closable),[ut,Tn,tn,Ye==null?void 0:Ye.closable]),$e=Dt&&ii===void 0?!0:ii,We=Fe()(Ne,`${Ne}-${ie}`,{[`${Ne}-with-description`]:!!Oe,[`${Ne}-no-icon`]:!$e,[`${Ne}-banner`]:!!Dt,[`${Ne}-rtl`]:Vt==="rtl"},Ye==null?void 0:Ye.className,en,rt,Gn,Ui),At=(0,Sn.Z)(Bo,{aria:!0,data:!0}),nn=J.useMemo(()=>{var Lt,sn;return typeof tn=="object"&&tn.closeIcon?tn.closeIcon:ut||(Tn!==void 0?Tn:typeof(Ye==null?void 0:Ye.closable)=="object"&&(!((Lt=Ye==null?void 0:Ye.closable)===null||Lt===void 0)&&Lt.closeIcon)?(sn=Ye==null?void 0:Ye.closable)===null||sn===void 0?void 0:sn.closeIcon:Ye==null?void 0:Ye.closeIcon)},[Tn,tn,ut,Ye==null?void 0:Ye.closeIcon]),be=J.useMemo(()=>{const Lt=tn!=null?tn:Ye==null?void 0:Ye.closable;if(typeof Lt=="object"){const{closeIcon:sn}=Lt;return U(Lt,["closeIcon"])}return{}},[tn,Ye==null?void 0:Ye.closable]);return Hn(J.createElement(Ze.ZP,{visible:!Gi,motionName:`${Ne}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:Lt=>({maxHeight:Lt.offsetHeight}),onLeaveEnd:Ut},(Lt,sn)=>{let{className:ri,style:vt}=Lt;return J.createElement("div",Object.assign({id:Oo,ref:(0,Yt.sQ)(zn,sn),"data-show":!Gi,className:Fe()(We,ri),style:Object.assign(Object.assign(Object.assign({},Ye==null?void 0:Ye.style),k),vt),onMouseEnter:Kt,onMouseLeave:di,onClick:Nt,role:"alert"},At),$e?J.createElement(ae,{description:Oe,icon:de.icon,prefixCls:Ne,type:ie}):null,J.createElement("div",{className:`${Ne}-content`},nt?J.createElement("div",{className:`${Ne}-message`},nt):null,Oe?J.createElement("div",{className:`${Ne}-description`},Oe):null),wr?J.createElement("div",{className:`${Ne}-action`},wr):null,J.createElement(ne,{isClosable:it,prefixCls:Ne,closeIcon:nn,handleClose:Vi,ariaProps:be}))}))}),Ot=N(15671),An=N(43144),yn=N(61120),Tt=N(78814),ti=N(82963);function Bt(de,_e,Oe){return _e=(0,yn.Z)(_e),(0,ti.Z)(de,(0,Tt.Z)()?Reflect.construct(_e,Oe||[],(0,yn.Z)(de).constructor):_e.apply(de,Oe))}var on=N(60136),ni=function(de){function _e(){var Oe;return(0,Ot.Z)(this,_e),Oe=Bt(this,_e,arguments),Oe.state={error:void 0,info:{componentStack:""}},Oe}return(0,on.Z)(_e,de),(0,An.Z)(_e,[{key:"componentDidCatch",value:function(Ce,nt){this.setState({error:Ce,info:nt})}},{key:"render",value:function(){const{message:Ce,description:nt,id:Dt,children:en}=this.props,{error:rt,info:k}=this.state,Kt=(k==null?void 0:k.componentStack)||null,di=typeof Ce=="undefined"?(rt||"").toString():Ce,Nt=typeof nt=="undefined"?Kt:nt;return rt?J.createElement(Cn,{id:Dt,type:"error",message:di,description:J.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},Nt)}):en}}])}(J.Component);const an=Cn;an.ErrorBoundary=ni;var dn=an},1028:function(ge,re,N){"use strict";var J=N(64836).default;Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var K=J(N(25633)),pe=re.default=K.default},80037:function(ge,re,N){"use strict";var J=N(64836).default;Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var K=J(N(5584)),pe=re.default=K.default},25633:function(ge,re,N){"use strict";var J=N(64836).default;Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var K=J(N(27590)),pe=J(N(52040));const Ie={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},K.default),timePickerLocale:Object.assign({},pe.default)};var P=re.default=Ie},5584:function(ge,re,N){"use strict";var J=N(64836).default;Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var K=J(N(85369)),pe=J(N(15704));const Ie={lang:Object.assign({placeholder:"\u8BF7\u9009\u62E9\u65E5\u671F",yearPlaceholder:"\u8BF7\u9009\u62E9\u5E74\u4EFD",quarterPlaceholder:"\u8BF7\u9009\u62E9\u5B63\u5EA6",monthPlaceholder:"\u8BF7\u9009\u62E9\u6708\u4EFD",weekPlaceholder:"\u8BF7\u9009\u62E9\u5468",rangePlaceholder:["\u5F00\u59CB\u65E5\u671F","\u7ED3\u675F\u65E5\u671F"],rangeYearPlaceholder:["\u5F00\u59CB\u5E74\u4EFD","\u7ED3\u675F\u5E74\u4EFD"],rangeMonthPlaceholder:["\u5F00\u59CB\u6708\u4EFD","\u7ED3\u675F\u6708\u4EFD"],rangeQuarterPlaceholder:["\u5F00\u59CB\u5B63\u5EA6","\u7ED3\u675F\u5B63\u5EA6"],rangeWeekPlaceholder:["\u5F00\u59CB\u5468","\u7ED3\u675F\u5468"]},K.default),timePickerLocale:Object.assign({},pe.default)};Ie.lang.ok="\u786E\u5B9A";var P=re.default=Ie},18253:function(ge,re,N){"use strict";var J,K=N(64836).default;J={value:!0},re.Z=void 0;var pe=K(N(62273)),Ie=K(N(1028)),P=K(N(25633)),j=K(N(52040));const Z="${label} is not a valid ${type}",Fe={locale:"en",Pagination:pe.default,DatePicker:P.default,TimePicker:j.default,Calendar:Ie.default,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Z,method:Z,array:Z,object:Z,number:Z,date:Z,boolean:Z,integer:Z,float:Z,regexp:Z,email:Z,url:Z,hex:Z},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};var Ze=re.Z=Fe},82925:function(ge,re,N){"use strict";var J,K=N(64836).default;J={value:!0},re.Z=void 0;var pe=K(N(74219)),Ie=K(N(80037)),P=K(N(5584)),j=K(N(15704));const Z="${label}\u4E0D\u662F\u4E00\u4E2A\u6709\u6548\u7684${type}",Fe={locale:"zh-cn",Pagination:pe.default,DatePicker:P.default,TimePicker:j.default,Calendar:Ie.default,global:{placeholder:"\u8BF7\u9009\u62E9"},Table:{filterTitle:"\u7B5B\u9009",filterConfirm:"\u786E\u5B9A",filterReset:"\u91CD\u7F6E",filterEmptyText:"\u65E0\u7B5B\u9009\u9879",filterCheckall:"\u5168\u9009",filterSearchPlaceholder:"\u5728\u7B5B\u9009\u9879\u4E2D\u641C\u7D22",emptyText:"\u6682\u65E0\u6570\u636E",selectAll:"\u5168\u9009\u5F53\u9875",selectInvert:"\u53CD\u9009\u5F53\u9875",selectNone:"\u6E05\u7A7A\u6240\u6709",selectionAll:"\u5168\u9009\u6240\u6709",sortTitle:"\u6392\u5E8F",expand:"\u5C55\u5F00\u884C",collapse:"\u5173\u95ED\u884C",triggerDesc:"\u70B9\u51FB\u964D\u5E8F",triggerAsc:"\u70B9\u51FB\u5347\u5E8F",cancelSort:"\u53D6\u6D88\u6392\u5E8F"},Modal:{okText:"\u786E\u5B9A",cancelText:"\u53D6\u6D88",justOkText:"\u77E5\u9053\u4E86"},Tour:{Next:"\u4E0B\u4E00\u6B65",Previous:"\u4E0A\u4E00\u6B65",Finish:"\u7ED3\u675F\u5BFC\u89C8"},Popconfirm:{cancelText:"\u53D6\u6D88",okText:"\u786E\u5B9A"},Transfer:{titles:["",""],searchPlaceholder:"\u8BF7\u8F93\u5165\u641C\u7D22\u5185\u5BB9",itemUnit:"\u9879",itemsUnit:"\u9879",remove:"\u5220\u9664",selectCurrent:"\u5168\u9009\u5F53\u9875",removeCurrent:"\u5220\u9664\u5F53\u9875",selectAll:"\u5168\u9009\u6240\u6709",deselectAll:"\u53D6\u6D88\u5168\u9009",removeAll:"\u5220\u9664\u5168\u90E8",selectInvert:"\u53CD\u9009\u5F53\u9875"},Upload:{uploading:"\u6587\u4EF6\u4E0A\u4F20\u4E2D",removeFile:"\u5220\u9664\u6587\u4EF6",uploadError:"\u4E0A\u4F20\u9519\u8BEF",previewFile:"\u9884\u89C8\u6587\u4EF6",downloadFile:"\u4E0B\u8F7D\u6587\u4EF6"},Empty:{description:"\u6682\u65E0\u6570\u636E"},Icon:{icon:"\u56FE\u6807"},Text:{edit:"\u7F16\u8F91",copy:"\u590D\u5236",copied:"\u590D\u5236\u6210\u529F",expand:"\u5C55\u5F00",collapse:"\u6536\u8D77"},Form:{optional:"\uFF08\u53EF\u9009\uFF09",defaultValidateMessages:{default:"\u5B57\u6BB5\u9A8C\u8BC1\u9519\u8BEF${label}",required:"\u8BF7\u8F93\u5165${label}",enum:"${label}\u5FC5\u987B\u662F\u5176\u4E2D\u4E00\u4E2A[${enum}]",whitespace:"${label}\u4E0D\u80FD\u4E3A\u7A7A\u5B57\u7B26",date:{format:"${label}\u65E5\u671F\u683C\u5F0F\u65E0\u6548",parse:"${label}\u4E0D\u80FD\u8F6C\u6362\u4E3A\u65E5\u671F",invalid:"${label}\u662F\u4E00\u4E2A\u65E0\u6548\u65E5\u671F"},types:{string:Z,method:Z,array:Z,object:Z,number:Z,date:Z,boolean:Z,integer:Z,float:Z,regexp:Z,email:Z,url:Z,hex:Z},string:{len:"${label}\u987B\u4E3A${len}\u4E2A\u5B57\u7B26",min:"${label}\u6700\u5C11${min}\u4E2A\u5B57\u7B26",max:"${label}\u6700\u591A${max}\u4E2A\u5B57\u7B26",range:"${label}\u987B\u5728${min}-${max}\u5B57\u7B26\u4E4B\u95F4"},number:{len:"${label}\u5FC5\u987B\u7B49\u4E8E${len}",min:"${label}\u6700\u5C0F\u503C\u4E3A${min}",max:"${label}\u6700\u5927\u503C\u4E3A${max}",range:"${label}\u987B\u5728${min}-${max}\u4E4B\u95F4"},array:{len:"\u987B\u4E3A${len}\u4E2A${label}",min:"\u6700\u5C11${min}\u4E2A${label}",max:"\u6700\u591A${max}\u4E2A${label}",range:"${label}\u6570\u91CF\u987B\u5728${min}-${max}\u4E4B\u95F4"},pattern:{mismatch:"${label}\u4E0E\u6A21\u5F0F\u4E0D\u5339\u914D${pattern}"}}},Image:{preview:"\u9884\u89C8"},QRCode:{expired:"\u4E8C\u7EF4\u7801\u8FC7\u671F",refresh:"\u70B9\u51FB\u5237\u65B0",scanned:"\u5DF2\u626B\u63CF"},ColorPicker:{presetEmpty:"\u6682\u65E0",transparent:"\u65E0\u8272",singleColor:"\u5355\u8272",gradientColor:"\u6E10\u53D8\u8272"}};var Ze=re.Z=Fe},52040:function(ge,re){"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;const N={placeholder:"Select time",rangePlaceholder:["Start time","End time"]};var J=re.default=N},15704:function(ge,re){"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;const N={placeholder:"\u8BF7\u9009\u62E9\u65F6\u95F4",rangePlaceholder:["\u5F00\u59CB\u65F6\u95F4","\u7ED3\u675F\u65F6\u95F4"]};var J=re.default=N},96944:function(ge,re,N){"use strict";N.d(re,{V:function(){return CD},s:function(){return TD}});var J=N(1413),K=N(87462),pe=N(97685),Ie=N(91),P=N(67294);function j(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}function Z(e,t){return t={exports:{}},e(t,t.exports),t.exports}var Fe=Z(function(e){var t=e.exports=function(n,i){if(i||(i=16),n===void 0&&(n=128),n<=0)return"0";for(var r=Math.log(Math.pow(2,n))/Math.log(i),o=2;r===1/0;o*=2)r=Math.log(Math.pow(2,n/o))/Math.log(i)*o;for(var a=r-Math.floor(r),s="",o=0;o<Math.floor(r);o++){var c=Math.floor(Math.random()*i).toString(i);s=c+s}if(a){var l=Math.pow(i,a),c=Math.floor(Math.random()*l).toString(i);s=c+s}var u=parseInt(s,i);return u!==1/0&&u>=Math.pow(2,n)?t(n,i):s};t.rack=function(n,i,r){var o=function(s){var c=0;do{if(c++>10)if(r)n+=r;else throw new Error("too many ID collisions, use more bits");var l=t(n,i)}while(Object.hasOwnProperty.call(a,l));return a[l]=s,l},a=o.hats={};return o.get=function(s){return o.hats[s]},o.set=function(s,c){return o.hats[s]=c,o},o.bits=n||128,o.base=i||16,o}});function Ze(e){if(!(this instanceof Ze))return new Ze(e);e=e||[128,36,1],this._seed=e.length?Fe.rack(e[0],e[1],e[2]):e}Ze.prototype.next=function(e){return this._seed(e||!0)},Ze.prototype.nextPrefixed=function(e,t){var n;do n=e+this.next(!0);while(this.assigned(n));return this.claim(n,t),n},Ze.prototype.claim=function(e,t){this._seed.set(e,t||!0)},Ze.prototype.assigned=function(e){return this._seed.get(e)||!1},Ze.prototype.unclaim=function(e){delete this._seed.hats[e]},Ze.prototype.clear=function(){var e=this._seed.hats,t;for(t in e)this.unclaim(t)};var Sn=Ze;function Yt(e){return Array.prototype.concat.apply([],e)}const fn=Object.prototype.toString,fi=Object.prototype.hasOwnProperty;function Jt(e){return e===void 0}function Ge(e){return e!==void 0}function tt(e){return e==null}function se(e){return fn.call(e)==="[object Array]"}function $(e){return fn.call(e)==="[object Object]"}function L(e){return fn.call(e)==="[object Number]"}function q(e){const t=fn.call(e);return t==="[object Function]"||t==="[object AsyncFunction]"||t==="[object GeneratorFunction]"||t==="[object AsyncGeneratorFunction]"||t==="[object Proxy]"}function ee(e){return fn.call(e)==="[object String]"}function Y(e){if(!se(e))throw new Error("must supply array")}function U(e,t){return!tt(e)&&fi.call(e,t)}function te(e,t){const n=Oe(t);let i;return A(e,function(r,o){if(n(r,o))return i=r,!1}),i}function ae(e,t){const n=Oe(t);let i=se(e)?-1:void 0;return A(e,function(r,o){if(n(r,o))return i=o,!1}),i}function ne(e,t){const n=Oe(t);let i=[];return A(e,function(r,o){n(r,o)&&i.push(r)}),i}function A(e,t){let n,i;if(Jt(e))return;const r=se(e)?nt:Ce;for(let o in e)if(U(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function Cn(e,t){if(Jt(e))return[];Y(e);const n=Oe(t);return e.filter(function(i,r){return!n(i,r)})}function Ot(e,t,n){return A(e,function(i,r){n=t(n,i,r)}),n}function An(e,t){return!!Ot(e,function(n,i,r){return n&&t(i,r)},!0)}function yn(e,t){return!!te(e,t)}function Tt(e,t){let n=[];return A(e,function(i,r){n.push(t(i,r))}),n}function ti(e){return e&&Object.keys(e)||[]}function Bt(e){return ti(e).length}function on(e){return Tt(e,t=>t)}function _n(e,t,n={}){return t=_e(t),A(e,function(i){let r=t(i)||"_",o=n[r];o||(o=n[r]=[]),o.push(i)}),n}function ni(e,...t){e=_e(e);let n={};return A(t,r=>_n(r,e,n)),Tt(n,function(r,o){return r[0]})}const an=ni;function dn(e,t){t=_e(t);let n=[];return A(e,function(i,r){let o=t(i,r),a={d:o,v:i};for(var s=0;s<n.length;s++){let{d:c}=n[s];if(o<c){n.splice(s,0,a);return}}n.push(a)}),Tt(n,i=>i.v)}function de(e){return function(t){return An(e,function(n,i){return t[i]===n})}}function _e(e){return q(e)?e:t=>t[e]}function Oe(e){return q(e)?e:t=>t===e}function Ce(e){return e}function nt(e){return Number(e)}function Dt(e,t){let n,i,r,o;function a(p){let f=Date.now(),d=p?0:o+t-f;if(d>0)return s(d);e.apply(r,i),c()}function s(p){n=setTimeout(a,p)}function c(){n&&clearTimeout(n),n=o=i=r=void 0}function l(){n&&a(!0),c()}function u(...p){o=Date.now(),i=p,r=this,n||s(t)}return u.flush=l,u.cancel=c,u}function en(e,t){let n=!1;return function(...i){n||(e(...i),n=!0,setTimeout(()=>{n=!1},t))}}function rt(e,t){return e.bind(t)}function k(e,...t){return Object.assign(e,...t)}function Kt(e,t,n){let i=e;return A(t,function(r,o){if(typeof r!="number"&&typeof r!="string")throw new Error("illegal key type: "+typeof r+". Key should be of type number or string.");if(r==="constructor")throw new Error("illegal key: constructor");if(r==="__proto__")throw new Error("illegal key: __proto__");let a=t[o+1],s=i[r];Ge(a)&&tt(s)&&(s=i[r]=isNaN(+a)?{}:[]),Jt(a)?Jt(n)?delete i[r]:i[r]=n:i=s}),e}function di(e,t,n){let i=e;return A(t,function(r){if(tt(i))return i=void 0,!1;i=i[r]}),Jt(i)?n:i}function Nt(e,t){let n={},i=Object(e);return A(t,function(r){r in i&&(n[r]=e[r])}),n}function Ut(e,t){let n={},i=Object(e);return A(i,function(r,o){t.indexOf(o)===-1&&(n[o]=r)}),n}function ii(e,...t){return t.length&&A(t,function(n){!n||!$(n)||A(n,function(i,r){if(r==="__proto__")return;let o=e[r];$(i)?($(o)||(o={}),e[r]=ii(o,i)):e[r]=i})}),e}function tn(e,t){return t.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in e)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(e,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(e)}const ut=Object.prototype.toString,Tn=Object.prototype.hasOwnProperty;function wr(e){return e===void 0}function Oo(e){return ut.call(e)==="[object Array]"}function Bo(e,t){return Tn.call(e,t)}function Gi(e,t){let n,i;if(wr(e))return;const r=Oo(e)?zn:Sr;for(let o in e)if(Bo(e,o)&&(n=e[o],i=t(n,r(o)),i===!1))return n}function Sr(e){return e}function zn(e){return Number(e)}function Rt(e,...t){const n=e.style;return Gi(t,function(i){i&&Gi(i,function(r,o){n[o]=r})}),e}function Vt(e,t,n){return arguments.length==2?e.getAttribute(t):n===null?e.removeAttribute(t):(e.setAttribute(t,n),e)}const Ye=Object.prototype.toString;function Ne(e){return new Hn(e)}function Hn(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Hn.prototype.add=function(e){return this.list.add(e),this},Hn.prototype.remove=function(e){return Ye.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)},Hn.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Hn.prototype.toggle=function(e,t){return typeof t!="undefined"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Hn.prototype.array=function(){return Array.from(this.list)},Hn.prototype.has=Hn.prototype.contains=function(e){return this.list.contains(e)};function Ui(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function Gn(e,t,n){var i=n?e:e.parentNode;return i&&typeof i.closest=="function"&&i.closest(t)||null}var Vi={},ie,it,$e;function We(){ie=window.addEventListener?"addEventListener":"attachEvent",it=window.removeEventListener?"removeEventListener":"detachEvent",$e=ie!=="addEventListener"?"on":""}var At=Vi.bind=function(e,t,n,i){return ie||We(),e[ie]($e+t,n,i||!1),n},nn=Vi.unbind=function(e,t,n,i){return it||We(),e[it]($e+t,n,i||!1),n},be=tn({__proto__:null,bind:At,unbind:nn,default:Vi},[Vi]),Lt=["focus","blur"];function sn(e,t,n,i,r){return Lt.indexOf(n)!==-1&&(r=!0),be.bind(e,n,function(o){var a=o.target||o.srcElement;o.delegateTarget=Gn(a,t,!0),o.delegateTarget&&i.call(e,o)},r)}function ri(e,t,n,i){return Lt.indexOf(t)!==-1&&(i=!0),be.unbind(e,t,n,i)}var vt={bind:sn,unbind:ri},hi=il,Zi=!1,cn;typeof document!="undefined"&&(cn=document.createElement("div"),cn.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Zi=!cn.getElementsByTagName("link").length,cn=void 0);var gt={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Zi?[1,"X<div>","</div>"]:[0,"",""]};gt.td=gt.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],gt.option=gt.optgroup=[1,'<select multiple="multiple">',"</select>"],gt.thead=gt.tbody=gt.colgroup=gt.caption=gt.tfoot=[1,"<table>","</table>"],gt.polyline=gt.ellipse=gt.polygon=gt.circle=gt.text=gt.line=gt.path=gt.rect=gt.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];function il(e,t){if(typeof e!="string")throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var i=n[1];if(i=="body"){var c=t.createElement("html");return c.innerHTML=e,c.removeChild(c.lastChild)}var r=Object.prototype.hasOwnProperty.call(gt,i)?gt[i]:gt._default,o=r[0],a=r[1],s=r[2],c=t.createElement("div");for(c.innerHTML=a+e+s;o--;)c=c.lastChild;if(c.firstChild==c.lastChild)return c.removeChild(c.firstChild);for(var l=t.createDocumentFragment();c.firstChild;)l.appendChild(c.removeChild(c.firstChild));return l}var st=hi;function Si(e,t){return e&&typeof e.matches=="function"&&e.matches(t)||!1}function ot(e,t){return t=t||document,t.querySelector(e)}function Bn(e,t){return t=t||document,t.querySelectorAll(e)}function bn(e){e.parentNode&&e.parentNode.removeChild(e)}function Yr(e,t){if(e.ownerDocument!==t.ownerDocument)try{return t.ownerDocument.importNode(e,!0)}catch(n){}return e}function No(e,t){return t.appendChild(Yr(e,t))}function we(e,t){return No(t,e),e}var rl=2,yf={"alignment-baseline":1,"baseline-shift":1,clip:1,"clip-path":1,"clip-rule":1,color:1,"color-interpolation":1,"color-interpolation-filters":1,"color-profile":1,"color-rendering":1,cursor:1,direction:1,display:1,"dominant-baseline":1,"enable-background":1,fill:1,"fill-opacity":1,"fill-rule":1,filter:1,"flood-color":1,"flood-opacity":1,font:1,"font-family":1,"font-size":rl,"font-size-adjust":1,"font-stretch":1,"font-style":1,"font-variant":1,"font-weight":1,"glyph-orientation-horizontal":1,"glyph-orientation-vertical":1,"image-rendering":1,kerning:1,"letter-spacing":1,"lighting-color":1,marker:1,"marker-end":1,"marker-mid":1,"marker-start":1,mask:1,opacity:1,overflow:1,"pointer-events":1,"shape-rendering":1,"stop-color":1,"stop-opacity":1,stroke:1,"stroke-dasharray":1,"stroke-dashoffset":1,"stroke-linecap":1,"stroke-linejoin":1,"stroke-miterlimit":1,"stroke-opacity":1,"stroke-width":rl,"text-anchor":1,"text-decoration":1,"text-rendering":1,"unicode-bidi":1,visibility:1,"word-spacing":1,"writing-mode":1};function A0(e,t){return yf[t]?e.style[t]:e.getAttributeNS(null,t)}function _f(e,t,n){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),r=yf[i];r?(r===rl&&typeof n=="number"&&(n=String(n)+"px"),e.style[i]=n):e.setAttributeNS(null,t,n)}function T0(e,t){var n=Object.keys(t),i,r;for(i=0,r;r=n[i];i++)_f(e,r,t[r])}function ce(e,t,n){if(typeof t=="string")if(n!==void 0)_f(e,t,n);else return A0(e,t);else T0(e,t);return e}const D0=Object.prototype.toString;function Ke(e){return new Wi(e)}function Wi(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}Wi.prototype.add=function(e){return this.list.add(e),this},Wi.prototype.remove=function(e){return D0.call(e)=="[object RegExp]"?this.removeMatching(e):(this.list.remove(e),this)},Wi.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Wi.prototype.toggle=function(e,t){return typeof t!="undefined"?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Wi.prototype.array=function(){return Array.from(this.list)},Wi.prototype.has=Wi.prototype.contains=function(e){return this.list.contains(e)};function Lo(e){for(var t;t=e.firstChild;)e.removeChild(t);return e}function bf(e){return e.cloneNode(!0)}var ol={svg:"http://www.w3.org/2000/svg"},Ef='<svg xmlns="'+ol.svg+'"';function xf(e){var t=!1;e.substring(0,4)==="<svg"?e.indexOf(ol.svg)===-1&&(e=Ef+e.substring(4)):(e=Ef+">"+e+"</svg>",t=!0);var n=M0(e);if(!t)return n;for(var i=document.createDocumentFragment(),r=n.firstChild;r.firstChild;)i.appendChild(r.firstChild);return i}function M0(e){var t;return t=new DOMParser,t.async=!1,t.parseFromString(e,"text/xml")}function ve(e,t){var n;return e=e.trim(),e.charAt(0)==="<"?(n=xf(e).firstChild,n=document.importNode(n,!0)):n=document.createElementNS(ol.svg,e),t&&ce(n,t),n}function OD(e,t,n,i){e.addEventListener(t,n,i)}function BD(e,t,n,i){e.removeEventListener(t,n,i)}var al=null;function Ua(){return al===null&&(al=ve("svg")),al}function sl(e,t){var n,i,r=Object.keys(t);for(n=0;i=r[n];n++)e[i]=t[i];return e}function ND(e,t){var n=Ua().createSVGPoint();switch(arguments.length){case 0:return n;case 2:e={x:e,y:t};break}return sl(n,e)}function k0(e,t,n,i,r,o){var a=Ua().createSVGMatrix();switch(arguments.length){case 0:return a;case 1:return sl(a,e);case 6:return sl(a,{a:e,b:t,c:n,d:i,e:r,f:o})}}function Fo(e){return e?Ua().createSVGTransformFromMatrix(e):Ua().createSVGTransform()}var wf=/([&<>]{1})/g,I0=/([&<>\n\r"]{1})/g,O0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"'"};function cl(e,t){function n(i,r){return O0[r]||r}return e.replace(t,n)}function Sf(e,t){var n,i,r,o,a;switch(e.nodeType){case 3:t.push(cl(e.textContent,wf));break;case 1:if(t.push("<",e.tagName),e.hasAttributes())for(r=e.attributes,n=0,i=r.length;n<i;++n)o=r.item(n),t.push(" ",o.name,'="',cl(o.value,I0),'"');if(e.hasChildNodes()){for(t.push(">"),a=e.childNodes,n=0,i=a.length;n<i;++n)Sf(a.item(n),t);t.push("</",e.tagName,">")}else t.push("/>");break;case 8:t.push("<!--",cl(e.nodeValue,wf),"-->");break;case 4:t.push("<![CDATA[",e.nodeValue,"]]>");break;default:throw new Error("unable to handle node "+e.nodeType)}return t}function B0(e,t){var n=xf(t);if(Lo(e),!!t){L0(n)||(n=n.documentElement);for(var i=F0(n.childNodes),r=0;r<i.length;r++)No(i[r],e)}}function N0(e){for(var t=e.firstChild,n=[];t;)Sf(t,n),t=t.nextSibling;return n.join("")}function L0(e){return e.nodeName==="#document-fragment"}function Cf(e,t){if(t!==void 0){try{B0(e,t)}catch(n){throw new Error("error parsing SVG: "+n.message)}return e}else return N0(e)}function F0(e){return Array.prototype.slice.call(e)}function LD(e,t){return e.querySelector(t)}function FD(e,t){var n=e.querySelectorAll(t);return[].map.call(n,function(i){return i})}function j0(e,t){return t.insertBefore(Yr(e,t),t.firstChild||null)}function jD(e,t){return j0(t,e),e}function Zt(e){var t=e.parentNode;return t&&t.removeChild(e),e}function $D(e,t){return e.parentNode.replaceChild(Yr(t,e),e),t}function $0(e,t){return t instanceof SVGMatrix?e.createSVGTransformFromMatrix(t):t}function z0(e,t){var n,i;for(e.clear(),n=0;i=t[n];n++)e.appendItem($0(e,i))}function jo(e,t){var n=e.transform.baseVal;return t&&(Array.isArray(t)||(t=[t]),z0(n,t)),n.consolidate()}const H0=/^class[ {]/;function G0(e){return H0.test(e.toString())}function ll(e){return Array.isArray(e)}function ul(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Va(...e){e.length===1&&ll(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const U0=/constructor\s*[^(]*\(\s*([^)]*)\)/m,V0=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,Z0=/\/\*([^*]*)\*\//m;function W0(e){if(typeof e!="function")throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(G0(e)?U0:V0);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map(i=>{const r=i.match(Z0);return(r&&r[1]||i).trim()})||[]}function Pf(e,t){const n=t||{get:function(E,y){if(i.push(E),y===!1)return null;throw s(`No provider for "${E}"!`)}},i=[],r=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),a=o.injector=this,s=function(E){const y=i.join(" -> ");return i.length=0,new Error(y?`${E} (Resolving: ${y})`:E)};function c(E,y){if(!r[E]&&E.includes(".")){const w=E.split(".");let R=c(w.shift());for(;w.length;)R=R[w.shift()];return R}if(ul(o,E))return o[E];if(ul(r,E)){if(i.indexOf(E)!==-1)throw i.push(E),s("Cannot resolve circular dependency!");return i.push(E),o[E]=r[E][0](r[E][1]),i.pop(),o[E]}return n.get(E,y)}function l(E,y){if(typeof y=="undefined"&&(y={}),typeof E!="function")if(ll(E))E=Va(E.slice());else throw s(`Cannot invoke "${E}". Expected a function!`);const R=(E.$inject||W0(E)).map(I=>ul(y,I)?y[I]:c(I));return{fn:E,dependencies:R}}function u(E){const{fn:y,dependencies:w}=l(E),R=Function.prototype.bind.call(y,null,...w);return new R}function p(E,y,w){const{fn:R,dependencies:I}=l(E,w);return R.apply(y,I)}function f(E){return Va(y=>E.get(y))}function d(E,y){if(y&&y.length){const w=Object.create(null),R=Object.create(null),I=[],T=[],O=[];let B,F,z,H;for(let oe in r)B=r[oe],y.indexOf(oe)!==-1&&(B[2]==="private"?(F=I.indexOf(B[3]),F===-1?(z=B[3].createChild([],y),H=f(z),I.push(B[3]),T.push(z),O.push(H),w[oe]=[H,oe,"private",z]):w[oe]=[O[F],oe,"private",T[F]]):w[oe]=[B[2],B[1]],R[oe]=!0),(B[2]==="factory"||B[2]==="type")&&B[1].$scope&&y.forEach(ke=>{B[1].$scope.indexOf(ke)!==-1&&(w[oe]=[B[2],B[1]],R[ke]=!0)});y.forEach(oe=>{if(!R[oe])throw new Error('No provider for "'+oe+'". Cannot use provider from the parent!')}),E.unshift(w)}return new Pf(E,a)}const h={factory:p,type:u,value:function(E){return E}};function v(E,y){const w=E.__init__||[];return function(){w.forEach(R=>{typeof R=="string"?y.get(R):y.invoke(R)})}}function m(E){const y=E.__exports__;if(y){const w=E.__modules__,R=Object.keys(E).reduce((F,z)=>(z!=="__exports__"&&z!=="__modules__"&&z!=="__init__"&&z!=="__depends__"&&(F[z]=E[z]),F),Object.create(null)),I=(w||[]).concat(R),T=d(I),O=Va(function(F){return T.get(F)});y.forEach(function(F){r[F]=[O,F,"private",T]});const B=(E.__init__||[]).slice();return B.unshift(function(){T.init()}),E=Object.assign({},E,{__init__:B}),v(E,T)}return Object.keys(E).forEach(function(w){if(w==="__init__"||w==="__depends__")return;const R=E[w];if(R[2]==="private"){r[w]=R;return}const I=R[0],T=R[1];r[w]=[h[I],Y0(I,T),I]}),v(E,a)}function S(E,y){return E.indexOf(y)!==-1||(E=(y.__depends__||[]).reduce(S,E),E.indexOf(y)!==-1)?E:E.concat(y)}function x(E){const y=E.reduce(S,[]).map(m);let w=!1;return function(){w||(w=!0,y.forEach(R=>R()))}}this.get=c,this.invoke=p,this.instantiate=u,this.createChild=d,this.init=x(e)}function Y0(e,t){return e!=="value"&&ll(t)&&(t=Va(t.slice())),t}var K0=1e3;function Ci(e,t){var n=this;t=t||K0,e.on(["render.shape","render.connection"],t,function(i,r){var o=i.type,a=r.element,s=r.gfx,c=r.attrs;if(n.canRender(a))return o==="render.shape"?n.drawShape(s,a,c):n.drawConnection(s,a,c)}),e.on(["render.getShapePath","render.getConnectionPath"],t,function(i,r){if(n.canRender(r))return i.type==="render.getShapePath"?n.getShapePath(r):n.getConnectionPath(r)})}Ci.prototype.canRender=function(e){},Ci.prototype.drawShape=function(e,t){},Ci.prototype.drawConnection=function(e,t){},Ci.prototype.getShapePath=function(e){},Ci.prototype.getConnectionPath=function(e){};function Cr(e){return e.flat().join(",").replace(/,?([A-z]),?/g,"$1")}function zD(e){for(var t="",n=0,i;i=e[n];n++)t+=i.x+","+i.y+" ";return t}function X0(e){return["M",e.x,e.y]}function pl(e){return["L",e.x,e.y]}function q0(e,t,n){return["C",e.x,e.y,t.x,t.y,n.x,n.y]}function Q0(e,t){const n=e.length,i=[X0(e[0])];for(let r=1;r<n;r++){const o=e[r-1],a=e[r],s=e[r+1];if(!s||!t){i.push(pl(a));continue}const c=Math.min(t,fl(a.x-o.x,a.y-o.y),fl(s.x-a.x,s.y-a.y));if(!c){i.push(pl(a));continue}const l=Za(a,o,c),u=Za(a,o,c*.5),p=Za(a,s,c),f=Za(a,s,c*.5);i.push(pl(l)),i.push(q0(u,f,p))}return i}function Za(e,t,n){const i=t.x-e.x,r=t.y-e.y,o=fl(i,r),a=n/o;return{x:e.x+i*a,y:e.y+r*a}}function fl(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))}function Wa(e,t,n){L(t)&&(n=t,t=null),t||(t={});const i=ve("path",t);return L(n)&&(i.dataset.cornerRadius=String(n)),Rf(i,e)}function Rf(e,t){const n=parseInt(e.dataset.cornerRadius,10)||0;return ce(e,{d:Cr(Q0(t,n))}),e}function Ya(e){return ne(e,function(t){return!te(e,function(n){return n!==t&&Af(t,n)})})}function Af(e,t){if(t){if(e===t)return t;if(e.parent)return Af(e.parent,t)}}function Tf(e,t,n){var i=!n||e.indexOf(t)===-1;return i&&e.push(t),i}function Pr(e,t,n){n=n||0,se(e)||(e=[e]),A(e,function(i,r){var o=t(i,r,n);se(o)&&o.length&&Pr(o,t,n+1)})}function Df(e,t,n){var i=[],r=[];return Pr(e,function(o,a,s){Tf(i,o,t);var c=o.children;if((n===-1||s<n)&&c&&Tf(r,c,t))return c}),i}function HD(e,t){return Df(e,!t,1)}function $o(e,t){return Df(e,!t,-1)}function J0(e,t,n){Jt(t)&&(t=!0),$(t)&&(n=t,t=!0),n=n||{};var i=zo(n.allShapes),r=zo(n.allConnections),o=zo(n.enclosedElements),a=zo(n.enclosedConnections),s=zo(n.topLevel,t&&_n(e,function(u){return u.id}));function c(u){s[u.source.id]&&s[u.target.id]&&(s[u.id]=[u]),i[u.source.id]&&i[u.target.id]&&(a[u.id]=o[u.id]=u),r[u.id]=u}function l(u){if(o[u.id]=u,u.waypoints)a[u.id]=r[u.id]=u;else return i[u.id]=u,A(u.incoming,c),A(u.outgoing,c),u.children}return Pr(e,l),{allShapes:i,allConnections:r,topLevel:s,enclosedConnections:a,enclosedElements:o}}function Xt(e,t){t=!!t,se(e)||(e=[e]);var n,i,r,o;return A(e,function(a){var s=a;a.waypoints&&!t&&(s=Xt(a.waypoints,!0));var c=s.x,l=s.y,u=s.height||0,p=s.width||0;(c<n||n===void 0)&&(n=c),(l<i||i===void 0)&&(i=l),(c+p>r||r===void 0)&&(r=c+p),(l+u>o||o===void 0)&&(o=l+u)}),{x:n,y:i,height:o-i,width:r-n}}function e_(e,t){var n={};return A(e,function(i){var r=i;r.waypoints&&(r=Xt(r)),!L(t.y)&&r.x>t.x&&(n[i.id]=i),!L(t.x)&&r.y>t.y&&(n[i.id]=i),r.x>t.x&&r.y>t.y&&(L(t.width)&&L(t.height)&&r.width+r.x<t.width+t.x&&r.height+r.y<t.height+t.y||!L(t.width)||!L(t.height))&&(n[i.id]=i)}),n}function Mf(e){return"waypoints"in e?"connection":"x"in e?"shape":"root"}function kf(e){return!!(e&&e.isFrame)}function zo(e,t){return k({},e||{},t||{})}var t_=1;function Yi(e,t){Ci.call(this,e,t_),this.CONNECTION_STYLE=t.style(["no-fill"],{strokeWidth:5,stroke:"fuchsia"}),this.SHAPE_STYLE=t.style({fill:"white",stroke:"fuchsia",strokeWidth:2}),this.FRAME_STYLE=t.style(["no-fill"],{stroke:"fuchsia",strokeDasharray:4,strokeWidth:2})}j(Yi,Ci),Yi.prototype.canRender=function(){return!0},Yi.prototype.drawShape=function(t,n,i){var r=ve("rect");return ce(r,{x:0,y:0,width:n.width||0,height:n.height||0}),kf(n)?ce(r,k({},this.FRAME_STYLE,i||{})):ce(r,k({},this.SHAPE_STYLE,i||{})),we(t,r),r},Yi.prototype.drawConnection=function(t,n,i){var r=Wa(n.waypoints,k({},this.CONNECTION_STYLE,i||{}));return we(t,r),r},Yi.prototype.getShapePath=function(t){var n=t.x,i=t.y,r=t.width,o=t.height,a=[["M",n,i],["l",r,0],["l",0,o],["l",-r,0],["z"]];return Cr(a)},Yi.prototype.getConnectionPath=function(t){var n=t.waypoints,i,r,o=[];for(i=0;r=n[i];i++)r=r.original||r,o.push([i===0?"M":"L",r.x,r.y]);return Cr(o)},Yi.$inject=["eventBus","styles"];function n_(){var e={"no-fill":{fill:"none"},"no-border":{strokeOpacity:0},"no-events":{pointerEvents:"none"}},t=this;this.cls=function(n,i,r){var o=this.style(i,r);return k(o,{class:n})},this.style=function(n,i){!se(n)&&!i&&(i=n,n=[]);var r=Ot(n,function(o,a){return k(o,e[a]||{})},{});return i?k(r,i):r},this.computeStyle=function(n,i,r){return se(i)||(r=i,i=[]),t.style(i||[],k({},r,n||{}))}}var i_={__init__:["defaultRenderer"],defaultRenderer:["type",Yi],styles:["type",n_]};function Ft(e,t){if(!e||!t)return-1;var n=e.indexOf(t);return n!==-1&&e.splice(n,1),n}function Wt(e,t,n){if(!(!e||!t)){typeof n!="number"&&(n=-1);var i=e.indexOf(t);if(i!==-1){if(i===n)return;if(n!==-1)e.splice(i,1);else return}n!==-1?e.splice(n,0,t):e.push(t)}}function dl(e,t){return!e||!t?-1:e.indexOf(t)}function Ho(e,t){return!e||!t?-1:Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function hl(e,t,n,i){if(typeof i=="undefined"&&(i=5),!e||!t||!n)return!1;var r=(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x),o=Ho(e,t);return Math.abs(r/o)<=i}var r_=2;function Pi(e,t){var n=Array.from(arguments).flat();const i={x:"v",y:"h"};for(const[r,o]of Object.entries(i))if(o_(r,n))return o;return!1}function o_(e,t){const n=t[0];return An(t,function(i){return Math.abs(n[e]-i[e])<=r_})}function If(e,t,n){return n=n||0,e.x>t.x-n&&e.y>t.y-n&&e.x<t.x+t.width+n&&e.y<t.y+t.height+n}function ml(e,t){return{x:Math.round(e.x+(t.x-e.x)/2),y:Math.round(e.y+(t.y-e.y)/2)}}var a_=/,?([a-z]),?/gi,Of=parseFloat,jt=Math,Ki=jt.PI,mi=jt.min,vi=jt.max,Bf=jt.pow,Xi=jt.abs,s_=/([a-z])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?[\s]*,?[\s]*)+)/ig,c_=/(-?\d*\.?\d*(?:e[-+]?\d+)?)[\s]*,?[\s]*/ig,Ka=Array.isArray||function(e){return e instanceof Array};function vl(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Go(e){if(typeof e=="function"||Object(e)!==e)return e;var t=new e.constructor;for(var n in e)vl(e,n)&&(t[n]=Go(e[n]));return t}function l_(e,t){for(var n=0,i=e.length;n<i;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function u_(e){function t(){var n=Array.prototype.slice.call(arguments,0),i=n.join("\u2400"),r=t.cache=t.cache||{},o=t.count=t.count||[];return vl(r,i)?(l_(o,i),r[i]):(o.length>=1e3&&delete r[o.shift()],o.push(i),r[i]=e(...arguments),r[i])}return t}function p_(e){if(!e)return null;var t=Kr(e);if(t.arr)return Go(t.arr);var n={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=[];return Ka(e)&&Ka(e[0])&&(i=Go(e)),i.length||String(e).replace(s_,function(r,o,a){var s=[],c=o.toLowerCase();for(a.replace(c_,function(l,u){u&&s.push(+u)}),c=="m"&&s.length>2&&(i.push([o,...s.splice(0,2)]),c="l",o=o=="m"?"l":"L");s.length>=n[c]&&(i.push([o,...s.splice(0,n[c])]),!!n[c]););}),i.toString=Kr.toString,t.arr=Go(i),i}function Kr(e){var t=Kr.ps=Kr.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)vl(t,n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]}function gl(e,t,n,i){return arguments.length===1&&(t=e.y,n=e.width,i=e.height,e=e.x),{x:e,y:t,width:n,height:i,x2:e+n,y2:t+i}}function Nf(){return this.join(",").replace(a_,"$1")}function Xa(e){var t=Go(e);return t.toString=Nf,t}function Lf(e,t,n,i,r,o,a,s,c){var l=1-c,u=Bf(l,3),p=Bf(l,2),f=c*c,d=f*c,h=u*e+p*3*c*n+l*3*c*c*r+d*a,v=u*t+p*3*c*i+l*3*c*c*o+d*s;return{x:qa(h),y:qa(v)}}function Ff(e){var t=v_(...e);return gl(t.x0,t.y0,t.x1-t.x0,t.y1-t.y0)}function qi(e,t,n){return t>=e.x&&t<=e.x+e.width&&n>=e.y&&n<=e.y+e.height}function f_(e,t){return e=gl(e),t=gl(t),qi(t,e.x,e.y)||qi(t,e.x2,e.y)||qi(t,e.x,e.y2)||qi(t,e.x2,e.y2)||qi(e,t.x,t.y)||qi(e,t.x2,t.y)||qi(e,t.x,t.y2)||qi(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)}function jf(e,t,n,i,r){var o=-3*t+9*n-9*i+3*r,a=e*o+6*t-12*n+6*i;return e*a-3*t+3*n}function $f(e,t,n,i,r,o,a,s,c){c==null&&(c=1),c=c>1?1:c<0?0:c;for(var l=c/2,u=12,p=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],f=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],d=0,h=0;h<u;h++){var v=l*p[h]+l,m=jf(v,e,n,r,a),S=jf(v,t,i,o,s),x=m*m+S*S;d+=f[h]*jt.sqrt(x)}return l*d}function d_(e,t,n,i,r,o,a,s){if(!(vi(e,n)<mi(r,a)||mi(e,n)>vi(r,a)||vi(t,i)<mi(o,s)||mi(t,i)>vi(o,s))){var c=(e*i-t*n)*(r-a)-(e-n)*(r*s-o*a),l=(e*i-t*n)*(o-s)-(t-i)*(r*s-o*a),u=(e-n)*(o-s)-(t-i)*(r-a);if(u){var p=qa(c/u),f=qa(l/u),d=+p.toFixed(2),h=+f.toFixed(2);if(!(d<+mi(e,n).toFixed(2)||d>+vi(e,n).toFixed(2)||d<+mi(r,a).toFixed(2)||d>+vi(r,a).toFixed(2)||h<+mi(t,i).toFixed(2)||h>+vi(t,i).toFixed(2)||h<+mi(o,s).toFixed(2)||h>+vi(o,s).toFixed(2)))return{x:p,y:f}}}}function qa(e){return Math.round(e*1e11)/1e11}function h_(e,t,n){var i=Ff(e),r=Ff(t);if(!f_(i,r))return n?0:[];for(var o=$f(...e),a=$f(...t),s=Hf(e)?1:~~(o/5)||1,c=Hf(t)?1:~~(a/5)||1,l=[],u=[],p={},f=n?0:[],d=0;d<s+1;d++){var h=Lf(...e,d/s);l.push({x:h.x,y:h.y,t:d/s})}for(d=0;d<c+1;d++)h=Lf(...t,d/c),u.push({x:h.x,y:h.y,t:d/c});for(d=0;d<s;d++)for(var v=0;v<c;v++){var m=l[d],S=l[d+1],x=u[v],E=u[v+1],y=Xi(S.x-m.x)<.01?"y":"x",w=Xi(E.x-x.x)<.01?"y":"x",R=d_(m.x,m.y,S.x,S.y,x.x,x.y,E.x,E.y),I;if(R){if(I=R.x.toFixed(9)+"#"+R.y.toFixed(9),p[I])continue;p[I]=!0;var T=m.t+Xi((R[y]-m[y])/(S[y]-m[y]))*(S.t-m.t),O=x.t+Xi((R[w]-x[w])/(E[w]-x[w]))*(E.t-x.t);T>=0&&T<=1&&O>=0&&O<=1&&(n?f++:f.push({x:R.x,y:R.y,t1:T,t2:O}))}}return f}function zf(e,t,n){e=Vf(e),t=Vf(t);for(var i,r,o,a,s,c,l,u,p,f,d=n?0:[],h=0,v=e.length;h<v;h++){var m=e[h];if(m[0]=="M")i=s=m[1],r=c=m[2];else{m[0]=="C"?(p=[i,r,...m.slice(1)],i=p[6],r=p[7]):(p=[i,r,i,r,s,c,s,c],i=s,r=c);for(var S=0,x=t.length;S<x;S++){var E=t[S];if(E[0]=="M")o=l=E[1],a=u=E[2];else{E[0]=="C"?(f=[o,a,...E.slice(1)],o=f[6],a=f[7]):(f=[o,a,o,a,l,u,l,u],o=l,a=u);var y=h_(p,f,n);if(n)d+=y;else{for(var w=0,R=y.length;w<R;w++)y[w].segment1=h,y[w].segment2=S,y[w].bez1=p,y[w].bez2=f;d=d.concat(y)}}}}}return d}function m_(e){var t=Kr(e);if(t.abs)return Xa(t.abs);if((!Ka(e)||!Ka(e&&e[0]))&&(e=p_(e)),!e||!e.length)return[["M",0,0]];var n=[],i=0,r=0,o=0,a=0,s=0,c;e[0][0]=="M"&&(i=+e[0][1],r=+e[0][2],o=i,a=r,s++,n[0]=["M",i,r]);for(var l,u,p=s,f=e.length;p<f;p++){if(n.push(l=[]),u=e[p],c=u[0],c!=c.toUpperCase())switch(l[0]=c.toUpperCase(),l[0]){case"A":l[1]=u[1],l[2]=u[2],l[3]=u[3],l[4]=u[4],l[5]=u[5],l[6]=+u[6]+i,l[7]=+u[7]+r;break;case"V":l[1]=+u[1]+r;break;case"H":l[1]=+u[1]+i;break;case"M":o=+u[1]+i,a=+u[2]+r;default:for(var d=1,h=u.length;d<h;d++)l[d]=+u[d]+(d%2?i:r)}else for(var v=0,m=u.length;v<m;v++)l[v]=u[v];switch(c=c.toUpperCase(),l[0]){case"Z":i=+o,r=+a;break;case"H":i=l[1];break;case"V":r=l[1];break;case"M":o=l[l.length-2],a=l[l.length-1];default:i=l[l.length-2],r=l[l.length-1]}}return n.toString=Nf,t.abs=Xa(n),n}function Hf(e){return e[0]===e[2]&&e[1]===e[3]&&e[4]===e[6]&&e[5]===e[7]}function Qa(e,t,n,i){return[e,t,n,i,n,i]}function Gf(e,t,n,i,r,o){var a=.3333333333333333,s=2/3;return[a*e+s*n,a*t+s*i,a*r+s*n,a*o+s*i,r,o]}function Uf(e,t,n,i,r,o,a,s,c,l){var u=Ki*120/180,p=Ki/180*(+r||0),f=[],d,h=u_(function(g,_,D){var M=g*jt.cos(D)-_*jt.sin(D),G=g*jt.sin(D)+_*jt.cos(D);return{x:M,y:G}});if(l)I=l[0],T=l[1],w=l[2],R=l[3];else{d=h(e,t,-p),e=d.x,t=d.y,d=h(s,c,-p),s=d.x,c=d.y;var v=(e-s)/2,m=(t-c)/2,S=v*v/(n*n)+m*m/(i*i);S>1&&(S=jt.sqrt(S),n=S*n,i=S*i);var x=n*n,E=i*i,y=(o==a?-1:1)*jt.sqrt(Xi((x*E-x*m*m-E*v*v)/(x*m*m+E*v*v))),w=y*n*m/i+(e+s)/2,R=y*-i*v/n+(t+c)/2,I=jt.asin(((t-R)/i).toFixed(9)),T=jt.asin(((c-R)/i).toFixed(9));I=e<w?Ki-I:I,T=s<w?Ki-T:T,I<0&&(I=Ki*2+I),T<0&&(T=Ki*2+T),a&&I>T&&(I=I-Ki*2),!a&&T>I&&(T=T-Ki*2)}var O=T-I;if(Xi(O)>u){var B=T,F=s,z=c;T=I+u*(a&&T>I?1:-1),s=w+n*jt.cos(T),c=R+i*jt.sin(T),f=Uf(s,c,n,i,r,0,a,F,z,[T,B,w,R])}O=T-I;var H=jt.cos(I),oe=jt.sin(I),ke=jt.cos(T),Ae=jt.sin(T),Se=jt.tan(O/4),It=4/3*n*Se,ht=4/3*i*Se,De=[e,t],mt=[e+It*oe,t-ht*H],V=[s+It*Ae,c-ht*ke],W=[s,c];if(mt[0]=2*De[0]-mt[0],mt[1]=2*De[1]-mt[1],l)return[mt,V,W].concat(f);f=[mt,V,W].concat(f).join().split(",");for(var ue=[],Ve=0,C=f.length;Ve<C;Ve++)ue[Ve]=Ve%2?h(f[Ve-1],f[Ve],p).y:h(f[Ve],f[Ve+1],p).x;return ue}function v_(e,t,n,i,r,o,a,s){for(var c=[],l=[[],[]],u,p,f,d,h,v,m,S,x=0;x<2;++x){if(x==0?(p=6*e-12*n+6*r,u=-3*e+9*n-9*r+3*a,f=3*n-3*e):(p=6*t-12*i+6*o,u=-3*t+9*i-9*o+3*s,f=3*i-3*t),Xi(u)<1e-12){if(Xi(p)<1e-12)continue;d=-f/p,0<d&&d<1&&c.push(d);continue}m=p*p-4*f*u,S=jt.sqrt(m),!(m<0)&&(h=(-p+S)/(2*u),0<h&&h<1&&c.push(h),v=(-p-S)/(2*u),0<v&&v<1&&c.push(v))}for(var E=c.length,y=E,w;E--;)d=c[E],w=1-d,l[0][E]=w*w*w*e+3*w*w*d*n+3*w*d*d*r+d*d*d*a,l[1][E]=w*w*w*t+3*w*w*d*i+3*w*d*d*o+d*d*d*s;return l[0][y]=e,l[1][y]=t,l[0][y+1]=a,l[1][y+1]=s,l[0].length=l[1].length=y+2,{x0:mi(...l[0]),y0:mi(...l[1]),x1:vi(...l[0]),y1:vi(...l[1])}}function Vf(e){var t=Kr(e);if(t.curve)return Xa(t.curve);for(var n=m_(e),i={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},r=function(d,h,v){var m,S;if(!d)return["C",h.x,h.y,h.x,h.y,h.x,h.y];switch(!(d[0]in{T:1,Q:1})&&(h.qx=h.qy=null),d[0]){case"M":h.X=d[1],h.Y=d[2];break;case"A":d=["C",...Uf(h.x,h.y,...d.slice(1))];break;case"S":v=="C"||v=="S"?(m=h.x*2-h.bx,S=h.y*2-h.by):(m=h.x,S=h.y),d=["C",m,S,...d.slice(1)];break;case"T":v=="Q"||v=="T"?(h.qx=h.x*2-h.qx,h.qy=h.y*2-h.qy):(h.qx=h.x,h.qy=h.y),d=["C",...Gf(h.x,h.y,h.qx,h.qy,d[1],d[2])];break;case"Q":h.qx=d[1],h.qy=d[2],d=["C",...Gf(h.x,h.y,d[1],d[2],d[3],d[4])];break;case"L":d=["C",...Qa(h.x,h.y,d[1],d[2])];break;case"H":d=["C",...Qa(h.x,h.y,d[1],h.y)];break;case"V":d=["C",...Qa(h.x,h.y,h.x,d[1])];break;case"Z":d=["C",...Qa(h.x,h.y,h.X,h.Y)];break}return d},o=function(d,h){if(d[h].length>7){d[h].shift();for(var v=d[h];v.length;)a[h]="A",d.splice(h++,0,["C",...v.splice(0,6)]);d.splice(h,1),u=n.length}},a=[],s="",c="",l=0,u=n.length;l<u;l++){n[l]&&(s=n[l][0]),s!="C"&&(a[l]=s,l&&(c=a[l-1])),n[l]=r(n[l],i,c),a[l]!="A"&&s=="C"&&(a[l]="C"),o(n,l);var p=n[l],f=p.length;i.x=p[f-2],i.y=p[f-1],i.bx=Of(p[f-4])||i.x,i.by=Of(p[f-3])||i.y}return t.curve=Xa(n),n}function pt(e){return $(e)&&U(e,"waypoints")}function Xe(e){return $(e)&&U(e,"labelTarget")}function GD(e){return isObject(e)&&isNil(e.parent)}function Zf(e){return{x:Math.round(e.x),y:Math.round(e.y),width:Math.round(e.width),height:Math.round(e.height)}}function Ri(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function Ee(e){return{top:e.y,right:e.x+(e.width||0),bottom:e.y+(e.height||0),left:e.x}}function Ja(e){return{x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}}function g_(e){return Ri({x:e.x+(e.width||0)/2,y:e.y+(e.height||0)/2})}function y_(e){for(var t=e.waypoints,n=t.reduce(function(l,u,p){var f=t[p-1];if(f){var d=l[l.length-1],h=d&&d.endLength||0,v=E_(f,u);l.push({start:f,end:u,startLength:h,endLength:h+v,length:v})}return l},[]),i=n.reduce(function(l,u){return l+u.length},0),r=i/2,o=0,a=n[o];a.endLength<r;)a=n[++o];var s=(r-a.startLength)/a.length,c={x:a.start.x+(a.end.x-a.start.x)*s,y:a.start.y+(a.end.y-a.start.y)*s};return c}function Pe(e){return pt(e)?y_(e):g_(e)}function hn(e,t,n){n=n||0,$(n)||(n={x:n,y:n});var i=Ee(e),r=Ee(t),o=i.bottom+n.y<=r.top,a=i.left-n.x>=r.right,s=i.top-n.y>=r.bottom,c=i.right+n.x<=r.left,l=o?"top":s?"bottom":null,u=c?"left":a?"right":null;return u&&l?l+"-"+u:u||l||"intersect"}function yl(e,t,n){var i=__(e,t);return i.length===1||i.length===2&&Ho(i[0],i[1])<1?Ri(i[0]):i.length>1?(i=dn(i,function(r){var o=Math.floor(r.t2*100)||1;return o=100-o,o=(o<10?"0":"")+o,r.segment2+"#"+o}),Ri(i[n?0:i.length-1])):null}function __(e,t){return zf(e,t)}function b_(e){e=e.slice();for(var t=0,n,i,r;e[t];)n=e[t],i=e[t-1],r=e[t+1],Ho(n,r)===0||hl(i,r,n)?e.splice(t,1):t++;return e}function E_(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function es(e,t){return Math.round(e*t)/t}function Wf(e){return L(e)?e+"px":e}function x_(e){for(;e.parent;)e=e.parent;return e}function w_(e){e=k({},{width:"100%",height:"100%"},e);const t=e.container||document.body,n=document.createElement("div");return n.setAttribute("class","djs-container djs-parent"),Rt(n,{position:"relative",overflow:"hidden",width:Wf(e.width),height:Wf(e.height)}),t.appendChild(n),n}function Yf(e,t,n){const i=ve("g");Ke(i).add(t);const r=n!==void 0?n:e.childNodes.length-1;return e.insertBefore(i,e.childNodes[r]||null),i}const S_="base",Kf=0,C_=1,P_={shape:["x","y","width","height"],connection:["waypoints"]};function Me(e,t,n,i){this._eventBus=t,this._elementRegistry=i,this._graphicsFactory=n,this._rootsIdx=0,this._layers={},this._planes=[],this._rootElement=null,this._init(e||{})}Me.$inject=["config.canvas","eventBus","graphicsFactory","elementRegistry"],Me.prototype._init=function(e){const t=this._eventBus,n=this._container=w_(e),i=this._svg=ve("svg");ce(i,{width:"100%",height:"100%"}),we(n,i);const r=this._viewport=Yf(i,"viewport");e.deferUpdate&&(this._viewboxChanged=Dt(rt(this._viewboxChanged,this),300)),t.on("diagram.init",()=>{t.fire("canvas.init",{svg:i,viewport:r})}),t.on(["shape.added","connection.added","shape.removed","connection.removed","elements.changed","root.set"],()=>{delete this._cachedViewbox}),t.on("diagram.destroy",500,this._destroy,this),t.on("diagram.clear",500,this._clear,this)},Me.prototype._destroy=function(){this._eventBus.fire("canvas.destroy",{svg:this._svg,viewport:this._viewport});const e=this._container.parentNode;e&&e.removeChild(this._container),delete this._svg,delete this._container,delete this._layers,delete this._planes,delete this._rootElement,delete this._viewport},Me.prototype._clear=function(){this._elementRegistry.getAll().forEach(t=>{const n=Mf(t);n==="root"?this.removeRootElement(t):this._removeElement(t,n)}),this._planes=[],this._rootElement=null,delete this._cachedViewbox},Me.prototype.getDefaultLayer=function(){return this.getLayer(S_,Kf)},Me.prototype.getLayer=function(e,t){if(!e)throw new Error("must specify a name");let n=this._layers[e];if(n||(n=this._layers[e]=this._createLayer(e,t)),typeof t!="undefined"&&n.index!==t)throw new Error("layer <"+e+"> already created at index <"+t+">");return n.group},Me.prototype._getChildIndex=function(e){return Ot(this._layers,function(t,n){return n.visible&&e>=n.index&&t++,t},0)},Me.prototype._createLayer=function(e,t){typeof t=="undefined"&&(t=C_);const n=this._getChildIndex(t);return{group:Yf(this._viewport,"layer-"+e,n),index:t,visible:!0}},Me.prototype.showLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=this._viewport,i=t.group,r=t.index;if(t.visible)return i;const o=this._getChildIndex(r);return n.insertBefore(i,n.childNodes[o]||null),t.visible=!0,i},Me.prototype.hideLayer=function(e){if(!e)throw new Error("must specify a name");const t=this._layers[e];if(!t)throw new Error("layer <"+e+"> does not exist");const n=t.group;return t.visible&&(Zt(n),t.visible=!1),n},Me.prototype._removeLayer=function(e){const t=this._layers[e];t&&(delete this._layers[e],Zt(t.group))},Me.prototype.getActiveLayer=function(){const e=this._findPlaneForRoot(this.getRootElement());return e?e.layer:null},Me.prototype.findRoot=function(e){return typeof e=="string"&&(e=this._elementRegistry.get(e)),e?(this._findPlaneForRoot(x_(e))||{}).rootElement:void 0},Me.prototype.getRootElements=function(){return this._planes.map(function(e){return e.rootElement})},Me.prototype._findPlaneForRoot=function(e){return te(this._planes,function(t){return t.rootElement===e})},Me.prototype.getContainer=function(){return this._container},Me.prototype._updateMarker=function(e,t,n){let i;e.id||(e=this._elementRegistry.get(e)),e.markers=e.markers||new Set,i=this._elementRegistry._elements[e.id],i&&(A([i.gfx,i.secondaryGfx],function(r){r&&(n?(e.markers.add(t),Ke(r).add(t)):(e.markers.delete(t),Ke(r).remove(t)))}),this._eventBus.fire("element.marker.update",{element:e,gfx:i.gfx,marker:t,add:!!n}))},Me.prototype.addMarker=function(e,t){this._updateMarker(e,t,!0)},Me.prototype.removeMarker=function(e,t){this._updateMarker(e,t,!1)},Me.prototype.hasMarker=function(e,t){return e.id||(e=this._elementRegistry.get(e)),e.markers?e.markers.has(t):!1},Me.prototype.toggleMarker=function(e,t){this.hasMarker(e,t)?this.removeMarker(e,t):this.addMarker(e,t)},Me.prototype.getRootElement=function(){const e=this._rootElement;return e||this._planes.length?e:this.setRootElement(this.addRootElement(null))},Me.prototype.addRootElement=function(e){const t=this._rootsIdx++;e||(e={id:"__implicitroot_"+t,children:[],isImplicit:!0});const n=e.layer="root-"+t;this._ensureValid("root",e);const i=this.getLayer(n,Kf);return this.hideLayer(n),this._addRoot(e,i),this._planes.push({rootElement:e,layer:i}),e},Me.prototype.removeRootElement=function(e){if(typeof e=="string"&&(e=this._elementRegistry.get(e)),!!this._findPlaneForRoot(e))return this._removeRoot(e),this._removeLayer(e.layer),this._planes=this._planes.filter(function(n){return n.rootElement!==e}),this._rootElement===e&&(this._rootElement=null),e},Me.prototype.setRootElement=function(e){if(e===this._rootElement)return e;let t;if(!e)throw new Error("rootElement required");return t=this._findPlaneForRoot(e),t||(e=this.addRootElement(e)),this._setRoot(e),e},Me.prototype._removeRoot=function(e){const t=this._elementRegistry,n=this._eventBus;n.fire("root.remove",{element:e}),n.fire("root.removed",{element:e}),t.remove(e)},Me.prototype._addRoot=function(e,t){const n=this._elementRegistry,i=this._eventBus;i.fire("root.add",{element:e}),n.add(e,t),i.fire("root.added",{element:e,gfx:t})},Me.prototype._setRoot=function(e,t){const n=this._rootElement;n&&(this._elementRegistry.updateGraphics(n,null,!0),this.hideLayer(n.layer)),e&&(t||(t=this._findPlaneForRoot(e).layer),this._elementRegistry.updateGraphics(e,this._svg,!0),this.showLayer(e.layer)),this._rootElement=e,this._eventBus.fire("root.set",{element:e})},Me.prototype._ensureValid=function(e,t){if(!t.id)throw new Error("element must have an id");if(this._elementRegistry.get(t.id))throw new Error("element <"+t.id+"> already exists");const n=P_[e];if(!An(n,function(r){return typeof t[r]!="undefined"}))throw new Error("must supply { "+n.join(", ")+" } with "+e)},Me.prototype._setParent=function(e,t,n){Wt(t.children,e,n),e.parent=t},Me.prototype._addElement=function(e,t,n,i){n=n||this.getRootElement();const r=this._eventBus,o=this._graphicsFactory;this._ensureValid(e,t),r.fire(e+".add",{element:t,parent:n}),this._setParent(t,n,i);const a=o.create(e,t,i);return this._elementRegistry.add(t,a),o.update(e,t,a),r.fire(e+".added",{element:t,gfx:a}),t},Me.prototype.addShape=function(e,t,n){return this._addElement("shape",e,t,n)},Me.prototype.addConnection=function(e,t,n){return this._addElement("connection",e,t,n)},Me.prototype._removeElement=function(e,t){const n=this._elementRegistry,i=this._graphicsFactory,r=this._eventBus;if(e=n.get(e.id||e),!!e)return r.fire(t+".remove",{element:e}),i.remove(e),Ft(e.parent&&e.parent.children,e),e.parent=null,r.fire(t+".removed",{element:e}),n.remove(e),e},Me.prototype.removeShape=function(e){return this._removeElement(e,"shape")},Me.prototype.removeConnection=function(e){return this._removeElement(e,"connection")},Me.prototype.getGraphics=function(e,t){return this._elementRegistry.getGraphics(e,t)},Me.prototype._changeViewbox=function(e){this._eventBus.fire("canvas.viewbox.changing"),e.apply(this),this._cachedViewbox=null,this._viewboxChanged()},Me.prototype._viewboxChanged=function(){this._eventBus.fire("canvas.viewbox.changed",{viewbox:this.viewbox()})},Me.prototype.viewbox=function(e){if(e===void 0&&this._cachedViewbox)return structuredClone(this._cachedViewbox);const t=this._viewport,n=this.getSize();let i,r,o,a,s,c,l;if(e)this._changeViewbox(function(){s=Math.min(n.width/e.width,n.height/e.height);const u=this._svg.createSVGMatrix().scale(s).translate(-e.x,-e.y);jo(t,u)});else return o=this._rootElement?this.getActiveLayer():null,i=o&&o.getBBox()||{},a=jo(t),r=a?a.matrix:k0(),s=es(r.a,1e3),c=es(-r.e||0,1e3),l=es(-r.f||0,1e3),e=this._cachedViewbox={x:c?c/s:0,y:l?l/s:0,width:n.width/s,height:n.height/s,scale:s,inner:{width:i.width||0,height:i.height||0,x:i.x||0,y:i.y||0},outer:n},e;return e},Me.prototype.scroll=function(e){const t=this._viewport;let n=t.getCTM();return e&&this._changeViewbox(function(){e=k({dx:0,dy:0},e||{}),n=this._svg.createSVGMatrix().translate(e.dx,e.dy).multiply(n),Xf(t,n)}),{x:n.e,y:n.f}},Me.prototype.scrollToElement=function(e,t){let n=100;typeof e=="string"&&(e=this._elementRegistry.get(e));const i=this.findRoot(e);if(i!==this.getRootElement()&&this.setRootElement(i),i===e)return;t||(t={}),typeof t=="number"&&(n=t),t={top:t.top||n,right:t.right||n,bottom:t.bottom||n,left:t.left||n};const r=Xt(e),o=Ee(r),a=this.viewbox(),s=this.zoom();let c,l;a.y+=t.top/s,a.x+=t.left/s,a.width-=(t.right+t.left)/s,a.height-=(t.bottom+t.top)/s;const u=Ee(a);if(!(r.width<a.width&&r.height<a.height))c=r.x-a.x,l=r.y-a.y;else{const f=Math.max(0,o.right-u.right),d=Math.min(0,o.left-u.left),h=Math.max(0,o.bottom-u.bottom),v=Math.min(0,o.top-u.top);c=f||d,l=h||v}this.scroll({dx:-c*s,dy:-l*s})},Me.prototype.zoom=function(e,t){if(!e)return this.viewbox(e).scale;if(e==="fit-viewport")return this._fitViewport(t);let n,i;return this._changeViewbox(function(){typeof t!="object"&&(n=this.viewbox().outer,t={x:n.width/2,y:n.height/2}),i=this._setZoom(e,t)}),es(i.a,1e3)};function Xf(e,t){const n="matrix("+t.a+","+t.b+","+t.c+","+t.d+","+t.e+","+t.f+")";e.setAttribute("transform",n)}Me.prototype._fitViewport=function(e){const t=this.viewbox(),n=t.outer,i=t.inner;let r,o;return i.x>=0&&i.y>=0&&i.x+i.width<=n.width&&i.y+i.height<=n.height&&!e?o={x:0,y:0,width:Math.max(i.width+i.x,n.width),height:Math.max(i.height+i.y,n.height)}:(r=Math.min(1,n.width/i.width,n.height/i.height),o={x:i.x+(e?i.width/2-n.width/r/2:0),y:i.y+(e?i.height/2-n.height/r/2:0),width:n.width/r,height:n.height/r}),this.viewbox(o),this.viewbox(!1).scale},Me.prototype._setZoom=function(e,t){const n=this._svg,i=this._viewport,r=n.createSVGMatrix(),o=n.createSVGPoint();let a,s,c,l,u;c=i.getCTM();const p=c.a;return t?(a=k(o,t),s=a.matrixTransform(c.inverse()),l=r.translate(s.x,s.y).scale(1/p*e).translate(-s.x,-s.y),u=c.multiply(l)):u=r.scale(e),Xf(this._viewport,u),u},Me.prototype.getSize=function(){return{width:this._container.clientWidth,height:this._container.clientHeight}},Me.prototype.getAbsoluteBBox=function(e){const t=this.viewbox();let n;e.waypoints?n=this.getGraphics(e).getBBox():n=e;const i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale,o=n.width*t.scale,a=n.height*t.scale;return{x:i,y:r,width:o,height:a}},Me.prototype.resized=function(){delete this._cachedViewbox,this._eventBus.fire("canvas.resized")};var Xr="data-element-id";function Nn(e){this._elements={},this._eventBus=e}Nn.$inject=["eventBus"],Nn.prototype.add=function(e,t,n){var i=e.id;this._validateId(i),ce(t,Xr,i),n&&ce(n,Xr,i),this._elements[i]={element:e,gfx:t,secondaryGfx:n}},Nn.prototype.remove=function(e){var t=this._elements,n=e.id||e,i=n&&t[n];i&&(ce(i.gfx,Xr,""),i.secondaryGfx&&ce(i.secondaryGfx,Xr,""),delete t[n])},Nn.prototype.updateId=function(e,t){this._validateId(t),typeof e=="string"&&(e=this.get(e)),this._eventBus.fire("element.updateId",{element:e,newId:t});var n=this.getGraphics(e),i=this.getGraphics(e,!0);this.remove(e),e.id=t,this.add(e,n,i)},Nn.prototype.updateGraphics=function(e,t,n){var i=e.id||e,r=this._elements[i];return n?r.secondaryGfx=t:r.gfx=t,t&&ce(t,Xr,i),t},Nn.prototype.get=function(e){var t;typeof e=="string"?t=e:t=e&&ce(e,Xr);var n=this._elements[t];return n&&n.element},Nn.prototype.filter=function(e){var t=[];return this.forEach(function(n,i){e(n,i)&&t.push(n)}),t},Nn.prototype.find=function(e){for(var t=this._elements,n=Object.keys(t),i=0;i<n.length;i++){var r=n[i],o=t[r],a=o.element,s=o.gfx;if(e(a,s))return a}},Nn.prototype.getAll=function(){return this.filter(function(e){return e})},Nn.prototype.forEach=function(e){var t=this._elements;Object.keys(t).forEach(function(n){var i=t[n],r=i.element,o=i.gfx;return e(r,o)})},Nn.prototype.getGraphics=function(e,t){var n=e.id||e,i=this._elements[n];return i&&(t?i.secondaryGfx:i.gfx)},Nn.prototype._validateId=function(e){if(!e)throw new Error("element must have an id");if(this._elements[e])throw new Error("element with id "+e+" already added")};function qf(e,t,n,i){var r=n.inverse;return Object.defineProperty(e,"remove",{value:function(o){var a=this.indexOf(o);return a!==-1&&(this.splice(a,1),t.unset(o,r,i)),o}}),Object.defineProperty(e,"contains",{value:function(o){return this.indexOf(o)!==-1}}),Object.defineProperty(e,"add",{value:function(o,a){var s=this.indexOf(o);if(typeof a=="undefined"){if(s!==-1)return;a=this.length}s!==-1&&this.splice(s,1),this.splice(a,0,o),s===-1&&t.set(o,r,i)}}),Object.defineProperty(e,"__refs_collection",{value:!0}),e}function Qf(e){return e.__refs_collection===!0}var UD={__proto__:null,extend:qf,isExtended:Qf};function R_(e,t){return Object.prototype.hasOwnProperty.call(e,t.name||t)}function Jf(e,t,n){var i=qf(n[t.name]||[],e,t,n);Object.defineProperty(n,t.name,{enumerable:t.enumerable,value:i}),i.length&&i.forEach(function(r){e.set(r,t.inverse,n)})}function A_(e,t,n){var i=t.inverse,r=n[t.name];Object.defineProperty(n,t.name,{configurable:t.configurable,enumerable:t.enumerable,get:function(){return r},set:function(o){if(o!==r){var a=r;r=null,a&&e.unset(a,i,n),r=o,e.set(r,i,n)}}})}function Un(e,t){if(!(this instanceof Un))return new Un(e,t);e.inverse=t,t.inverse=e,this.props={},this.props[e.name]=e,this.props[t.name]=t}Un.prototype.bind=function(e,t){if(typeof t=="string"){if(!this.props[t])throw new Error("no property <"+t+"> in ref");t=this.props[t]}t.collection?Jf(this,t,e):A_(this,t,e)},Un.prototype.ensureRefsCollection=function(e,t){var n=e[t.name];return Qf(n)||Jf(this,t,e),n},Un.prototype.ensureBound=function(e,t){R_(e,t)||this.bind(e,t)},Un.prototype.unset=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).remove(n):e[t.name]=void 0)},Un.prototype.set=function(e,t,n){e&&(this.ensureBound(e,t),t.collection?this.ensureRefsCollection(e,t).add(n):e[t.name]=n)};var _l=new Un({name:"children",enumerable:!0,collection:!0},{name:"parent"}),ed=new Un({name:"labels",enumerable:!0,collection:!0},{name:"labelTarget"}),td=new Un({name:"attachers",collection:!0},{name:"host"}),nd=new Un({name:"outgoing",collection:!0},{name:"source"}),id=new Un({name:"incoming",collection:!0},{name:"target"});function qr(){Object.defineProperty(this,"businessObject",{writable:!0}),Object.defineProperty(this,"label",{get:function(){return this.labels[0]},set:function(e){var t=this.label,n=this.labels;!e&&t?n.remove(t):n.add(e,0)}}),_l.bind(this,"parent"),ed.bind(this,"labels"),nd.bind(this,"outgoing"),id.bind(this,"incoming")}function Uo(){qr.call(this),_l.bind(this,"children"),td.bind(this,"host"),td.bind(this,"attachers")}j(Uo,qr);function rd(){qr.call(this),_l.bind(this,"children")}j(rd,Uo);function od(){Uo.call(this),ed.bind(this,"labelTarget")}j(od,Uo);function ad(){qr.call(this),nd.bind(this,"source"),id.bind(this,"target")}j(ad,qr);var T_={connection:ad,shape:Uo,label:od,root:rd};function D_(e,t){var n=T_[e];if(!n)throw new Error("unknown type: <"+e+">");return k(new n,t)}function M_(e){return e instanceof qr}function Ai(){this._uid=12}Ai.prototype.createRoot=function(e){return this.create("root",e)},Ai.prototype.createLabel=function(e){return this.create("label",e)},Ai.prototype.createShape=function(e){return this.create("shape",e)},Ai.prototype.createConnection=function(e){return this.create("connection",e)},Ai.prototype.create=function(e,t){return t=k({},t||{}),t.id||(t.id=e+"_"+this._uid++),D_(e,t)};var ts="__fn",sd=1e3,k_=Array.prototype.slice;function Dn(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}Dn.prototype.on=function(e,t,n,i){if(e=se(e)?e:[e],q(t)&&(i=n,n=t,t=sd),!L(t))throw new Error("priority must be a number");var r=n;i&&(r=rt(n,i),r[ts]=n[ts]||n);var o=this;e.forEach(function(a){o._addListener(a,{priority:t,callback:r,next:null})})},Dn.prototype.once=function(e,t,n,i){var r=this;if(q(t)&&(i=n,n=t,t=sd),!L(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var a=n.apply(i,arguments);return r.off(e,o),a}o[ts]=n,this.on(e,t,o)},Dn.prototype.off=function(e,t){e=se(e)?e:[e];var n=this;e.forEach(function(i){n._removeListener(i,t)})},Dn.prototype.createEvent=function(e){var t=new Vo;return t.init(e),t},Dn.prototype.fire=function(e,t){var n,i,r,o;if(o=k_.call(arguments),typeof e=="object"&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(i=this._listeners[e],!!i){t instanceof Vo?n=t:n=this.createEvent(t),o[0]=n;var a=n.type;e!==a&&(n.type=e);try{r=this._invokeListeners(n,o,i)}finally{e!==a&&(n.type=a)}return r===void 0&&n.defaultPrevented&&(r=!1),r}},Dn.prototype.handleError=function(e){return this.fire("error",{error:e})===!1},Dn.prototype._destroy=function(){this._listeners={}},Dn.prototype._invokeListeners=function(e,t,n){for(var i;n&&!e.cancelBubble;)i=this._invokeListener(e,t,n),n=n.next;return i},Dn.prototype._invokeListener=function(e,t,n){var i;if(n.callback.__isTomb)return i;try{i=I_(n.callback,t),i!==void 0&&(e.returnValue=i,e.stopPropagation()),i===!1&&e.preventDefault()}catch(r){if(!this.handleError(r))throw console.error("unhandled error in event listener",r),r}return i},Dn.prototype._addListener=function(e,t){var n=this._getListeners(e),i;if(!n){this._setListeners(e,t);return}for(;n;){if(n.priority<t.priority){t.next=n,i?i.next=t:this._setListeners(e,t);return}i=n,n=n.next}i.next=t},Dn.prototype._getListeners=function(e){return this._listeners[e]},Dn.prototype._setListeners=function(e,t){this._listeners[e]=t},Dn.prototype._removeListener=function(e,t){var n=this._getListeners(e),i,r,o;if(!t){this._setListeners(e,null);return}for(;n;)i=n.next,o=n.callback,(o===t||o[ts]===t)&&(r?r.next=i:this._setListeners(e,i)),r=n,n=i};function Vo(){}Vo.prototype.stopPropagation=function(){this.cancelBubble=!0},Vo.prototype.preventDefault=function(){this.defaultPrevented=!0},Vo.prototype.init=function(e){k(this,e||{})};function I_(e,t){return e.apply(null,t)}function Rr(e){return e.childNodes[0]}function O_(e){return e.parentNode.childNodes[1]}function ns(e,t,n,i,r){var o=Fo();o.setTranslate(t,n);var a=Fo();a.setRotate(i||0,0,0);var s=Fo();s.setScale(r||1,r||1),jo(e,[o,a,s])}function ln(e,t,n){var i=Fo();i.setTranslate(t,n),jo(e,i)}function cd(e,t){var n=Fo();n.setRotate(t,0,0),jo(e,n)}function VD(e,t){var n=createTransform();n.setScale(t,t),svgTransform(e,n)}function Ln(e,t){this._eventBus=e,this._elementRegistry=t}Ln.$inject=["eventBus","elementRegistry"],Ln.prototype._getChildrenContainer=function(e){var t=this._elementRegistry.getGraphics(e),n;return e.parent?(n=O_(t),n||(n=ve("g"),Ke(n).add("djs-children"),we(t.parentNode,n))):n=t,n},Ln.prototype._clear=function(e){var t=Rr(e);return Ui(t),t},Ln.prototype._createContainer=function(e,t,n,i){var r=ve("g");Ke(r).add("djs-group"),typeof n!="undefined"?ld(r,t,t.childNodes[n]):we(t,r);var o=ve("g");Ke(o).add("djs-element"),Ke(o).add("djs-"+e),i&&Ke(o).add("djs-frame"),we(r,o);var a=ve("g");return Ke(a).add("djs-visual"),we(o,a),o},Ln.prototype.create=function(e,t,n){var i=this._getChildrenContainer(t.parent);return this._createContainer(e,i,n,kf(t))},Ln.prototype.updateContainments=function(e){var t=this,n=this._elementRegistry,i;i=Ot(e,function(r,o){return o.parent&&(r[o.parent.id]=o.parent),r},{}),A(i,function(r){var o=r.children;if(o){var a=t._getChildrenContainer(r);A(o.slice().reverse(),function(s){var c=n.getGraphics(s);ld(c.parentNode,a)})}})},Ln.prototype.drawShape=function(e,t,n={}){var i=this._eventBus;return i.fire("render.shape",{gfx:e,element:t,attrs:n})},Ln.prototype.getShapePath=function(e){var t=this._eventBus;return t.fire("render.getShapePath",e)},Ln.prototype.drawConnection=function(e,t,n={}){var i=this._eventBus;return i.fire("render.connection",{gfx:e,element:t,attrs:n})},Ln.prototype.getConnectionPath=function(e){var t=this._eventBus;return t.fire("render.getConnectionPath",e)},Ln.prototype.update=function(e,t,n){if(t.parent){var i=this._clear(n);if(e==="shape")this.drawShape(i,t),ln(n,t.x,t.y);else if(e==="connection")this.drawConnection(i,t);else throw new Error("unknown type: "+e);t.hidden?ce(n,"display","none"):ce(n,"display","block")}},Ln.prototype.remove=function(e){var t=this._elementRegistry.getGraphics(e);Zt(t.parentNode)};function ld(e,t,n){var i=n||t.firstChild;e!==i&&t.insertBefore(e,i)}var B_={__depends__:[i_],__init__:["canvas"],canvas:["type",Me],elementRegistry:["type",Nn],elementFactory:["type",Ai],eventBus:["type",Dn],graphicsFactory:["type",Ln]};function N_(e){var t=new Pf(e);return t.init(),t}function L_(e){e=e||{};var t={config:["value",e]},n=[t,B_].concat(e.modules||[]);return N_(n)}function Qi(e,t){this._injector=t||L_(e),this.get("eventBus").fire("diagram.init")}Qi.prototype.get=function(e,t){return this._injector.get(e,t)},Qi.prototype.invoke=function(e,t,n){return this._injector.invoke(e,t,n)},Qi.prototype.destroy=function(){this.get("eventBus").fire("diagram.destroy")},Qi.prototype.clear=function(){this.get("eventBus").fire("diagram.clear")};function bl(){}bl.prototype.get=function(e){return this.$model.properties.get(this,e)},bl.prototype.set=function(e,t){this.$model.properties.set(this,e,t)};function ud(e,t){this.model=e,this.properties=t}ud.prototype.createType=function(e){var t=this.model,n=this.properties,i=Object.create(bl.prototype);A(e.properties,function(a){!a.isMany&&a.default!==void 0&&(i[a.name]=a.default)}),n.defineModel(i,t),n.defineDescriptor(i,e);var r=e.ns.name;function o(a){n.define(this,"$type",{value:r,enumerable:!0}),n.define(this,"$attrs",{value:{}}),n.define(this,"$parent",{writable:!0}),A(a,rt(function(s,c){this.set(c,s)},this))}return o.prototype=i,o.hasType=i.$instanceOf=this.model.hasType,n.defineModel(o,t),n.defineDescriptor(o,e),o};var F_={String:!0,Boolean:!0,Integer:!0,Real:!0,Element:!0},pd={String:function(e){return e},Boolean:function(e){return e==="true"},Integer:function(e){return parseInt(e,10)},Real:function(e){return parseFloat(e)}};function El(e,t){var n=pd[e];return n?n(t):t}function xl(e){return!!F_[e]}function fd(e){return!!pd[e]}function En(e,t){var n=e.split(/:/),i,r;if(n.length===1)i=e,r=t;else if(n.length===2)i=n[1],r=n[0];else throw new Error("expected <prefix:localName> or <localName>, got "+e);return e=(r?r+":":"")+i,{name:e,prefix:r,localName:i}}function Fn(e){this.ns=e,this.name=e.name,this.allTypes=[],this.allTypesByName={},this.properties=[],this.propertiesByName={}}Fn.prototype.build=function(){return Nt(this,["ns","name","allTypes","allTypesByName","properties","propertiesByName","bodyProperty","idProperty"])},Fn.prototype.addProperty=function(e,t,n){typeof t=="boolean"&&(n=t,t=void 0),this.addNamedProperty(e,n!==!1);var i=this.properties;t!==void 0?i.splice(t,0,e):i.push(e)},Fn.prototype.replaceProperty=function(e,t,n){var i=e.ns,r=this.properties,o=this.propertiesByName,a=e.name!==t.name;if(e.isId){if(!t.isId)throw new Error("property <"+t.ns.name+"> must be id property to refine <"+e.ns.name+">");this.setIdProperty(t,!1)}if(e.isBody){if(!t.isBody)throw new Error("property <"+t.ns.name+"> must be body property to refine <"+e.ns.name+">");this.setBodyProperty(t,!1)}var s=r.indexOf(e);if(s===-1)throw new Error("property <"+i.name+"> not found in property list");r.splice(s,1),this.addProperty(t,n?void 0:s,a),o[i.name]=o[i.localName]=t},Fn.prototype.redefineProperty=function(e,t,n){var i=e.ns.prefix,r=t.split("#"),o=En(r[0],i),a=En(r[1],o.prefix).name,s=this.propertiesByName[a];if(s)this.replaceProperty(s,e,n);else throw new Error("refined property <"+a+"> not found");delete e.redefines},Fn.prototype.addNamedProperty=function(e,t){var n=e.ns,i=this.propertiesByName;t&&(this.assertNotDefined(e,n.name),this.assertNotDefined(e,n.localName)),i[n.name]=i[n.localName]=e},Fn.prototype.removeNamedProperty=function(e){var t=e.ns,n=this.propertiesByName;delete n[t.name],delete n[t.localName]},Fn.prototype.setBodyProperty=function(e,t){if(t&&this.bodyProperty)throw new Error("body property defined multiple times (<"+this.bodyProperty.ns.name+">, <"+e.ns.name+">)");this.bodyProperty=e},Fn.prototype.setIdProperty=function(e,t){if(t&&this.idProperty)throw new Error("id property defined multiple times (<"+this.idProperty.ns.name+">, <"+e.ns.name+">)");this.idProperty=e},Fn.prototype.assertNotTrait=function(e){if((e.extends||[]).length)throw new Error(`cannot create <${e.name}> extending <${e.extends}>`)},Fn.prototype.assertNotDefined=function(e,t){var n=e.name,i=this.propertiesByName[n];if(i)throw new Error("property <"+n+"> already defined; override of <"+i.definedBy.ns.name+"#"+i.ns.name+"> by <"+e.definedBy.ns.name+"#"+e.ns.name+"> not allowed without redefines")},Fn.prototype.hasProperty=function(e){return this.propertiesByName[e]},Fn.prototype.addTrait=function(e,t){t&&this.assertNotTrait(e);var n=this.allTypesByName,i=this.allTypes,r=e.name;r in n||(A(e.properties,rt(function(o){o=k({},o,{name:o.ns.localName,inherited:t}),Object.defineProperty(o,"definedBy",{value:e});var a=o.replaces,s=o.redefines;a||s?this.redefineProperty(o,a||s,a):(o.isBody&&this.setBodyProperty(o),o.isId&&this.setIdProperty(o),this.addProperty(o))},this)),i.push(e),n[r]=e)};function Ji(e,t){this.packageMap={},this.typeMap={},this.packages=[],this.properties=t,A(e,rt(this.registerPackage,this))}Ji.prototype.getPackage=function(e){return this.packageMap[e]},Ji.prototype.getPackages=function(){return this.packages},Ji.prototype.registerPackage=function(e){e=k({},e);var t=this.packageMap;dd(t,e,"prefix"),dd(t,e,"uri"),A(e.types,rt(function(n){this.registerType(n,e)},this)),t[e.uri]=t[e.prefix]=e,this.packages.push(e)},Ji.prototype.registerType=function(e,t){e=k({},e,{superClass:(e.superClass||[]).slice(),extends:(e.extends||[]).slice(),properties:(e.properties||[]).slice(),meta:k(e.meta||{})});var n=En(e.name,t.prefix),i=n.name,r={};A(e.properties,rt(function(o){var a=En(o.name,n.prefix),s=a.name;xl(o.type)||(o.type=En(o.type,a.prefix).name),k(o,{ns:a,name:s}),r[s]=o},this)),k(e,{ns:n,name:i,propertiesByName:r}),A(e.extends,rt(function(o){var a=En(o,n.prefix),s=this.typeMap[a.name];s.traits=s.traits||[],s.traits.push(i)},this)),this.definePackage(e,t),this.typeMap[i]=e},Ji.prototype.mapTypes=function(e,t,n){var i=xl(e.name)?{name:e.name}:this.typeMap[e.name],r=this;function o(c,l){var u=En(c,xl(c)?"":e.prefix);r.mapTypes(u,t,l)}function a(c){return o(c,!0)}function s(c){return o(c,!1)}if(!i)throw new Error("unknown type <"+e.name+">");A(i.superClass,n?a:s),t(i,!n),A(i.traits,a)},Ji.prototype.getEffectiveDescriptor=function(e){var t=En(e),n=new Fn(t);this.mapTypes(t,function(r,o){n.addTrait(r,o)});var i=n.build();return this.definePackage(i,i.allTypes[i.allTypes.length-1].$pkg),i},Ji.prototype.definePackage=function(e,t){this.properties.define(e,"$pkg",{value:t})};function dd(e,t,n){var i=t[n];if(i in e)throw new Error("package with "+n+" <"+i+"> already defined")}function Ar(e){this.model=e}Ar.prototype.set=function(e,t,n){if(!ee(t)||!t.length)throw new TypeError("property name must be a non-empty string");var i=this.getProperty(e,t),r=i&&i.name;j_(n)?i?delete e[r]:delete e.$attrs[wl(t)]:i?r in e?e[r]=n:hd(e,i,n):e.$attrs[wl(t)]=n},Ar.prototype.get=function(e,t){var n=this.getProperty(e,t);if(!n)return e.$attrs[wl(t)];var i=n.name;return!e[i]&&n.isMany&&hd(e,n,[]),e[i]},Ar.prototype.define=function(e,t,n){if(!n.writable){var i=n.value;n=k({},n,{get:function(){return i}}),delete n.value}Object.defineProperty(e,t,n)},Ar.prototype.defineDescriptor=function(e,t){this.define(e,"$descriptor",{value:t})},Ar.prototype.defineModel=function(e,t){this.define(e,"$model",{value:t})},Ar.prototype.getProperty=function(e,t){var n=this.model,i=n.getPropertyDescriptor(e,t);if(i)return i;if(t.includes(":"))return null;const r=n.config.strict;if(typeof r!="undefined"){const o=new TypeError(`unknown property <${t}> on <${e.$type}>`);if(r)throw o;typeof console!="undefined"&&console.warn(o)}return null};function j_(e){return typeof e=="undefined"}function hd(e,t,n){Object.defineProperty(e,t.name,{enumerable:!t.isReference,writable:!0,value:n,configurable:!0})}function wl(e){return e.replace(/^:/,"")}function Vn(e,t={}){this.properties=new Ar(this),this.factory=new ud(this,this.properties),this.registry=new Ji(e,this.properties),this.typeCache={},this.config=t}Vn.prototype.create=function(e,t){var n=this.getType(e);if(!n)throw new Error("unknown type <"+e+">");return new n(t)},Vn.prototype.getType=function(e){var t=this.typeCache,n=ee(e)?e:e.ns.name,i=t[n];return i||(e=this.registry.getEffectiveDescriptor(n),i=t[n]=this.factory.createType(e)),i},Vn.prototype.createAny=function(e,t,n){var i=En(e),r={$type:e,$instanceOf:function(a){return a===this.$type},get:function(a){return this[a]},set:function(a,s){Kt(this,[a],s)}},o={name:e,isGeneric:!0,ns:{prefix:i.prefix,localName:i.localName,uri:t}};return this.properties.defineDescriptor(r,o),this.properties.defineModel(r,this),this.properties.define(r,"get",{enumerable:!1,writable:!0}),this.properties.define(r,"set",{enumerable:!1,writable:!0}),this.properties.define(r,"$parent",{enumerable:!1,writable:!0}),this.properties.define(r,"$instanceOf",{enumerable:!1,writable:!0}),A(n,function(a,s){$(a)&&a.value!==void 0?r[a.name]=a.value:r[s]=a}),r},Vn.prototype.getPackage=function(e){return this.registry.getPackage(e)},Vn.prototype.getPackages=function(){return this.registry.getPackages()},Vn.prototype.getElementDescriptor=function(e){return e.$descriptor},Vn.prototype.hasType=function(e,t){t===void 0&&(t=e,e=this);var n=e.$model.getElementDescriptor(e);return t in n.allTypesByName},Vn.prototype.getPropertyDescriptor=function(e,t){return this.getElementDescriptor(e).propertiesByName[t]},Vn.prototype.getTypeDescriptor=function(e){return this.registry.typeMap[e]};var md=String.fromCharCode,$_=Object.prototype.hasOwnProperty,z_=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/ig,Zo={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};Object.keys(Zo).forEach(function(e){Zo[e.toUpperCase()]=Zo[e]});function H_(e,t,n,i){return i?$_.call(Zo,i)?Zo[i]:"&"+i+";":md(t||parseInt(n,16))}function Tr(e){return e.length>3&&e.indexOf("&")!==-1?e.replace(z_,H_):e}var G_="http://www.w3.org/2001/XMLSchema-instance",U_="xsi",vd="xsi:type",gd="non-whitespace outside of root node";function Qr(e){return new Error(e)}function yd(e){return"missing namespace for prefix <"+e+">"}function is(e){return{get:e,enumerable:!0}}function V_(e){var t={},n;for(n in e)t[n]=e[n];return t}function Sl(e){return e+"$uri"}function Z_(e){var t={},n,i;for(n in e)i=e[n],t[i]=i,t[Sl(i)]=n;return t}function _d(){return{line:0,column:0}}function W_(e){throw e}function bd(e){if(!this)return new bd(e);var t=e&&e.proxy,n,i,r,o,a=W_,s,c,l,u,p=_d,f=!1,d=!1,h=null,v=!1,m;function S(y){y instanceof Error||(y=Qr(y)),h=y,a(y,p)}function x(y){s&&(y instanceof Error||(y=Qr(y)),s(y,p))}this.on=function(y,w){if(typeof w!="function")throw Qr("required args <name, cb>");switch(y){case"openTag":i=w;break;case"text":n=w;break;case"closeTag":r=w;break;case"error":a=w;break;case"warn":s=w;break;case"cdata":o=w;break;case"attention":u=w;break;case"question":l=w;break;case"comment":c=w;break;default:throw Qr("unsupported event: "+y)}return this},this.ns=function(y){if(typeof y=="undefined"&&(y={}),typeof y!="object")throw Qr("required args <nsMap={}>");var w={},R;for(R in y)w[R]=y[R];return w[G_]=U_,d=!0,m=w,this},this.parse=function(y){if(typeof y!="string")throw Qr("required args <xml=string>");return h=null,E(y),p=_d,v=!1,h},this.stop=function(){v=!0};function E(y){var w=d?[]:null,R=d?Z_(m):null,I,T=[],O=0,B=!1,F=!1,z=0,H=0,oe,ke,Ae,Se,It,ht,De,mt,V,W="",ue=0,Ve;function C(){if(Ve!==null)return Ve;var _,D,M,G=d&&R.xmlns,he=d&&f?[]:null,fe=ue,Te=W,lt=Te.length,wn,at,xe,Le,me,He={},Je={},bt,ye,et;e:for(;fe<lt;fe++)if(bt=!1,ye=Te.charCodeAt(fe),!(ye===32||ye<14&&ye>8)){for((ye<65||ye>122||ye>90&&ye<97)&&ye!==95&&ye!==58&&(x("illegal first char attribute name"),bt=!0),et=fe+1;et<lt;et++)if(ye=Te.charCodeAt(et),!(ye>96&&ye<123||ye>64&&ye<91||ye>47&&ye<59||ye===46||ye===45||ye===95)){if(ye===32||ye<14&&ye>8){x("missing attribute value"),fe=et;continue e}if(ye===61)break;x("illegal attribute name char"),bt=!0}if(me=Te.substring(fe,et),me==="xmlns:xmlns"&&(x("illegal declaration of xmlns"),bt=!0),ye=Te.charCodeAt(et+1),ye===34)et=Te.indexOf('"',fe=et+2),et===-1&&(et=Te.indexOf("'",fe),et!==-1&&(x("attribute value quote missmatch"),bt=!0));else if(ye===39)et=Te.indexOf("'",fe=et+2),et===-1&&(et=Te.indexOf('"',fe),et!==-1&&(x("attribute value quote missmatch"),bt=!0));else for(x("missing attribute value quotes"),bt=!0,et=et+1;et<lt&&(ye=Te.charCodeAt(et+1),!(ye===32||ye<14&&ye>8));et++);for(et===-1&&(x("missing closing quotes"),et=lt,bt=!0),bt||(xe=Te.substring(fe,et)),fe=et;et+1<lt&&(ye=Te.charCodeAt(et+1),!(ye===32||ye<14&&ye>8));et++)fe===et&&(x("illegal character after attribute end"),bt=!0);if(fe=et+1,bt)continue e;if(me in Je){x("attribute <"+me+"> already defined");continue}if(Je[me]=!0,!d){He[me]=xe;continue}if(f){if(at=me==="xmlns"?"xmlns":me.charCodeAt(0)===120&&me.substr(0,6)==="xmlns:"?me.substr(6):null,at!==null){if(_=Tr(xe),D=Sl(at),Le=m[_],!Le){if(at==="xmlns"||D in R&&R[D]!==_)do Le="ns"+O++;while(typeof R[Le]!="undefined");else Le=at;m[_]=Le}R[at]!==Le&&(wn||(R=V_(R),wn=!0),R[at]=Le,at==="xmlns"&&(R[Sl(Le)]=_,G=Le),R[D]=_),He[me]=xe;continue}he.push(me,xe);continue}if(ye=me.indexOf(":"),ye===-1){He[me]=xe;continue}if(!(M=R[me.substring(0,ye)])){x(yd(me.substring(0,ye)));continue}me=G===M?me.substr(ye+1):M+me.substr(ye),me===vd&&(ye=xe.indexOf(":"),ye!==-1?(M=xe.substring(0,ye),M=R[M]||M,xe=M+xe.substring(ye)):xe=G+":"+xe),He[me]=xe}if(f)for(fe=0,lt=he.length;fe<lt;fe++){if(me=he[fe++],xe=he[fe],ye=me.indexOf(":"),ye!==-1){if(!(M=R[me.substring(0,ye)])){x(yd(me.substring(0,ye)));continue}me=G===M?me.substr(ye+1):M+me.substr(ye),me===vd&&(ye=xe.indexOf(":"),ye!==-1?(M=xe.substring(0,ye),M=R[M]||M,xe=M+xe.substring(ye)):xe=G+":"+xe)}He[me]=xe}return Ve=He}function g(){for(var _=/(\r\n|\r|\n)/g,D=0,M=0,G=0,he=H,fe,Te;z>=G&&(fe=_.exec(y),!(!fe||(he=fe[0].length+fe.index,he>z)));)D+=1,G=he;return z==-1?(M=he,Te=y.substring(H)):H===0?Te=y.substring(H,z):(M=z-G,Te=H==-1?y.substring(z):y.substring(z,H+1)),{data:Te,line:D,column:M}}for(p=g,t&&(V=Object.create({},{name:is(function(){return De}),originalName:is(function(){return mt}),attrs:is(C),ns:is(function(){return R})}));H!==-1;){if(y.charCodeAt(H)===60?z=H:z=y.indexOf("<",H),z===-1){if(T.length)return S("unexpected end of file");if(H===0)return S("missing start tag");H<y.length&&y.substring(H).trim()&&x(gd);return}if(H!==z){if(T.length){if(n&&(n(y.substring(H,z),Tr,p),v))return}else if(y.substring(H,z).trim()&&(x(gd),v))return}if(Se=y.charCodeAt(z+1),Se===33){if(Ae=y.charCodeAt(z+2),Ae===91&&y.substr(z+3,6)==="CDATA["){if(H=y.indexOf("]]>",z),H===-1)return S("unclosed cdata");if(o&&(o(y.substring(z+9,H),p),v))return;H+=3;continue}if(Ae===45&&y.charCodeAt(z+3)===45){if(H=y.indexOf("-->",z),H===-1)return S("unclosed comment");if(c&&(c(y.substring(z+4,H),Tr,p),v))return;H+=3;continue}}if(Se===63){if(H=y.indexOf("?>",z),H===-1)return S("unclosed question");if(l&&(l(y.substring(z,H+2),p),v))return;H+=2;continue}for(oe=z+1;;oe++){if(It=y.charCodeAt(oe),isNaN(It))return H=-1,S("unclosed tag");if(It===34)Ae=y.indexOf('"',oe+1),oe=Ae!==-1?Ae:oe;else if(It===39)Ae=y.indexOf("'",oe+1),oe=Ae!==-1?Ae:oe;else if(It===62){H=oe;break}}if(Se===33){if(u&&(u(y.substring(z,H+1),Tr,p),v))return;H+=1;continue}if(Ve={},Se===47){if(B=!1,F=!0,!T.length)return S("missing open tag");if(oe=De=T.pop(),Ae=z+2+oe.length,y.substring(z+2,Ae)!==oe)return S("closing tag mismatch");for(;Ae<H;Ae++)if(Se=y.charCodeAt(Ae),!(Se===32||Se>8&&Se<14))return S("close tag")}else{if(y.charCodeAt(H-1)===47?(oe=De=y.substring(z+1,H-1),B=!0,F=!0):(oe=De=y.substring(z+1,H),B=!0,F=!1),!(Se>96&&Se<123||Se>64&&Se<91||Se===95||Se===58))return S("illegal first char nodeName");for(Ae=1,ke=oe.length;Ae<ke;Ae++)if(Se=oe.charCodeAt(Ae),!(Se>96&&Se<123||Se>64&&Se<91||Se>47&&Se<59||Se===45||Se===95||Se==46)){if(Se===32||Se<14&&Se>8){De=oe.substring(0,Ae),Ve=null;break}return S("invalid nodeName")}F||T.push(De)}if(d){if(I=R,B&&(F||w.push(I),Ve===null&&(f=oe.indexOf("xmlns",Ae)!==-1)&&(ue=Ae,W=oe,C(),f=!1)),mt=De,Se=De.indexOf(":"),Se!==-1){if(ht=R[De.substring(0,Se)],!ht)return S("missing namespace on <"+mt+">");De=De.substr(Se+1)}else ht=R.xmlns;ht&&(De=ht+":"+De)}if(B&&(ue=Ae,W=oe,i&&(t?i(V,Tr,F,p):i(De,C,Tr,F,p),v)))return;if(F){if(r&&(r(t?V:De,Tr,B,p),v))return;d&&(B?R=I:R=w.pop())}H+=1}}}function Ed(e){return e.xml&&e.xml.tagAlias==="lowerCase"}var Y_={xsi:"http://www.w3.org/2001/XMLSchema-instance",xml:"http://www.w3.org/XML/1998/namespace"},rs="xsi:type";function xd(e){return e.xml&&e.xml.serialize}function wd(e){return xd(e)===rs}function K_(e){return xd(e)==="property"}function X_(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Sd(e,t){return Ed(t)?e.prefix+":"+X_(e.localName):e.name}function q_(e,t){var n=e.name,i=e.localName,r=t.xml&&t.xml.typePrefix;return r&&i.indexOf(r)===0?e.prefix+":"+i.slice(r.length):n}function Q_(e,t){var n=En(e),i=t.getPackage(n.prefix);return q_(n,i)}function er(e){return new Error(e)}function Ti(e){return e.$descriptor}function J_(e){k(this,e),this.elementsById={},this.references=[],this.warnings=[],this.addReference=function(t){this.references.push(t)},this.addElement=function(t){if(!t)throw er("expected element");var n=this.elementsById,i=Ti(t),r=i.idProperty,o;if(r&&(o=t.get(r.name),o)){if(!/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i.test(o))throw new Error("illegal ID <"+o+">");if(n[o])throw er("duplicate ID <"+o+">");n[o]=t}},this.addWarning=function(t){this.warnings.push(t)}}function Wo(){}Wo.prototype.handleEnd=function(){},Wo.prototype.handleText=function(){},Wo.prototype.handleNode=function(){};function Cl(){}Cl.prototype=Object.create(Wo.prototype),Cl.prototype.handleNode=function(){return this};function Jr(){}Jr.prototype=Object.create(Wo.prototype),Jr.prototype.handleText=function(e){this.body=(this.body||"")+e};function Yo(e,t){this.property=e,this.context=t}Yo.prototype=Object.create(Jr.prototype),Yo.prototype.handleNode=function(e){if(this.element)throw er("expected no sub nodes");return this.element=this.createReference(e),this},Yo.prototype.handleEnd=function(){this.element.id=this.body},Yo.prototype.createReference=function(e){return{property:this.property.ns.name,id:""}};function Pl(e,t){this.element=t,this.propertyDesc=e}Pl.prototype=Object.create(Jr.prototype),Pl.prototype.handleEnd=function(){var e=this.body||"",t=this.element,n=this.propertyDesc;e=El(n.type,e),n.isMany?t.get(n.name).push(e):t.set(n.name,e)};function os(){}os.prototype=Object.create(Jr.prototype),os.prototype.handleNode=function(e){var t=this,n=this.element;return n?t=this.handleChild(e):(n=this.element=this.createElement(e),this.context.addElement(n)),t};function xn(e,t,n){this.model=e,this.type=e.getType(t),this.context=n}xn.prototype=Object.create(os.prototype),xn.prototype.addReference=function(e){this.context.addReference(e)},xn.prototype.handleText=function(e){var t=this.element,n=Ti(t),i=n.bodyProperty;if(!i)throw er("unexpected body text <"+e+">");Jr.prototype.handleText.call(this,e)},xn.prototype.handleEnd=function(){var e=this.body,t=this.element,n=Ti(t),i=n.bodyProperty;i&&e!==void 0&&(e=El(i.type,e),t.set(i.name,e))},xn.prototype.createElement=function(e){var t=e.attributes,n=this.type,i=Ti(n),r=this.context,o=new n({}),a=this.model,s;return A(t,function(c,l){var u=i.propertiesByName[l],p;u&&u.isReference?u.isMany?(p=c.split(" "),A(p,function(f){r.addReference({element:o,property:u.ns.name,id:f})})):r.addReference({element:o,property:u.ns.name,id:c}):(u?c=El(u.type,c):l!=="xmlns"&&(s=En(l,i.ns.prefix),a.getPackage(s.prefix)&&r.addWarning({message:"unknown attribute <"+l+">",element:o,property:l,value:c})),o.set(l,c))}),o},xn.prototype.getPropertyForNode=function(e){var t=e.name,n=En(t),i=this.type,r=this.model,o=Ti(i),a=n.name,s=o.propertiesByName[a],c,l;if(s&&!s.isAttr)return wd(s)&&(c=e.attributes[rs],c)?(c=Q_(c,r),l=r.getType(c),k({},s,{effectiveType:Ti(l).name})):s;var u=r.getPackage(n.prefix);if(u){if(c=Sd(n,u),l=r.getType(c),s=te(o.properties,function(p){return!p.isVirtual&&!p.isReference&&!p.isAttribute&&l.hasType(p.type)}),s)return k({},s,{effectiveType:Ti(l).name})}else if(s=te(o.properties,function(p){return!p.isReference&&!p.isAttribute&&p.type==="Element"}),s)return s;throw er("unrecognized element <"+n.name+">")},xn.prototype.toString=function(){return"ElementDescriptor["+Ti(this.type).name+"]"},xn.prototype.valueHandler=function(e,t){return new Pl(e,t)},xn.prototype.referenceHandler=function(e){return new Yo(e,this.context)},xn.prototype.handler=function(e){return e==="Element"?new eo(this.model,e,this.context):new xn(this.model,e,this.context)},xn.prototype.handleChild=function(e){var t,n,i,r;if(t=this.getPropertyForNode(e),i=this.element,n=t.effectiveType||t.type,fd(n))return this.valueHandler(t,i);t.isReference?r=this.referenceHandler(t).handleNode(e):r=this.handler(n).handleNode(e);var o=r.element;return o!==void 0&&(t.isMany?i.get(t.name).push(o):i.set(t.name,o),t.isReference?(k(o,{element:i}),this.context.addReference(o)):o.$parent=i),r};function Rl(e,t,n){xn.call(this,e,t,n)}Rl.prototype=Object.create(xn.prototype),Rl.prototype.createElement=function(e){var t=e.name,n=En(t),i=this.model,r=this.type,o=i.getPackage(n.prefix),a=o&&Sd(n,o)||t;if(!r.hasType(a))throw er("unexpected element <"+e.originalName+">");return xn.prototype.createElement.call(this,e)};function eo(e,t,n){this.model=e,this.context=n}eo.prototype=Object.create(os.prototype),eo.prototype.createElement=function(e){var t=e.name,n=En(t),i=n.prefix,r=e.ns[i+"$uri"],o=e.attributes;return this.model.createAny(t,r,o)},eo.prototype.handleChild=function(e){var t=new eo(this.model,"Element",this.context).handleNode(e),n=this.element,i=t.element,r;return i!==void 0&&(r=n.$children=n.$children||[],r.push(i),i.$parent=n),t},eo.prototype.handleEnd=function(){this.body&&(this.element.$body=this.body)};function Al(e){e instanceof Vn&&(e={model:e}),k(this,{lax:!1},e)}Al.prototype.fromXML=function(e,t,n){var i=t.rootHandler;t instanceof xn?(i=t,t={}):typeof t=="string"?(i=this.handler(t),t={}):typeof i=="string"&&(i=this.handler(i));var r=this.model,o=this.lax,a=new J_(k({},t,{rootHandler:i})),s=new bd({proxy:!0}),c=eb();i.context=a,c.push(i);function l(w,R,I){var T=R(),O=T.line,B=T.column,F=T.data;F.charAt(0)==="<"&&F.indexOf(" ")!==-1&&(F=F.slice(0,F.indexOf(" "))+">");var z="unparsable content "+(F?F+" ":"")+`detected
	line: `+O+`
	column: `+B+`
	nested error: `+w.message;if(I)return a.addWarning({message:z,error:w}),!0;throw er(z)}function u(w,R){return l(w,R,!0)}function p(){var w=a.elementsById,R=a.references,I,T;for(I=0;T=R[I];I++){var O=T.element,B=w[T.id],F=Ti(O).propertiesByName[T.property];if(B||a.addWarning({message:"unresolved reference <"+T.id+">",element:T.element,property:T.property,value:T.id}),F.isMany){var z=O.get(F.name),H=z.indexOf(T);H===-1&&(H=z.length),B?z[H]=B:z.splice(H,1)}else O.set(F.name,B)}}function f(){c.pop().handleEnd()}var d=/^<\?xml /i,h=/ encoding="([^"]+)"/i,v=/^utf-8$/i;function m(w){if(d.test(w)){var R=h.exec(w),I=R&&R[1];!I||v.test(I)||a.addWarning({message:"unsupported document encoding <"+I+">, falling back to UTF-8"})}}function S(w,R){var I=c.peek();try{c.push(I.handleNode(w))}catch(T){l(T,R,o)&&c.push(new Cl)}}function x(w,R){try{c.peek().handleText(w)}catch(I){u(I,R)}}function E(w,R){w.trim()&&x(w,R)}var y=r.getPackages().reduce(function(w,R){return w[R.uri]=R.prefix,w},{"http://www.w3.org/XML/1998/namespace":"xml"});return s.ns(y).on("openTag",function(w,R,I,T){var O=w.attrs||{},B=Object.keys(O).reduce(function(z,H){var oe=R(O[H]);return z[H]=oe,z},{}),F={name:w.name,originalName:w.originalName,attributes:B,ns:w.ns};S(F,T)}).on("question",m).on("closeTag",f).on("cdata",x).on("text",function(w,R,I){E(R(w),I)}).on("error",l).on("warn",u),new Promise(function(w,R){var I;try{s.parse(e),p()}catch(z){I=z}var T=i.element;!I&&!T&&(I=er("failed to parse document as <"+i.type.$descriptor.name+">"));var O=a.warnings,B=a.references,F=a.elementsById;return I?(I.warnings=O,R(I)):w({rootElement:T,elementsById:F,references:B,warnings:O})})},Al.prototype.handler=function(e){return new Rl(this.model,e)};function eb(){var e=[];return Object.defineProperty(e,"peek",{value:function(){return this[this.length-1]}}),e}var tb=`<?xml version="1.0" encoding="UTF-8"?>
`,nb=/<|>|'|"|&|\n\r|\n/g,Cd=/<|>|&/g;function ib(e){var t={},n={},i={},r=[],o=[];this.byUri=function(a){return n[a]||e&&e.byUri(a)},this.add=function(a,s){n[a.uri]=a,s?r.push(a):o.push(a),this.mapPrefix(a.prefix,a.uri)},this.uriByPrefix=function(a){return t[a||"xmlns"]},this.mapPrefix=function(a,s){t[a||"xmlns"]=s},this.getNSKey=function(a){return a.prefix!==void 0?a.uri+"|"+a.prefix:a.uri},this.logUsed=function(a){var s=a.uri,c=this.getNSKey(a);i[c]=this.byUri(s),e&&e.logUsed(a)},this.getUsed=function(a){function s(u){var p=c.getNSKey(u);return i[p]}var c=this,l=[].concat(r,o);return l.filter(s)}}function rb(e){return e.charAt(0).toLowerCase()+e.slice(1)}function ob(e,t){return Ed(t)?rb(e):e}function Pd(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function Rd(e){return ee(e)?e:(e.prefix?e.prefix+":":"")+e.localName}function ab(e){return e.getUsed().filter(function(t){return t.prefix!=="xml"}).map(function(t){var n="xmlns"+(t.prefix?":"+t.prefix:"");return{name:n,value:t.uri}})}function sb(e,t){return t.isGeneric?k({localName:t.ns.localName},e):k({localName:ob(t.ns.localName,t.$pkg)},e)}function cb(e,t){return k({localName:t.ns.localName},e)}function lb(e){var t=e.$descriptor;return ne(t.properties,function(n){var i=n.name;if(n.isVirtual||!U(e,i))return!1;var r=e[i];return r===n.default||r===null?!1:n.isMany?r.length:!0})}var ub={"\n":"#10","\n\r":"#10",'"':"#34","'":"#39","<":"#60",">":"#62","&":"#38"},pb={"<":"lt",">":"gt","&":"amp"};function Ad(e,t,n){return e=ee(e)?e:""+e,e.replace(t,function(i){return"&"+n[i]+";"})}function fb(e){return Ad(e,nb,ub)}function db(e){return Ad(e,Cd,pb)}function hb(e){return ne(e,function(t){return t.isAttr})}function mb(e){return ne(e,function(t){return!t.isAttr})}function Tl(e){this.tagName=e}Tl.prototype.build=function(e){return this.element=e,this},Tl.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"+this.element.id+"</"+this.tagName+">").appendNewLine()};function Dr(){}Dr.prototype.serializeValue=Dr.prototype.serializeTo=function(e){e.append(this.escape?db(this.value):this.value)},Dr.prototype.build=function(e,t){return this.value=t,e.type==="String"&&t.search(Cd)!==-1&&(this.escape=!0),this};function Dl(e){this.tagName=e}Pd(Dl,Dr),Dl.prototype.serializeTo=function(e){e.appendIndent().append("<"+this.tagName+">"),this.serializeValue(e),e.append("</"+this.tagName+">").appendNewLine()};function Et(e,t){this.body=[],this.attrs=[],this.parent=e,this.propertyDescriptor=t}Et.prototype.build=function(e){this.element=e;var t=e.$descriptor,n=this.propertyDescriptor,i,r,o=t.isGeneric;return o?i=this.parseGeneric(e):i=this.parseNsAttributes(e),n?this.ns=this.nsPropertyTagName(n):this.ns=this.nsTagName(t),this.tagName=this.addTagName(this.ns),o||(r=lb(e),this.parseAttributes(hb(r)),this.parseContainments(mb(r))),this.parseGenericAttributes(e,i),this},Et.prototype.nsTagName=function(e){var t=this.logNamespaceUsed(e.ns);return sb(t,e)},Et.prototype.nsPropertyTagName=function(e){var t=this.logNamespaceUsed(e.ns);return cb(t,e)},Et.prototype.isLocalNs=function(e){return e.uri===this.ns.uri},Et.prototype.nsAttributeName=function(e){var t;if(ee(e)?t=En(e):t=e.ns,e.inherited)return{localName:t.localName};var n=this.logNamespaceUsed(t);return this.getNamespaces().logUsed(n),this.isLocalNs(n)?{localName:t.localName}:k({localName:t.localName},n)},Et.prototype.parseGeneric=function(e){var t=this,n=this.body,i=[];return A(e,function(r,o){var a;o==="$body"?n.push(new Dr().build({type:"String"},r)):o==="$children"?A(r,function(s){n.push(new Et(t).build(s))}):o.indexOf("$")!==0&&(a=t.parseNsAttribute(e,o,r),a&&i.push({name:o,value:r}))}),i},Et.prototype.parseNsAttribute=function(e,t,n){var i=e.$model,r=En(t),o;if(r.prefix==="xmlns"&&(o={prefix:r.localName,uri:n}),!r.prefix&&r.localName==="xmlns"&&(o={uri:n}),!o)return{name:t,value:n};if(i&&i.getPackage(n))this.logNamespace(o,!0,!0);else{var a=this.logNamespaceUsed(o,!0);this.getNamespaces().logUsed(a)}},Et.prototype.parseNsAttributes=function(e,t){var n=this,i=e.$attrs,r=[];return A(i,function(o,a){var s=n.parseNsAttribute(e,a,o);s&&r.push(s)}),r},Et.prototype.parseGenericAttributes=function(e,t){var n=this;A(t,function(i){if(i.name!==rs)try{n.addAttribute(n.nsAttributeName(i.name),i.value)}catch(r){console.warn("missing namespace information for ",i.name,"=",i.value,"on",e,r)}})},Et.prototype.parseContainments=function(e){var t=this,n=this.body,i=this.element;A(e,function(r){var o=i.get(r.name),a=r.isReference,s=r.isMany;if(s||(o=[o]),r.isBody)n.push(new Dr().build(r,o[0]));else if(fd(r.type))A(o,function(u){n.push(new Dl(t.addTagName(t.nsPropertyTagName(r))).build(r,u))});else if(a)A(o,function(u){n.push(new Tl(t.addTagName(t.nsPropertyTagName(r))).build(u))});else{var c=wd(r),l=K_(r);A(o,function(u){var p;c?p=new as(t,r):l?p=new Et(t,r):p=new Et(t),n.push(p.build(u))})}})},Et.prototype.getNamespaces=function(e){var t=this.namespaces,n=this.parent,i;return t||(i=n&&n.getNamespaces(),e||!i?this.namespaces=t=new ib(i):t=i),t},Et.prototype.logNamespace=function(e,t,n){var i=this.getNamespaces(n),r=e.uri,o=e.prefix,a=i.byUri(r);return(!a||n)&&i.add(e,t),i.mapPrefix(o,r),e},Et.prototype.logNamespaceUsed=function(e,t){var n=this.element,i=n.$model,r=this.getNamespaces(t),o=e.prefix,a=e.uri,s,c,l;if(!o&&!a)return{localName:e.localName};if(l=Y_[o]||i&&(i.getPackage(o)||{}).uri,a=a||l||r.uriByPrefix(o),!a)throw new Error("no namespace uri given for prefix <"+o+">");if(e=r.byUri(a),!e){for(s=o,c=1;r.uriByPrefix(s);)s=o+"_"+c++;e=this.logNamespace({prefix:s,uri:a},l===a)}return o&&r.mapPrefix(o,a),e},Et.prototype.parseAttributes=function(e){var t=this,n=this.element;A(e,function(i){var r=n.get(i.name);if(i.isReference)if(!i.isMany)r=r.id;else{var o=[];A(r,function(a){o.push(a.id)}),r=o.join(" ")}t.addAttribute(t.nsAttributeName(i),r)})},Et.prototype.addTagName=function(e){var t=this.logNamespaceUsed(e);return this.getNamespaces().logUsed(t),Rd(e)},Et.prototype.addAttribute=function(e,t){var n=this.attrs;ee(t)&&(t=fb(t));var i=ae(n,function(o){return o.name.localName===e.localName&&o.name.uri===e.uri&&o.name.prefix===e.prefix}),r={name:e,value:t};i!==-1?n.splice(i,1,r):n.push(r)},Et.prototype.serializeAttributes=function(e){var t=this.attrs,n=this.namespaces;n&&(t=ab(n).concat(t)),A(t,function(i){e.append(" ").append(Rd(i.name)).append('="').append(i.value).append('"')})},Et.prototype.serializeTo=function(e){var t=this.body[0],n=t&&t.constructor!==Dr;e.appendIndent().append("<"+this.tagName),this.serializeAttributes(e),e.append(t?">":" />"),t&&(n&&e.appendNewLine().indent(),A(this.body,function(i){i.serializeTo(e)}),n&&e.unindent().appendIndent(),e.append("</"+this.tagName+">")),e.appendNewLine()};function as(e,t){Et.call(this,e,t)}Pd(as,Et),as.prototype.parseNsAttributes=function(e){var t=Et.prototype.parseNsAttributes.call(this,e),n=e.$descriptor;if(n.name===this.propertyDescriptor.type)return t;var i=this.typeNs=this.nsTagName(n);this.getNamespaces().logUsed(this.typeNs);var r=e.$model.getPackage(i.uri),o=r.xml&&r.xml.typePrefix||"";return this.addAttribute(this.nsAttributeName(rs),(i.prefix?i.prefix+":":"")+o+n.ns.localName),t},as.prototype.isLocalNs=function(e){return e.uri===(this.typeNs||this.ns).uri};function vb(){this.value="",this.write=function(e){this.value+=e}}function gb(e,t){var n=[""];this.append=function(i){return e.write(i),this},this.appendNewLine=function(){return t&&e.write(`
`),this},this.appendIndent=function(){return t&&e.write(n.join("  ")),this},this.indent=function(){return n.push(""),this},this.unindent=function(){return n.pop(),this}}function yb(e){e=k({format:!1,preamble:!0},e||{});function t(n,i){var r=i||new vb,o=new gb(r,e.format);if(e.preamble&&o.append(tb),new Et().build(n).serializeTo(o),!i)return r.value}return{toXML:t}}function ss(e,t){Vn.call(this,e,t)}ss.prototype=Object.create(Vn.prototype),ss.prototype.fromXML=function(e,t,n){ee(t)||(n=t,t="bpmn:Definitions");var i=new Al(k({model:this,lax:!0},n)),r=i.handler(t);return i.fromXML(e,r)},ss.prototype.toXML=function(e,t){var n=new yb(t);return new Promise(function(i,r){try{var o=n.toXML(e);return i({xml:o})}catch(a){return r(a)}})};var _b="BPMN20",bb="http://www.omg.org/spec/BPMN/20100524/MODEL",Eb="bpmn",xb=[],wb=[{name:"Interface",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"operations",type:"Operation",isMany:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"Operation",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"inMessageRef",type:"Message",isReference:!0},{name:"outMessageRef",type:"Message",isReference:!0},{name:"errorRef",type:"Error",isMany:!0,isReference:!0},{name:"implementationRef",isAttr:!0,type:"String"}]},{name:"EndPoint",superClass:["RootElement"]},{name:"Auditing",superClass:["BaseElement"]},{name:"GlobalTask",superClass:["CallableElement"],properties:[{name:"resources",type:"ResourceRole",isMany:!0}]},{name:"Monitoring",superClass:["BaseElement"]},{name:"Performer",superClass:["ResourceRole"]},{name:"Process",superClass:["FlowElementsContainer","CallableElement"],properties:[{name:"processType",type:"ProcessType",isAttr:!0},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"properties",type:"Property",isMany:!0},{name:"laneSets",isMany:!0,replaces:"FlowElementsContainer#laneSets",type:"LaneSet"},{name:"flowElements",isMany:!0,replaces:"FlowElementsContainer#flowElements",type:"FlowElement"},{name:"artifacts",type:"Artifact",isMany:!0},{name:"resources",type:"ResourceRole",isMany:!0},{name:"correlationSubscriptions",type:"CorrelationSubscription",isMany:!0},{name:"supports",type:"Process",isMany:!0,isReference:!0},{name:"definitionalCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"isExecutable",isAttr:!0,type:"Boolean"}]},{name:"LaneSet",superClass:["BaseElement"],properties:[{name:"lanes",type:"Lane",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Lane",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"partitionElementRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"partitionElement",type:"BaseElement"},{name:"flowNodeRef",type:"FlowNode",isMany:!0,isReference:!0},{name:"childLaneSet",type:"LaneSet",xml:{serialize:"xsi:type"}}]},{name:"GlobalManualTask",superClass:["GlobalTask"]},{name:"ManualTask",superClass:["Task"]},{name:"UserTask",superClass:["Task"],properties:[{name:"renderings",type:"Rendering",isMany:!0},{name:"implementation",isAttr:!0,type:"String"}]},{name:"Rendering",superClass:["BaseElement"]},{name:"HumanPerformer",superClass:["Performer"]},{name:"PotentialOwner",superClass:["HumanPerformer"]},{name:"GlobalUserTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"renderings",type:"Rendering",isMany:!0}]},{name:"Gateway",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"gatewayDirection",type:"GatewayDirection",default:"Unspecified",isAttr:!0}]},{name:"EventBasedGateway",superClass:["Gateway"],properties:[{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"eventGatewayType",type:"EventBasedGatewayType",isAttr:!0,default:"Exclusive"}]},{name:"ComplexGateway",superClass:["Gateway"],properties:[{name:"activationCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ExclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"InclusiveGateway",superClass:["Gateway"],properties:[{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0}]},{name:"ParallelGateway",superClass:["Gateway"]},{name:"RootElement",isAbstract:!0,superClass:["BaseElement"]},{name:"Relationship",superClass:["BaseElement"],properties:[{name:"type",isAttr:!0,type:"String"},{name:"direction",type:"RelationshipDirection",isAttr:!0},{name:"source",isMany:!0,isReference:!0,type:"Element"},{name:"target",isMany:!0,isReference:!0,type:"Element"}]},{name:"BaseElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,type:"String",isId:!0},{name:"documentation",type:"Documentation",isMany:!0},{name:"extensionDefinitions",type:"ExtensionDefinition",isMany:!0,isReference:!0},{name:"extensionElements",type:"ExtensionElements"}]},{name:"Extension",properties:[{name:"mustUnderstand",default:!1,isAttr:!0,type:"Boolean"},{name:"definition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"extensionAttributeDefinitions",type:"ExtensionAttributeDefinition",isMany:!0}]},{name:"ExtensionAttributeDefinition",properties:[{name:"name",isAttr:!0,type:"String"},{name:"type",isAttr:!0,type:"String"},{name:"isReference",default:!1,isAttr:!0,type:"Boolean"},{name:"extensionDefinition",type:"ExtensionDefinition",isAttr:!0,isReference:!0}]},{name:"ExtensionElements",properties:[{name:"valueRef",isAttr:!0,isReference:!0,type:"Element"},{name:"values",type:"Element",isMany:!0},{name:"extensionAttributeDefinition",type:"ExtensionAttributeDefinition",isAttr:!0,isReference:!0}]},{name:"Documentation",superClass:["BaseElement"],properties:[{name:"text",type:"String",isBody:!0},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Event",isAbstract:!0,superClass:["FlowNode","InteractionNode"],properties:[{name:"properties",type:"Property",isMany:!0}]},{name:"IntermediateCatchEvent",superClass:["CatchEvent"]},{name:"IntermediateThrowEvent",superClass:["ThrowEvent"]},{name:"EndEvent",superClass:["ThrowEvent"]},{name:"StartEvent",superClass:["CatchEvent"],properties:[{name:"isInterrupting",default:!0,isAttr:!0,type:"Boolean"}]},{name:"ThrowEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"inputSet",type:"InputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"CatchEvent",isAbstract:!0,superClass:["Event"],properties:[{name:"parallelMultiple",isAttr:!0,type:"Boolean",default:!1},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"outputSet",type:"OutputSet"},{name:"eventDefinitions",type:"EventDefinition",isMany:!0},{name:"eventDefinitionRef",type:"EventDefinition",isMany:!0,isReference:!0}]},{name:"BoundaryEvent",superClass:["CatchEvent"],properties:[{name:"cancelActivity",default:!0,isAttr:!0,type:"Boolean"},{name:"attachedToRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"EventDefinition",isAbstract:!0,superClass:["RootElement"]},{name:"CancelEventDefinition",superClass:["EventDefinition"]},{name:"ErrorEventDefinition",superClass:["EventDefinition"],properties:[{name:"errorRef",type:"Error",isAttr:!0,isReference:!0}]},{name:"TerminateEventDefinition",superClass:["EventDefinition"]},{name:"EscalationEventDefinition",superClass:["EventDefinition"],properties:[{name:"escalationRef",type:"Escalation",isAttr:!0,isReference:!0}]},{name:"Escalation",properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"escalationCode",isAttr:!0,type:"String"}],superClass:["RootElement"]},{name:"CompensateEventDefinition",superClass:["EventDefinition"],properties:[{name:"waitForCompletion",isAttr:!0,type:"Boolean",default:!0},{name:"activityRef",type:"Activity",isAttr:!0,isReference:!0}]},{name:"TimerEventDefinition",superClass:["EventDefinition"],properties:[{name:"timeDate",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeCycle",type:"Expression",xml:{serialize:"xsi:type"}},{name:"timeDuration",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"LinkEventDefinition",superClass:["EventDefinition"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"target",type:"LinkEventDefinition",isReference:!0},{name:"source",type:"LinkEventDefinition",isMany:!0,isReference:!0}]},{name:"MessageEventDefinition",superClass:["EventDefinition"],properties:[{name:"messageRef",type:"Message",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"ConditionalEventDefinition",superClass:["EventDefinition"],properties:[{name:"condition",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"SignalEventDefinition",superClass:["EventDefinition"],properties:[{name:"signalRef",type:"Signal",isAttr:!0,isReference:!0}]},{name:"Signal",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ImplicitThrowEvent",superClass:["ThrowEvent"]},{name:"DataState",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"ItemAwareElement",superClass:["BaseElement"],properties:[{name:"itemSubjectRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"dataState",type:"DataState"}]},{name:"DataAssociation",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"ItemAwareElement",isMany:!0,isReference:!0},{name:"targetRef",type:"ItemAwareElement",isReference:!0},{name:"transformation",type:"FormalExpression",xml:{serialize:"property"}},{name:"assignment",type:"Assignment",isMany:!0}]},{name:"DataInput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"inputSetRef",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithOptional",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"inputSetWithWhileExecuting",type:"InputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"DataOutput",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"outputSetRef",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithOptional",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0},{name:"outputSetWithWhileExecuting",type:"OutputSet",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"InputSet",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"dataInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"optionalInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"whileExecutingInputRefs",type:"DataInput",isMany:!0,isReference:!0},{name:"outputSetRefs",type:"OutputSet",isMany:!0,isReference:!0}]},{name:"OutputSet",superClass:["BaseElement"],properties:[{name:"dataOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"inputSetRefs",type:"InputSet",isMany:!0,isReference:!0},{name:"optionalOutputRefs",type:"DataOutput",isMany:!0,isReference:!0},{name:"whileExecutingOutputRefs",type:"DataOutput",isMany:!0,isReference:!0}]},{name:"Property",superClass:["ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"}]},{name:"DataInputAssociation",superClass:["DataAssociation"]},{name:"DataOutputAssociation",superClass:["DataAssociation"]},{name:"InputOutputSpecification",superClass:["BaseElement"],properties:[{name:"dataInputs",type:"DataInput",isMany:!0},{name:"dataOutputs",type:"DataOutput",isMany:!0},{name:"inputSets",type:"InputSet",isMany:!0},{name:"outputSets",type:"OutputSet",isMany:!0}]},{name:"DataObject",superClass:["FlowElement","ItemAwareElement"],properties:[{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"}]},{name:"InputOutputBinding",properties:[{name:"inputDataRef",type:"InputSet",isAttr:!0,isReference:!0},{name:"outputDataRef",type:"OutputSet",isAttr:!0,isReference:!0},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"Assignment",superClass:["BaseElement"],properties:[{name:"from",type:"Expression",xml:{serialize:"xsi:type"}},{name:"to",type:"Expression",xml:{serialize:"xsi:type"}}]},{name:"DataStore",superClass:["RootElement","ItemAwareElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"capacity",isAttr:!0,type:"Integer"},{name:"isUnlimited",default:!0,isAttr:!0,type:"Boolean"}]},{name:"DataStoreReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataStoreRef",type:"DataStore",isAttr:!0,isReference:!0}]},{name:"DataObjectReference",superClass:["ItemAwareElement","FlowElement"],properties:[{name:"dataObjectRef",type:"DataObject",isAttr:!0,isReference:!0}]},{name:"ConversationLink",superClass:["BaseElement"],properties:[{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"ConversationAssociation",superClass:["BaseElement"],properties:[{name:"innerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0},{name:"outerConversationNodeRef",type:"ConversationNode",isAttr:!0,isReference:!0}]},{name:"CallConversation",superClass:["ConversationNode"],properties:[{name:"calledCollaborationRef",type:"Collaboration",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"Conversation",superClass:["ConversationNode"]},{name:"SubConversation",superClass:["ConversationNode"],properties:[{name:"conversationNodes",type:"ConversationNode",isMany:!0}]},{name:"ConversationNode",isAbstract:!0,superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"messageFlowRefs",type:"MessageFlow",isMany:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0}]},{name:"GlobalConversation",superClass:["Collaboration"]},{name:"PartnerEntity",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"PartnerRole",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"participantRef",type:"Participant",isMany:!0,isReference:!0}]},{name:"CorrelationProperty",superClass:["RootElement"],properties:[{name:"correlationPropertyRetrievalExpression",type:"CorrelationPropertyRetrievalExpression",isMany:!0},{name:"name",isAttr:!0,type:"String"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Error",superClass:["RootElement"],properties:[{name:"structureRef",type:"ItemDefinition",isAttr:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"},{name:"errorCode",isAttr:!0,type:"String"}]},{name:"CorrelationKey",superClass:["BaseElement"],properties:[{name:"correlationPropertyRef",type:"CorrelationProperty",isMany:!0,isReference:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Expression",superClass:["BaseElement"],isAbstract:!1,properties:[{name:"body",isBody:!0,type:"String"}]},{name:"FormalExpression",superClass:["Expression"],properties:[{name:"language",isAttr:!0,type:"String"},{name:"evaluatesToTypeRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"Message",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"itemRef",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"ItemDefinition",superClass:["RootElement"],properties:[{name:"itemKind",type:"ItemKind",isAttr:!0},{name:"structureRef",isAttr:!0,type:"String"},{name:"isCollection",default:!1,isAttr:!0,type:"Boolean"},{name:"import",type:"Import",isAttr:!0,isReference:!0}]},{name:"FlowElement",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"auditing",type:"Auditing"},{name:"monitoring",type:"Monitoring"},{name:"categoryValueRef",type:"CategoryValue",isMany:!0,isReference:!0}]},{name:"SequenceFlow",superClass:["FlowElement"],properties:[{name:"isImmediate",isAttr:!0,type:"Boolean"},{name:"conditionExpression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"sourceRef",type:"FlowNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"FlowNode",isAttr:!0,isReference:!0}]},{name:"FlowElementsContainer",isAbstract:!0,superClass:["BaseElement"],properties:[{name:"laneSets",type:"LaneSet",isMany:!0},{name:"flowElements",type:"FlowElement",isMany:!0}]},{name:"CallableElement",isAbstract:!0,superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"supportedInterfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"ioBinding",type:"InputOutputBinding",isMany:!0,xml:{serialize:"property"}}]},{name:"FlowNode",isAbstract:!0,superClass:["FlowElement"],properties:[{name:"incoming",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"outgoing",type:"SequenceFlow",isMany:!0,isReference:!0},{name:"lanes",type:"Lane",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"CorrelationPropertyRetrievalExpression",superClass:["BaseElement"],properties:[{name:"messagePath",type:"FormalExpression"},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"CorrelationPropertyBinding",superClass:["BaseElement"],properties:[{name:"dataPath",type:"FormalExpression"},{name:"correlationPropertyRef",type:"CorrelationProperty",isAttr:!0,isReference:!0}]},{name:"Resource",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"resourceParameters",type:"ResourceParameter",isMany:!0}]},{name:"ResourceParameter",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isRequired",isAttr:!0,type:"Boolean"},{name:"type",type:"ItemDefinition",isAttr:!0,isReference:!0}]},{name:"CorrelationSubscription",superClass:["BaseElement"],properties:[{name:"correlationKeyRef",type:"CorrelationKey",isAttr:!0,isReference:!0},{name:"correlationPropertyBinding",type:"CorrelationPropertyBinding",isMany:!0}]},{name:"MessageFlow",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"sourceRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"targetRef",type:"InteractionNode",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"MessageFlowAssociation",superClass:["BaseElement"],properties:[{name:"innerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0},{name:"outerMessageFlowRef",type:"MessageFlow",isAttr:!0,isReference:!0}]},{name:"InteractionNode",isAbstract:!0,properties:[{name:"incomingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0},{name:"outgoingConversationLinks",type:"ConversationLink",isMany:!0,isVirtual:!0,isReference:!0}]},{name:"Participant",superClass:["InteractionNode","BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"interfaceRef",type:"Interface",isMany:!0,isReference:!0},{name:"participantMultiplicity",type:"ParticipantMultiplicity"},{name:"endPointRefs",type:"EndPoint",isMany:!0,isReference:!0},{name:"processRef",type:"Process",isAttr:!0,isReference:!0}]},{name:"ParticipantAssociation",superClass:["BaseElement"],properties:[{name:"innerParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"outerParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"ParticipantMultiplicity",properties:[{name:"minimum",default:0,isAttr:!0,type:"Integer"},{name:"maximum",default:1,isAttr:!0,type:"Integer"}],superClass:["BaseElement"]},{name:"Collaboration",superClass:["RootElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"isClosed",isAttr:!0,type:"Boolean"},{name:"participants",type:"Participant",isMany:!0},{name:"messageFlows",type:"MessageFlow",isMany:!0},{name:"artifacts",type:"Artifact",isMany:!0},{name:"conversations",type:"ConversationNode",isMany:!0},{name:"conversationAssociations",type:"ConversationAssociation"},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0},{name:"messageFlowAssociations",type:"MessageFlowAssociation",isMany:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"choreographyRef",type:"Choreography",isMany:!0,isReference:!0},{name:"conversationLinks",type:"ConversationLink",isMany:!0}]},{name:"ChoreographyActivity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"participantRef",type:"Participant",isMany:!0,isReference:!0},{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0},{name:"correlationKeys",type:"CorrelationKey",isMany:!0},{name:"loopType",type:"ChoreographyLoopType",default:"None",isAttr:!0}]},{name:"CallChoreography",superClass:["ChoreographyActivity"],properties:[{name:"calledChoreographyRef",type:"Choreography",isAttr:!0,isReference:!0},{name:"participantAssociations",type:"ParticipantAssociation",isMany:!0}]},{name:"SubChoreography",superClass:["ChoreographyActivity","FlowElementsContainer"],properties:[{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"ChoreographyTask",superClass:["ChoreographyActivity"],properties:[{name:"messageFlowRef",type:"MessageFlow",isMany:!0,isReference:!0}]},{name:"Choreography",superClass:["Collaboration","FlowElementsContainer"]},{name:"GlobalChoreographyTask",superClass:["Choreography"],properties:[{name:"initiatingParticipantRef",type:"Participant",isAttr:!0,isReference:!0}]},{name:"TextAnnotation",superClass:["Artifact"],properties:[{name:"text",type:"String"},{name:"textFormat",default:"text/plain",isAttr:!0,type:"String"}]},{name:"Group",superClass:["Artifact"],properties:[{name:"categoryValueRef",type:"CategoryValue",isAttr:!0,isReference:!0}]},{name:"Association",superClass:["Artifact"],properties:[{name:"associationDirection",type:"AssociationDirection",isAttr:!0},{name:"sourceRef",type:"BaseElement",isAttr:!0,isReference:!0},{name:"targetRef",type:"BaseElement",isAttr:!0,isReference:!0}]},{name:"Category",superClass:["RootElement"],properties:[{name:"categoryValue",type:"CategoryValue",isMany:!0},{name:"name",isAttr:!0,type:"String"}]},{name:"Artifact",isAbstract:!0,superClass:["BaseElement"]},{name:"CategoryValue",superClass:["BaseElement"],properties:[{name:"categorizedFlowElements",type:"FlowElement",isMany:!0,isVirtual:!0,isReference:!0},{name:"value",isAttr:!0,type:"String"}]},{name:"Activity",isAbstract:!0,superClass:["FlowNode"],properties:[{name:"isForCompensation",default:!1,isAttr:!0,type:"Boolean"},{name:"default",type:"SequenceFlow",isAttr:!0,isReference:!0},{name:"ioSpecification",type:"InputOutputSpecification",xml:{serialize:"property"}},{name:"boundaryEventRefs",type:"BoundaryEvent",isMany:!0,isReference:!0},{name:"properties",type:"Property",isMany:!0},{name:"dataInputAssociations",type:"DataInputAssociation",isMany:!0},{name:"dataOutputAssociations",type:"DataOutputAssociation",isMany:!0},{name:"startQuantity",default:1,isAttr:!0,type:"Integer"},{name:"resources",type:"ResourceRole",isMany:!0},{name:"completionQuantity",default:1,isAttr:!0,type:"Integer"},{name:"loopCharacteristics",type:"LoopCharacteristics"}]},{name:"ServiceTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0}]},{name:"SubProcess",superClass:["Activity","FlowElementsContainer","InteractionNode"],properties:[{name:"triggeredByEvent",default:!1,isAttr:!0,type:"Boolean"},{name:"artifacts",type:"Artifact",isMany:!0}]},{name:"LoopCharacteristics",isAbstract:!0,superClass:["BaseElement"]},{name:"MultiInstanceLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"isSequential",default:!1,isAttr:!0,type:"Boolean"},{name:"behavior",type:"MultiInstanceBehavior",default:"All",isAttr:!0},{name:"loopCardinality",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopDataInputRef",type:"ItemAwareElement",isReference:!0},{name:"loopDataOutputRef",type:"ItemAwareElement",isReference:!0},{name:"inputDataItem",type:"DataInput",xml:{serialize:"property"}},{name:"outputDataItem",type:"DataOutput",xml:{serialize:"property"}},{name:"complexBehaviorDefinition",type:"ComplexBehaviorDefinition",isMany:!0},{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"oneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0},{name:"noneBehaviorEventRef",type:"EventDefinition",isAttr:!0,isReference:!0}]},{name:"StandardLoopCharacteristics",superClass:["LoopCharacteristics"],properties:[{name:"testBefore",default:!1,isAttr:!0,type:"Boolean"},{name:"loopCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"loopMaximum",type:"Integer",isAttr:!0}]},{name:"CallActivity",superClass:["Activity","InteractionNode"],properties:[{name:"calledElement",type:"String",isAttr:!0}]},{name:"Task",superClass:["Activity","InteractionNode"]},{name:"SendTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ReceiveTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"},{name:"instantiate",default:!1,isAttr:!0,type:"Boolean"},{name:"operationRef",type:"Operation",isAttr:!0,isReference:!0},{name:"messageRef",type:"Message",isAttr:!0,isReference:!0}]},{name:"ScriptTask",superClass:["Task"],properties:[{name:"scriptFormat",isAttr:!0,type:"String"},{name:"script",type:"String"}]},{name:"BusinessRuleTask",superClass:["Task"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"AdHocSubProcess",superClass:["SubProcess"],properties:[{name:"completionCondition",type:"Expression",xml:{serialize:"xsi:type"}},{name:"ordering",type:"AdHocOrdering",isAttr:!0},{name:"cancelRemainingInstances",default:!0,isAttr:!0,type:"Boolean"}]},{name:"Transaction",superClass:["SubProcess"],properties:[{name:"protocol",isAttr:!0,type:"String"},{name:"method",isAttr:!0,type:"String"}]},{name:"GlobalScriptTask",superClass:["GlobalTask"],properties:[{name:"scriptLanguage",isAttr:!0,type:"String"},{name:"script",isAttr:!0,type:"String"}]},{name:"GlobalBusinessRuleTask",superClass:["GlobalTask"],properties:[{name:"implementation",isAttr:!0,type:"String"}]},{name:"ComplexBehaviorDefinition",superClass:["BaseElement"],properties:[{name:"condition",type:"FormalExpression"},{name:"event",type:"ImplicitThrowEvent"}]},{name:"ResourceRole",superClass:["BaseElement"],properties:[{name:"resourceRef",type:"Resource",isReference:!0},{name:"resourceParameterBindings",type:"ResourceParameterBinding",isMany:!0},{name:"resourceAssignmentExpression",type:"ResourceAssignmentExpression"},{name:"name",isAttr:!0,type:"String"}]},{name:"ResourceParameterBinding",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}},{name:"parameterRef",type:"ResourceParameter",isAttr:!0,isReference:!0}],superClass:["BaseElement"]},{name:"ResourceAssignmentExpression",properties:[{name:"expression",type:"Expression",xml:{serialize:"xsi:type"}}],superClass:["BaseElement"]},{name:"Import",properties:[{name:"importType",isAttr:!0,type:"String"},{name:"location",isAttr:!0,type:"String"},{name:"namespace",isAttr:!0,type:"String"}]},{name:"Definitions",superClass:["BaseElement"],properties:[{name:"name",isAttr:!0,type:"String"},{name:"targetNamespace",isAttr:!0,type:"String"},{name:"expressionLanguage",default:"http://www.w3.org/1999/XPath",isAttr:!0,type:"String"},{name:"typeLanguage",default:"http://www.w3.org/2001/XMLSchema",isAttr:!0,type:"String"},{name:"imports",type:"Import",isMany:!0},{name:"extensions",type:"Extension",isMany:!0},{name:"rootElements",type:"RootElement",isMany:!0},{name:"diagrams",isMany:!0,type:"bpmndi:BPMNDiagram"},{name:"exporter",isAttr:!0,type:"String"},{name:"relationships",type:"Relationship",isMany:!0},{name:"exporterVersion",isAttr:!0,type:"String"}]}],Sb=[{name:"ProcessType",literalValues:[{name:"None"},{name:"Public"},{name:"Private"}]},{name:"GatewayDirection",literalValues:[{name:"Unspecified"},{name:"Converging"},{name:"Diverging"},{name:"Mixed"}]},{name:"EventBasedGatewayType",literalValues:[{name:"Parallel"},{name:"Exclusive"}]},{name:"RelationshipDirection",literalValues:[{name:"None"},{name:"Forward"},{name:"Backward"},{name:"Both"}]},{name:"ItemKind",literalValues:[{name:"Physical"},{name:"Information"}]},{name:"ChoreographyLoopType",literalValues:[{name:"None"},{name:"Standard"},{name:"MultiInstanceSequential"},{name:"MultiInstanceParallel"}]},{name:"AssociationDirection",literalValues:[{name:"None"},{name:"One"},{name:"Both"}]},{name:"MultiInstanceBehavior",literalValues:[{name:"None"},{name:"One"},{name:"All"},{name:"Complex"}]},{name:"AdHocOrdering",literalValues:[{name:"Parallel"},{name:"Sequential"}]}],Cb={tagAlias:"lowerCase",typePrefix:"t"},Pb={name:_b,uri:bb,prefix:Eb,associations:xb,types:wb,enumerations:Sb,xml:Cb},Rb="BPMNDI",Ab="http://www.omg.org/spec/BPMN/20100524/DI",Tb="bpmndi",Db=[{name:"BPMNDiagram",properties:[{name:"plane",type:"BPMNPlane",redefines:"di:Diagram#rootElement"},{name:"labelStyle",type:"BPMNLabelStyle",isMany:!0}],superClass:["di:Diagram"]},{name:"BPMNPlane",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"}],superClass:["di:Plane"]},{name:"BPMNShape",properties:[{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"isHorizontal",isAttr:!0,type:"Boolean"},{name:"isExpanded",isAttr:!0,type:"Boolean"},{name:"isMarkerVisible",isAttr:!0,type:"Boolean"},{name:"label",type:"BPMNLabel"},{name:"isMessageVisible",isAttr:!0,type:"Boolean"},{name:"participantBandKind",type:"ParticipantBandKind",isAttr:!0},{name:"choreographyActivityShape",type:"BPMNShape",isAttr:!0,isReference:!0}],superClass:["di:LabeledShape"]},{name:"BPMNEdge",properties:[{name:"label",type:"BPMNLabel"},{name:"bpmnElement",isAttr:!0,isReference:!0,type:"bpmn:BaseElement",redefines:"di:DiagramElement#modelElement"},{name:"sourceElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#source"},{name:"targetElement",isAttr:!0,isReference:!0,type:"di:DiagramElement",redefines:"di:Edge#target"},{name:"messageVisibleKind",type:"MessageVisibleKind",isAttr:!0,default:"initiating"}],superClass:["di:LabeledEdge"]},{name:"BPMNLabel",properties:[{name:"labelStyle",type:"BPMNLabelStyle",isAttr:!0,isReference:!0,redefines:"di:DiagramElement#style"}],superClass:["di:Label"]},{name:"BPMNLabelStyle",properties:[{name:"font",type:"dc:Font"}],superClass:["di:Style"]}],Mb=[{name:"ParticipantBandKind",literalValues:[{name:"top_initiating"},{name:"middle_initiating"},{name:"bottom_initiating"},{name:"top_non_initiating"},{name:"middle_non_initiating"},{name:"bottom_non_initiating"}]},{name:"MessageVisibleKind",literalValues:[{name:"initiating"},{name:"non_initiating"}]}],kb=[],Ib={name:Rb,uri:Ab,prefix:Tb,types:Db,enumerations:Mb,associations:kb},Ob="DC",Bb="http://www.omg.org/spec/DD/20100524/DC",Nb="dc",Lb=[{name:"Boolean"},{name:"Integer"},{name:"Real"},{name:"String"},{name:"Font",properties:[{name:"name",type:"String",isAttr:!0},{name:"size",type:"Real",isAttr:!0},{name:"isBold",type:"Boolean",isAttr:!0},{name:"isItalic",type:"Boolean",isAttr:!0},{name:"isUnderline",type:"Boolean",isAttr:!0},{name:"isStrikeThrough",type:"Boolean",isAttr:!0}]},{name:"Point",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0}]},{name:"Bounds",properties:[{name:"x",type:"Real",default:"0",isAttr:!0},{name:"y",type:"Real",default:"0",isAttr:!0},{name:"width",type:"Real",isAttr:!0},{name:"height",type:"Real",isAttr:!0}]}],Fb=[],jb={name:Ob,uri:Bb,prefix:Nb,types:Lb,associations:Fb},$b="DI",zb="http://www.omg.org/spec/DD/20100524/DI",Hb="di",Gb=[{name:"DiagramElement",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"extension",type:"Extension"},{name:"owningDiagram",type:"Diagram",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"owningElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"modelElement",isReadOnly:!0,isVirtual:!0,isReference:!0,type:"Element"},{name:"style",type:"Style",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"ownedElement",type:"DiagramElement",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Node",isAbstract:!0,superClass:["DiagramElement"]},{name:"Edge",isAbstract:!0,superClass:["DiagramElement"],properties:[{name:"source",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"target",type:"DiagramElement",isReadOnly:!0,isVirtual:!0,isReference:!0},{name:"waypoint",isUnique:!1,isMany:!0,type:"dc:Point",xml:{serialize:"xsi:type"}}]},{name:"Diagram",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"},{name:"rootElement",type:"DiagramElement",isReadOnly:!0,isVirtual:!0},{name:"name",isAttr:!0,type:"String"},{name:"documentation",isAttr:!0,type:"String"},{name:"resolution",isAttr:!0,type:"Real"},{name:"ownedStyle",type:"Style",isReadOnly:!0,isMany:!0,isVirtual:!0}]},{name:"Shape",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Plane",isAbstract:!0,superClass:["Node"],properties:[{name:"planeElement",type:"DiagramElement",subsettedProperty:"DiagramElement-ownedElement",isMany:!0}]},{name:"LabeledEdge",isAbstract:!0,superClass:["Edge"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"LabeledShape",isAbstract:!0,superClass:["Shape"],properties:[{name:"ownedLabel",type:"Label",isReadOnly:!0,subsettedProperty:"DiagramElement-ownedElement",isMany:!0,isVirtual:!0}]},{name:"Label",isAbstract:!0,superClass:["Node"],properties:[{name:"bounds",type:"dc:Bounds"}]},{name:"Style",isAbstract:!0,properties:[{name:"id",isAttr:!0,isId:!0,type:"String"}]},{name:"Extension",properties:[{name:"values",isMany:!0,type:"Element"}]}],Ub=[],Vb={tagAlias:"lowerCase"},Zb={name:$b,uri:zb,prefix:Hb,types:Gb,associations:Ub,xml:Vb},Wb="bpmn.io colors for BPMN",Yb="http://bpmn.io/schema/bpmn/biocolor/1.0",Kb="bioc",Xb=[{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"stroke",isAttr:!0,type:"String"},{name:"fill",isAttr:!0,type:"String"}]}],qb=[],Qb=[],Jb={name:Wb,uri:Yb,prefix:Kb,types:Xb,enumerations:qb,associations:Qb},eE="BPMN in Color",tE="http://www.omg.org/spec/BPMN/non-normative/color/1.0",nE="color",iE=[{name:"ColoredLabel",extends:["bpmndi:BPMNLabel"],properties:[{name:"color",isAttr:!0,type:"String"}]},{name:"ColoredShape",extends:["bpmndi:BPMNShape"],properties:[{name:"background-color",isAttr:!0,type:"String"},{name:"border-color",isAttr:!0,type:"String"}]},{name:"ColoredEdge",extends:["bpmndi:BPMNEdge"],properties:[{name:"border-color",isAttr:!0,type:"String"}]}],rE=[],oE=[],aE={name:eE,uri:tE,prefix:nE,types:iE,enumerations:rE,associations:oE},sE={bpmn:Pb,bpmndi:Ib,dc:jb,di:Zb,bioc:Jb,color:aE};function cE(e,t){var n=k({},sE,e);return new ss(n,t)}function mn(e){return e?"<"+e.$type+(e.id?' id="'+e.id:"")+'" />':"<null>"}var lE="Tried to access di from the businessObject. The di is available through the diagram element only. For more information, see https://github.com/bpmn-io/bpmn-js/issues/1472";function Td(e){U(e,"di")||Object.defineProperty(e,"di",{enumerable:!1,get:function(){throw new Error(lE)}})}function Pn(e,t){return e.$instanceOf(t)}function uE(e){return te(e.rootElements,function(t){return Pn(t,"bpmn:Process")||Pn(t,"bpmn:Collaboration")})}function pE(e){var t={},n=[],i={};function r(V,W){return function(ue){V(ue,W)}}function o(V){t[V.id]=V}function a(V){return t[V.id]}function s(V,W){var ue=V.gfx;if(ue)throw new Error(`already rendered ${mn(V)}`);return e.element(V,i[V.id],W)}function c(V,W){return e.root(V,i[V.id],W)}function l(V,W){try{var ue=i[V.id]&&s(V,W);return o(V),ue}catch(Ve){u(Ve.message,{element:V,error:Ve}),console.error(`failed to import ${mn(V)}`,Ve)}}function u(V,W){e.error(V,W)}var p=this.registerDi=function(W){var ue=W.bpmnElement;ue?i[ue.id]?u(`multiple DI elements defined for ${mn(ue)}`,{element:ue}):(i[ue.id]=W,Td(ue)):u(`no bpmnElement referenced in ${mn(W)}`,{element:W})};function f(V){d(V.plane)}function d(V){p(V),A(V.planeElement,h)}function h(V){p(V)}this.handleDefinitions=function(W,ue){var Ve=W.diagrams;if(ue&&Ve.indexOf(ue)===-1)throw new Error("diagram not part of <bpmn:Definitions />");if(!ue&&Ve&&Ve.length&&(ue=Ve[0]),!ue)throw new Error("no diagram to display");i={},f(ue);var C=ue.plane;if(!C)throw new Error(`no plane for ${mn(ue)}`);var g=C.bpmnElement;if(!g)if(g=uE(W),g)u(`correcting missing bpmnElement on ${mn(C)} to ${mn(g)}`),C.bpmnElement=g,p(C);else throw new Error("no process or collaboration to display");var _=c(g,C);if(Pn(g,"bpmn:Process")||Pn(g,"bpmn:SubProcess"))m(g,_);else if(Pn(g,"bpmn:Collaboration"))De(g,_),S(W.rootElements,_);else throw new Error(`unsupported bpmnElement for ${mn(C)}: ${mn(g)}`);v(n)};var v=this.handleDeferred=function(){for(var W;n.length;)W=n.shift(),W()};function m(V,W){Se(V,W),O(V.ioSpecification,W),T(V.artifacts,W),o(V)}function S(V,W){var ue=ne(V,function(Ve){return!a(Ve)&&Pn(Ve,"bpmn:Process")&&Ve.laneSets});ue.forEach(r(m,W))}function x(V,W){l(V,W)}function E(V,W){A(V,r(x,W))}function y(V,W){l(V,W)}function w(V,W){l(V,W)}function R(V,W){l(V,W)}function I(V,W){l(V,W)}function T(V,W){A(V,function(ue){Pn(ue,"bpmn:Association")?n.push(function(){I(ue,W)}):I(ue,W)})}function O(V,W){V&&(A(V.dataInputs,r(w,W)),A(V.dataOutputs,r(R,W)))}var B=this.handleSubProcess=function(W,ue){Se(W,ue),T(W.artifacts,ue)};function F(V,W){var ue=l(V,W);Pn(V,"bpmn:SubProcess")&&B(V,ue||W),Pn(V,"bpmn:Activity")&&O(V.ioSpecification,W),n.push(function(){A(V.dataInputAssociations,r(y,W)),A(V.dataOutputAssociations,r(y,W))})}function z(V,W){l(V,W)}function H(V,W){l(V,W)}function oe(V,W){n.push(function(){var ue=l(V,W);V.childLaneSet&&ke(V.childLaneSet,ue||W),mt(V)})}function ke(V,W){A(V.lanes,r(oe,W))}function Ae(V,W){A(V,r(ke,W))}function Se(V,W){It(V.flowElements,W),V.laneSets&&Ae(V.laneSets,W)}function It(V,W){A(V,function(ue){Pn(ue,"bpmn:SequenceFlow")?n.push(function(){z(ue,W)}):Pn(ue,"bpmn:BoundaryEvent")?n.unshift(function(){F(ue,W)}):Pn(ue,"bpmn:FlowNode")?F(ue,W):Pn(ue,"bpmn:DataObject")||(Pn(ue,"bpmn:DataStoreReference")||Pn(ue,"bpmn:DataObjectReference")?H(ue,W):u(`unrecognized flowElement ${mn(ue)} in context ${mn(W&&W.businessObject)}`,{element:ue,context:W}))})}function ht(V,W){var ue=l(V,W),Ve=V.processRef;Ve&&m(Ve,ue||W)}function De(V,W){A(V.participants,r(ht,W)),T(V.artifacts,W),n.push(function(){E(V.messageFlows,W)})}function mt(V){A(V.flowNodeRef,function(W){var ue=W.get("lanes");ue&&ue.push(V)})}}function b(e,t){var n=Q(e);return n&&typeof n.$instanceOf=="function"&&n.$instanceOf(t)}function je(e,t){return yn(t,function(n){return b(e,n)})}function Q(e){return e&&e.businessObject||e}function qe(e){return e&&e.di}function fE(e,t,n){var i,r,o,a,s=[];function c(l,u){var p={root:function(v,m){return i.add(v,m)},element:function(v,m,S){return i.add(v,m,S)},error:function(v,m){s.push({message:v,context:m})}},f=new pE(p);u=u||l.diagrams&&l.diagrams[0];var d=dE(l,u);if(!d)throw new Error("no diagram to display");A(d,function(v){f.handleDefinitions(l,v)});var h=u.plane.bpmnElement.id;o.setRootElement(o.findRoot(h+"_plane")||o.findRoot(h))}return new Promise(function(l,u){try{return i=e.get("bpmnImporter"),r=e.get("eventBus"),o=e.get("canvas"),r.fire("import.render.start",{definitions:t}),c(t,n),r.fire("import.render.complete",{error:a,warnings:s}),l({warnings:s})}catch(p){return p.warnings=s,u(p)}})}function dE(e,t){if(!(!t||!t.plane)){var n=t.plane.bpmnElement,i=n;!b(n,"bpmn:Process")&&!b(n,"bpmn:Collaboration")&&(i=hE(n));var r;b(i,"bpmn:Collaboration")?r=i:r=te(e.rootElements,function(l){if(b(l,"bpmn:Collaboration"))return te(l.participants,function(u){return u.processRef===i})});var o=[i];r&&(o=Tt(r.participants,function(l){return l.processRef}),o.push(r));var a=Dd(o),s=[t],c=[n];return A(e.diagrams,function(l){if(l.plane){var u=l.plane.bpmnElement;a.indexOf(u)!==-1&&c.indexOf(u)===-1&&(s.push(l),c.push(u))}}),s}}function Dd(e){var t=[];return A(e,function(n){n&&(t.push(n),t=t.concat(Dd(n.flowElements)))}),t}function hE(e){for(var t=e;t;){if(b(t,"bpmn:Process"))return t;t=t.$parent}}var mE='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 14.02 5.57" width="53" height="21"><path fill="currentColor" d="M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"/><path fill="currentColor" d="M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"/></svg>',Md=mE,kd={verticalAlign:"middle"},Id={color:"#404040"},vE={zIndex:"1001",position:"fixed",top:"0",left:"0",right:"0",bottom:"0"},gE={width:"100%",height:"100%",background:"rgba(40,40,40,0.2)"},yE={position:"absolute",left:"50%",top:"40%",transform:"translate(-50%)",width:"260px",padding:"10px",background:"white",boxShadow:"0 1px 4px rgba(0,0,0,0.3)",fontFamily:"Helvetica, Arial, sans-serif",fontSize:"14px",display:"flex",lineHeight:"1.3"},_E='<div class="bjs-powered-by-lightbox"><div class="backdrop"></div><div class="notice"><a href="https://bpmn.io" target="_blank" rel="noopener" class="link">'+Md+'</a><span>Web-based tooling for BPMN, DMN and forms powered by <a href="https://bpmn.io" target="_blank" rel="noopener">bpmn.io</a>.</span></div></div>',gi;function bE(){gi=st(_E),Rt(gi,vE),Rt(ot("svg",gi),kd),Rt(ot(".backdrop",gi),gE),Rt(ot(".notice",gi),yE),Rt(ot(".link",gi),Id,{margin:"15px 20px 15px 10px",alignSelf:"center"})}function EE(){gi||(bE(),vt.bind(gi,".backdrop","click",function(e){document.body.removeChild(gi)})),document.body.appendChild(gi)}function xt(e){e=k({},wE,e),this._moddle=this._createModdle(e),this._container=this._createContainer(e),CE(this._container),this._init(this._container,this._moddle,e)}j(xt,Qi),xt.prototype.importXML=function(t,n){return Io(this,null,function*(){const i=this;function r(a){return i.get("eventBus").createEvent(a)}let o=[];try{t=this._emit("import.parse.start",{xml:t})||t;let a;try{a=yield this._moddle.fromXML(t,"bpmn:Definitions")}catch(f){throw this._emit("import.parse.complete",{error:f}),f}let s=a.rootElement;const c=a.references,l=a.warnings,u=a.elementsById;o=o.concat(l),s=this._emit("import.parse.complete",r({error:null,definitions:s,elementsById:u,references:c,warnings:o}))||s;const p=yield this.importDefinitions(s,n);return o=o.concat(p.warnings),this._emit("import.done",{error:null,warnings:o}),{warnings:o}}catch(a){let s=a;throw o=o.concat(s.warnings||[]),cs(s,o),s=xE(s),this._emit("import.done",{error:s,warnings:s.warnings}),s}})},xt.prototype.importDefinitions=function(t,n){return Io(this,null,function*(){return this._setDefinitions(t),{warnings:(yield this.open(n)).warnings}})},xt.prototype.open=function(t){return Io(this,null,function*(){const n=this._definitions;let i=t;if(!n){const o=new Error("no XML imported");throw cs(o,[]),o}if(typeof t=="string"&&(i=SE(n,t),!i)){const o=new Error("BPMNDiagram <"+t+"> not found");throw cs(o,[]),o}try{this.clear()}catch(o){throw cs(o,[]),o}const{warnings:r}=yield fE(this,n,i);return{warnings:r}})},xt.prototype.saveXML=function(t){return Io(this,null,function*(){t=t||{};let n=this._definitions,i,r;try{if(!n)throw new Error("no definitions loaded");n=this._emit("saveXML.start",{definitions:n})||n,r=(yield this._moddle.toXML(n,t)).xml,r=this._emit("saveXML.serialized",{xml:r})||r}catch(a){i=a}const o=i?{error:i}:{xml:r};if(this._emit("saveXML.done",o),i)throw i;return o})},xt.prototype.saveSVG=function(){return Io(this,null,function*(){this._emit("saveSVG.start");let t,n;try{const i=this.get("canvas"),r=i.getActiveLayer(),o=ot(":scope > defs",i._svg),a=Cf(r),s=o?"<defs>"+Cf(o)+"</defs>":"",c=r.getBBox();t=`<?xml version="1.0" encoding="utf-8"?>
<!-- created with bpmn-js / http://bpmn.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="`+c.width+'" height="'+c.height+'" viewBox="'+c.x+" "+c.y+" "+c.width+" "+c.height+'" version="1.1">'+s+a+"</svg>"}catch(i){n=i}if(this._emit("saveSVG.done",{error:n,svg:t}),n)throw n;return{svg:t}})},xt.prototype._setDefinitions=function(e){this._definitions=e},xt.prototype.getModules=function(){return this._modules},xt.prototype.clear=function(){this.getDefinitions()&&Qi.prototype.clear.call(this)},xt.prototype.destroy=function(){Qi.prototype.destroy.call(this),bn(this._container)},xt.prototype.on=function(e,t,n,i){return this.get("eventBus").on(e,t,n,i)},xt.prototype.off=function(e,t){this.get("eventBus").off(e,t)},xt.prototype.attachTo=function(e){if(!e)throw new Error("parentNode required");this.detach(),e.get&&e.constructor.prototype.jquery&&(e=e.get(0)),typeof e=="string"&&(e=ot(e)),e.appendChild(this._container),this._emit("attach",{}),this.get("canvas").resized()},xt.prototype.getDefinitions=function(){return this._definitions},xt.prototype.detach=function(){const e=this._container,t=e.parentNode;t&&(this._emit("detach",{}),t.removeChild(e))},xt.prototype._init=function(e,t,n){const i=n.modules||this.getModules(n),r=n.additionalModules||[],o=[{bpmnjs:["value",this],moddle:["value",t]}],a=[].concat(o,i,r),s=k(Ut(n,["additionalModules"]),{canvas:k({},n.canvas,{container:e}),modules:a});Qi.call(this,s),n&&n.container&&this.attachTo(n.container)},xt.prototype._emit=function(e,t){return this.get("eventBus").fire(e,t)},xt.prototype._createContainer=function(e){const t=st('<div class="bjs-container"></div>');return Rt(t,{width:Od(e.width),height:Od(e.height),position:e.position}),t},xt.prototype._createModdle=function(e){const t=k({},this._moddleExtensions,e.moddleExtensions);return new cE(t)},xt.prototype._modules=[];function cs(e,t){return e.warnings=t,e}function xE(e){const n=/unparsable content <([^>]+)> detected([\s\S]*)$/.exec(e.message);return n&&(e.message="unparsable content <"+n[1]+"> detected; this may indicate an invalid BPMN 2.0 diagram file"+n[2]),e}const wE={width:"100%",height:"100%",position:"relative"};function Od(e){return e+(L(e)?"px":"")}function SE(e,t){return t&&te(e.diagrams,function(n){return n.id===t})||null}function CE(e){const n='<a href="http://bpmn.io" target="_blank" class="bjs-powered-by" title="Powered by bpmn.io" >'+Md+"</a>",i=st(n);Rt(ot("svg",i),kd),Rt(i,Id,{position:"absolute",bottom:"15px",right:"15px",zIndex:"100"}),e.appendChild(i),be.bind(i,"click",function(r){EE(),r.preventDefault()})}function Ko(e){xt.call(this,e),this.on("import.parse.complete",function(t){t.error||this._collectIds(t.definitions,t.elementsById)},this),this.on("diagram.destroy",function(){this.get("moddle").ids.clear()},this)}j(Ko,xt),Ko.prototype._createModdle=function(e){var t=xt.prototype._createModdle.call(this,e);return t.ids=new Sn([32,36,1]),t},Ko.prototype._collectIds=function(e,t){var n=e.$model,i=n.ids,r;i.clear();for(r in t)i.claim(r,t[r])};function Ue(e,t){return b(e,"bpmn:CallActivity")?!1:b(e,"bpmn:SubProcess")?(t=t||qe(e),t&&b(t,"bpmndi:BPMNPlane")?!0:t&&!!t.isExpanded):b(e,"bpmn:Participant")?!!Q(e).processRef:!0}function qt(e){if(!(!b(e,"bpmn:Participant")&&!b(e,"bpmn:Lane"))){var t=qe(e).isHorizontal;return t===void 0?!0:t}}function PE(e){return e&&Q(e).isInterrupting!==!1}function vn(e){return e&&!!Q(e).triggeredByEvent}function to(e,t){var n=Q(e).eventDefinitions;return yn(n,function(i){return b(i,t)})}function RE(e){return to(e,"bpmn:ErrorEventDefinition")}function AE(e){return to(e,"bpmn:EscalationEventDefinition")}function TE(e){return to(e,"bpmn:CompensateEventDefinition")}var Xo={width:90,height:20},Bd=15;function Mr(e){return b(e,"bpmn:Event")||b(e,"bpmn:Gateway")||b(e,"bpmn:DataStoreReference")||b(e,"bpmn:DataObjectReference")||b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput")||b(e,"bpmn:SequenceFlow")||b(e,"bpmn:MessageFlow")||b(e,"bpmn:Group")}function ls(e){return Xe(e.label)}function DE(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)],r=ME(e),o=Math.atan((i.y-n.y)/(i.x-n.x)),a=r.x,s=r.y;return Math.abs(o)<Math.PI/2?s-=Bd:a+=Bd,{x:a,y:s}}function ME(e){var t=e.length/2-1,n=e[Math.floor(t)],i=e[Math.ceil(t+.01)];return{x:n.x+(i.x-n.x)/2,y:n.y+(i.y-n.y)/2}}function Ml(e){return e.waypoints?DE(e.waypoints):b(e,"bpmn:Group")?{x:e.x+e.width/2,y:e.y+Xo.height/2}:{x:e.x+e.width/2,y:e.y+e.height+Xo.height/2}}function kE(e,t){var n,i,r,o=e.label;return o&&o.bounds?(r=o.bounds,i={width:Math.max(Xo.width,r.width),height:r.height},n={x:r.x+r.width/2,y:r.y+r.height/2}):(n=Ml(t),i=Xo),k({x:n.x-i.width/2,y:n.y-i.height/2},i)}function Nd(e){if(b(e,"bpmn:FlowElement")||b(e,"bpmn:Participant")||b(e,"bpmn:Lane")||b(e,"bpmn:SequenceFlow")||b(e,"bpmn:MessageFlow")||b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput"))return"name";if(b(e,"bpmn:TextAnnotation"))return"text";if(b(e,"bpmn:Group"))return"categoryValueRef"}function IE(e){var t=e.categoryValueRef;return t&&t.value||""}function jn(e){var t=e.businessObject,n=Nd(t);if(n)return n==="categoryValueRef"?IE(t):t[n]||""}function OE(e,t){var n=e.businessObject,i=Nd(n);return i&&(i==="categoryValueRef"?n.categoryValueRef.value=t:n[i]=t),e}var kl="hsl(225, 10%, 15%)",BE="white";function yi(e,t){return yn(e.eventDefinitions,function(n){return n.$type===t})}function NE(e){return e.$type==="bpmn:IntermediateThrowEvent"||e.$type==="bpmn:EndEvent"}function LE(e){var t=e.dataObjectRef;return e.isCollection||t&&t.isCollection}function ze(e,t,n){var i=qe(e);return n||i.get("color:background-color")||i.get("bioc:fill")||t||BE}function le(e,t,n){var i=qe(e);return n||i.get("color:border-color")||i.get("bioc:stroke")||t||kl}function qo(e,t,n,i){var r=qe(e),o=r.get("label");return i||o&&o.get("color:color")||t||le(e,n)}function FE(e){var t=e.x+e.width/2,n=e.y+e.height/2,i=e.width/2,r=[["M",t,n],["m",0,-i],["a",i,i,0,1,1,0,2*i],["a",i,i,0,1,1,0,-2*i],["z"]];return Cr(r)}function jE(e,t){var n=e.x,i=e.y,r=e.width,o=e.height,a=[["M",n+t,i],["l",r-t*2,0],["a",t,t,0,0,1,t,t],["l",0,o-t*2],["a",t,t,0,0,1,-t,t],["l",t*2-r,0],["a",t,t,0,0,1,-t,-t],["l",0,t*2-o],["a",t,t,0,0,1,t,-t],["z"]];return Cr(a)}function $E(e){var t=e.width,n=e.height,i=e.x,r=e.y,o=t/2,a=n/2,s=[["M",i+o,r],["l",o,a],["l",-o,a],["l",-o,-a],["z"]];return Cr(s)}function zE(e){var t=e.x,n=e.y,i=e.width,r=e.height,o=[["M",t,n],["l",i,0],["l",0,r],["l",-i,0],["z"]];return Cr(o)}function Qo(e,t={}){return{width:Zn(e,t),height:Mn(e,t)}}function Zn(e,t={}){return U(t,"width")?t.width:e.width}function Mn(e,t={}){return U(t,"height")?t.height:e.height}var HE=new Sn,GE=10,us=3,UE=1.5,ps=10,no=.95,VE=1,ZE=.25;function kr(e,t,n,i,r,o,a){Ci.call(this,t,a);var s=e&&e.defaultFillColor,c=e&&e.defaultStrokeColor,l=e&&e.defaultLabelColor;function u(C){return n.computeStyle(C,{strokeLinecap:"round",strokeLinejoin:"round",stroke:kl,strokeWidth:2,fill:"white"})}function p(C){return n.computeStyle(C,["no-fill"],{strokeLinecap:"round",strokeLinejoin:"round",stroke:kl,strokeWidth:2})}function f(C,g){var{ref:_={x:0,y:0},scale:D=1,element:M,parentGfx:G=r._svg}=g,he=ve("marker",{id:C,viewBox:"0 0 20 20",refX:_.x,refY:_.y,markerWidth:20*D,markerHeight:20*D,orient:"auto"});we(he,M);var fe=ot(":scope > defs",G);fe||(fe=ve("defs"),we(G,fe)),we(fe,he)}function d(C,g,_,D){var M=HE.nextPrefixed("marker-");return h(C,M,g,_,D),"url(#"+M+")"}function h(C,g,_,D,M){if(_==="sequenceflow-end"){var G=ve("path",Be({d:"M 1 5 L 11 10 L 1 15 Z"},u({fill:M,stroke:M,strokeWidth:1})));f(g,{element:G,ref:{x:11,y:10},scale:.5,parentGfx:C})}if(_==="messageflow-start"){var he=ve("circle",Be({cx:6,cy:6,r:3.5},u({fill:D,stroke:M,strokeWidth:1,strokeDasharray:[1e4,1]})));f(g,{element:he,ref:{x:6,y:6},parentGfx:C})}if(_==="messageflow-end"){var fe=ve("path",Be({d:"m 1 5 l 0 -3 l 7 3 l -7 3 z"},u({fill:D,stroke:M,strokeWidth:1,strokeDasharray:[1e4,1]})));f(g,{element:fe,ref:{x:8.5,y:5},parentGfx:C})}if(_==="association-start"){var Te=ve("path",Be({d:"M 11 5 L 1 10 L 11 15"},p({fill:"none",stroke:M,strokeWidth:1.5,strokeDasharray:[1e4,1]})));f(g,{element:Te,ref:{x:1,y:10},scale:.5,parentGfx:C})}if(_==="association-end"){var lt=ve("path",Be({d:"M 1 5 L 11 10 L 1 15"},p({fill:"none",stroke:M,strokeWidth:1.5,strokeDasharray:[1e4,1]})));f(g,{element:lt,ref:{x:11,y:10},scale:.5,parentGfx:C})}if(_==="conditional-flow-marker"){var wn=ve("path",Be({d:"M 0 10 L 8 6 L 16 10 L 8 14 Z"},u({fill:D,stroke:M})));f(g,{element:wn,ref:{x:-1,y:10},scale:.5,parentGfx:C})}if(_==="conditional-default-flow-marker"){var at=ve("path",Be({d:"M 6 4 L 10 16"},u({stroke:M,fill:"none"})));f(g,{element:at,ref:{x:0,y:10},scale:.5,parentGfx:C})}}function v(C,g,_,D,M={}){$(D)&&(M=D,D=0),D=D||0,M=u(M);var G=g/2,he=_/2,fe=ve("circle",Be({cx:G,cy:he,r:Math.round((g+_)/4-D)},M));return we(C,fe),fe}function m(C,g,_,D,M,G){$(M)&&(G=M,M=0),M=M||0,G=u(G);var he=ve("rect",Be({x:M,y:M,width:g-M*2,height:_-M*2,rx:D,ry:D},G));return we(C,he),he}function S(C,g,_,D){var M=g/2,G=_/2,he=[{x:M,y:0},{x:g,y:G},{x:M,y:_},{x:0,y:G}],fe=he.map(function(lt){return lt.x+","+lt.y}).join(" ");D=u(D);var Te=ve("polygon",Gt(Be({},D),{points:fe}));return we(C,Te),Te}function x(C,g,_,D){_=p(_);var M=Wa(g,_,D);return we(C,M),M}function E(C,g,_){return x(C,g,_,5)}function y(C,g,_){_=p(_);var D=ve("path",Gt(Be({},_),{d:g}));return we(C,D),D}function w(C,g,_,D){return y(g,_,k({"data-marker":C},D))}function R(C){return Ve[C]}function I(C){return function(g,_,D){return R(C)(g,_,D)}}var T={"bpmn:MessageEventDefinition":function(C,g,_={},D){var M=i.getScaledPath("EVENT_MESSAGE",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:g.width,containerHeight:g.height,position:{mx:.235,my:.315}}),G=D?le(g,c,_.stroke):ze(g,s,_.fill),he=D?ze(g,s,_.fill):le(g,c,_.stroke),fe=y(C,M,{fill:G,stroke:he,strokeWidth:1});return fe},"bpmn:TimerEventDefinition":function(C,g,_={}){var D=v(C,g.width,g.height,.2*g.height,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:2}),M=i.getScaledPath("EVENT_TIMER_WH",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.5}});y(C,M,{stroke:le(g,c,_.stroke),strokeWidth:2});for(var G=0;G<12;G++){var he=i.getScaledPath("EVENT_TIMER_LINE",{xScaleFactor:.75,yScaleFactor:.75,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.5}}),fe=g.width/2,Te=g.height/2;y(C,he,{strokeWidth:1,stroke:le(g,c,_.stroke),transform:"rotate("+G*30+","+Te+","+fe+")"})}return D},"bpmn:EscalationEventDefinition":function(C,g,_={},D){var M=i.getScaledPath("EVENT_ESCALATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.2}}),G=D?le(g,c,_.stroke):ze(g,s,_.fill);return y(C,M,{fill:G,stroke:le(g,c,_.stroke),strokeWidth:1})},"bpmn:ConditionalEventDefinition":function(C,g,_={}){var D=i.getScaledPath("EVENT_CONDITIONAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.222}});return y(C,D,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:1})},"bpmn:LinkEventDefinition":function(C,g,_={},D){var M=i.getScaledPath("EVENT_LINK",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.57,my:.263}}),G=D?le(g,c,_.stroke):ze(g,s,_.fill);return y(C,M,{fill:G,stroke:le(g,c,_.stroke),strokeWidth:1})},"bpmn:ErrorEventDefinition":function(C,g,_={},D){var M=i.getScaledPath("EVENT_ERROR",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:g.width,containerHeight:g.height,position:{mx:.2,my:.722}}),G=D?le(g,c,_.stroke):ze(g,s,_.fill);return y(C,M,{fill:G,stroke:le(g,c,_.stroke),strokeWidth:1})},"bpmn:CancelEventDefinition":function(C,g,_={},D){var M=i.getScaledPath("EVENT_CANCEL_45",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.638,my:-.055}}),G=D?le(g,c,_.stroke):"none",he=y(C,M,{fill:G,stroke:le(g,c,_.stroke),strokeWidth:1});return cd(he,45),he},"bpmn:CompensateEventDefinition":function(C,g,_={},D){var M=i.getScaledPath("EVENT_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.22,my:.5}}),G=D?le(g,c,_.stroke):ze(g,s,_.fill);return y(C,M,{fill:G,stroke:le(g,c,_.stroke),strokeWidth:1})},"bpmn:SignalEventDefinition":function(C,g,_={},D){var M=i.getScaledPath("EVENT_SIGNAL",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:g.width,containerHeight:g.height,position:{mx:.5,my:.2}}),G=D?le(g,c,_.stroke):ze(g,s,_.fill);return y(C,M,{strokeWidth:1,fill:G,stroke:le(g,c,_.stroke)})},"bpmn:MultipleEventDefinition":function(C,g,_={},D){var M=i.getScaledPath("EVENT_MULTIPLE",{xScaleFactor:1.1,yScaleFactor:1.1,containerWidth:g.width,containerHeight:g.height,position:{mx:.222,my:.36}}),G=D?le(g,c,_.stroke):ze(g,s,_.fill);return y(C,M,{fill:G,strokeWidth:1})},"bpmn:ParallelMultipleEventDefinition":function(C,g,_={}){var D=i.getScaledPath("EVENT_PARALLEL_MULTIPLE",{xScaleFactor:1.2,yScaleFactor:1.2,containerWidth:g.width,containerHeight:g.height,position:{mx:.458,my:.194}});return y(C,D,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:1})},"bpmn:TerminateEventDefinition":function(C,g,_={}){var D=v(C,g.width,g.height,8,{fill:le(g,c,_.stroke),stroke:le(g,c,_.stroke),strokeWidth:4});return D}};function O(C,g,_={}){var D=Q(C),M=NE(D);return D.get("eventDefinitions")&&D.get("eventDefinitions").length>1?D.get("parallelMultiple")?T["bpmn:ParallelMultipleEventDefinition"](g,C,_,M):T["bpmn:MultipleEventDefinition"](g,C,_,M):yi(D,"bpmn:MessageEventDefinition")?T["bpmn:MessageEventDefinition"](g,C,_,M):yi(D,"bpmn:TimerEventDefinition")?T["bpmn:TimerEventDefinition"](g,C,_,M):yi(D,"bpmn:ConditionalEventDefinition")?T["bpmn:ConditionalEventDefinition"](g,C,_,M):yi(D,"bpmn:SignalEventDefinition")?T["bpmn:SignalEventDefinition"](g,C,_,M):yi(D,"bpmn:EscalationEventDefinition")?T["bpmn:EscalationEventDefinition"](g,C,_,M):yi(D,"bpmn:LinkEventDefinition")?T["bpmn:LinkEventDefinition"](g,C,_,M):yi(D,"bpmn:ErrorEventDefinition")?T["bpmn:ErrorEventDefinition"](g,C,_,M):yi(D,"bpmn:CancelEventDefinition")?T["bpmn:CancelEventDefinition"](g,C,_,M):yi(D,"bpmn:CompensateEventDefinition")?T["bpmn:CompensateEventDefinition"](g,C,_,M):yi(D,"bpmn:TerminateEventDefinition")?T["bpmn:TerminateEventDefinition"](g,C,_,M):null}var B={ParticipantMultiplicityMarker:function(C,g,_={}){var D=Zn(g,_),M=Mn(g,_),G=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:D,containerHeight:M,position:{mx:(D/2-6)/D,my:(M-15)/M}});w("participant-multiplicity",C,G,{strokeWidth:2,fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke)})},SubProcessMarker:function(C,g,_={}){var D=m(C,14,14,0,{strokeWidth:1,fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke)});ln(D,g.width/2-7.5,g.height-20);var M=i.getScaledPath("MARKER_SUB_PROCESS",{xScaleFactor:1.5,yScaleFactor:1.5,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2-7.5)/g.width,my:(g.height-20)/g.height}});w("sub-process",C,M,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke)})},ParallelMarker:function(C,g,_){var D=Zn(g,_),M=Mn(g,_),G=i.getScaledPath("MARKER_PARALLEL",{xScaleFactor:1,yScaleFactor:1,containerWidth:D,containerHeight:M,position:{mx:(D/2+_.parallel)/D,my:(M-20)/M}});w("parallel",C,G,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke)})},SequentialMarker:function(C,g,_){var D=i.getScaledPath("MARKER_SEQUENTIAL",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+_.seq)/g.width,my:(g.height-19)/g.height}});w("sequential",C,D,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke)})},CompensationMarker:function(C,g,_){var D=i.getScaledPath("MARKER_COMPENSATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:(g.width/2+_.compensation)/g.width,my:(g.height-13)/g.height}});w("compensation",C,D,{strokeWidth:1,fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke)})},LoopMarker:function(C,g,_){var D=Zn(g,_),M=Mn(g,_),G=i.getScaledPath("MARKER_LOOP",{xScaleFactor:1,yScaleFactor:1,containerWidth:D,containerHeight:M,position:{mx:(D/2+_.loop)/D,my:(M-7)/M}});w("loop",C,G,{strokeWidth:1.5,fill:"none",stroke:le(g,c,_.stroke),strokeMiterlimit:.5})},AdhocMarker:function(C,g,_){var D=Zn(g,_),M=Mn(g,_),G=i.getScaledPath("MARKER_ADHOC",{xScaleFactor:1,yScaleFactor:1,containerWidth:D,containerHeight:M,position:{mx:(D/2+_.adhoc)/D,my:(M-15)/M}});w("adhoc",C,G,{strokeWidth:1,fill:le(g,c,_.stroke),stroke:le(g,c,_.stroke)})}};function F(C,g,_,D){B[C](g,_,D)}function z(C,g,_,D={}){D={fill:D.fill,stroke:D.stroke,width:Zn(g,D),height:Mn(g,D)};var M=Q(g),G=_&&_.includes("SubProcessMarker");G?D=Gt(Be({},D),{seq:-21,parallel:-22,compensation:-42,loop:-18,adhoc:10}):D=Gt(Be({},D),{seq:-5,parallel:-6,compensation:-27,loop:0,adhoc:10}),A(_,function(Te){F(Te,C,g,D)}),M.get("isForCompensation")&&F("CompensationMarker",C,g,D),b(M,"bpmn:AdHocSubProcess")&&F("AdhocMarker",C,g,D);var he=M.get("loopCharacteristics"),fe=he&&he.get("isSequential");he&&(fe===void 0&&F("LoopMarker",C,g,D),fe===!1&&F("ParallelMarker",C,g,D),fe===!0&&F("SequentialMarker",C,g,D))}function H(C,g,_={}){_=k({size:{width:100}},_);var D=o.createText(g||"",_);return Ke(D).add("djs-label"),we(C,D),D}function oe(C,g,_,D={}){var M=Q(g),G=Qo({x:g.x,y:g.y,width:g.width,height:g.height},D);return H(C,M.name,{align:_,box:G,padding:7,style:{fill:qo(g,l,c,D.stroke)}})}function ke(C,g,_={}){var D={width:90,height:30,x:g.width/2+g.x,y:g.height/2+g.y};return H(C,jn(g),{box:D,fitBox:!0,style:k({},o.getExternalStyle(),{fill:qo(g,l,c,_.stroke)})})}function Ae(C,g,_,D={}){var M=qt(_),G=H(C,g,{box:{height:30,width:M?Mn(_,D):Zn(_,D)},align:"center-middle",style:{fill:qo(_,l,c,D.stroke)}});if(M){var he=-1*Mn(_,D);ns(G,0,-he,270)}}function Se(C,g,_={}){var{width:D,height:M}=Qo(g,_);return m(C,D,M,ps,Gt(Be({},_),{fill:ze(g,s,_.fill),fillOpacity:no,stroke:le(g,c,_.stroke)}))}function It(C,g,_={}){var D=Q(g),M=ze(g,s,_.fill),G=le(g,c,_.stroke);return(D.get("associationDirection")==="One"||D.get("associationDirection")==="Both")&&(_.markerEnd=d(C,"association-end",M,G)),D.get("associationDirection")==="Both"&&(_.markerStart=d(C,"association-start",M,G)),_=Qe(_,["markerStart","markerEnd"]),E(C,g.waypoints,Gt(Be({},_),{stroke:G,strokeDasharray:"0, 5"}))}function ht(C,g,_={}){var D=ze(g,s,_.fill),M=le(g,c,_.stroke),G=i.getScaledPath("DATA_OBJECT_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.474,my:.296}}),he=y(C,G,{fill:D,fillOpacity:no,stroke:M}),fe=Q(g);if(LE(fe)){var Te=i.getScaledPath("DATA_OBJECT_COLLECTION_PATH",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:.33,my:(g.height-18)/g.height}});y(C,Te,{strokeWidth:2,fill:D,stroke:M})}return he}function De(C,g,_={}){return v(C,g.width,g.height,Gt(Be({fillOpacity:no},_),{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke)}))}function mt(C,g,_={}){return S(C,g.width,g.height,{fill:ze(g,s,_.fill),fillOpacity:no,stroke:le(g,c,_.stroke)})}function V(C,g,_={}){var D=m(C,Zn(g,_),Mn(g,_),0,{fill:ze(g,s,_.fill),fillOpacity:_.fillOpacity||no,stroke:le(g,c,_.stroke),strokeWidth:1.5}),M=Q(g);if(b(M,"bpmn:Lane")){var G=M.get("name");Ae(C,G,g,_)}return D}function W(C,g,_={}){var D=Se(C,g,_);vn(g)&&ce(D,{strokeDasharray:"0, 5.5",strokeWidth:2.5});var M=Ue(g);return oe(C,g,M?"center-top":"center-middle",_),M?z(C,g,void 0,_):z(C,g,["SubProcessMarker"],_),D}function ue(C,g,_={}){var D=Se(C,g,_);return oe(C,g,"center-middle",_),z(C,g,void 0,_),D}var Ve=this.handlers={"bpmn:AdHocSubProcess":function(C,g,_={}){return Ue(g)?_=Qe(_,["fill","stroke","width","height"]):_=Qe(_,["fill","stroke"]),W(C,g,_)},"bpmn:Association":function(C,g,_={}){return _=Qe(_,["fill","stroke"]),It(C,g,_)},"bpmn:BoundaryEvent":function(C,g,_={}){var{renderIcon:D=!0}=_;_=Qe(_,["fill","stroke"]);var M=Q(g),G=M.get("cancelActivity");_={strokeWidth:1.5,fill:ze(g,s,_.fill),fillOpacity:VE,stroke:le(g,c,_.stroke)},G||(_.strokeDasharray="6");var he=De(C,g,_);return v(C,g.width,g.height,us,Gt(Be({},_),{fill:"none"})),D&&O(g,C,_),he},"bpmn:BusinessRuleTask":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=ue(C,g,_),M=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_MAIN",{abspos:{x:8,y:8}}),G=y(C,M);ce(G,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:1});var he=i.getScaledPath("TASK_TYPE_BUSINESS_RULE_HEADER",{abspos:{x:8,y:8}}),fe=y(C,he);return ce(fe,{fill:le(g,c,_.stroke),stroke:le(g,c,_.stroke),strokeWidth:1}),D},"bpmn:CallActivity":function(C,g,_={}){return _=Qe(_,["fill","stroke"]),W(C,g,Be({strokeWidth:5},_))},"bpmn:ComplexGateway":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=mt(C,g,_),M=i.getScaledPath("GATEWAY_COMPLEX",{xScaleFactor:.5,yScaleFactor:.5,containerWidth:g.width,containerHeight:g.height,position:{mx:.46,my:.26}});return y(C,M,{fill:le(g,c,_.stroke),stroke:le(g,c,_.stroke),strokeWidth:1}),D},"bpmn:DataInput":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=i.getRawPath("DATA_ARROW"),M=ht(C,g,_);return y(C,D,{fill:"none",stroke:le(g,c,_.stroke),strokeWidth:1}),M},"bpmn:DataInputAssociation":function(C,g,_={}){return _=Qe(_,["fill","stroke"]),It(C,g,Gt(Be({},_),{markerEnd:d(C,"association-end",ze(g,s,_.fill),le(g,c,_.stroke))}))},"bpmn:DataObject":function(C,g,_={}){return _=Qe(_,["fill","stroke"]),ht(C,g,_)},"bpmn:DataObjectReference":I("bpmn:DataObject"),"bpmn:DataOutput":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=i.getRawPath("DATA_ARROW"),M=ht(C,g,_);return y(C,D,{strokeWidth:1,fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke)}),M},"bpmn:DataOutputAssociation":function(C,g,_={}){return _=Qe(_,["fill","stroke"]),It(C,g,Gt(Be({},_),{markerEnd:d(C,"association-end",ze(g,s,_.fill),le(g,c,_.stroke))}))},"bpmn:DataStoreReference":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=i.getScaledPath("DATA_STORE",{xScaleFactor:1,yScaleFactor:1,containerWidth:g.width,containerHeight:g.height,position:{mx:0,my:.133}});return y(C,D,{fill:ze(g,s,_.fill),fillOpacity:no,stroke:le(g,c,_.stroke),strokeWidth:2})},"bpmn:EndEvent":function(C,g,_={}){var{renderIcon:D=!0}=_;_=Qe(_,["fill","stroke"]);var M=De(C,g,Gt(Be({},_),{strokeWidth:4}));return D&&O(g,C,_),M},"bpmn:EventBasedGateway":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=Q(g),M=mt(C,g,_);v(C,g.width,g.height,g.height*.2,{fill:ze(g,"none",_.fill),stroke:le(g,c,_.stroke),strokeWidth:1});var G=D.get("eventGatewayType"),he=!!D.get("instantiate");function fe(){var lt=i.getScaledPath("GATEWAY_EVENT_BASED",{xScaleFactor:.18,yScaleFactor:.18,containerWidth:g.width,containerHeight:g.height,position:{mx:.36,my:.44}});y(C,lt,{fill:"none",stroke:le(g,c,_.stroke),strokeWidth:2})}if(G==="Parallel"){var Te=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:g.width,containerHeight:g.height,position:{mx:.474,my:.296}});y(C,Te,{fill:"none",stroke:le(g,c,_.stroke),strokeWidth:1})}else G==="Exclusive"&&(he||v(C,g.width,g.height,g.height*.26,{fill:"none",stroke:le(g,c,_.stroke),strokeWidth:1}),fe());return M},"bpmn:ExclusiveGateway":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=mt(C,g,_),M=i.getScaledPath("GATEWAY_EXCLUSIVE",{xScaleFactor:.4,yScaleFactor:.4,containerWidth:g.width,containerHeight:g.height,position:{mx:.32,my:.3}}),G=qe(g);return G.get("isMarkerVisible")&&y(C,M,{fill:le(g,c,_.stroke),stroke:le(g,c,_.stroke),strokeWidth:1}),D},"bpmn:Gateway":function(C,g,_={}){return _=Qe(_,["fill","stroke"]),mt(C,g,_)},"bpmn:Group":function(C,g,_={}){return _=Qe(_,["fill","stroke","width","height"]),m(C,g.width,g.height,ps,{stroke:le(g,c,_.stroke),strokeWidth:1.5,strokeDasharray:"10, 6, 0, 6",fill:"none",pointerEvents:"none",width:Zn(g,_),height:Mn(g,_)})},"bpmn:InclusiveGateway":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=mt(C,g,_);return v(C,g.width,g.height,g.height*.24,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:2.5}),D},"bpmn:IntermediateEvent":function(C,g,_={}){var{renderIcon:D=!0}=_;_=Qe(_,["fill","stroke"]);var M=De(C,g,Gt(Be({},_),{strokeWidth:1.5}));return v(C,g.width,g.height,us,{fill:"none",stroke:le(g,c,_.stroke),strokeWidth:1.5}),D&&O(g,C,_),M},"bpmn:IntermediateCatchEvent":I("bpmn:IntermediateEvent"),"bpmn:IntermediateThrowEvent":I("bpmn:IntermediateEvent"),"bpmn:Lane":function(C,g,_={}){return _=Qe(_,["fill","stroke","width","height"]),V(C,g,Gt(Be({},_),{fillOpacity:ZE}))},"bpmn:ManualTask":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=ue(C,g,_),M=i.getScaledPath("TASK_TYPE_MANUAL",{abspos:{x:17,y:15}});return y(C,M,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:.5}),D},"bpmn:MessageFlow":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=Q(g),M=qe(g),G=ze(g,s,_.fill),he=le(g,c,_.stroke),fe=E(C,g.waypoints,{markerEnd:d(C,"messageflow-end",G,he),markerStart:d(C,"messageflow-start",G,he),stroke:he,strokeDasharray:"10, 11",strokeWidth:1.5});if(D.get("messageRef")){var Te=fe.getPointAtLength(fe.getTotalLength()/2),lt=i.getScaledPath("MESSAGE_FLOW_MARKER",{abspos:{x:Te.x,y:Te.y}}),wn={strokeWidth:1};M.get("messageVisibleKind")==="initiating"?(wn.fill=G,wn.stroke=he):(wn.fill=he,wn.stroke=G);var at=y(C,lt,wn),xe=D.get("messageRef"),Le=xe.get("name"),me=H(C,Le,{align:"center-top",fitBox:!0,style:{fill:he}}),He=at.getBBox(),Je=me.getBBox(),bt=Te.x-Je.width/2,ye=Te.y+He.height/2+GE;ns(me,bt,ye,0)}return fe},"bpmn:ParallelGateway":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=mt(C,g,_),M=i.getScaledPath("GATEWAY_PARALLEL",{xScaleFactor:.6,yScaleFactor:.6,containerWidth:g.width,containerHeight:g.height,position:{mx:.46,my:.2}});return y(C,M,{fill:le(g,c,_.stroke),stroke:le(g,c,_.stroke),strokeWidth:1}),D},"bpmn:Participant":function(C,g,_={}){_=Qe(_,["fill","stroke","width","height"]);var D=V(C,g,_),M=Ue(g),G=qt(g),he=Q(g),fe=he.get("name");if(M){var Te=G?[{x:30,y:0},{x:30,y:Mn(g,_)}]:[{x:0,y:30},{x:Zn(g,_),y:30}];x(C,Te,{stroke:le(g,c,_.stroke),strokeWidth:UE}),Ae(C,fe,g,_)}else{var lt=Qo(g,_);G||(lt.height=Zn(g,_),lt.width=Mn(g,_));var wn=H(C,fe,{box:lt,align:"center-middle",style:{fill:qo(g,l,c,_.stroke)}});if(!G){var at=-1*Mn(g,_);ns(wn,0,-at,270)}}return he.get("participantMultiplicity")&&F("ParticipantMultiplicityMarker",C,g,_),D},"bpmn:ReceiveTask":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=Q(g),M=ue(C,g,_),G;return D.get("instantiate")?(v(C,28,28,20*.22,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:1}),G=i.getScaledPath("TASK_TYPE_INSTANTIATING_SEND",{abspos:{x:7.77,y:9.52}})):G=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:.9,yScaleFactor:.9,containerWidth:21,containerHeight:14,position:{mx:.3,my:.4}}),y(C,G,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:1}),M},"bpmn:ScriptTask":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=ue(C,g,_),M=i.getScaledPath("TASK_TYPE_SCRIPT",{abspos:{x:15,y:20}});return y(C,M,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:1}),D},"bpmn:SendTask":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=ue(C,g,_),M=i.getScaledPath("TASK_TYPE_SEND",{xScaleFactor:1,yScaleFactor:1,containerWidth:21,containerHeight:14,position:{mx:.285,my:.357}});return y(C,M,{fill:le(g,c,_.stroke),stroke:ze(g,s,_.fill),strokeWidth:1}),D},"bpmn:SequenceFlow":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=ze(g,s,_.fill),M=le(g,c,_.stroke),G=E(C,g.waypoints,{markerEnd:d(C,"sequenceflow-end",D,M),stroke:M}),he=Q(g),{source:fe}=g;if(fe){var Te=Q(fe);he.get("conditionExpression")&&b(Te,"bpmn:Activity")&&ce(G,{markerStart:d(C,"conditional-flow-marker",D,M)}),Te.get("default")&&(b(Te,"bpmn:Gateway")||b(Te,"bpmn:Activity"))&&Te.get("default")===he&&ce(G,{markerStart:d(C,"conditional-default-flow-marker",D,M)})}return G},"bpmn:ServiceTask":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=ue(C,g,_);v(C,10,10,{fill:ze(g,s,_.fill),stroke:"none",transform:"translate(6, 6)"});var M=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:12,y:18}});y(C,M,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:1}),v(C,10,10,{fill:ze(g,s,_.fill),stroke:"none",transform:"translate(11, 10)"});var G=i.getScaledPath("TASK_TYPE_SERVICE",{abspos:{x:17,y:22}});return y(C,G,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:1}),D},"bpmn:StartEvent":function(C,g,_={}){var{renderIcon:D=!0}=_;_=Qe(_,["fill","stroke"]);var M=Q(g);M.get("isInterrupting")||(_=Gt(Be({},_),{strokeDasharray:"6"}));var G=De(C,g,_);return D&&O(g,C,_),G},"bpmn:SubProcess":function(C,g,_={}){return Ue(g)?_=Qe(_,["fill","stroke","width","height"]):_=Qe(_,["fill","stroke"]),W(C,g,_)},"bpmn:Task":function(C,g,_={}){return _=Qe(_,["fill","stroke"]),ue(C,g,_)},"bpmn:TextAnnotation":function(C,g,_={}){_=Qe(_,["fill","stroke","width","height"]);var{width:D,height:M}=Qo(g,_),G=m(C,D,M,0,0,{fill:"none",stroke:"none"}),he=i.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:D,containerHeight:M,position:{mx:0,my:0}});y(C,he,{stroke:le(g,c,_.stroke)});var fe=Q(g),Te=fe.get("text")||"";return H(C,Te,{align:"left-top",box:Qo(g,_),padding:7,style:{fill:qo(g,l,c,_.stroke)}}),G},"bpmn:Transaction":function(C,g,_={}){Ue(g)?_=Qe(_,["fill","stroke","width","height"]):_=Qe(_,["fill","stroke"]);var D=W(C,g,Be({strokeWidth:1.5},_)),M=n.style(["no-fill","no-events"],{stroke:le(g,c,_.stroke),strokeWidth:1.5}),G=Ue(g);return G||(_={}),m(C,Zn(g,_),Mn(g,_),ps-us,us,M),D},"bpmn:UserTask":function(C,g,_={}){_=Qe(_,["fill","stroke"]);var D=ue(C,g,_),M=15,G=12,he=i.getScaledPath("TASK_TYPE_USER_1",{abspos:{x:M,y:G}});y(C,he,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:.5});var fe=i.getScaledPath("TASK_TYPE_USER_2",{abspos:{x:M,y:G}});y(C,fe,{fill:ze(g,s,_.fill),stroke:le(g,c,_.stroke),strokeWidth:.5});var Te=i.getScaledPath("TASK_TYPE_USER_3",{abspos:{x:M,y:G}});return y(C,Te,{fill:le(g,c,_.stroke),stroke:le(g,c,_.stroke),strokeWidth:.5}),D},label:function(C,g,_={}){return ke(C,g,_)}};this._drawPath=y,this._renderer=R}j(kr,Ci),kr.$inject=["config.bpmnRenderer","eventBus","styles","pathMap","canvas","textRenderer"],kr.prototype.canRender=function(e){return b(e,"bpmn:BaseElement")},kr.prototype.drawShape=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)},kr.prototype.drawConnection=function(e,t,n={}){var{type:i}=t,r=this._renderer(i);return r(e,t,n)},kr.prototype.getShapePath=function(e){return b(e,"bpmn:Event")?FE(e):b(e,"bpmn:Activity")?jE(e,ps):b(e,"bpmn:Gateway")?$E(e):zE(e)};function Qe(e,t=[]){return t.reduce((n,i)=>(e[i]&&(n[i]=e[i]),n),{})}var WE=0,YE={width:150,height:50};function KE(e){var t=e.split("-");return{horizontal:t[0]||"center",vertical:t[1]||"top"}}function XE(e){return $(e)?k({top:0,left:0,right:0,bottom:0},e):{top:e,left:e,right:e,bottom:e}}function qE(e,t){t.textContent=e;var n;try{var i,r=e==="";return t.textContent=r?"dummy":e,n=t.getBBox(),i={width:n.width+n.x*2,height:n.height},r&&(i.width=0),i}catch(o){return{width:0,height:0}}}function QE(e,t,n){for(var i=e.shift(),r=i,o;;){if(o=qE(r,n),o.width=r?o.width:0,r===" "||r===""||o.width<Math.round(t)||r.length<2)return JE(e,r,i,o);r=tx(r,o.width,t)}}function JE(e,t,n,i){if(t.length<n.length){var r=n.slice(t.length).trim();e.unshift(r)}return{width:i.width,height:i.height,text:t}}var Ld="\xAD";function ex(e,t){var n=e.split(/(\s|-|\u00AD)/g),i,r=[],o=0;if(n.length>1)for(;i=n.shift();)if(i.length+o<t)r.push(i),o+=i.length;else{(i==="-"||i===Ld)&&r.pop();break}var a=r[r.length-1];return a&&a===Ld&&(r[r.length-1]="-"),r.join("")}function tx(e,t,n){var i=Math.max(e.length*(n/t),1),r=ex(e,i);return r||(r=e.slice(0,Math.max(Math.round(i-1),1))),r}function nx(){var e=document.getElementById("helper-svg");return e||(e=ve("svg"),ce(e,{id:"helper-svg"}),Rt(e,{visibility:"hidden",position:"fixed",width:0,height:0}),document.body.appendChild(e)),e}function fs(e){this._config=k({},{size:YE,padding:WE,style:{},align:"center-top"},e||{})}fs.prototype.createText=function(e,t){return this.layoutText(e,t).element},fs.prototype.getDimensions=function(e,t){return this.layoutText(e,t).dimensions},fs.prototype.layoutText=function(e,t){var n=k({},this._config.size,t.box),i=k({},this._config.style,t.style),r=KE(t.align||this._config.align),o=XE(t.padding!==void 0?t.padding:this._config.padding),a=t.fitBox||!1,s=ix(i),c=e.split(/\u00AD?\r?\n/),l=[],u=n.width-o.left-o.right,p=ve("text");ce(p,{x:0,y:0}),ce(p,i);var f=nx();for(we(f,p);c.length;)l.push(QE(c,u,p));r.vertical==="middle"&&(o.top=o.bottom=0);var d=Ot(l,function(x,E,y){return x+(s||E.height)},0)+o.top+o.bottom,h=Ot(l,function(x,E,y){return E.width>x?E.width:x},0),v=o.top;r.vertical==="middle"&&(v+=(n.height-d)/2),v-=(s||l[0].height)/4;var m=ve("text");ce(m,i),A(l,function(x){var E;switch(v+=s||x.height,r.horizontal){case"left":E=o.left;break;case"right":E=(a?h:u)-o.right-x.width;break;default:E=Math.max(((a?h:u)-x.width)/2+o.left,0)}var y=ve("tspan");ce(y,{x:E,y:v}),y.textContent=x.text,we(m,y)}),Zt(p);var S={width:h,height:d};return{dimensions:S,element:m}};function ix(e){if("fontSize"in e&&"lineHeight"in e)return e.lineHeight*parseInt(e.fontSize,10)}var rx=12,ox=1.2,ax=30;function Fd(e){var t=k({fontFamily:"Arial, sans-serif",fontSize:rx,fontWeight:"normal",lineHeight:ox},e&&e.defaultStyle||{}),n=parseInt(t.fontSize,10)-1,i=k({},t,{fontSize:n},e&&e.externalStyle||{}),r=new fs({style:t});this.getExternalLabelBounds=function(o,a){var s=r.getDimensions(a,{box:{width:90,height:30},style:i});return{x:Math.round(o.x+o.width/2-s.width/2),y:Math.round(o.y),width:Math.ceil(s.width),height:Math.ceil(s.height)}},this.getTextAnnotationBounds=function(o,a){var s=r.getDimensions(a,{box:o,style:t,align:"left-top",padding:5});return{x:o.x,y:o.y,width:o.width,height:Math.max(ax,Math.round(s.height))}},this.createText=function(o,a){return r.createText(o,a||{})},this.getDefaultStyle=function(){return t},this.getExternalStyle=function(){return i}}Fd.$inject=["config.textRenderer"];function sx(){this.pathMap={EVENT_MESSAGE:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:36,width:36,heightElements:[6,14],widthElements:[10.5,21]},EVENT_SIGNAL:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x1},0 Z",height:36,width:36,heightElements:[18],widthElements:[10,20]},EVENT_ESCALATION:{d:"M {mx},{my} l {e.x0},{e.y0} l -{e.x0},-{e.y1} l -{e.x0},{e.y1} Z",height:36,width:36,heightElements:[20,7],widthElements:[8]},EVENT_CONDITIONAL:{d:"M {e.x0},{e.y0} l {e.x1},0 l 0,{e.y2} l -{e.x1},0 Z M {e.x2},{e.y3} l {e.x0},0 M {e.x2},{e.y4} l {e.x0},0 M {e.x2},{e.y5} l {e.x0},0 M {e.x2},{e.y6} l {e.x0},0 M {e.x2},{e.y7} l {e.x0},0 M {e.x2},{e.y8} l {e.x0},0 ",height:36,width:36,heightElements:[8.5,14.5,18,11.5,14.5,17.5,20.5,23.5,26.5],widthElements:[10.5,14.5,12.5]},EVENT_LINK:{d:"m {mx},{my} 0,{e.y0} -{e.x1},0 0,{e.y1} {e.x1},0 0,{e.y0} {e.x0},-{e.y2} -{e.x0},-{e.y2} z",height:36,width:36,heightElements:[4.4375,6.75,7.8125],widthElements:[9.84375,13.5]},EVENT_ERROR:{d:"m {mx},{my} {e.x0},-{e.y0} {e.x1},-{e.y1} {e.x2},{e.y2} {e.x3},-{e.y3} -{e.x4},{e.y4} -{e.x5},-{e.y5} z",height:36,width:36,heightElements:[.023,8.737,8.151,16.564,10.591,8.714],widthElements:[.085,6.672,6.97,4.273,5.337,6.636]},EVENT_CANCEL_45:{d:"m {mx},{my} -{e.x1},0 0,{e.x0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:36,width:36,heightElements:[4.75,8.5],widthElements:[4.75,8.5]},EVENT_COMPENSATION:{d:"m {mx},{my} {e.x0},-{e.y0} 0,{e.y1} z m {e.x1},-{e.y2} {e.x2},-{e.y3} 0,{e.y1} -{e.x2},-{e.y3} z",height:36,width:36,heightElements:[6.5,13,.4,6.1],widthElements:[9,9.3,8.7]},EVENT_TIMER_WH:{d:"M {mx},{my} l {e.x0},-{e.y0} m -{e.x0},{e.y0} l {e.x1},{e.y1} ",height:36,width:36,heightElements:[10,2],widthElements:[3,7]},EVENT_TIMER_LINE:{d:"M {mx},{my} m {e.x0},{e.y0} l -{e.x1},{e.y1} ",height:36,width:36,heightElements:[10,3],widthElements:[0,0]},EVENT_MULTIPLE:{d:"m {mx},{my} {e.x1},-{e.y0} {e.x1},{e.y0} -{e.x0},{e.y1} -{e.x2},0 z",height:36,width:36,heightElements:[6.28099,12.56199],widthElements:[3.1405,9.42149,12.56198]},EVENT_PARALLEL_MULTIPLE:{d:"m {mx},{my} {e.x0},0 0,{e.y1} {e.x1},0 0,{e.y0} -{e.x1},0 0,{e.y1} -{e.x0},0 0,-{e.y1} -{e.x1},0 0,-{e.y0} {e.x1},0 z",height:36,width:36,heightElements:[2.56228,7.68683],widthElements:[2.56228,7.68683]},GATEWAY_EXCLUSIVE:{d:"m {mx},{my} {e.x0},{e.y0} {e.x1},{e.y0} {e.x2},0 {e.x4},{e.y2} {e.x4},{e.y1} {e.x2},0 {e.x1},{e.y3} {e.x0},{e.y3} {e.x3},0 {e.x5},{e.y1} {e.x5},{e.y2} {e.x3},0 z",height:17.5,width:17.5,heightElements:[8.5,6.5312,-6.5312,-8.5],widthElements:[6.5,-6.5,3,-3,5,-5]},GATEWAY_PARALLEL:{d:"m {mx},{my} 0,{e.y1} -{e.x1},0 0,{e.y0} {e.x1},0 0,{e.y1} {e.x0},0 0,-{e.y1} {e.x1},0 0,-{e.y0} -{e.x1},0 0,-{e.y1} -{e.x0},0 z",height:30,width:30,heightElements:[5,12.5],widthElements:[5,12.5]},GATEWAY_EVENT_BASED:{d:"m {mx},{my} {e.x0},{e.y0} {e.x0},{e.y1} {e.x1},{e.y2} {e.x2},0 z",height:11,width:11,heightElements:[-6,6,12,-12],widthElements:[9,-3,-12]},GATEWAY_COMPLEX:{d:"m {mx},{my} 0,{e.y0} -{e.x0},-{e.y1} -{e.x1},{e.y2} {e.x0},{e.y1} -{e.x2},0 0,{e.y3} {e.x2},0  -{e.x0},{e.y1} l {e.x1},{e.y2} {e.x0},-{e.y1} 0,{e.y0} {e.x3},0 0,-{e.y0} {e.x0},{e.y1} {e.x1},-{e.y2} -{e.x0},-{e.y1} {e.x2},0 0,-{e.y3} -{e.x2},0 {e.x0},-{e.y1} -{e.x1},-{e.y2} -{e.x0},{e.y1} 0,-{e.y0} -{e.x3},0 z",height:17.125,width:17.125,heightElements:[4.875,3.4375,2.125,3],widthElements:[3.4375,2.125,4.875,3]},DATA_OBJECT_PATH:{d:"m 0,0 {e.x1},0 {e.x0},{e.y0} 0,{e.y1} -{e.x2},0 0,-{e.y2} {e.x1},0 0,{e.y0} {e.x0},0",height:61,width:51,heightElements:[10,50,60],widthElements:[10,40,50,60]},DATA_OBJECT_COLLECTION_PATH:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},DATA_ARROW:{d:"m 5,9 9,0 0,-3 5,5 -5,5 0,-3 -9,0 z",height:61,width:51,heightElements:[],widthElements:[]},DATA_STORE:{d:"m  {mx},{my} l  0,{e.y2} c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 l  0,-{e.y2} c -{e.x0},-{e.y1} -{e.x1},-{e.y1} -{e.x2},0c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0 m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1} {e.x2},0m  -{e.x2},{e.y0}c  {e.x0},{e.y1} {e.x1},{e.y1}  {e.x2},0",height:61,width:61,heightElements:[7,10,45],widthElements:[2,58,60]},TEXT_ANNOTATION:{d:"m {mx}, {my} m 10,0 l -10,0 l 0,{e.y0} l 10,0",height:30,width:10,heightElements:[30],widthElements:[10]},MARKER_SUB_PROCESS:{d:"m{mx},{my} m 7,2 l 0,10 m -5,-5 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_PARALLEL:{d:"m{mx},{my} m 3,2 l 0,10 m 3,-10 l 0,10 m 3,-10 l 0,10",height:10,width:10,heightElements:[],widthElements:[]},MARKER_SEQUENTIAL:{d:"m{mx},{my} m 0,3 l 10,0 m -10,3 l 10,0 m -10,3 l 10,0",height:10,width:10,heightElements:[],widthElements:[]},MARKER_COMPENSATION:{d:"m {mx},{my} 7,-5 0,10 z m 7.1,-0.3 6.9,-4.7 0,10 -6.9,-4.7 z",height:10,width:21,heightElements:[],widthElements:[]},MARKER_LOOP:{d:"m {mx},{my} c 3.526979,0 6.386161,-2.829858 6.386161,-6.320661 0,-3.490806 -2.859182,-6.320661 -6.386161,-6.320661 -3.526978,0 -6.38616,2.829855 -6.38616,6.320661 0,1.745402 0.714797,3.325567 1.870463,4.469381 0.577834,0.571908 1.265885,1.034728 2.029916,1.35457 l -0.718163,-3.909793 m 0.718163,3.909793 -3.885211,0.802902",height:13.9,width:13.7,heightElements:[],widthElements:[]},MARKER_ADHOC:{d:"m {mx},{my} m 0.84461,2.64411 c 1.05533,-1.23780996 2.64337,-2.07882 4.29653,-1.97997996 2.05163,0.0805 3.85579,1.15803 5.76082,1.79107 1.06385,0.34139996 2.24454,0.1438 3.18759,-0.43767 0.61743,-0.33642 1.2775,-0.64078 1.7542,-1.17511 0,0.56023 0,1.12046 0,1.6807 -0.98706,0.96237996 -2.29792,1.62393996 -3.6918,1.66181996 -1.24459,0.0927 -2.46671,-0.2491 -3.59505,-0.74812 -1.35789,-0.55965 -2.75133,-1.33436996 -4.27027,-1.18121996 -1.37741,0.14601 -2.41842,1.13685996 -3.44288,1.96782996 z",height:4,width:15,heightElements:[],widthElements:[]},TASK_TYPE_SEND:{d:"m {mx},{my} l 0,{e.y1} l {e.x1},0 l 0,-{e.y1} z l {e.x0},{e.y0} l {e.x0},-{e.y0}",height:14,width:21,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_SCRIPT:{d:"m {mx},{my} c 9.966553,-6.27276 -8.000926,-7.91932 2.968968,-14.938 l -8.802728,0 c -10.969894,7.01868 6.997585,8.66524 -2.968967,14.938 z m -7,-12 l 5,0 m -4.5,3 l 4.5,0 m -3,3 l 5,0m -4,3 l 5,0",height:15,width:12.6,heightElements:[6,14],widthElements:[10.5,21]},TASK_TYPE_USER_1:{d:"m {mx},{my} c 0.909,-0.845 1.594,-2.049 1.594,-3.385 0,-2.554 -1.805,-4.62199999 -4.357,-4.62199999 -2.55199998,0 -4.28799998,2.06799999 -4.28799998,4.62199999 0,1.348 0.974,2.562 1.89599998,3.405 -0.52899998,0.187 -5.669,2.097 -5.794,4.7560005 v 6.718 h 17 v -6.718 c 0,-2.2980005 -5.5279996,-4.5950005 -6.0509996,-4.7760005 zm -8,6 l 0,5.5 m 11,0 l 0,-5"},TASK_TYPE_USER_2:{d:"m {mx},{my} m 2.162,1.009 c 0,2.4470005 -2.158,4.4310005 -4.821,4.4310005 -2.66499998,0 -4.822,-1.981 -4.822,-4.4310005 "},TASK_TYPE_USER_3:{d:"m {mx},{my} m -6.9,-3.80 c 0,0 2.25099998,-2.358 4.27399998,-1.177 2.024,1.181 4.221,1.537 4.124,0.965 -0.098,-0.57 -0.117,-3.79099999 -4.191,-4.13599999 -3.57499998,0.001 -4.20799998,3.36699999 -4.20699998,4.34799999 z"},TASK_TYPE_MANUAL:{d:"m {mx},{my} c 0.234,-0.01 5.604,0.008 8.029,0.004 0.808,0 1.271,-0.172 1.417,-0.752 0.227,-0.898 -0.334,-1.314 -1.338,-1.316 -2.467,-0.01 -7.886,-0.004 -8.108,-0.004 -0.014,-0.079 0.016,-0.533 0,-0.61 0.195,-0.042 8.507,0.006 9.616,0.002 0.877,-0.007 1.35,-0.438 1.353,-1.208 0.003,-0.768 -0.479,-1.09 -1.35,-1.091 -2.968,-0.002 -9.619,-0.013 -9.619,-0.013 v -0.591 c 0,0 5.052,-0.016 7.225,-0.016 0.888,-0.002 1.354,-0.416 1.351,-1.193 -0.006,-0.761 -0.492,-1.196 -1.361,-1.196 -3.473,-0.005 -10.86,-0.003 -11.0829995,-0.003 -0.022,-0.047 -0.045,-0.094 -0.069,-0.139 0.3939995,-0.319 2.0409995,-1.626 2.4149995,-2.017 0.469,-0.4870005 0.519,-1.1650005 0.162,-1.6040005 -0.414,-0.511 -0.973,-0.5 -1.48,-0.236 -1.4609995,0.764 -6.5999995,3.6430005 -7.7329995,4.2710005 -0.9,0.499 -1.516,1.253 -1.882,2.19 -0.37000002,0.95 -0.17,2.01 -0.166,2.979 0.004,0.718 -0.27300002,1.345 -0.055,2.063 0.629,2.087 2.425,3.312 4.859,3.318 4.6179995,0.014 9.2379995,-0.139 13.8569995,-0.158 0.755,-0.004 1.171,-0.301 1.182,-1.033 0.012,-0.754 -0.423,-0.969 -1.183,-0.973 -1.778,-0.01 -5.824,-0.004 -6.04,-0.004 10e-4,-0.084 0.003,-0.586 10e-4,-0.67 z"},TASK_TYPE_INSTANTIATING_SEND:{d:"m {mx},{my} l 0,8.4 l 12.6,0 l 0,-8.4 z l 6.3,3.6 l 6.3,-3.6"},TASK_TYPE_SERVICE:{d:"m {mx},{my} v -1.71335 c 0.352326,-0.0705 0.703932,-0.17838 1.047628,-0.32133 0.344416,-0.14465 0.665822,-0.32133 0.966377,-0.52145 l 1.19431,1.18005 1.567487,-1.57688 -1.195028,-1.18014 c 0.403376,-0.61394 0.683079,-1.29908 0.825447,-2.01824 l 1.622133,-0.01 v -2.2196 l -1.636514,0.01 c -0.07333,-0.35153 -0.178319,-0.70024 -0.323564,-1.04372 -0.145244,-0.34406 -0.321407,-0.6644 -0.522735,-0.96217 l 1.131035,-1.13631 -1.583305,-1.56293 -1.129598,1.13589 c -0.614052,-0.40108 -1.302883,-0.68093 -2.022633,-0.82247 l 0.0093,-1.61852 h -2.241173 l 0.0042,1.63124 c -0.353763,0.0736 -0.705369,0.17977 -1.049785,0.32371 -0.344415,0.14437 -0.665102,0.32092 -0.9635006,0.52046 l -1.1698628,-1.15823 -1.5667691,1.5792 1.1684265,1.15669 c -0.4026573,0.61283 -0.68308,1.29797 -0.8247287,2.01713 l -1.6588041,0.003 v 2.22174 l 1.6724648,-0.006 c 0.073327,0.35077 0.1797598,0.70243 0.3242851,1.04472 0.1452428,0.34448 0.3214064,0.6644 0.5227339,0.96066 l -1.1993431,1.19723 1.5840256,1.56011 1.1964668,-1.19348 c 0.6140517,0.40346 1.3028827,0.68232 2.0233517,0.82331 l 7.19e-4,1.69892 h 2.226848 z m 0.221462,-3.9957 c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_SERVICE_FILL:{d:"m {mx},{my} c -1.788948,0.7502 -3.8576,-0.0928 -4.6097055,-1.87438 -0.7521065,-1.78321 0.090598,-3.84627 1.8802645,-4.59604 1.78823,-0.74936 3.856881,0.0929 4.608987,1.87437 0.752106,1.78165 -0.0906,3.84612 -1.879546,4.59605 z"},TASK_TYPE_BUSINESS_RULE_HEADER:{d:"m {mx},{my} 0,4 20,0 0,-4 z"},TASK_TYPE_BUSINESS_RULE_MAIN:{d:"m {mx},{my} 0,12 20,0 0,-12 zm 0,8 l 20,0 m -13,-4 l 0,8"},MESSAGE_FLOW_MARKER:{d:"m {mx},{my} m -10.5 ,-7 l 0,14 l 21,0 l 0,-14 z l 10.5,6 l 10.5,-6"}},this.getRawPath=function(t){return this.pathMap[t].d},this.getScaledPath=function(t,n){var i=this.pathMap[t],r,o;n.abspos?(r=n.abspos.x,o=n.abspos.y):(r=n.containerWidth*n.position.mx,o=n.containerHeight*n.position.my);var a={};if(n.position){for(var s=n.containerHeight/i.height*n.yScaleFactor,c=n.containerWidth/i.width*n.xScaleFactor,l=0;l<i.heightElements.length;l++)a["y"+l]=i.heightElements[l]*s;for(var u=0;u<i.widthElements.length;u++)a["x"+u]=i.widthElements[u]*c}var p=px(i.d,{mx:r,my:o,e:a});return p}}var cx=/\{([^{}]+)\}/g,lx=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g;function ux(e,t,n){var i=n;return t.replace(lx,function(r,o,a,s,c){o=o||s,i&&(o in i&&(i=i[o]),typeof i=="function"&&c&&(i=i()))}),i=(i==null||i==n?e:i)+"",i}function px(e,t){return String(e).replace(cx,function(n,i){return ux(n,i,t)})}var fx={__init__:["bpmnRenderer"],bpmnRenderer:["type",kr],textRenderer:["type",Fd],pathMap:["type",sx]};function dx(e,t){return t=t||{},e.replace(/{([^}]+)}/g,function(n,i){return t[i]||"{"+i+"}"})}var ds={translate:["value",dx]};function hs(e,t,n){return k({id:e.id,type:e.$type,businessObject:e,di:t},n)}function hx(e,t,n){var i=e.waypoint;return!i||i.length<2?[Pe(t),Pe(n)]:i.map(function(r){return{x:r.x,y:r.y}})}function jd(e,t,n){return new Error(`element ${mn(t)} referenced by ${mn(e)}#${n} not yet drawn`)}function Di(e,t,n,i,r){this._eventBus=e,this._canvas=t,this._elementFactory=n,this._elementRegistry=i,this._textRenderer=r}Di.$inject=["eventBus","canvas","elementFactory","elementRegistry","textRenderer"],Di.prototype.add=function(e,t,n){var i,r,o;if(b(t,"bpmndi:BPMNPlane")){var a=b(e,"bpmn:SubProcess")?{id:e.id+"_plane"}:{};i=this._elementFactory.createRoot(hs(e,t,a)),this._canvas.addRootElement(i)}else if(b(t,"bpmndi:BPMNShape")){var s=!Ue(e,t),c=vx(e);r=n&&(n.hidden||n.collapsed);var l=t.bounds;i=this._elementFactory.createShape(hs(e,t,{collapsed:s,hidden:r,x:Math.round(l.x),y:Math.round(l.y),width:Math.round(l.width),height:Math.round(l.height),isFrame:c})),b(e,"bpmn:BoundaryEvent")&&this._attachBoundary(e,i),b(e,"bpmn:Lane")&&(o=0),b(e,"bpmn:DataStoreReference")&&(mx(n,Pe(l))||(n=this._canvas.findRoot(n))),this._canvas.addShape(i,n,o)}else if(b(t,"bpmndi:BPMNEdge")){var u=this._getSource(e),p=this._getTarget(e);r=n&&(n.hidden||n.collapsed),i=this._elementFactory.createConnection(hs(e,t,{hidden:r,source:u,target:p,waypoints:hx(t,u,p)})),b(e,"bpmn:DataAssociation")&&(n=this._canvas.findRoot(n)),this._canvas.addConnection(i,n,o)}else throw new Error(`unknown di ${mn(t)} for element ${mn(e)}`);return Mr(e)&&jn(i)&&this.addLabel(e,t,i),this._eventBus.fire("bpmnElement.added",{element:i}),i},Di.prototype._attachBoundary=function(e,t){var n=e.attachedToRef;if(!n)throw new Error(`missing ${mn(e)}#attachedToRef`);var i=this._elementRegistry.get(n.id),r=i&&i.attachers;if(!i)throw jd(e,n,"attachedToRef");t.host=i,r||(i.attachers=r=[]),r.indexOf(t)===-1&&r.push(t)},Di.prototype.addLabel=function(e,t,n){var i,r,o;return i=kE(t,n),r=jn(n),r&&(i=this._textRenderer.getExternalLabelBounds(i,r)),o=this._elementFactory.createLabel(hs(e,t,{id:e.id+"_label",labelTarget:n,type:"label",hidden:n.hidden||!jn(n),x:Math.round(i.x),y:Math.round(i.y),width:Math.round(i.width),height:Math.round(i.height)})),this._canvas.addShape(o,n.parent)},Di.prototype._getConnectedElement=function(e,t){var n,i,r=e.$type;if(i=e[t+"Ref"],t==="source"&&r==="bpmn:DataInputAssociation"&&(i=i&&i[0]),(t==="source"&&r==="bpmn:DataOutputAssociation"||t==="target"&&r==="bpmn:DataInputAssociation")&&(i=e.$parent),n=i&&this._getElement(i),n)return n;throw i?jd(e,i,t+"Ref"):new Error(`${mn(e)}#${t} Ref not specified`)},Di.prototype._getSource=function(e){return this._getConnectedElement(e,"source")},Di.prototype._getTarget=function(e){return this._getConnectedElement(e,"target")},Di.prototype._getElement=function(e){return this._elementRegistry.get(e.id)};function mx(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function vx(e){return b(e,"bpmn:Group")}var gx={__depends__:[ds],bpmnImporter:["type",Di]},yx={__depends__:[fx,gx]};function Jo(e){this._counter=0,this._prefix=(e?e+"-":"")+Math.floor(Math.random()*1e9)+"-"}Jo.prototype.next=function(){return this._prefix+ ++this._counter};var _x=new Jo("ov"),bx=500;function rn(e,t,n,i){this._eventBus=t,this._canvas=n,this._elementRegistry=i,this._ids=_x,this._overlayDefaults=k({show:null,scale:!0},e&&e.defaults),this._overlays={},this._overlayContainers=[],this._overlayRoot=Ex(n.getContainer()),this._init()}rn.$inject=["config.overlays","eventBus","canvas","elementRegistry"],rn.prototype.get=function(e){if(ee(e)&&(e={id:e}),ee(e.element)&&(e.element=this._elementRegistry.get(e.element)),e.element){var t=this._getOverlayContainer(e.element,!0);return t?e.type?ne(t.overlays,de({type:e.type})):t.overlays.slice():[]}else return e.type?ne(this._overlays,de({type:e.type})):e.id?this._overlays[e.id]:null},rn.prototype.add=function(e,t,n){if($(t)&&(n=t,t=null),e.id||(e=this._elementRegistry.get(e)),!n.position)throw new Error("must specifiy overlay position");if(!n.html)throw new Error("must specifiy overlay html");if(!e)throw new Error("invalid element specified");var i=this._ids.next();return n=k({},this._overlayDefaults,n,{id:i,type:t,element:e,html:n.html}),this._addOverlay(n),i},rn.prototype.remove=function(e){var t=this.get(e)||[];se(t)||(t=[t]);var n=this;A(t,function(i){var r=n._getOverlayContainer(i.element,!0);if(i&&(bn(i.html),bn(i.htmlContainer),delete i.htmlContainer,delete i.element,delete n._overlays[i.id]),r){var o=r.overlays.indexOf(i);o!==-1&&r.overlays.splice(o,1)}})},rn.prototype.isShown=function(){return this._overlayRoot.style.display!=="none"},rn.prototype.show=function(){ms(this._overlayRoot)},rn.prototype.hide=function(){ms(this._overlayRoot,!1)},rn.prototype.clear=function(){this._overlays={},this._overlayContainers=[],Ui(this._overlayRoot)},rn.prototype._updateOverlayContainer=function(e){var t=e.element,n=e.html,i=t.x,r=t.y;if(t.waypoints){var o=Xt(t);i=o.x,r=o.y}$d(n,i,r),Vt(e.html,"data-container-id",t.id)},rn.prototype._updateOverlay=function(e){var t=e.position,n=e.htmlContainer,i=e.element,r=t.left,o=t.top;if(t.right!==void 0){var a;i.waypoints?a=Xt(i).width:a=i.width,r=t.right*-1+a}if(t.bottom!==void 0){var s;i.waypoints?s=Xt(i).height:s=i.height,o=t.bottom*-1+s}$d(n,r||0,o||0),this._updateOverlayVisibilty(e,this._canvas.viewbox())},rn.prototype._createOverlayContainer=function(e){var t=st('<div class="djs-overlays" />');Rt(t,{position:"absolute"}),this._overlayRoot.appendChild(t);var n={html:t,element:e,overlays:[]};return this._updateOverlayContainer(n),this._overlayContainers.push(n),n},rn.prototype._updateRoot=function(e){var t=e.scale||1,n="matrix("+[t,0,0,t,-1*e.x*t,-1*e.y*t].join(",")+")";zd(this._overlayRoot,n)},rn.prototype._getOverlayContainer=function(e,t){var n=te(this._overlayContainers,function(i){return i.element===e});return!n&&!t?this._createOverlayContainer(e):n},rn.prototype._addOverlay=function(e){var t=e.id,n=e.element,i=e.html,r,o;i.get&&i.constructor.prototype.jquery&&(i=i.get(0)),ee(i)&&(i=st(i)),o=this._getOverlayContainer(n),r=st('<div class="djs-overlay" data-overlay-id="'+t+'">'),Rt(r,{position:"absolute"}),r.appendChild(i),e.type&&Ne(r).add("djs-overlay-"+e.type);var a=this._canvas.findRoot(n),s=this._canvas.getRootElement();ms(r,a===s),e.htmlContainer=r,o.overlays.push(e),o.html.appendChild(r),this._overlays[t]=e,this._updateOverlay(e),this._updateOverlayVisibilty(e,this._canvas.viewbox())},rn.prototype._updateOverlayVisibilty=function(e,t){var n=e.show,i=this._canvas.findRoot(e.element),r=n&&n.minZoom,o=n&&n.maxZoom,a=e.htmlContainer,s=this._canvas.getRootElement(),c=!0;(i!==s||n&&(Ge(r)&&r>t.scale||Ge(o)&&o<t.scale))&&(c=!1),ms(a,c),this._updateOverlayScale(e,t)},rn.prototype._updateOverlayScale=function(e,t){var n=e.scale,i,r,o=e.htmlContainer,a,s="";n!==!0&&(n===!1?(i=1,r=1):(i=n.min,r=n.max),Ge(i)&&t.scale<i&&(a=(1/t.scale||1)*i),Ge(r)&&t.scale>r&&(a=(1/t.scale||1)*r)),Ge(a)&&(s="scale("+a+","+a+")"),zd(o,s)},rn.prototype._updateOverlaysVisibilty=function(e){var t=this;A(this._overlays,function(n){t._updateOverlayVisibilty(n,e)})},rn.prototype._init=function(){var e=this._eventBus,t=this;function n(i){t._updateRoot(i),t._updateOverlaysVisibilty(i),t.show()}e.on("canvas.viewbox.changing",function(i){t.hide()}),e.on("canvas.viewbox.changed",function(i){n(i.viewbox)}),e.on(["shape.remove","connection.remove"],function(i){var r=i.element,o=t.get({element:r});A(o,function(c){t.remove(c.id)});var a=t._getOverlayContainer(r);if(a){bn(a.html);var s=t._overlayContainers.indexOf(a);s!==-1&&t._overlayContainers.splice(s,1)}}),e.on("element.changed",bx,function(i){var r=i.element,o=t._getOverlayContainer(r,!0);o&&(A(o.overlays,function(a){t._updateOverlay(a)}),t._updateOverlayContainer(o))}),e.on("element.marker.update",function(i){var r=t._getOverlayContainer(i.element,!0);r&&Ne(r.html)[i.add?"add":"remove"](i.marker)}),e.on("root.set",function(){t._updateOverlaysVisibilty(t._canvas.viewbox())}),e.on("diagram.clear",this.clear,this)};function Ex(e){var t=st('<div class="djs-overlay-container" />');return Rt(t,{position:"absolute",width:0,height:0}),e.insertBefore(t,e.firstChild),t}function $d(e,t,n){Rt(e,{left:t+"px",top:n+"px"})}function ms(e,t){e.style.display=t===!1?"none":""}function zd(e,t){e.style["transform-origin"]="top left",["","-ms-","-webkit-"].forEach(function(n){e.style[n+"transform"]=t})}var vs={__init__:["overlays"],overlays:["type",rn]};function Hd(e,t,n,i){e.on("element.changed",function(r){var o=r.element;(o.parent||o===t.getRootElement())&&(r.gfx=n.getGraphics(o)),r.gfx&&e.fire(Mf(o)+".changed",r)}),e.on("elements.changed",function(r){var o=r.elements;o.forEach(function(a){e.fire("element.changed",{element:a})}),i.updateContainments(o)}),e.on("shape.changed",function(r){i.update("shape",r.element,r.gfx)}),e.on("connection.changed",function(r){i.update("connection",r.element,r.gfx)})}Hd.$inject=["eventBus","canvas","elementRegistry","graphicsFactory"];var Il={__init__:["changeSupport"],changeSupport:["type",Hd]},xx=1e3;function X(e){this._eventBus=e}X.$inject=["eventBus"];function wx(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}X.prototype.on=function(e,t,n,i,r,o){if((q(t)||L(t))&&(o=r,r=i,i=n,n=t,t=null),q(n)&&(o=r,r=i,i=n,n=xx),$(r)&&(o=r,r=!1),!q(i))throw new Error("handlerFn must be a function");se(e)||(e=[e]);var a=this._eventBus;A(e,function(s){var c=["commandStack",s,t].filter(function(l){return l}).join(".");a.on(c,n,r?wx(i,o):i,o)})},X.prototype.canExecute=Mi("canExecute"),X.prototype.preExecute=Mi("preExecute"),X.prototype.preExecuted=Mi("preExecuted"),X.prototype.execute=Mi("execute"),X.prototype.executed=Mi("executed"),X.prototype.postExecute=Mi("postExecute"),X.prototype.postExecuted=Mi("postExecuted"),X.prototype.revert=Mi("revert"),X.prototype.reverted=Mi("reverted");function Mi(e){return function(n,i,r,o,a){(q(n)||L(n))&&(a=o,o=r,r=i,i=n,n=null),this.on(n,e,i,r,o,a)}}function Ol(e,t){t.invoke(X,this),this.executed(function(n){var i=n.context;i.rootElement?e.setRootElement(i.rootElement):i.rootElement=e.getRootElement()}),this.revert(function(n){var i=n.context;i.rootElement&&e.setRootElement(i.rootElement)})}j(Ol,X),Ol.$inject=["canvas","injector"];var Sx={__init__:["rootElementsBehavior"],rootElementsBehavior:["type",Ol]};function ea(e){return CSS.escape(e)}var Cx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Bl(e){return e=""+e,e&&e.replace(/[&<>"']/g,function(t){return Cx[t]})}var Gd="_plane";function Ud(e){var t=e.id;return Px(t)}function ki(e){var t=e.id;return b(e,"bpmn:SubProcess")?Vd(t):t}function Ir(e){return Vd(e)}function gs(e){var t=qe(e);return b(t,"bpmndi:BPMNPlane")}function Vd(e){return e+Gd}function Px(e){return e.replace(new RegExp(Gd+"$"),"")}var Rx="bjs-breadcrumbs-shown";function Zd(e,t,n){var i=st('<ul class="bjs-breadcrumbs"></ul>'),r=n.getContainer(),o=Ne(r);r.appendChild(i);var a=[];e.on("element.changed",function(c){var l=c.element,u=Q(l),p=te(a,function(f){return f===u});p&&s()});function s(c){c&&(a=Ax(c));var l=a.flatMap(function(p){var f=n.findRoot(ki(p))||n.findRoot(p.id);if(!f&&b(p,"bpmn:Process")){var d=t.find(function(m){var S=Q(m);return S&&S.get("processRef")===p});f=d&&n.findRoot(d.id)}if(!f)return[];var h=Bl(p.name||p.id),v=st('<li><span class="bjs-crumb"><a title="'+h+'">'+h+"</a></span></li>");return v.addEventListener("click",function(){n.setRootElement(f)}),v});i.innerHTML="";var u=l.length>1;o.toggle(Rx,u),l.forEach(function(p){i.appendChild(p)})}e.on("root.set",function(c){s(c.element)})}Zd.$inject=["eventBus","elementRegistry","canvas"];function Ax(e){for(var t=Q(e),n=[],i=t;i;i=i.$parent)(b(i,"bpmn:SubProcess")||b(i,"bpmn:Process"))&&n.push(i);return n.reverse()}function Wd(e,t){var n=null,i=new Tx;e.on("root.set",function(r){var o=r.element,a=t.viewbox(),s=i.get(o);if(i.set(n,{x:a.x,y:a.y,zoom:a.scale}),n=o,!(!b(o,"bpmn:SubProcess")&&!s)){s=s||{x:0,y:0,zoom:1};var c=(a.x-s.x)*a.scale,l=(a.y-s.y)*a.scale;(c!==0||l!==0)&&t.scroll({dx:c,dy:l}),s.zoom!==a.scale&&t.zoom(s.zoom,{x:0,y:0})}}),e.on("diagram.clear",function(){i.clear(),n=null})}Wd.$inject=["eventBus","canvas"];function Tx(){this._entries=[],this.set=function(e,t){var n=!1;for(var i in this._entries)if(this._entries[i][0]===e){this._entries[i][1]=t,n=!0;break}n||this._entries.push([e,t])},this.get=function(e){for(var t in this._entries)if(this._entries[t][0]===e)return this._entries[t][1];return null},this.clear=function(){this._entries.length=0},this.remove=function(e){var t=-1;for(var n in this._entries)if(this._entries[n][0]===e){t=n;break}t!==-1&&this._entries.splice(t,1)}}var Yd={x:180,y:160};function Or(e,t){this._eventBus=e,this._moddle=t;var n=this;e.on("import.render.start",1500,function(i,r){n._handleImport(r.definitions)})}Or.prototype._handleImport=function(e){if(e.diagrams){var t=this;this._definitions=e,this._processToDiagramMap={},e.diagrams.forEach(function(i){!i.plane||!i.plane.bpmnElement||(t._processToDiagramMap[i.plane.bpmnElement.id]=i)});var n=e.diagrams.filter(i=>i.plane).flatMap(i=>t._createNewDiagrams(i.plane));n.forEach(function(i){t._movePlaneElementsToOrigin(i.plane)})}},Or.prototype._createNewDiagrams=function(e){var t=this,n=[],i=[];e.get("planeElement").forEach(function(o){var a=o.bpmnElement;if(a){var s=a.$parent;b(a,"bpmn:SubProcess")&&!o.isExpanded&&n.push(a),Mx(a,e)&&i.push({diElement:o,parent:s})}});var r=[];return n.forEach(function(o){if(!t._processToDiagramMap[o.id]){var a=t._createDiagram(o);t._processToDiagramMap[o.id]=a,r.push(a)}}),i.forEach(function(o){for(var a=o.diElement,s=o.parent;s&&n.indexOf(s)===-1;)s=s.$parent;if(s){var c=t._processToDiagramMap[s.id];t._moveToDiPlane(a,c.plane)}}),r},Or.prototype._movePlaneElementsToOrigin=function(e){var t=e.get("planeElement"),n=Dx(e),i={x:n.x-Yd.x,y:n.y-Yd.y};t.forEach(function(r){r.waypoint?r.waypoint.forEach(function(o){o.x=o.x-i.x,o.y=o.y-i.y}):r.bounds&&(r.bounds.x=r.bounds.x-i.x,r.bounds.y=r.bounds.y-i.y)})},Or.prototype._moveToDiPlane=function(e,t){var n=Kd(e),i=n.plane.get("planeElement");i.splice(i.indexOf(e),1),t.get("planeElement").push(e)},Or.prototype._createDiagram=function(e){var t=this._moddle.create("bpmndi:BPMNPlane",{bpmnElement:e}),n=this._moddle.create("bpmndi:BPMNDiagram",{plane:t});return t.$parent=n,t.bpmnElement=e,n.$parent=this._definitions,this._definitions.diagrams.push(n),n},Or.$inject=["eventBus","moddle"];function Kd(e){return b(e,"bpmndi:BPMNDiagram")?e:Kd(e.$parent)}function Dx(e){var t={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return e.planeElement.forEach(function(n){if(n.bounds){var i=Ee(n.bounds);t.top=Math.min(i.top,t.top),t.left=Math.min(i.left,t.left)}}),Ja(t)}function Mx(e,t){var n=e.$parent;return!(!b(n,"bpmn:SubProcess")||n===t.bpmnElement||je(e,["bpmn:DataInputAssociation","bpmn:DataOutputAssociation"]))}var ys=250,kx='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M4.81801948,3.50735931 L10.4996894,9.1896894 L10.5,4 L12,4 L12,12 L4,12 L4,10.5 L9.6896894,10.4996894 L3.75735931,4.56801948 C3.46446609,4.27512627 3.46446609,3.80025253 3.75735931,3.50735931 C4.05025253,3.21446609 4.52512627,3.21446609 4.81801948,3.50735931 Z"/></svg>',Ix="bjs-drilldown-empty";function tr(e,t,n,i,r){X.call(this,t),this._canvas=e,this._eventBus=t,this._elementRegistry=n,this._overlays=i,this._translate=r;var o=this;this.executed("shape.toggleCollapse",ys,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.reverted("shape.toggleCollapse",ys,function(a){var s=a.shape;o._canDrillDown(s)?o._addOverlay(s):o._removeOverlay(s)},!0),this.executed(["shape.create","shape.move","shape.delete"],ys,function(a){var s=a.oldParent,c=a.newParent||a.parent,l=a.shape;o._canDrillDown(l)&&o._addOverlay(l),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(l)},!0),this.reverted(["shape.create","shape.move","shape.delete"],ys,function(a){var s=a.oldParent,c=a.newParent||a.parent,l=a.shape;o._canDrillDown(l)&&o._addOverlay(l),o._updateDrilldownOverlay(s),o._updateDrilldownOverlay(c),o._updateDrilldownOverlay(l)},!0),t.on("import.render.complete",function(){n.filter(function(a){return o._canDrillDown(a)}).map(function(a){o._addOverlay(a)})})}j(tr,X),tr.prototype._updateDrilldownOverlay=function(e){var t=this._canvas;if(e){var n=t.findRoot(e);n&&this._updateOverlayVisibility(n)}},tr.prototype._canDrillDown=function(e){var t=this._canvas;return b(e,"bpmn:SubProcess")&&t.findRoot(ki(e))},tr.prototype._updateOverlayVisibility=function(e){var t=this._overlays,n=Q(e),i=t.get({element:n.id,type:"drilldown"})[0];if(i){var r=n&&n.get("flowElements")&&n.get("flowElements").length;Ne(i.html).toggle(Ix,!r)}},tr.prototype._addOverlay=function(e){var t=this._canvas,n=this._overlays,i=Q(e),r=n.get({element:e,type:"drilldown"});r.length&&this._removeOverlay(e);var o=st('<button type="button" class="bjs-drilldown">'+kx+"</button>"),a=i.get("name")||i.get("id"),s=this._translate("Open {element}",{element:a});o.setAttribute("title",s),o.addEventListener("click",function(){t.setRootElement(t.findRoot(ki(e)))}),n.add(e,"drilldown",{position:{bottom:-7,right:-8},html:o}),this._updateOverlayVisibility(e)},tr.prototype._removeOverlay=function(e){var t=this._overlays;t.remove({element:e,type:"drilldown"})},tr.$inject=["canvas","eventBus","elementRegistry","overlays","translate"];var Ox={__depends__:[vs,Il,Sx],__init__:["drilldownBreadcrumbs","drilldownOverlayBehavior","drilldownCentering","subprocessCompatibility"],drilldownBreadcrumbs:["type",Zd],drilldownCentering:["type",Wd],drilldownOverlayBehavior:["type",tr],subprocessCompatibility:["type",Or]},Bx=500,Nx=1e3;function Br(e,t){this._eventBus=e,this.offset=5;var n=t.cls("djs-outline",["no-fill"]),i=this;function r(o){var a=ve("rect");return ce(a,k({x:0,y:0,rx:4,width:100,height:100},n)),a}e.on(["shape.added","shape.changed"],Bx,function(o){var a=o.element,s=o.gfx,c=ot(".djs-outline",s);c||(c=i.getOutline(a)||r(s),we(s,c)),i.updateShapeOutline(c,a)}),e.on(["connection.added","connection.changed"],function(o){var a=o.element,s=o.gfx,c=ot(".djs-outline",s);c||(c=r(s),we(s,c)),i.updateConnectionOutline(c,a)})}Br.prototype.updateShapeOutline=function(e,t){var n=!1,i=this._getProviders();i.length&&A(i,function(r){n=n||r.updateOutline(t,e)}),n||ce(e,{x:-this.offset,y:-this.offset,width:t.width+this.offset*2,height:t.height+this.offset*2})},Br.prototype.updateConnectionOutline=function(e,t){var n=Xt(t);ce(e,{x:n.x-this.offset,y:n.y-this.offset,width:n.width+this.offset*2,height:n.height+this.offset*2})},Br.prototype.registerProvider=function(e,t){t||(t=e,e=Nx),this._eventBus.on("outline.getProviders",e,function(n){n.providers.push(t)})},Br.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"outline.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},Br.prototype.getOutline=function(e){var t,n=this._getProviders();return A(n,function(i){q(i.getOutline)&&(t=t||i.getOutline(e))}),t},Br.$inject=["eventBus","styles","elementRegistry"];var Nl={__init__:["outline"],outline:["type",Br]};const Lx="M44.7648 11.3263L36.9892 2.64074C36.0451 1.58628 34.5651 0.988708 33.1904 0.988708H5.98667C3.22688 0.988708 0.989624 3.34892 0.989624 6.26039V55.0235C0.989624 57.9349 3.22688 60.2952 5.98667 60.2952H40.966C43.7257 60.2952 45.963 57.9349 45.963 55.0235V14.9459C45.963 13.5998 45.6407 12.3048 44.7648 11.3263Z",Fx="M1.03845 48.1347C1.03845 49.3511 1.07295 50.758 1.38342 52.064C1.69949 53.3938 2.32428 54.7154 3.56383 55.6428C6.02533 57.4841 10.1161 58.7685 14.8212 59.6067C19.5772 60.4538 25.1388 60.8738 30.6831 60.8738C36.2276 60.8738 41.7891 60.4538 46.545 59.6067C51.2504 58.7687 55.3412 57.4842 57.8028 55.6429C59.0424 54.7156 59.6673 53.3938 59.9834 52.064C60.2938 50.7579 60.3285 49.351 60.3285 48.1344V13.8415C60.3285 12.6249 60.2938 11.218 59.9834 9.91171C59.6673 8.58194 59.0423 7.2602 57.8027 6.33294C55.341 4.49168 51.2503 3.20723 46.545 2.36914C41.7891 1.522 36.2276 1.10204 30.6831 1.10205C25.1388 1.10206 19.5772 1.52206 14.8213 2.36923C10.1162 3.20734 6.02543 4.49183 3.5639 6.33314C2.32433 7.26038 1.69951 8.58206 1.38343 9.91181C1.07295 11.2179 1.03845 12.6247 1.03845 13.8411V48.1347Z",jx={width:36,height:50},$x={width:50,height:50};function Xd(e,t,n){return ve("path",Be({d:e,strokeWidth:2,transform:`translate(${t.x}, ${t.y})`},n))}const nr=5;function _s(e,t){this._styles=t,e.registerProvider(this)}_s.$inject=["outline","styles"],_s.prototype.getOutline=function(e){const t=this._styles.cls("djs-outline",["no-fill"]);var n;if(!Xe(e))return b(e,"bpmn:Gateway")?(n=ve("rect"),k(n.style,{"transform-box":"fill-box",transform:"rotate(45deg)","transform-origin":"center"}),ce(n,k({x:2,y:2,rx:4,width:e.width-4,height:e.height-4},t))):je(e,["bpmn:Task","bpmn:SubProcess","bpmn:Group","bpmn:CallActivity"])?(n=ve("rect"),ce(n,k({x:-nr,y:-nr,rx:14,width:e.width+nr*2,height:e.height+nr*2},t))):b(e,"bpmn:EndEvent")?(n=ve("circle"),ce(n,k({cx:e.width/2,cy:e.height/2,r:e.width/2+nr+1},t))):b(e,"bpmn:Event")?(n=ve("circle"),ce(n,k({cx:e.width/2,cy:e.height/2,r:e.width/2+nr},t))):b(e,"bpmn:DataObjectReference")&&qd(e,"bpmn:DataObjectReference")?n=Xd(Lx,{x:-6,y:-6},t):b(e,"bpmn:DataStoreReference")&&qd(e,"bpmn:DataStoreReference")&&(n=Xd(Fx,{x:-6,y:-6},t)),n},_s.prototype.updateOutline=function(e,t){if(!Xe(e))return je(e,["bpmn:SubProcess","bpmn:Group"])?(ce(t,{width:e.width+nr*2,height:e.height+nr*2}),!0):!!je(e,["bpmn:Event","bpmn:Gateway","bpmn:DataStoreReference","bpmn:DataObjectReference"])};function qd(e,t){var n;return t==="bpmn:DataObjectReference"?n=jx:t==="bpmn:DataStoreReference"&&(n=$x),e.width===n.width&&e.height===n.height}var zx={__depends__:[Nl],__init__:["outlineProvider"],outlineProvider:["type",_s]};function Qd(e){!e||typeof e.stopPropagation!="function"||e.stopPropagation()}function io(e){return e.originalEvent||e.srcEvent}function Ll(e){Qd(e),Qd(io(e))}function Nr(e){return e.pointers&&e.pointers.length&&(e=e.pointers[0]),e.touches&&e.touches.length&&(e=e.touches[0]),e?{x:e.clientX,y:e.clientY}:null}function Jd(){return/mac/i.test(navigator.platform)}function Fl(e,t){return(io(e)||e).button===t}function ir(e){return Fl(e,0)}function Hx(e){return Fl(e,1)}function ZD(e){return Fl(e,2)}function ta(e){var t=io(e)||e;return ir(e)?Jd()?t.metaKey:t.ctrlKey:!1}function bs(e){var t=io(e)||e;return ir(e)&&t.shiftKey}function Gx(e){return!0}function Es(e){return ir(e)||Hx(e)}var eh=500;function th(e,t,n){var i=this;function r(T,O,B){if(!s(T,O)){var F,z,H;B?z=t.getGraphics(B):(F=O.delegateTarget||O.target,F&&(z=F,B=t.get(z))),!(!z||!B)&&(H=e.fire(T,{element:B,gfx:z,originalEvent:O}),H===!1&&(O.stopPropagation(),O.preventDefault()))}}var o={};function a(T){return o[T]}function s(T,O){var B=l[T]||ir;return!B(O)}var c={click:"element.click",contextmenu:"element.contextmenu",dblclick:"element.dblclick",mousedown:"element.mousedown",mousemove:"element.mousemove",mouseover:"element.hover",mouseout:"element.out",mouseup:"element.mouseup"},l={"element.contextmenu":Gx,"element.mousedown":Es,"element.mouseup":Es,"element.click":Es,"element.dblclick":Es};function u(T,O,B){var F=c[T];if(!F)throw new Error("unmapped DOM event name <"+T+">");return r(F,O,B)}var p="svg, .djs-element";function f(T,O,B,F){var z=o[B]=function(H){r(B,H)};F&&(l[B]=F),z.$delegate=vt.bind(T,p,O,z)}function d(T,O,B){var F=a(B);F&&vt.unbind(T,O,F.$delegate)}function h(T){A(c,function(O,B){f(T,B,O)})}function v(T){A(c,function(O,B){d(T,B,O)})}e.on("canvas.destroy",function(T){v(T.svg)}),e.on("canvas.init",function(T){h(T.svg)}),e.on(["shape.added","connection.added"],function(T){var O=T.element,B=T.gfx;e.fire("interactionEvents.createHit",{element:O,gfx:B})}),e.on(["shape.changed","connection.changed"],eh,function(T){var O=T.element,B=T.gfx;e.fire("interactionEvents.updateHit",{element:O,gfx:B})}),e.on("interactionEvents.createHit",eh,function(T){var O=T.element,B=T.gfx;i.createDefaultHit(O,B)}),e.on("interactionEvents.updateHit",function(T){var O=T.element,B=T.gfx;i.updateDefaultHit(O,B)});var m=w("djs-hit djs-hit-stroke"),S=w("djs-hit djs-hit-click-stroke"),x=w("djs-hit djs-hit-all"),E=w("djs-hit djs-hit-no-move"),y={all:x,"click-stroke":S,stroke:m,"no-move":E};function w(T,O){return O=k({stroke:"white",strokeWidth:15},O||{}),n.cls(T,["no-fill","no-border"],O)}function R(T,O){var B=y[O];if(!B)throw new Error("invalid hit type <"+O+">");return ce(T,B),T}function I(T,O){we(T,O)}this.removeHits=function(T){var O=Bn(".djs-hit",T);A(O,Zt)},this.createDefaultHit=function(T,O){var B=T.waypoints,F=T.isFrame,z;return B?this.createWaypointsHit(O,B):(z=F?"stroke":"all",this.createBoxHit(O,z,{width:T.width,height:T.height}))},this.createWaypointsHit=function(T,O){var B=Wa(O);return R(B,"stroke"),I(T,B),B},this.createBoxHit=function(T,O,B){B=k({x:0,y:0},B);var F=ve("rect");return R(F,O),ce(F,B),I(T,F),F},this.updateDefaultHit=function(T,O){var B=ot(".djs-hit",O);if(B)return T.waypoints?Rf(B,T.waypoints):ce(B,{width:T.width,height:T.height}),B},this.fire=r,this.triggerMouseEvent=u,this.mouseHandler=a,this.registerEvent=f,this.unregisterEvent=d}th.$inject=["eventBus","elementRegistry","styles"];var xs={__init__:["interactionEvents"],interactionEvents:["type",th]};function ro(e,t){this._eventBus=e,this._canvas=t,this._selectedElements=[];var n=this;e.on(["shape.remove","connection.remove"],function(i){var r=i.element;n.deselect(r)}),e.on(["diagram.clear","root.set"],function(i){n.select(null)})}ro.$inject=["eventBus","canvas"],ro.prototype.deselect=function(e){var t=this._selectedElements,n=t.indexOf(e);if(n!==-1){var i=t.slice();t.splice(n,1),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:t})}},ro.prototype.get=function(){return this._selectedElements},ro.prototype.isSelected=function(e){return this._selectedElements.indexOf(e)!==-1},ro.prototype.select=function(e,t){var n=this._selectedElements,i=n.slice();se(e)||(e=e?[e]:[]);var r=this._canvas,o=r.getRootElement();e=e.filter(function(a){var s=r.findRoot(a);return o===s}),t?A(e,function(a){n.indexOf(a)===-1&&n.push(a)}):this._selectedElements=n=e.slice(),this._eventBus.fire("selection.changed",{oldSelection:i,newSelection:n})};var nh="hover",ih="selected",ws=6;function jl(e,t,n){this._canvas=e;var i=this;this._multiSelectionBox=null;function r(a,s){e.addMarker(a,s)}function o(a,s){e.removeMarker(a,s)}t.on("element.hover",function(a){r(a.element,nh)}),t.on("element.out",function(a){o(a.element,nh)}),t.on("selection.changed",function(a){function s(p){o(p,ih)}function c(p){r(p,ih)}var l=a.oldSelection,u=a.newSelection;A(l,function(p){u.indexOf(p)===-1&&s(p)}),A(u,function(p){l.indexOf(p)===-1&&c(p)}),i._updateSelectionOutline(u)}),t.on("element.changed",function(a){n.isSelected(a.element)&&i._updateSelectionOutline(n.get())})}jl.$inject=["canvas","eventBus","selection"],jl.prototype._updateSelectionOutline=function(e){var t=this._canvas.getLayer("selectionOutline");Lo(t);var n=e.length>1,i=this._canvas.getContainer();if(Ke(i)[n?"add":"remove"]("djs-multi-select"),!!n){var r=Ux(Xt(e)),o=ve("rect");ce(o,k({rx:3},r)),Ke(o).add("djs-selection-outline"),we(t,o)}};function Ux(e){return{x:e.x-ws,y:e.y-ws,width:e.width+ws*2,height:e.height+ws*2}}function rh(e,t,n,i){e.on("create.end",500,function(r){var o=r.context,a=o.canExecute,s=o.elements,c=o.hints||{},l=c.autoSelect;if(a){if(l===!1)return;se(l)?t.select(l):t.select(s.filter(Vx))}}),e.on("connect.end",500,function(r){var o=r.context,a=o.connection;a&&t.select(a)}),e.on("shape.move.end",500,function(r){var o=r.previousSelection||[],a=i.get(r.context.shape.id),s=te(o,function(c){return a.id===c.id});s||t.select(a)}),e.on("element.click",function(r){if(ir(r)){var o=r.element;o===n.getRootElement()&&(o=null);var a=t.isSelected(o),s=t.get().length>1,c=bs(r);if(a&&s)return c?t.deselect(o):t.select(o);a?t.deselect(o):t.select(o,c)}})}rh.$inject=["eventBus","selection","canvas","elementRegistry"];function Vx(e){return!e.hidden}var _i={__init__:["selectionVisuals","selectionBehavior"],__depends__:[xs,Nl],selection:["type",ro],selectionVisuals:["type",jl],selectionBehavior:["type",rh]};function rr(e){xt.call(this,e)}j(rr,xt),rr.prototype._modules=[yx,Ox,zx,vs,_i,ds],rr.prototype._moddleExtensions={};var Zx=["c","C"],Wx=["v","V"],Yx=["y","Y"],oh=["z","Z"];function Kx(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function $n(e){return e.altKey?!1:e.ctrlKey||e.metaKey}function Qt(e,t){return e=se(e)?e:[e],e.indexOf(t.key)!==-1||e.indexOf(t.code)!==-1}function $l(e){return e.shiftKey}function Xx(e){return $n(e)&&Qt(Zx,e)}function qx(e){return $n(e)&&Qt(Wx,e)}function Qx(e){return $n(e)&&!$l(e)&&Qt(oh,e)}function Jx(e){return $n(e)&&(Qt(Yx,e)||Qt(oh,e)&&$l(e))}var Ss="keyboard.keydown",ew="keyboard.keyup",ah="input-handle-modified-keys",tw=1e3;function un(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",function(){n._fire("destroy"),n.unbind()}),t.on("diagram.init",function(){n._fire("init")}),t.on("attach",function(){e&&e.bindTo&&n.bind(e.bindTo)}),t.on("detach",function(){n.unbind()})}un.$inject=["config.keyboard","eventBus"],un.prototype._keydownHandler=function(e){this._keyHandler(e,Ss)},un.prototype._keyupHandler=function(e){this._keyHandler(e,ew)},un.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var i={keyEvent:e};n=this._eventBus.fire(t||Ss,i),n&&e.preventDefault()}},un.prototype._isEventIgnored=function(e){return e.defaultPrevented?!0:(nw(e.target)||iw(e.target)&&Qt([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)},un.prototype._isModifiedKeyIgnored=function(e){if(!$n(e))return!0;var t=this._getAllowedModifiers(e.target);return t.indexOf(e.key)===-1},un.prototype._getAllowedModifiers=function(e){var t=Gn(e,"["+ah+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(ah).split(",")},un.prototype.bind=function(e){this.unbind(),this._node=e,be.bind(e,"keydown",this._keydownHandler),be.bind(e,"keyup",this._keyupHandler),this._fire("bind")},un.prototype.getBinding=function(){return this._node},un.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),be.unbind(e,"keydown",this._keydownHandler),be.unbind(e,"keyup",this._keyupHandler)),this._node=null},un.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},un.prototype.addListener=function(e,t,n){q(e)&&(n=t,t=e,e=tw),this._eventBus.on(n||Ss,e,t)},un.prototype.removeListener=function(e,t){this._eventBus.off(t||Ss,e)},un.prototype.hasModifier=Kx,un.prototype.isCmd=$n,un.prototype.isShift=$l,un.prototype.isKey=Qt;function nw(e){return e&&(Si(e,"input, textarea")||e.contentEditable==="true")}function iw(e){return e&&Si(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}var rw=500;function oo(e,t){var n=this;e.on("editorActions.init",rw,function(i){var r=i.editorActions;n.registerBindings(t,r)})}oo.$inject=["eventBus","keyboard"],oo.prototype.registerBindings=function(e,t){function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("undo",function(i){var r=i.keyEvent;if(Qx(r))return t.trigger("undo"),!0}),n("redo",function(i){var r=i.keyEvent;if(Jx(r))return t.trigger("redo"),!0}),n("copy",function(i){var r=i.keyEvent;if(Xx(r))return t.trigger("copy"),!0}),n("paste",function(i){var r=i.keyEvent;if(qx(r))return t.trigger("paste"),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Qt(["+","Add","="],r)&&$n(r))return t.trigger("stepZoom",{value:1}),!0}),n("stepZoom",function(i){var r=i.keyEvent;if(Qt(["-","Subtract"],r)&&$n(r))return t.trigger("stepZoom",{value:-1}),!0}),n("zoom",function(i){var r=i.keyEvent;if(Qt("0",r)&&$n(r))return t.trigger("zoom",{value:1}),!0}),n("removeSelection",function(i){var r=i.keyEvent;if(Qt(["Backspace","Delete","Del"],r))return t.trigger("removeSelection"),!0})};var zl={__init__:["keyboard","keyboardBindings"],keyboard:["type",un],keyboardBindings:["type",oo]},ow={moveSpeed:50,moveSpeedAccelerated:200};function sh(e,t,n){var i=this;this._config=k({},ow,e||{}),t.addListener(r);function r(o){var a=o.keyEvent,s=i._config;if(t.isCmd(a)&&t.isKey(["ArrowLeft","Left","ArrowUp","Up","ArrowDown","Down","ArrowRight","Right"],a)){var c=t.isShift(a)?s.moveSpeedAccelerated:s.moveSpeed,l;switch(a.key){case"ArrowLeft":case"Left":l="left";break;case"ArrowUp":case"Up":l="up";break;case"ArrowRight":case"Right":l="right";break;case"ArrowDown":case"Down":l="down";break}return i.moveCanvas({speed:c,direction:l}),!0}}this.moveCanvas=function(o){var a=0,s=0,c=o.speed,l=c/Math.min(Math.sqrt(n.viewbox().scale),1);switch(o.direction){case"left":a=l;break;case"up":s=l;break;case"right":a=-l;break;case"down":s=-l;break}n.scroll({dx:a,dy:s})}}sh.$inject=["config.keyboardMove","keyboard","canvas"];var ch={__depends__:[zl],__init__:["keyboardMove"],keyboardMove:["type",sh]},aw=/^djs-cursor-.*$/;function Cs(e){var t=Ne(document.body);t.removeMatching(aw),e&&t.add("djs-cursor-"+e)}function lh(){Cs(null)}function WD(e){var t=domClasses(document.body);return t.has("djs-cursor-"+e)}var sw=5e3;function uh(e,t){t=t||"element.click";function n(){return!1}return e.once(t,sw,n),function(){e.off(t,n)}}function na(e){return{x:e.x+e.width/2,y:e.y+e.height/2}}function oi(e,t){return{x:e.x-t.x,y:e.y-t.y}}var cw=15;function ph(e,t){var n;e.on("element.mousedown",500,function(a){return o(a.originalEvent)});function i(a){var s=n.start,c=n.button,l=Nr(a),u=oi(l,s);if(!n.dragging&&lw(u)>cw&&(n.dragging=!0,c===0&&uh(e),Cs("grab")),n.dragging){var p=n.last||n.start;u=oi(l,p),t.scroll({dx:u.x,dy:u.y}),n.last=l}a.preventDefault()}function r(a){be.unbind(document,"mousemove",i),be.unbind(document,"mouseup",r),n=null,lh()}function o(a){if(!Gn(a.target,".djs-draggable")){var s=a.button;if(!(s>=2||a.ctrlKey||a.shiftKey||a.altKey))return n={button:s,start:Nr(a)},be.bind(document,"mousemove",i),be.bind(document,"mouseup",r),!0}}this.isActive=function(){return!!n}}ph.$inject=["eventBus","canvas"];function lw(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}var fh={__init__:["moveCanvas"],moveCanvas:["type",ph]};function Hl(e){return Math.log(e)/Math.log(10)}function dh(e,t){var n=Hl(e.min),i=Hl(e.max),r=Math.abs(n)+Math.abs(i);return r/t}function uw(e,t){return Math.max(e.min,Math.min(e.max,t))}var pw=Math.sign||function(e){return e>=0?1:-1},Gl={min:.2,max:4},hh=10,fw=.1,dw=.75;function bi(e,t,n){e=e||{},this._enabled=!1,this._canvas=n,this._container=n._container,this._handleWheel=rt(this._handleWheel,this),this._totalDelta=0,this._scale=e.scale||dw;var i=this;t.on("canvas.init",function(r){i._init(e.enabled!==!1)})}bi.$inject=["config.zoomScroll","eventBus","canvas"],bi.prototype.scroll=function(t){this._canvas.scroll(t)},bi.prototype.reset=function(){this._canvas.zoom("fit-viewport")},bi.prototype.zoom=function(t,n){var i=dh(Gl,hh*2);this._totalDelta+=t,Math.abs(this._totalDelta)>fw&&(this._zoom(t,n,i),this._totalDelta=0)},bi.prototype._handleWheel=function(t){if(!Gn(t.target,".djs-scrollable",!0)){var n=this._container;t.preventDefault();var i=t.ctrlKey||Jd()&&t.metaKey,r=t.shiftKey,o=-1*this._scale,a;if(i?o*=t.deltaMode===0?.02:.32:o*=t.deltaMode===0?1:16,i){var s=n.getBoundingClientRect(),c={x:t.clientX-s.left,y:t.clientY-s.top};a=Math.sqrt(Math.pow(t.deltaY,2)+Math.pow(t.deltaX,2))*pw(t.deltaY)*o,this.zoom(a,c)}else r?a={dx:o*t.deltaY,dy:0}:a={dx:o*t.deltaX,dy:o*t.deltaY},this.scroll(a)}},bi.prototype.stepZoom=function(t,n){var i=dh(Gl,hh);this._zoom(t,n,i)},bi.prototype._zoom=function(e,t,n){var i=this._canvas,r=e>0?1:-1,o=Hl(i.zoom()),a=Math.round(o/n)*n;a+=n*r;var s=Math.pow(10,a);i.zoom(uw(Gl,s),t)},bi.prototype.toggle=function(t){var n=this._container,i=this._handleWheel,r=this._enabled;return typeof t=="undefined"&&(t=!r),r!==t&&be[t?"bind":"unbind"](n,"wheel",i,!1),this._enabled=t,t},bi.prototype._init=function(e){this.toggle(e)};var mh={__init__:["zoomScroll"],zoomScroll:["type",bi]};function ia(e){rr.call(this,e)}j(ia,rr),ia.prototype._navigationModules=[ch,fh,mh],ia.prototype._modules=[].concat(rr.prototype._modules,ia.prototype._navigationModules);function Ul(e){return e&&e[e.length-1]}function vh(e){return e.y}function gh(e){return e.x}var hw={left:gh,center:gh,right:function(e){return e.x+e.width},top:vh,middle:vh,bottom:function(e){return e.y+e.height}};function ao(e,t){this._modeling=e,this._rules=t}ao.$inject=["modeling","rules"],ao.prototype._getOrientationDetails=function(e){var t=["top","bottom","middle"],n="x",i="width";return t.indexOf(e)!==-1&&(n="y",i="height"),{axis:n,dimension:i}},ao.prototype._isType=function(e,t){return t.indexOf(e)!==-1},ao.prototype._alignmentPosition=function(e,t){var n=this._getOrientationDetails(e),i=n.axis,r=n.dimension,o={},a={},s=!1,c,l,u;function p(f,d){return Math.round((f[i]+d[i]+d[r])/2)}if(this._isType(e,["left","top"]))o[e]=t[0][i];else if(this._isType(e,["right","bottom"]))u=Ul(t),o[e]=u[i]+u[r];else if(this._isType(e,["center","middle"])){if(A(t,function(f){var d=f[i]+Math.round(f[r]/2);a[d]?a[d].elements.push(f):a[d]={elements:[f],center:d}}),c=dn(a,function(f){return f.elements.length>1&&(s=!0),f.elements.length}),s)return o[e]=Ul(c).center,o;l=t[0],t=dn(t,function(f){return f[i]+f[r]}),u=Ul(t),o[e]=p(l,u)}return o},ao.prototype.trigger=function(e,t){var n=this._modeling,i,r=ne(e,function(c){return!(c.waypoints||c.host||c.labelTarget)});if(i=this._rules.allowed("elements.align",{elements:r}),se(i)&&(r=i),!(r.length<2||!i)){var o=hw[t],a=dn(r,o),s=this._alignmentPosition(t,a);n.alignElements(a,s)}};var mw={__init__:["alignElements"],alignElements:["type",ao]};const vw=new Jo;function so(e){this._scheduled={},e.on("diagram.destroy",()=>{Object.keys(this._scheduled).forEach(t=>{this.cancel(t)})})}so.$inject=["eventBus"],so.prototype.schedule=function(e,t=vw.next()){this.cancel(t);const n=this._schedule(e,t);return this._scheduled[t]=n,n.promise},so.prototype._schedule=function(e,t){const{promise:n,resolve:i,reject:r}=gw();return{executionId:requestAnimationFrame(()=>{try{i(e())}catch(a){r(a)}}),promise:n}},so.prototype.cancel=function(e){const t=this._scheduled[e];t&&(this._cancel(t),this._scheduled[e]=null)},so.prototype._cancel=function(e){cancelAnimationFrame(e.executionId)};function gw(){let e,t;return{promise:new Promise((i,r)=>{e=i,t=r}),resolve:e,reject:t}}var yw={scheduler:["type",so]},_w="djs-element-hidden",Ps=".entry",bw=1e3,yh=8,Ew=300;function $t(e,t,n,i){this._canvas=e,this._elementRegistry=t,this._eventBus=n,this._scheduler=i,this._current=null,this._init()}$t.$inject=["canvas","elementRegistry","eventBus","scheduler"],$t.prototype._init=function(){var e=this;this._eventBus.on("selection.changed",function(t){var n=t.newSelection,i=n.length?n.length===1?n[0]:n:null;i?e.open(i,!0):e.close()}),this._eventBus.on("elements.changed",function(t){var n=t.elements,i=e._current;if(i){var r=i.target,o=se(r)?r:[r],a=o.filter(function(c){return n.includes(c)});if(a.length){e.close();var s=o.filter(function(c){return e._elementRegistry.get(c.id)});s.length&&e._updateAndOpen(s.length>1?s:s[0])}}}),this._eventBus.on("canvas.viewbox.changed",function(){e._updatePosition()}),this._eventBus.on("element.marker.update",function(t){if(e.isOpen()){var n=t.element,i=e._current,r=se(i.target)?i.target:[i.target];r.includes(n)&&e._updateVisibility()}}),this._container=this._createContainer()},$t.prototype._createContainer=function(){var e=st('<div class="djs-context-pad-parent"></div>');return this._canvas.getContainer().appendChild(e),e},$t.prototype.registerProvider=function(e,t){t||(t=e,e=bw),this._eventBus.on("contextPad.getProviders",e,function(n){n.providers.push(t)})},$t.prototype.getEntries=function(e){var t=this._getProviders(),n=se(e)?"getMultiElementContextPadEntries":"getContextPadEntries",i={};return A(t,function(r){if(q(r[n])){var o=r[n](e);q(o)?i=o(i):A(o,function(a,s){i[s]=a})}}),i},$t.prototype.trigger=function(e,t,n){var i=this,r,o,a=t.delegateTarget||t.target;if(!a)return t.preventDefault();if(r=Vt(a,"data-action"),o=t.originalEvent||t,e==="mouseover"){this._timeout=setTimeout(function(){i._mouseout=i.triggerEntry(r,"hover",o,n)},Ew);return}else if(e==="mouseout"){clearTimeout(this._timeout),this._mouseout&&(this._mouseout(),this._mouseout=null);return}return this.triggerEntry(r,e,o,n)},$t.prototype.triggerEntry=function(e,t,n,i){if(this.isShown()){var r=this._current.target,o=this._current.entries,a=o[e];if(a){var s=a.action;if(this._eventBus.fire("contextPad.trigger",{entry:a,event:n})!==!1){if(q(s)){if(t==="click")return s(n,r,i)}else if(s[t])return s[t](n,r,i);n.preventDefault()}}}},$t.prototype.open=function(e,t){!t&&this.isOpen(e)||(this.close(),this._updateAndOpen(e))},$t.prototype._getProviders=function(){var e=this._eventBus.createEvent({type:"contextPad.getProviders",providers:[]});return this._eventBus.fire(e),e.providers},$t.prototype._updateAndOpen=function(e){var t=this.getEntries(e),n=this._createHtml(e),i;A(t,function(r,o){var a=r.group||"default",s=st(r.html||'<div class="entry" draggable="true"></div>'),c;Vt(s,"data-action",o),c=ot("[data-group="+ea(a)+"]",n),c||(c=st('<div class="group"></div>'),Vt(c,"data-group",a),n.appendChild(c)),c.appendChild(s),r.className&&xw(s,r.className),r.title&&Vt(s,"title",r.title),r.imageUrl&&(i=st("<img>"),Vt(i,"src",r.imageUrl),i.style.width="100%",i.style.height="100%",s.appendChild(i))}),Ne(n).add("open"),this._current={entries:t,html:n,target:e},this._updatePosition(),this._updateVisibility(),this._eventBus.fire("contextPad.open",{current:this._current})},$t.prototype._createHtml=function(e){var t=this,n=st('<div class="djs-context-pad"></div>');return vt.bind(n,Ps,"click",function(i){t.trigger("click",i)}),vt.bind(n,Ps,"dragstart",function(i){t.trigger("dragstart",i)}),vt.bind(n,Ps,"mouseover",function(i){t.trigger("mouseover",i)}),vt.bind(n,Ps,"mouseout",function(i){t.trigger("mouseout",i)}),be.bind(n,"mousedown",function(i){i.stopPropagation()}),this._container.appendChild(n),this._eventBus.fire("contextPad.create",{target:e,pad:n}),n},$t.prototype.getPad=function(e){console.warn(new Error("ContextPad#getPad is deprecated and will be removed in future library versions, cf. https://github.com/bpmn-io/diagram-js/pull/888"));let t;return this.isOpen()&&Sw(this._current.target,e)?t=this._current.html:t=this._createHtml(e),{html:t}},$t.prototype.close=function(){this.isOpen()&&(clearTimeout(this._timeout),this._container.innerHTML="",this._eventBus.fire("contextPad.close",{current:this._current}),this._current=null)},$t.prototype.isOpen=function(e){var t=this._current;if(!t)return!1;if(!e)return!0;var n=t.target;return se(e)!==se(n)?!1:se(e)?e.length===n.length&&An(e,function(i){return n.includes(i)}):n===e},$t.prototype.isShown=function(){return this.isOpen()&&Ne(this._current.html).has("open")},$t.prototype.show=function(){this.isOpen()&&(Ne(this._current.html).add("open"),this._updatePosition(),this._eventBus.fire("contextPad.show",{current:this._current}))},$t.prototype.hide=function(){this.isOpen()&&(Ne(this._current.html).remove("open"),this._eventBus.fire("contextPad.hide",{current:this._current}))},$t.prototype._getPosition=function(e){if(!se(e)&&pt(e)){var t=this._canvas.viewbox(),n=ww(e),i=n.x*t.scale-t.x*t.scale,r=n.y*t.scale-t.y*t.scale;return{left:i+yh*this._canvas.zoom(),top:r}}var o=this._canvas.getContainer(),a=o.getBoundingClientRect(),s=this._getTargetBounds(e);return{left:s.right-a.left+yh*this._canvas.zoom(),top:s.top-a.top}},$t.prototype._updatePosition=function(){const e=()=>{if(this.isOpen()){var t=this._current.html,n=this._getPosition(this._current.target);"x"in n&&"y"in n?(t.style.left=n.x+"px",t.style.top=n.y+"px"):["top","right","bottom","left"].forEach(function(i){i in n&&(t.style[i]=n[i]+"px")})}};this._scheduler.schedule(e,"ContextPad#_updatePosition")},$t.prototype._updateVisibility=function(){const e=()=>{if(this.isOpen()){var t=this,n=this._current.target,i=se(n)?n:[n],r=i.some(function(o){return t._canvas.hasMarker(o,_w)});r?t.hide():t.show()}};this._scheduler.schedule(e,"ContextPad#_updateVisibility")},$t.prototype._getTargetBounds=function(e){var t=this,n=se(e)?e:[e],i=n.map(function(r){return t._canvas.getGraphics(r)});return i.reduce(function(r,o){const a=o.getBoundingClientRect();return r.top=Math.min(r.top,a.top),r.right=Math.max(r.right,a.right),r.bottom=Math.max(r.bottom,a.bottom),r.left=Math.min(r.left,a.left),r.x=r.left,r.y=r.top,r.width=r.right-r.left,r.height=r.bottom-r.top,r},{top:1/0,right:-1/0,bottom:-1/0,left:1/0})};function xw(e,t){var n=Ne(e);t=se(t)?t:t.split(/\s+/g),t.forEach(function(i){n.add(i)})}function ww(e){return e.waypoints[e.waypoints.length-1]}function Sw(e,t){return e=se(e)?e:[e],t=se(t)?t:[t],e.length===t.length&&An(e,function(n){return t.includes(n)})}var _h={__depends__:[xs,yw,vs],contextPad:["type",$t]},ra,wt,bh,Cw,Lr,Eh,xh,Vl,Zl,Wl,Yl,wh,oa={},Sh=[],Pw=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Rs=Array.isArray;function Ii(e,t){for(var n in t)e[n]=t[n];return e}function Ch(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Ph(e,t,n){var i,r,o,a={};for(o in t)o=="key"?i=t[o]:o=="ref"?r=t[o]:a[o]=t[o];if(arguments.length>2&&(a.children=arguments.length>3?ra.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(o in e.defaultProps)a[o]===void 0&&(a[o]=e.defaultProps[o]);return aa(e,a,i,r,null)}function aa(e,t,n,i,r){var o={type:e,props:t,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r==null?++bh:r,__i:-1,__u:0};return r==null&&wt.vnode!=null&&wt.vnode(o),o}function YD(){return{current:null}}function As(e){return e.children}function Ts(e,t){this.props=e,this.context=t}function co(e,t){if(t==null)return e.__?co(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?co(e):null}function Rh(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Rh(e)}}function Kl(e){(!e.__d&&(e.__d=!0)&&Lr.push(e)&&!Ds.__r++||Eh!==wt.debounceRendering)&&((Eh=wt.debounceRendering)||xh)(Ds)}function Ds(){var e,t,n,i,r,o,a,s;for(Lr.sort(Vl);e=Lr.shift();)e.__d&&(t=Lr.length,i=void 0,o=(r=(n=e).__v).__e,a=[],s=[],n.__P&&((i=Ii({},r)).__v=r.__v+1,wt.vnode&&wt.vnode(i),Xl(n.__P,i,r,n.__n,n.__P.namespaceURI,32&r.__u?[o]:null,a,o==null?co(r):o,!!(32&r.__u),s),i.__v=r.__v,i.__.__k[i.__i]=i,kh(a,i,s),i.__e!=o&&Rh(i)),Lr.length>t&&Lr.sort(Vl));Ds.__r=0}function Ah(e,t,n,i,r,o,a,s,c,l,u){var p,f,d,h,v,m=i&&i.__k||Sh,S=t.length;for(n.__d=c,Rw(n,t,m),c=n.__d,p=0;p<S;p++)(d=n.__k[p])!=null&&(f=d.__i===-1?oa:m[d.__i]||oa,d.__i=p,Xl(e,d,f,r,o,a,s,c,l,u),h=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&ql(f.ref,null,d),u.push(d.ref,d.__c||h,d)),v==null&&h!=null&&(v=h),65536&d.__u||f.__k===d.__k?c=Th(d,c,e):typeof d.type=="function"&&d.__d!==void 0?c=d.__d:h&&(c=h.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=c,n.__e=v}function Rw(e,t,n){var i,r,o,a,s,c=t.length,l=n.length,u=l,p=0;for(e.__k=[],i=0;i<c;i++)(r=t[i])!=null&&typeof r!="boolean"&&typeof r!="function"?(a=i+p,(r=e.__k[i]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?aa(null,r,null,null,null):Rs(r)?aa(As,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?aa(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=e,r.__b=e.__b+1,o=null,(s=r.__i=Tw(r,n,a,u))!==-1&&(u--,(o=n[s])&&(o.__u|=131072)),o==null||o.__v===null?(s==-1&&p--,typeof r.type!="function"&&(r.__u|=65536)):s!==a&&(s==a-1?p--:s==a+1?p++:(s>a?p--:p++,r.__u|=65536))):r=e.__k[i]=null;if(u)for(i=0;i<l;i++)(o=n[i])!=null&&!(131072&o.__u)&&(o.__e==e.__d&&(e.__d=co(o)),Ih(o,o))}function Th(e,t,n){var i,r;if(typeof e.type=="function"){for(i=e.__k,r=0;i&&r<i.length;r++)i[r]&&(i[r].__=e,t=Th(i[r],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=co(e)),n.insertBefore(e.__e,t||null),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType===8);return t}function Aw(e,t){return t=t||[],e==null||typeof e=="boolean"||(Rs(e)?e.some(function(n){Aw(n,t)}):t.push(e)),t}function Tw(e,t,n,i){var r=e.key,o=e.type,a=n-1,s=n+1,c=t[n];if(c===null||c&&r==c.key&&o===c.type&&!(131072&c.__u))return n;if(i>(c!=null&&!(131072&c.__u)?1:0))for(;a>=0||s<t.length;){if(a>=0){if((c=t[a])&&!(131072&c.__u)&&r==c.key&&o===c.type)return a;a--}if(s<t.length){if((c=t[s])&&!(131072&c.__u)&&r==c.key&&o===c.type)return s;s++}}return-1}function Dh(e,t,n){t[0]==="-"?e.setProperty(t,n==null?"":n):e[t]=n==null?"":typeof n!="number"||Pw.test(t)?n:n+"px"}function Ms(e,t,n,i,r){var o;e:if(t==="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof i=="string"&&(e.style.cssText=i=""),i)for(t in i)n&&t in n||Dh(e.style,t,"");if(n)for(t in n)i&&n[t]===i[t]||Dh(e.style,t,n[t])}else if(t[0]==="o"&&t[1]==="n")o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||t==="onFocusOut"||t==="onFocusIn"?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?i?n.u=i.u:(n.u=Zl,e.addEventListener(t,o?Yl:Wl,o)):e.removeEventListener(t,o?Yl:Wl,o);else{if(r=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n==null?"":n;break e}catch(a){}typeof n=="function"||(n==null||n===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Mh(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=Zl++;else if(t.t<n.u)return;return n(wt.event?wt.event(t):t)}}}function Xl(e,t,n,i,r,o,a,s,c,l){var u,p,f,d,h,v,m,S,x,E,y,w,R,I,T,O,B=t.type;if(t.constructor!==void 0)return null;128&n.__u&&(c=!!(32&n.__u),o=[s=t.__e=n.__e]),(u=wt.__b)&&u(t);e:if(typeof B=="function")try{if(S=t.props,x="prototype"in B&&B.prototype.render,E=(u=B.contextType)&&i[u.__c],y=u?E?E.props.value:u.__:i,n.__c?m=(p=t.__c=n.__c).__=p.__E:(x?t.__c=p=new B(S,y):(t.__c=p=new Ts(S,y),p.constructor=B,p.render=Mw),E&&E.sub(p),p.props=S,p.state||(p.state={}),p.context=y,p.__n=i,f=p.__d=!0,p.__h=[],p._sb=[]),x&&p.__s==null&&(p.__s=p.state),x&&B.getDerivedStateFromProps!=null&&(p.__s==p.state&&(p.__s=Ii({},p.__s)),Ii(p.__s,B.getDerivedStateFromProps(S,p.__s))),d=p.props,h=p.state,p.__v=t,f)x&&B.getDerivedStateFromProps==null&&p.componentWillMount!=null&&p.componentWillMount(),x&&p.componentDidMount!=null&&p.__h.push(p.componentDidMount);else{if(x&&B.getDerivedStateFromProps==null&&S!==d&&p.componentWillReceiveProps!=null&&p.componentWillReceiveProps(S,y),!p.__e&&(p.shouldComponentUpdate!=null&&p.shouldComponentUpdate(S,p.__s,y)===!1||t.__v===n.__v)){for(t.__v!==n.__v&&(p.props=S,p.state=p.__s,p.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(F){F&&(F.__=t)}),w=0;w<p._sb.length;w++)p.__h.push(p._sb[w]);p._sb=[],p.__h.length&&a.push(p);break e}p.componentWillUpdate!=null&&p.componentWillUpdate(S,p.__s,y),x&&p.componentDidUpdate!=null&&p.__h.push(function(){p.componentDidUpdate(d,h,v)})}if(p.context=y,p.props=S,p.__P=e,p.__e=!1,R=wt.__r,I=0,x){for(p.state=p.__s,p.__d=!1,R&&R(t),u=p.render(p.props,p.state,p.context),T=0;T<p._sb.length;T++)p.__h.push(p._sb[T]);p._sb=[]}else do p.__d=!1,R&&R(t),u=p.render(p.props,p.state,p.context),p.state=p.__s;while(p.__d&&++I<25);p.state=p.__s,p.getChildContext!=null&&(i=Ii(Ii({},i),p.getChildContext())),x&&!f&&p.getSnapshotBeforeUpdate!=null&&(v=p.getSnapshotBeforeUpdate(d,h)),Ah(e,Rs(O=u!=null&&u.type===As&&u.key==null?u.props.children:u)?O:[O],t,n,i,r,o,a,s,c,l),p.base=t.__e,t.__u&=-161,p.__h.length&&a.push(p),m&&(p.__E=p.__=null)}catch(F){if(t.__v=null,c||o!=null){for(t.__u|=c?160:128;s&&s.nodeType===8&&s.nextSibling;)s=s.nextSibling;o[o.indexOf(s)]=null,t.__e=s}else t.__e=n.__e,t.__k=n.__k;wt.__e(F,t,n)}else o==null&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Dw(n.__e,t,n,i,r,o,a,c,l);(u=wt.diffed)&&u(t)}function kh(e,t,n){t.__d=void 0;for(var i=0;i<n.length;i++)ql(n[i],n[++i],n[++i]);wt.__c&&wt.__c(t,e),e.some(function(r){try{e=r.__h,r.__h=[],e.some(function(o){o.call(r)})}catch(o){wt.__e(o,r.__v)}})}function Dw(e,t,n,i,r,o,a,s,c){var l,u,p,f,d,h,v,m=n.props,S=t.props,x=t.type;if(x==="svg"?r="http://www.w3.org/2000/svg":x==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),o!=null){for(l=0;l<o.length;l++)if((d=o[l])&&"setAttribute"in d==!!x&&(x?d.localName===x:d.nodeType===3)){e=d,o[l]=null;break}}if(e==null){if(x===null)return document.createTextNode(S);e=document.createElementNS(r,x,S.is&&S),s&&(wt.__m&&wt.__m(t,o),s=!1),o=null}if(x===null)m===S||s&&e.data===S||(e.data=S);else{if(o=o&&ra.call(e.childNodes),m=n.props||oa,!s&&o!=null)for(m={},l=0;l<e.attributes.length;l++)m[(d=e.attributes[l]).name]=d.value;for(l in m)if(d=m[l],l!="children"){if(l=="dangerouslySetInnerHTML")p=d;else if(!(l in S)){if(l=="value"&&"defaultValue"in S||l=="checked"&&"defaultChecked"in S)continue;Ms(e,l,null,d,r)}}for(l in S)d=S[l],l=="children"?f=d:l=="dangerouslySetInnerHTML"?u=d:l=="value"?h=d:l=="checked"?v=d:s&&typeof d!="function"||m[l]===d||Ms(e,l,d,m[l],r);if(u)s||p&&(u.__html===p.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(p&&(e.innerHTML=""),Ah(e,Rs(f)?f:[f],t,n,i,x==="foreignObject"?"http://www.w3.org/1999/xhtml":r,o,a,o?o[0]:n.__k&&co(n,0),s,c),o!=null)for(l=o.length;l--;)Ch(o[l]);s||(l="value",x==="progress"&&h==null?e.removeAttribute("value"):h!==void 0&&(h!==e[l]||x==="progress"&&!h||x==="option"&&h!==m[l])&&Ms(e,l,h,m[l],r),l="checked",v!==void 0&&v!==e[l]&&Ms(e,l,v,m[l],r))}return e}function ql(e,t,n){try{if(typeof e=="function"){var i=typeof e.__u=="function";i&&e.__u(),i&&t==null||(e.__u=e(t))}else e.current=t}catch(r){wt.__e(r,n)}}function Ih(e,t,n){var i,r;if(wt.unmount&&wt.unmount(e),(i=e.ref)&&(i.current&&i.current!==e.__e||ql(i,null,t)),(i=e.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(o){wt.__e(o,t)}i.base=i.__P=null}if(i=e.__k)for(r=0;r<i.length;r++)i[r]&&Ih(i[r],t,n||typeof e.type!="function");n||Ch(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function Mw(e,t,n){return this.constructor(e,n)}function Ql(e,t,n){var i,r,o,a;wt.__&&wt.__(e,t),r=(i=typeof n=="function")?null:n&&n.__k||t.__k,o=[],a=[],Xl(t,e=(!i&&n||t).__k=Ph(As,null,[e]),r||oa,oa,t.namespaceURI,!i&&n?[n]:r?null:t.firstChild?ra.call(t.childNodes):null,o,!i&&n?n:r?r.__e:t.firstChild,i,a),kh(o,e,a)}function kw(e,t){Ql(e,t,kw)}function KD(e,t,n){var i,r,o,a,s=Ii({},e.props);for(o in e.type&&e.type.defaultProps&&(a=e.type.defaultProps),t)o=="key"?i=t[o]:o=="ref"?r=t[o]:s[o]=t[o]===void 0&&a!==void 0?a[o]:t[o];return arguments.length>2&&(s.children=arguments.length>3?ra.call(arguments,2):n),aa(e.type,s,i||e.key,r||e.ref,null)}function XD(e,t){var n={__c:t="__cC"+wh++,__:e,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,o;return this.getChildContext||(r=new Set,(o={})[t]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){r=null},this.shouldComponentUpdate=function(a){this.props.value!==a.value&&r.forEach(function(s){s.__e=!0,Kl(s)})},this.sub=function(a){r.add(a);var s=a.componentWillUnmount;a.componentWillUnmount=function(){r&&r.delete(a),s&&s.call(a)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}ra=Sh.slice,wt={__e:function(e,t,n,i){for(var r,o,a;t=t.__;)if((r=t.__c)&&!r.__)try{if((o=r.constructor)&&o.getDerivedStateFromError!=null&&(r.setState(o.getDerivedStateFromError(e)),a=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(e,i||{}),a=r.__d),a)return r.__E=r}catch(s){e=s}throw e}},bh=0,Cw=function(e){return e!=null&&e.constructor==null},Ts.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Ii({},this.state),typeof e=="function"&&(e=e(Ii({},n),this.props)),e&&Ii(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),Kl(this))},Ts.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Kl(this))},Ts.prototype.render=As,Lr=[],xh=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vl=function(e,t){return e.__v.__b-t.__v.__b},Ds.__r=0,Zl=0,Wl=Mh(!1),Yl=Mh(!0),wh=0;var Oh=function(e,t,n,i){var r;t[0]=0;for(var o=1;o<t.length;o++){var a=t[o++],s=t[o]?(t[0]|=a?1:2,n[t[o++]]):t[++o];a===3?i[0]=s:a===4?i[1]=Object.assign(i[1]||{},s):a===5?(i[1]=i[1]||{})[t[++o]]=s:a===6?i[1][t[++o]]+=s+"":a?(r=e.apply(s,Oh(e,s,n,["",null])),i.push(r),s[0]?t[0]|=2:(t[o-2]=0,t[o]=r)):i.push(s)}return i},Bh=new Map;function Iw(e){var t=Bh.get(this);return t||(t=new Map,Bh.set(this,t)),(t=Oh(this,t.get(e)||(t.set(e,t=function(n){for(var i,r,o=1,a="",s="",c=[0],l=function(f){o===1&&(f||(a=a.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?c.push(0,f,a):o===3&&(f||a)?(c.push(3,f,a),o=2):o===2&&a==="..."&&f?c.push(4,f,0):o===2&&a&&!f?c.push(5,0,!0,a):o>=5&&((a||!f&&o===5)&&(c.push(o,0,a,r),o=6),f&&(c.push(o,f,0,r),o=6)),a=""},u=0;u<n.length;u++){u&&(o===1&&l(),l(u));for(var p=0;p<n[u].length;p++)i=n[u][p],o===1?i==="<"?(l(),c=[c],o=3):a+=i:o===4?a==="--"&&i===">"?(o=1,a=""):a=i+a[0]:s?i===s?s="":a+=i:i==='"'||i==="'"?s=i:i===">"?(l(),o=1):o&&(i==="="?(o=5,r=a,a=""):i==="/"&&(o<5||n[u][p+1]===">")?(l(),o===3&&(c=c[0]),o=c,(c=c[0]).push(2,0,o),o=0):i===" "||i==="	"||i===`
`||i==="\r"?(l(),o=2):a+=i),o===3&&a==="!--"&&(o=4,c=c[0])}return l(),c}(e)),t),arguments,[])).length>1?t:t[0]}var Mt=Iw.bind(Ph),Oi,yt,Jl,Nh,lo=0,Lh=[],kt=wt,Fh=kt.__b,jh=kt.__r,$h=kt.diffed,zh=kt.__c,Hh=kt.unmount,Gh=kt.__;function Fr(e,t){kt.__h&&kt.__h(yt,e,lo||t),lo=0;var n=yt.__H||(yt.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function ks(e){return lo=1,Ow(Zh,e)}function Ow(e,t,n){var i=Fr(Oi++,2);if(i.t=e,!i.__c&&(i.__=[n?n(t):Zh(void 0,t),function(s){var c=i.__N?i.__N[0]:i.__[0],l=i.t(c,s);c!==l&&(i.__N=[l,i.__[1]],i.__c.setState({}))}],i.__c=yt,!yt.u)){var r=function(s,c,l){if(!i.__c.__H)return!0;var u=i.__c.__H.__.filter(function(f){return!!f.__c});if(u.every(function(f){return!f.__N}))return!o||o.call(this,s,c,l);var p=!1;return u.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(p=!0)}}),!(!p&&i.__c.props===s)&&(!o||o.call(this,s,c,l))};yt.u=!0;var o=yt.shouldComponentUpdate,a=yt.componentWillUpdate;yt.componentWillUpdate=function(s,c,l){if(this.__e){var u=o;o=void 0,r(s,c,l),o=u}a&&a.call(this,s,c,l)},yt.shouldComponentUpdate=r}return i.__N||i.__}function eu(e,t){var n=Fr(Oi++,3);!kt.__s&&nu(n.__H,t)&&(n.__=e,n.i=t,yt.__H.__h.push(n))}function Is(e,t){var n=Fr(Oi++,4);!kt.__s&&nu(n.__H,t)&&(n.__=e,n.i=t,yt.__h.push(n))}function Uh(e){return lo=5,uo(function(){return{current:e}},[])}function qD(e,t,n){lo=6,Is(function(){return typeof e=="function"?(e(t()),function(){return e(null)}):e?(e.current=t(),function(){return e.current=null}):void 0},n==null?n:n.concat(e))}function uo(e,t){var n=Fr(Oi++,7);return nu(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function sa(e,t){return lo=8,uo(function(){return e},t)}function QD(e){var t=yt.context[e.__c],n=Fr(Oi++,9);return n.c=e,t?(n.__==null&&(n.__=!0,t.sub(yt)),t.props.value):e.__}function JD(e,t){kt.useDebugValue&&kt.useDebugValue(t?t(e):e)}function eM(e){var t=Fr(Oi++,10),n=ks();return t.__=e,yt.componentDidCatch||(yt.componentDidCatch=function(i,r){t.__&&t.__(i,r),n[1](i)}),[n[0],function(){n[1](void 0)}]}function tM(){var e=Fr(Oi++,11);if(!e.__){for(var t=yt.__v;t!==null&&!t.__m&&t.__!==null;)t=t.__;var n=t.__m||(t.__m=[0,0]);e.__="P"+n[0]+"-"+n[1]++}return e.__}function Bw(){for(var e;e=Lh.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Os),e.__H.__h.forEach(tu),e.__H.__h=[]}catch(t){e.__H.__h=[],kt.__e(t,e.__v)}}kt.__b=function(e){yt=null,Fh&&Fh(e)},kt.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Gh&&Gh(e,t)},kt.__r=function(e){jh&&jh(e),Oi=0;var t=(yt=e.__c).__H;t&&(Jl===yt?(t.__h=[],yt.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(t.__h.forEach(Os),t.__h.forEach(tu),t.__h=[],Oi=0)),Jl=yt},kt.diffed=function(e){$h&&$h(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Lh.push(t)!==1&&Nh===kt.requestAnimationFrame||((Nh=kt.requestAnimationFrame)||Nw)(Bw)),t.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Jl=yt=null},kt.__c=function(e,t){t.some(function(n){try{n.__h.forEach(Os),n.__h=n.__h.filter(function(i){return!i.__||tu(i)})}catch(i){t.some(function(r){r.__h&&(r.__h=[])}),t=[],kt.__e(i,n.__v)}}),zh&&zh(e,t)},kt.unmount=function(e){Hh&&Hh(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Os(i)}catch(r){t=r}}),n.__H=void 0,t&&kt.__e(t,n.__v))};var Vh=typeof requestAnimationFrame=="function";function Nw(e){var t,n=function(){clearTimeout(i),Vh&&cancelAnimationFrame(t),setTimeout(e)},i=setTimeout(n,100);Vh&&(t=requestAnimationFrame(n))}function Os(e){var t=yt,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),yt=t}function tu(e){var t=yt;e.__c=e.__(),yt=t}function nu(e,t){return!e||e.length!==t.length||t.some(function(n,i){return n!==e[i]})}function Zh(e,t){return typeof t=="function"?t(e):t}function Wh(e){var t,n,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e)){var r=e.length;for(t=0;t<r;t++)e[t]&&(n=Wh(e[t]))&&(i&&(i+=" "),i+=n)}else for(n in e)e[n]&&(i&&(i+=" "),i+=n);return i}function Lw(){for(var e,t,n=0,i="",r=arguments.length;n<r;n++)(e=arguments[n])&&(t=Wh(e))&&(i&&(i+=" "),i+=t);return i}var Bs=Lw;function Fw(e){const{headerEntries:t,onSelect:n,selectedEntry:i,setSelectedEntry:r,title:o}=e,a=uo(()=>jw(t),[t]);return Mt`
    <div class="djs-popup-header">
      <h3 class="djs-popup-title" title=${o}>${o}</h3>
      ${a.map(s=>Mt`
        <ul key=${s.id} class="djs-popup-header-group" data-header-group=${s.id}>

          ${s.entries.map(c=>Mt`
            <li key=${c.id}>
              <${c.action?"button":"span"}
                class=${$w(c,c===i)}
                onClick=${l=>c.action&&n(l,c)}
                title=${c.title||c.label}
                data-id=${c.id}
                onMouseEnter=${()=>c.action&&r(c)}
                onMouseLeave=${()=>c.action&&r(null)}
                onFocus=${()=>c.action&&r(c)}
                onBlur=${()=>c.action&&r(null)}
              >
                ${c.imageUrl&&Mt`<img class="djs-popup-entry-icon" src=${c.imageUrl} alt="" />`||c.imageHtml&&Mt`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:c.imageHtml}} />`}
                ${c.label?Mt`
                  <span class="djs-popup-label">${c.label}</span>
                `:null}
              </${c.action?"button":"span"}>
            </li>
          `)}
        </ul>
      `)}
    </div>
  `}function jw(e){return e.reduce((t,n)=>{const i=n.group||"default",r=t.find(o=>o.id===i);return r?r.entries.push(n):t.push({id:i,entries:[n]}),t},[])}function $w(e,t){return Bs("entry",e.className,e.active?"active":"",e.disabled?"disabled":"",t?"selected":"")}function zw(e){const{entry:t,selected:n,onMouseEnter:i,onMouseLeave:r,onAction:o}=e;return Mt`
    <li
      class=${Bs("entry",{selected:n})}
      data-id=${t.id}
      title=${t.title||t.label}
      tabIndex="0"
      onClick=${o}
      onFocus=${i}
      onBlur=${r}
      onMouseEnter=${i}
      onMouseLeave=${r}
      onDragStart=${a=>o(a,t,"dragstart")}
      draggable=${!0}
    >
      <div class="djs-popup-entry-content">
        <span
          class=${Bs("djs-popup-entry-name",t.className)}
        >
          ${t.imageUrl&&Mt`<img class="djs-popup-entry-icon" src=${t.imageUrl} alt="" />`||t.imageHtml&&Mt`<div class="djs-popup-entry-icon" dangerouslySetInnerHTML=${{__html:t.imageHtml}} />`}

          ${t.label?Mt`
            <span class="djs-popup-label">
              ${t.label}
            </span>
          `:null}
        </span>
        ${t.description&&Mt`
          <span
            class="djs-popup-entry-description"
            title=${t.description}
          >
            ${t.description}
          </span>
        `}
      </div>
      ${t.documentationRef&&Mt`
        <div class="djs-popup-entry-docs">
          <a
            href="${t.documentationRef}"
            onClick=${a=>a.stopPropagation()}
            title="Open element documentation"
            target="_blank"
            rel="noopener"
          >
            <svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M10.6368 10.6375V5.91761H11.9995V10.6382C11.9995 10.9973 11.8623 11.3141 11.5878 11.5885C11.3134 11.863 10.9966 12.0002 10.6375 12.0002H1.36266C0.982345 12.0002 0.660159 11.8681 0.396102 11.6041C0.132044 11.34 1.52588e-05 11.0178 1.52588e-05 10.6375V1.36267C1.52588e-05 0.98236 0.132044 0.660173 0.396102 0.396116C0.660159 0.132058 0.982345 2.95639e-05 1.36266 2.95639e-05H5.91624V1.36267H1.36266V10.6375H10.6368ZM12 0H7.2794L7.27873 1.36197H9.68701L3.06507 7.98391L4.01541 8.93425L10.6373 2.31231V4.72059H12V0Z" fill="#818798"/>
            </svg>
          </a>
        </div>
      `}
    </li>
  `}function Hw(e){const s=e,{selectedEntry:t,setSelectedEntry:n,entries:i}=s,r=R0(s,["selectedEntry","setSelectedEntry","entries"]),o=Uh(),a=uo(()=>Gw(i),[i]);return Is(()=>{const c=o.current;if(!c)return;const l=c.querySelector(".selected");l&&Uw(l)},[t]),Mt`
    <div class="djs-popup-results" ref=${o}>
      ${a.map(c=>Mt`
        ${c.name&&Mt`
          <div key=${c.id} class="entry-header" title=${c.name}>
            ${c.name}
          </div>
        `}
        <ul class="djs-popup-group" data-group=${c.id}>
          ${c.entries.map(l=>Mt`
            <${zw}
              key=${l.id}
              entry=${l}
              selected=${l===t}
              onMouseEnter=${()=>n(l)}
              onMouseLeave=${()=>n(null)}
              ...${r}
            />
          `)}
        </ul>
      `)}
    </div>
  `}function Gw(e){const t=[],n=o=>t.find(a=>o.id===a.id),i=o=>!!n(o),r=o=>typeof o=="string"?{id:o}:o;return e.forEach(o=>{const a=o.group?r(o.group):{id:"default"};i(a)?n(a).entries.push(o):t.push(Gt(Be({},a),{entries:[o]}))}),t}function Uw(e){typeof e.scrollIntoViewIfNeeded=="function"?e.scrollIntoViewIfNeeded():e.scrollIntoView({scrollMode:"if-needed",block:"nearest"})}function Vw(e){const{onClose:t,onSelect:n,className:i,headerEntries:r,position:o,title:a,width:s,scale:c,search:l,emptyPlaceholder:u,entries:p,onOpened:f,onClosed:d}=e,h=uo(()=>Ge(l)?p.length>5:!1,[l,p]),[v,m]=ks(""),S=sa((F,z)=>{if(!h)return F;const H=oe=>{if(!z)return(oe.rank||0)>=0;if(oe.searchable===!1)return!1;const ke=[oe.description||"",oe.label||"",oe.search||""].map(Ae=>Ae.toLowerCase());return z.toLowerCase().split(/\s/g).every(Ae=>ke.some(Se=>Se.includes(Ae)))};return F.filter(H)},[h]),[x,E]=ks(S(p,v)),[y,w]=ks(x[0]),R=sa(F=>{(!y||!F.includes(y))&&w(F[0]),E(F)},[y,E,w]);eu(()=>{R(S(p,v))},[v,p]);const I=sa(F=>{let H=x.indexOf(y)+F;H<0&&(H=x.length-1),H>=x.length&&(H=0),w(x[H])},[x,y,w]),T=sa(F=>{if(F.key==="Enter"&&y)return n(F,y);if(F.key==="ArrowUp")return I(-1),F.preventDefault();if(F.key==="ArrowDown")return I(1),F.preventDefault()},[n,y,I]),O=sa(F=>{Si(F.target,"input")&&m(()=>F.target.value)},[m]);eu(()=>(f(),()=>{d()}),[]);const B=uo(()=>a||r.length>0,[a,r]);return Mt`
    <${Yh}
      onClose=${t}
      onKeyup=${O}
      onKeydown=${T}
      className=${i}
      position=${o}
      width=${s}
      scale=${c}
    >
      ${B&&Mt`
        <${Fw}
          headerEntries=${r}
          onSelect=${n}
          selectedEntry=${y}
          setSelectedEntry=${w}
          title=${a}
        />
      `}
      ${p.length>0&&Mt`
        <div class="djs-popup-body">

          ${h&&Mt`
          <div class="djs-popup-search">
            <svg class="djs-popup-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
            </svg>
            <input type="text" spellcheck=${!1} aria-label="${a}" />
          </div>
          `}

          <${Hw}
            entries=${x}
            selectedEntry=${y}
            setSelectedEntry=${w}
            onAction=${n}
          />
        </div>
      `}
    ${u&&x.length===0&&Mt`
      <div class="djs-popup-no-results">${q(u)?u(v):u}</div>
    `}
    </${Yh}>
  `}function Yh(e){const{onClose:t,onKeydown:n,onKeyup:i,className:r,children:o,position:a}=e,s=Uh();return Is(()=>{if(typeof a!="function")return;const c=s.current,l=a(c);c.style.left=`${l.x}px`,c.style.top=`${l.y}px`},[s.current,a]),Is(()=>{const c=s.current;if(!c)return;(c.querySelector("input")||c).focus()},[]),eu(()=>{const c=u=>{if(u.key==="Escape")return u.preventDefault(),t()},l=u=>{if(!Gn(u.target,".djs-popup",!0))return t()};return document.documentElement.addEventListener("keydown",c),document.body.addEventListener("click",l),()=>{document.documentElement.removeEventListener("keydown",c),document.body.removeEventListener("click",l)}},[]),Mt`
    <div
      class=${Bs("djs-popup",r)}
      style=${Zw(e)}
      onKeydown=${n}
      onKeyup=${i}
      ref=${s}
      tabIndex="-1"
    >
      ${o}
    </div>
  `}function Zw(e){return{transform:`scale(${e.scale})`,width:`${e.width}px`,"transform-origin":"top left"}}var Ww="data-id",Kh=["contextPad.close","canvas.viewbox.changing","commandStack.changed"],Yw=1e3;function St(e,t,n){this._eventBus=t,this._canvas=n,this._current=null;var i=Ge(e&&e.scale)?e.scale:{min:1,max:1};this._config={scale:i},t.on("diagram.destroy",()=>{this.close()}),t.on("element.changed",r=>{const o=this.isOpen()&&this._current.target;r.element===o&&this.refresh()})}St.$inject=["config.popupMenu","eventBus","canvas"],St.prototype._render=function(){const{position:e,providerId:t,entries:n,headerEntries:i,emptyPlaceholder:r,options:o}=this._current,a=Object.entries(n).map(([f,d])=>Be({id:f},d)),s=Object.entries(i).map(([f,d])=>Be({id:f},d)),c=e&&(f=>this._ensureVisible(f,e)),l=this._updateScale(this._current.container);Ql(Mt`
      <${Vw}
        onClose=${f=>this.close(f)}
        onSelect=${(f,d,h)=>this.trigger(f,d,h)}
        position=${c}
        className=${t}
        entries=${a}
        headerEntries=${s}
        emptyPlaceholder=${r}
        scale=${l}
        onOpened=${this._onOpened.bind(this)}
        onClosed=${this._onClosed.bind(this)}
        ...${Be({},o)}
      />
    `,this._current.container)},St.prototype.open=function(e,t,n,i){if(!e)throw new Error("target is missing");if(!t)throw new Error("providers for <"+t+"> not found");if(!n)throw new Error("position is missing");this.isOpen()&&this.close();const{entries:r,headerEntries:o,emptyPlaceholder:a}=this._getContext(e,t);this._current={position:n,providerId:t,target:e,entries:r,headerEntries:o,emptyPlaceholder:a,container:this._createContainer({provider:t}),options:i},this._emit("open"),this._bindAutoClose(),this._render()},St.prototype.refresh=function(){if(!this.isOpen())return;const{target:e,providerId:t}=this._current,{entries:n,headerEntries:i,emptyPlaceholder:r}=this._getContext(e,t);this._current=Gt(Be({},this._current),{entries:n,headerEntries:i,emptyPlaceholder:r}),this._emit("refresh"),this._render()},St.prototype._getContext=function(e,t){const n=this._getProviders(t);if(!n||!n.length)throw new Error("provider for <"+t+"> not found");const i=this._getEntries(e,n),r=this._getHeaderEntries(e,n),o=this._getEmptyPlaceholder(n);return{entries:i,headerEntries:r,emptyPlaceholder:o,empty:!(Object.keys(i).length||Object.keys(r).length)}},St.prototype.close=function(){this.isOpen()&&(this._emit("close"),this.reset(),this._current=null)},St.prototype.reset=function(){const e=this._current.container;Ql(null,e),bn(e)},St.prototype._emit=function(e,t){this._eventBus.fire(`popupMenu.${e}`,t)},St.prototype._onOpened=function(){this._emit("opened")},St.prototype._onClosed=function(){this._emit("closed")},St.prototype._createContainer=function(e){var t=this._canvas,n=t.getContainer();const i=st(`<div class="djs-popup-parent djs-scrollable" data-popup=${e.provider}></div>`);return n.appendChild(i),i},St.prototype._bindAutoClose=function(){this._eventBus.once(Kh,this.close,this)},St.prototype._unbindAutoClose=function(){this._eventBus.off(Kh,this.close,this)},St.prototype._updateScale=function(){var e=this._canvas.zoom(),t=this._config.scale,n,i,r=e;return t!==!0&&(t===!1?(n=1,i=1):(n=t.min,i=t.max),Ge(n)&&e<n&&(r=n),Ge(i)&&e>i&&(r=i)),r},St.prototype._ensureVisible=function(e,t){var n=document.documentElement.getBoundingClientRect(),i=e.getBoundingClientRect(),r={},o=t.x,a=t.y;return t.x+i.width>n.width&&(r.x=!0),t.y+i.height>n.height&&(r.y=!0),r.x&&r.y?(o=t.x-i.width,a=t.y-i.height):r.x?(o=t.x-i.width,a=t.y):r.y&&t.y<i.height?(o=t.x,a=10):r.y&&(o=t.x,a=t.y-i.height),t.y<n.top&&(a=t.y+i.height),{x:o,y:a}},St.prototype.isEmpty=function(e,t){if(!e)throw new Error("target is missing");if(!t)throw new Error("provider ID is missing");const n=this._getProviders(t);return!n||!n.length?!0:this._getContext(e,t).empty},St.prototype.registerProvider=function(e,t,n){n||(n=t,t=Yw),this._eventBus.on("popupMenu.getProviders."+e,t,function(i){i.providers.push(n)})},St.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"popupMenu.getProviders."+e,providers:[]});return this._eventBus.fire(t),t.providers},St.prototype._getEntries=function(e,t){var n={};return A(t,function(i){if(!i.getPopupMenuEntries){A(i.getEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=Ut(o,["id"])});return}var r=i.getPopupMenuEntries(e);q(r)?n=r(n):A(r,function(o,a){n[a]=o})}),n},St.prototype._getHeaderEntries=function(e,t){var n={};return A(t,function(i){if(!i.getPopupMenuHeaderEntries){if(!i.getHeaderEntries)return;A(i.getHeaderEntries(e),function(o){var a=o.id;if(!a)throw new Error("entry ID is missing");n[a]=Ut(o,["id"])});return}var r=i.getPopupMenuHeaderEntries(e);q(r)?n=r(n):A(r,function(o,a){n[a]=o})}),n},St.prototype._getEmptyPlaceholder=function(e){const t=e.find(n=>q(n.getEmptyPlaceholder));return t&&t.getEmptyPlaceholder()},St.prototype.isOpen=function(){return!!this._current},St.prototype.trigger=function(e,t,n="click"){if(e.preventDefault(),!t){let r=Gn(e.delegateTarget||e.target,".entry",!0),o=Vt(r,Ww);t=Be({id:o},this._getEntry(o))}const i=t.action;if(this._emit("trigger",{entry:t,event:e})!==!1){if(q(i)){if(n==="click")return i(e,t)}else if(i[n])return i[n](e,t)}},St.prototype._getEntry=function(e){var t=this._current.entries[e]||this._current.headerEntries[e];if(!t)throw new Error("entry not found");return t};var iu={__init__:["popupMenu"],popupMenu:["type",St]},Kw={align:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2000 2000">
              <line x1="200" y1="150" x2="200" y2="1850" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
              <rect x="500" y="150" width="1300" height="700" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="500" y="1150" width="700" height="700" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,bottom:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="1650" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="350" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="850" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,center:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="900" y1="150" x2="900" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="250" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="500" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,left:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="100" y1="150" x2="100" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="100" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="100" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,right:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="1650" y1="150" x2="1650" y2="1650" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="350" y="150" width="1300" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="850" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,top:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="150" x2="1650" y2="150" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="150" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="150" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`,middle:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
            <line x1="150" y1="900" x2="1650" y2="900" style="stroke:currentColor;stroke-width:100;stroke-linecap:round;"/>
            <rect x="150" y="250" width="600" height="1300" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
            <rect x="1050" y="500" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
          </svg>`},Xh=Kw,Xw=900;function po(e,t,n,i){e.registerProvider(Xw,this),this._contextPad=e,this._popupMenu=t,this._translate=n,this._canvas=i}po.$inject=["contextPad","popupMenu","translate","canvas"],po.prototype.getMultiElementContextPadEntries=function(e){var t={};return this._isAllowed(e)&&k(t,this._getEntries(e)),t},po.prototype._isAllowed=function(e){return!this._popupMenu.isEmpty(e,"align-elements")},po.prototype._getEntries=function(){var e=this;return{"align-elements":{group:"align-elements",title:e._translate("Align elements"),html:`<div class="entry">${Xh.align}</div>`,action:{click:function(t,n){var i=e._getMenuPosition(n);k(i,{cursor:{x:t.x,y:t.y}}),e._popupMenu.open(n,"align-elements",i)}}}}},po.prototype._getMenuPosition=function(e){var t=5,n=this._contextPad.getPad(e).html,i=n.getBoundingClientRect(),r={x:i.left,y:i.bottom+t};return r};var qw=["left","center","right","top","middle","bottom"];function ca(e,t,n,i){this._alignElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",this)}ca.$inject=["popupMenu","alignElements","translate","rules"],ca.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&k(t,this._getEntries(e)),t},ca.prototype._isAllowed=function(e){return this._rules.allowed("elements.align",{elements:e})},ca.prototype._getEntries=function(e){var t=this._alignElements,n=this._translate,i=this._popupMenu,r={};return A(qw,function(o){r["align-elements-"+o]={group:"align",title:n("Align elements "+o),className:"bjs-align-elements-menu-entry",imageHtml:Xh[o],action:function(){t.trigger(e,o),i.close()}}}),r};function Wn(e){X.call(this,e),this.init()}Wn.$inject=["eventBus"],j(Wn,X),Wn.prototype.addRule=function(e,t,n){var i=this;typeof e=="string"&&(e=[e]),e.forEach(function(r){i.canExecute(r,t,function(o,a,s){return n(o)},!0)})},Wn.prototype.init=function(){};function Ns(e){Wn.call(this,e)}Ns.$inject=["eventBus"],j(Ns,Wn),Ns.prototype.init=function(){this.addRule("elements.align",function(e){var t=e.elements,n=ne(t,function(i){return!(i.waypoints||i.host||i.labelTarget)});return n=Ya(n),n.length<2?!1:n})};var Qw={__depends__:[mw,_h,iu],__init__:["alignElementsContextPadProvider","alignElementsMenuProvider","bpmnAlignElements"],alignElementsContextPadProvider:["type",po],alignElementsMenuProvider:["type",ca],bpmnAlignElements:["type",Ns]},Jw=10,qh=50,e1=250;function ru(e,t,n,i){for(var r;r=t1(e,n,t);)n=i(t,n,r);return n}function ou(e){return function(t,n,i){var r={x:n.x,y:n.y};return["x","y"].forEach(function(o){var a=e[o];if(a){var s=o==="x"?"width":"height",c=a.margin,l=a.minDistance;c<0?r[o]=Math.min(i[o]+c-t[s]/2,n[o]-l+c):r[o]=Math.max(i[o]+i[s]+c+t[s]/2,n[o]+l+c)}}),r}}function t1(e,t,n){var i={x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},r=i1(e);return te(r,function(o){if(o===n)return!1;var a=hn(o,i,Jw);return a==="intersect"})}function n1(e,t){t||(t={});function n(h){return h.source===e?1:-1}var i=t.defaultDistance||qh,r=t.direction||"e",o=t.filter,a=t.getWeight||n,s=t.maxDistance||e1,c=t.reference||"start";o||(o=a1);function l(h,v){return r==="n"?c==="start"?Ee(h).top-Ee(v).bottom:c==="center"?Ee(h).top-Pe(v).y:Ee(h).top-Ee(v).top:r==="w"?c==="start"?Ee(h).left-Ee(v).right:c==="center"?Ee(h).left-Pe(v).x:Ee(h).left-Ee(v).left:r==="s"?c==="start"?Ee(v).top-Ee(h).bottom:c==="center"?Pe(v).y-Ee(h).bottom:Ee(v).bottom-Ee(h).bottom:c==="start"?Ee(v).left-Ee(h).right:c==="center"?Pe(v).x-Ee(h).right:Ee(v).right-Ee(h).right}var u=e.incoming.filter(o).map(function(h){var v=a(h),m=v<0?l(h.source,e):l(e,h.source);return{id:h.source.id,distance:m,weight:v}}),p=e.outgoing.filter(o).map(function(h){var v=a(h),m=v>0?l(e,h.target):l(h.target,e);return{id:h.target.id,distance:m,weight:v}}),f=u.concat(p).reduce(function(h,v){return h[v.id+"__weight_"+v.weight]=v,h},{}),d=Ot(f,function(h,v){var m=v.distance,S=v.weight;return m<0||m>s||(h[String(m)]||(h[String(m)]=0),h[String(m)]+=1*S,(!h.distance||h[h.distance]<h[String(m)])&&(h.distance=m)),h},{});return d.distance||i}function i1(e){var t=au(e);return e.host&&(t=t.concat(au(e.host))),e.attachers&&(t=t.concat(e.attachers.reduce(function(n,i){return n.concat(au(i))},[]))),t}function au(e){return o1(e).concat(r1(e))}function r1(e){return e.incoming.map(function(t){return t.source})}function o1(e){return e.outgoing.map(function(t){return t.target})}function a1(){return!0}var s1=100;function Qh(e,t,n){e.on("autoPlace",s1,function(i){var r=i.shape,o=i.source;return c1(o,r)}),e.on("autoPlace.end",function(i){n.scrollToElement(i.shape)}),this.append=function(i,r,o){e.fire("autoPlace.start",{source:i,shape:r});var a=e.fire("autoPlace",{source:i,shape:r}),s=t.appendShape(i,r,a,i.parent,o);return e.fire("autoPlace.end",{source:i,shape:s}),s}}Qh.$inject=["eventBus","modeling","canvas"];function c1(e,t,n){n||(n={});var i=n.defaultDistance||qh,r=Pe(e),o=Ee(e);return{x:o.right+i+t.width/2,y:r.y}}function Jh(e,t){e.on("autoPlace.end",500,function(n){t.select(n.shape)})}Jh.$inject=["eventBus","selection"];var l1={__init__:["autoPlaceSelectionBehavior"],autoPlace:["type",Qh],autoPlaceSelectionBehavior:["type",Jh]};function fo(e,t){for(ee(t)&&(t=[t]);e=e.parent;)if(je(e,t))return e;return null}function em(e,t){var n=fo(e,"bpmn:Process");if(n)return!0;var i=["bpmn:Participant","bpmn:Lane"];if(n=fo(e,i),n)return qt(n);if(je(e,i))return qt(e);var r;for(r=Q(e);r&&!b(r,"bpmn:Process");r=r.$parent);if(!t)return!0;var o=t.find(function(a){var s=Q(a);return s&&s.get("processRef")===r});return o?qt(o):!0}function tm(e,t,n){var i=em(e,n);if(b(t,"bpmn:TextAnnotation"))return p1(e,t,i);if(je(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"]))return f1(e,t,i);if(b(t,"bpmn:FlowNode"))return u1(e,t,i)}function u1(e,t,n){var i=Ee(e),r=Pe(e),o=n?{directionHint:"e",minDistance:80,baseOrientation:"left",boundaryOrientation:"top",start:"top",end:"bottom"}:{directionHint:"s",minDistance:90,baseOrientation:"top",boundaryOrientation:"left",start:"left",end:"right"},a=n1(e,{filter:function(d){return b(d,"bpmn:SequenceFlow")},direction:o.directionHint}),s=30,c=o.minDistance,l=o.baseOrientation;b(e,"bpmn:BoundaryEvent")&&(l=hn(e,e.host,-25),l.indexOf(o.boundaryOrientation)!==-1&&(s*=-1));var u=n?{x:i.right+a+t.width/2,y:r.y+nm(l,c,o)}:{x:r.x+nm(l,c,o),y:i.bottom+a+t.height/2},p={margin:s,minDistance:c},f=n?{y:p}:{x:p};return ru(e,t,u,ou(f))}function nm(e,t,n){return e.includes(n.start)?-1*t:e.includes(n.end)?t:0}function p1(e,t,n){var i=Ee(e),r=n?{x:i.right+t.width/2,y:i.top-50-t.height/2}:{x:i.right+50+t.width/2,y:i.bottom+t.height/2};pt(e)&&(r=Pe(e),n?(r.x+=100,r.y-=50):(r.x+=100,r.y+=50));var o={margin:n?-30:30,minDistance:20},a=n?{y:o}:{x:o};return ru(e,t,r,ou(a))}function f1(e,t,n){var i=Ee(e),r=n?{x:i.right-10+t.width/2,y:i.bottom+40+t.width/2}:{x:i.left-40-t.width/2,y:i.bottom-10+t.height/2},o={margin:30,minDistance:30},a=n?{x:o}:{y:o};return ru(e,t,r,ou(a))}function im(e,t){e.on("autoPlace",function(n){var i=n.shape,r=n.source;return tm(r,i,t)})}im.$inject=["eventBus","elementRegistry"];var su={__depends__:[l1],__init__:["bpmnAutoPlace"],bpmnAutoPlace:["type",im]};function Bi(e,t,n,i){X.call(this,e),this._elementRegistry=t,this._modeling=n,this._rules=i;var r=this;this.postExecuted(["shape.create"],function(o){var a=o.context,s=a.hints||{},c=a.shape,l=a.parent||a.newParent;s.autoResize!==!1&&r._expand([c],l)}),this.postExecuted(["elements.move"],function(o){var a=o.context,s=Yt(on(a.closure.topLevel)),c=a.hints,l=c?c.autoResize:!0;if(l!==!1){var u=_n(s,function(p){return p.parent.id});A(u,function(p,f){se(l)&&(p=p.filter(function(d){return te(l,de({id:d.id}))})),r._expand(p,f)})}}),this.postExecuted(["shape.toggleCollapse"],function(o){var a=o.context,s=a.hints,c=a.shape;s&&s.autoResize===!1||c.collapsed||r._expand(c.children||[],c)}),this.postExecuted(["shape.resize"],function(o){var a=o.context,s=a.hints,c=a.shape,l=c.parent;s&&s.autoResize===!1||l&&r._expand([c],l)})}Bi.$inject=["eventBus","elementRegistry","modeling","rules"],j(Bi,X),Bi.prototype._getOptimalBounds=function(e,t){var n=this.getOffset(t),i=this.getPadding(t),r=Ee(Xt(e)),o=Ee(t),a={};return r.top-o.top<i.top&&(a.top=r.top-n.top),r.left-o.left<i.left&&(a.left=r.left-n.left),o.right-r.right<i.right&&(a.right=r.right+n.right),o.bottom-r.bottom<i.bottom&&(a.bottom=r.bottom+n.bottom),Ja(k({},o,a))},Bi.prototype._expand=function(e,t){typeof t=="string"&&(t=this._elementRegistry.get(t));var n=this._rules.allowed("element.autoResize",{elements:e,target:t});if(n){var i=this._getOptimalBounds(e,t);if(d1(i,t)){var r=h1(Nt(t,["x","y","width","height"]),i);this.resize(t,i,{autoResize:r});var o=t.parent;o&&this._expand([t],o)}}},Bi.prototype.getOffset=function(e){return{top:60,bottom:60,left:100,right:100}},Bi.prototype.getPadding=function(e){return{top:2,bottom:2,left:15,right:15}},Bi.prototype.resize=function(e,t,n){this._modeling.resizeShape(e,t,null,n)};function d1(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function h1(e,t){var n="";return e=Ee(e),t=Ee(t),e.top>t.top&&(n=n.concat("n")),e.right<t.right&&(n=n.concat("w")),e.bottom<t.bottom&&(n=n.concat("s")),e.left>t.left&&(n=n.concat("e")),n}function Ls(e){e.invoke(Bi,this)}Ls.$inject=["injector"],j(Ls,Bi),Ls.prototype.resize=function(e,t,n){b(e,"bpmn:Participant")?this._modeling.resizeLane(e,t,null,n):this._modeling.resizeShape(e,t,null,n)};function la(e){Wn.call(this,e);var t=this;this.addRule("element.autoResize",function(n){return t.canResize(n.elements,n.target)})}la.$inject=["eventBus"],j(la,Wn),la.prototype.canResize=function(e,t){return!1};function Fs(e,t){la.call(this,e),this._modeling=t}j(Fs,la),Fs.$inject=["eventBus","modeling"],Fs.prototype.canResize=function(e,t){if(b(t.di,"bpmndi:BPMNPlane")||!b(t,"bpmn:Participant")&&!b(t,"bpmn:Lane")&&!b(t,"bpmn:SubProcess"))return!1;var n=!0;return A(e,function(i){if(b(i,"bpmn:Lane")||Xe(i)){n=!1;return}}),n};var m1={__init__:["bpmnAutoResize","bpmnAutoResizeProvider"],bpmnAutoResize:["type",Ls],bpmnAutoResizeProvider:["type",Fs]},rm=1500;function om(e,t,n){var i=this,r=n.get("dragging",!1);function o(a){if(!a.hover){var s=a.originalEvent,c=i._findTargetGfx(s),l=c&&e.get(c);c&&l&&(a.stopPropagation(),r.hover({element:l,gfx:c}),r.move(s))}}r&&t.on("drag.start",function(a){t.once("drag.move",rm,function(s){o(s)})}),function(){var a,s;t.on("element.hover",function(c){a=c.gfx,s=c.element}),t.on("element.hover",rm,function(c){s&&t.fire("element.out",{element:s,gfx:a})}),t.on("element.out",function(){a=null,s=null})}(),this._findTargetGfx=function(a){var s,c;if(a instanceof MouseEvent)return s=Nr(a),c=document.elementFromPoint(s.x,s.y),v1(c)}}om.$inject=["elementRegistry","eventBus","injector"];function v1(e){return Gn(e,"svg, .djs-element",!0)}var g1={__init__:["hoverFix"],hoverFix:["type",om]},ho=Math.round,am="djs-drag-active";function jr(e){e.preventDefault()}function y1(e){return typeof TouchEvent!="undefined"&&e instanceof TouchEvent}function _1(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function sm(e,t,n,i){var r={threshold:5,trapClick:!0},o;function a(E){var y=t.viewbox(),w=t._container.getBoundingClientRect();return{x:y.x+(E.x-w.left)/y.scale,y:y.y+(E.y-w.top)/y.scale}}function s(E,y){y=y||o;var w=e.createEvent(k({},y.payload,y.data,{isTouch:y.isTouch}));return e.fire("drag."+E,w)===!1?!1:e.fire(y.prefix+"."+E,w)}function c(E){var y=E.filter(function(w){return i.get(w.id)});y.length&&n.select(y)}function l(E,y){var w=o.payload,R=o.displacement,I=o.globalStart,T=Nr(E),O=oi(T,I),B=o.localStart,F=a(T),z=oi(F,B);if(!o.active&&(y||_1(O)>o.threshold)){if(k(w,{x:ho(B.x+R.x),y:ho(B.y+R.y),dx:0,dy:0},{originalEvent:E}),s("start")===!1)return m();o.active=!0,o.keepSelection||(w.previousSelection=n.get(),n.select(null)),o.cursor&&Cs(o.cursor),t.addMarker(t.getRootElement(),am)}Ll(E),o.active&&(k(w,{x:ho(F.x+R.x),y:ho(F.y+R.y),dx:ho(z.x),dy:ho(z.y)},{originalEvent:E}),s("move"))}function u(E){var y,w=!0;o.active&&(E&&(o.payload.originalEvent=E,Ll(E)),w=s("end")),w===!1&&s("rejected"),y=S(w!==!0),s("ended",y)}function p(E){Qt("Escape",E)&&(jr(E),m())}function f(E){var y;o.active&&(y=uh(e),setTimeout(y,400),jr(E)),u(E)}function d(E){l(E)}function h(E){var y=o.payload;y.hoverGfx=E.gfx,y.hover=E.element,s("hover")}function v(E){s("out");var y=o.payload;y.hoverGfx=null,y.hover=null}function m(E){var y;if(o){var w=o.active;w&&s("cancel"),y=S(E),w&&s("canceled",y)}}function S(E){var y,w;s("cleanup"),lh(),o.trapClick?w=f:w=u,be.unbind(document,"mousemove",l),be.unbind(document,"dragstart",jr),be.unbind(document,"selectstart",jr),be.unbind(document,"mousedown",w,!0),be.unbind(document,"mouseup",w,!0),be.unbind(document,"keyup",p),be.unbind(document,"touchstart",d,!0),be.unbind(document,"touchcancel",m,!0),be.unbind(document,"touchmove",l,!0),be.unbind(document,"touchend",u,!0),e.off("element.hover",h),e.off("element.out",v),t.removeMarker(t.getRootElement(),am);var R=o.payload.previousSelection;return E!==!1&&R&&!n.get().length&&c(R),y=o,o=null,y}function x(E,y,w,R){o&&m(!1),typeof y=="string"&&(R=w,w=y,y=null),R=k({},r,R||{});var I=R.data||{},T,O,B,F,z;R.trapClick?F=f:F=u,E?(T=io(E)||E,O=Nr(E),Ll(E),T.type==="dragstart"&&jr(T)):(T=null,O={x:0,y:0}),B=a(O),y||(y=B),z=y1(T),o=k({prefix:w,data:I,payload:{},globalStart:O,displacement:oi(y,B),localStart:B,isTouch:z},R),R.manual||(z?(be.bind(document,"touchstart",d,!0),be.bind(document,"touchcancel",m,!0),be.bind(document,"touchmove",l,!0),be.bind(document,"touchend",u,!0)):(be.bind(document,"mousemove",l),be.bind(document,"dragstart",jr),be.bind(document,"selectstart",jr),be.bind(document,"mousedown",F,!0),be.bind(document,"mouseup",F,!0)),be.bind(document,"keyup",p),e.on("element.hover",h),e.on("element.out",v)),s("init"),R.autoActivate&&l(E,!0)}e.on("diagram.destroy",m),this.init=x,this.move=l,this.hover=h,this.out=v,this.end=u,this.cancel=m,this.context=function(){return o},this.setOptions=function(E){k(r,E)}}sm.$inject=["eventBus","canvas","selection","elementRegistry"];var Ni={__depends__:[g1,_i],dragging:["type",sm]};function mo(e,t,n){this._canvas=n,this._opts=k({scrollThresholdIn:[20,20,20,20],scrollThresholdOut:[0,0,0,0],scrollRepeatTimeout:15,scrollStep:10},e);var i=this;t.on("drag.move",function(r){var o=i._toBorderPoint(r);i.startScroll(o)}),t.on(["drag.cleanup"],function(){i.stopScroll()})}mo.$inject=["config.autoScroll","eventBus","canvas"],mo.prototype.startScroll=function(e){var t=this._canvas,n=this._opts,i=this,r=t.getContainer().getBoundingClientRect(),o=[e.x,e.y,r.width-e.x,r.height-e.y];this.stopScroll();for(var a=0,s=0,c=0;c<4;c++)b1(o[c],n.scrollThresholdOut[c],n.scrollThresholdIn[c])&&(c===0?a=n.scrollStep:c==1?s=n.scrollStep:c==2?a=-n.scrollStep:c==3&&(s=-n.scrollStep));(a!==0||s!==0)&&(t.scroll({dx:a,dy:s}),this._scrolling=setTimeout(function(){i.startScroll(e)},n.scrollRepeatTimeout))};function b1(e,t,n){return t<e&&e<n}mo.prototype.stopScroll=function(){clearTimeout(this._scrolling)},mo.prototype.setOptions=function(e){this._opts=k({},this._opts,e)},mo.prototype._toBorderPoint=function(e){var t=this._canvas._container.getBoundingClientRect(),n=Nr(e.originalEvent);return{x:n.x-t.left,y:n.y-t.top}};var E1={__depends__:[Ni],__init__:["autoScroll"],autoScroll:["type",mo]};function cu(e){this._commandStack=e.get("commandStack",!1)}cu.$inject=["injector"],cu.prototype.allowed=function(e,t){var n=!0,i=this._commandStack;return i&&(n=i.canExecute(e,t)),n===void 0?!0:n};var Ei={__init__:["rules"],rules:["type",cu]},js=Math.round,x1=Math.max;function w1(e,t){var n=e.x,i=e.y;return[["M",n,i],["m",0,-t],["a",t,t,0,1,1,0,2*t],["a",t,t,0,1,1,0,-2*t],["z"]]}function S1(e){var t=[];return e.forEach(function(n,i){t.push([i===0?"M":"L",n.x,n.y])}),t}var cm=10;function C1(e,t){var n,i;for(n=0;i=e[n];n++)if(Ho(i,t)<=cm)return{point:e[n],bendpoint:!0,index:n};return null}function P1(e,t){var n=zf(w1(t,cm),S1(e)),i=n[0],r=n[n.length-1],o;return i?i!==r?i.segment2!==r.segment2?(o=x1(i.segment2,r.segment2)-1,{point:e[o],bendpoint:!0,index:o}):{point:{x:js(i.x+r.x)/2,y:js(i.y+r.y)/2},index:i.segment2}:{point:{x:js(i.x),y:js(i.y)},index:i.segment2}:null}function lu(e,t){return C1(e,t)||P1(e,t)}function lm(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))}function um(e){return Math.atan((e[1].y-e[0].y)/(e[1].x-e[0].x))}function R1(e,t){return t?{x:Math.cos(t)*e.x-Math.sin(t)*e.y,y:Math.sin(t)*e.x+Math.cos(t)*e.y}:e}function A1(e,t,n){var i=[{n:e[0]-n[0],lambda:t[0]},{n:e[1]-n[1],lambda:t[1]}],r=i[0].n*t[0]+i[1].n*t[1],o=i[0].lambda*t[0]+i[1].lambda*t[1];return-r/o}function uu(e,t){var n=t[0],i=t[1],r={x:i.x-n.x,y:i.y-n.y},o=A1([n.x,n.y],[r.x,r.y],[e.x,e.y]);return{x:n.x+o*r.x,y:n.y+o*r.y}}function pm(e,t){var n=uu(e,t),i={x:n.x-e.x,y:n.y-e.y};return lm(i)}function $s(e,t){return lm({x:e.x-t.x,y:e.y-t.y})}var fm="djs-bendpoint",dm="djs-segment-dragger";function T1(e,t){var n=Nr(t),i=e._container.getBoundingClientRect(),r;r={x:i.left,y:i.top};var o=e.viewbox();return{x:o.x+(n.x-r.x)/o.scale,y:o.y+(n.y-r.y)/o.scale}}function pu(e,t,n){var i=T1(e,n),r=lu(t,i);return r}function fu(e,t){var n=ve("g");Ke(n).add(fm),we(e,n);var i=ve("circle");ce(i,{cx:0,cy:0,r:4}),Ke(i).add("djs-visual"),we(n,i);var r=ve("circle");return ce(r,{cx:0,cy:0,r:10}),Ke(r).add("djs-hit"),we(n,r),t&&Ke(n).add(t),n}function D1(e,t,n,i){var r=ve("g");we(e,r);var o=18,a=6,s=11,c=k1(t,n,i),l=a+s,u=ve("rect");ce(u,{x:-o/2,y:-a/2,width:o,height:a}),Ke(u).add("djs-visual"),we(r,u);var p=ve("rect");return ce(p,{x:-c/2,y:-l/2,width:c,height:l}),Ke(p).add("djs-hit"),we(r,p),cd(r,i==="v"?90:0,0,0),r}function hm(e,t,n){var i=ve("g"),r=ml(t,n),o=Pi(t,n);return we(e,i),D1(i,t,n,o),Ke(i).add(dm),Ke(i).add(o==="h"?"horizontal":"vertical"),ln(i,r.x,r.y),i}function du(e){return Math.abs(Math.round(e*2/3))}function M1(e,t){var n=I1(e,t);return uu(e,n)}function k1(e,t,n){var i=t.x-e.x,r=t.y-e.y;return du(n==="h"?i:r)}function I1(e,t){for(var n=t.waypoints,i=1/0,r,o=0;o<n.length-1;o++){var a=n[o],s=n[o+1],c=pm(e,[a,s]);c<i&&(i=c,r=o)}return[n[r],n[r+1]]}function mm(e,t,n,i,r){function o(E,y,w){var R=E.index,I=E.point,T,O,B,F,z,H;return R<=0||E.bendpoint?!1:(T=y[R-1],O=y[R],B=ml(T,O),F=Pi(T,O),z=Math.abs(I.x-B.x),H=Math.abs(I.y-B.y),F&&z<=w&&H<=w)}function a(E,y){var w=E.waypoints,R,I,T,O;return y.index<=0||y.bendpoint||(R={start:w[y.index-1],end:w[y.index]},I=Pi(R.start,R.end),!I)?null:(I==="h"?T=R.end.x-R.start.x:T=R.end.y-R.start.y,O=du(T)/2,O)}function s(E,y){var w=y.waypoints,R=pu(t,w,E),I;if(R)return I=a(y,R),o(R,w,I)?r.start(E,y,R.index):i.start(E,y,R.index,!R.bendpoint),!0}function c(E,y,w){be.bind(E,y,function(R){n.triggerMouseEvent(y,R,w),R.stopPropagation()})}function l(E,y){var w=t.getLayer("overlays"),R=ot('.djs-bendpoints[data-element-id="'+ea(E.id)+'"]',w);return!R&&y&&(R=ve("g"),ce(R,{"data-element-id":E.id}),Ke(R).add("djs-bendpoints"),we(w,R),c(R,"mousedown",E),c(R,"click",E),c(R,"dblclick",E)),R}function u(E,y){return ot('.djs-segment-dragger[data-segment-idx="'+E+'"]',y)}function p(E,y){y.waypoints.forEach(function(w,R){var I=fu(E);we(E,I),ln(I,w.x,w.y)}),fu(E,"floating")}function f(E,y){for(var w=y.waypoints,R,I,T,O=1;O<w.length;O++)R=w[O-1],I=w[O],Pi(R,I)&&(T=hm(E,R,I),ce(T,{"data-segment-idx":O}),c(T,"mousemove",y))}function d(E){A(Bn("."+fm,E),function(y){Zt(y)})}function h(E){A(Bn("."+dm,E),function(y){Zt(y)})}function v(E){var y=l(E);return y||(y=l(E,!0),p(y,E),f(y,E)),y}function m(E){var y=l(E);y&&(h(y),d(y),f(y,E),p(y,E))}function S(E,y){var w=ot(".floating",E),R=y.point;w&&ln(w,R.x,R.y)}function x(E,y,w){var R=u(y.index,E),I=w[y.index-1],T=w[y.index],O=y.point,B=ml(I,T),F=Pi(I,T),z,H;R&&(z=O1(R),H={x:O.x-B.x,y:O.y-B.y},F==="v"&&(H={x:H.y,y:H.x}),ln(z,H.x,H.y))}e.on("connection.changed",function(E){m(E.element)}),e.on("connection.remove",function(E){var y=l(E.element);y&&Zt(y)}),e.on("element.marker.update",function(E){var y=E.element,w;y.waypoints&&(w=v(y),E.add?Ke(w).add(E.marker):Ke(w).remove(E.marker))}),e.on("element.mousemove",function(E){var y=E.element,w=y.waypoints,R,I;if(w){if(R=l(y,!0),I=pu(t,w,E.originalEvent),!I)return;S(R,I),I.bendpoint||x(R,I,w)}}),e.on("element.mousedown",function(E){if(ir(E)){var y=E.originalEvent,w=E.element;if(w.waypoints)return s(y,w)}}),e.on("selection.changed",function(E){var y=E.newSelection,w=y[0];w&&w.waypoints&&v(w)}),e.on("element.hover",function(E){var y=E.element;y.waypoints&&(v(y),n.registerEvent(E.gfx,"mousemove","element.mousemove"))}),e.on("element.out",function(E){n.unregisterEvent(E.gfx,"mousemove","element.mousemove")}),e.on("element.updateId",function(E){var y=E.element,w=E.newId;if(y.waypoints){var R=l(y);R&&ce(R,{"data-element-id":w})}}),this.addHandles=v,this.updateHandles=m,this.getBendpointsContainer=l,this.getSegmentDragger=u}mm.$inject=["eventBus","canvas","interactionEvents","bendpointMove","connectionSegmentMove"];function O1(e){return ot(".djs-visual",e)}var vm=Math.round,$r="reconnectStart",zr="reconnectEnd",ua="updateWaypoints";function hu(e,t,n,i,r,o){this._injector=e,this.start=function(a,s,c,l){var u=n.getGraphics(s),p=s.source,f=s.target,d=s.waypoints,h;!l&&c===0?h=$r:!l&&c===d.length-1?h=zr:h=ua;var v=h===ua?"connection.updateWaypoints":"connection.reconnect",m=r.allowed(v,{connection:s,source:p,target:f});m===!1&&(m=r.allowed(v,{connection:s,source:f,target:p})),m!==!1&&i.init(a,"bendpoint.move",{data:{connection:s,connectionGfx:u,context:{allowed:m,bendpointIndex:c,connection:s,source:p,target:f,insert:l,type:h}}})},t.on("bendpoint.move.hover",function(a){var s=a.context,c=s.connection,l=c.source,u=c.target,p=a.hover,f=s.type;s.hover=p;var d;if(p){var h=f===ua?"connection.updateWaypoints":"connection.reconnect";if(d=s.allowed=r.allowed(h,{connection:c,source:f===$r?p:l,target:f===zr?p:u}),d){s.source=f===$r?p:l,s.target=f===zr?p:u;return}d===!1&&(d=s.allowed=r.allowed(h,{connection:c,source:f===zr?p:u,target:f===$r?p:l})),d&&(s.source=f===zr?p:u,s.target=f===$r?p:l)}}),t.on(["bendpoint.move.out","bendpoint.move.cleanup"],function(a){var s=a.context,c=s.type;s.hover=null,s.source=null,s.target=null,c!==ua&&(s.allowed=!1)}),t.on("bendpoint.move.end",function(a){var s=a.context,c=s.allowed,l=s.bendpointIndex,u=s.connection,p=s.insert,f=u.waypoints.slice(),d=s.source,h=s.target,v=s.type,m=s.hints||{},S={x:vm(a.x),y:vm(a.y)};if(!c)return!1;v===ua?(p?f.splice(l,0,S):f[l]=S,m.bendpointMove={insert:p,bendpointIndex:l},f=this.cropWaypoints(u,f),o.updateWaypoints(u,b_(f),m)):(v===$r?(m.docking="source",zs(s)&&(m.docking="target",m.newWaypoints=f.reverse())):v===zr&&(m.docking="target",zs(s)&&(m.docking="source",m.newWaypoints=f.reverse())),o.reconnect(u,d,h,S,m))},this)}hu.$inject=["injector","eventBus","canvas","dragging","rules","modeling"],hu.prototype.cropWaypoints=function(e,t){var n=this._injector.get("connectionDocking",!1);if(!n)return t;var i=e.waypoints;return e.waypoints=t,e.waypoints=n.getCroppedWaypoints(e),t=e.waypoints,e.waypoints=i,t};function zs(e){var t=e.hover,n=e.source,i=e.target,r=e.type;if(r===$r)return t&&i&&t===i&&n!==i;if(r===zr)return t&&n&&t===n&&n!==i}var B1="reconnectStart",N1="reconnectEnd",gm="updateWaypoints",pa="connect-ok",Hs="connect-not-ok",ym="connect-hover",_m="djs-updating",bm="djs-dragging",Em=1100;function xm(e,t,n,i){this._injector=t;var r=t.get("connectionPreview",!1);n.on("bendpoint.move.start",function(o){var a=o.context,s=a.bendpointIndex,c=a.connection,l=a.insert,u=c.waypoints,p=u.slice();a.waypoints=u,l&&p.splice(s,0,{x:o.x,y:o.y}),c.waypoints=p;var f=a.draggerGfx=fu(i.getLayer("overlays"));Ke(f).add("djs-dragging"),i.addMarker(c,bm),i.addMarker(c,_m)}),n.on("bendpoint.move.hover",function(o){var a=o.context,s=a.allowed,c=a.hover,l=a.type;if(c){if(i.addMarker(c,ym),l===gm)return;s?(i.removeMarker(c,Hs),i.addMarker(c,pa)):s===!1&&(i.removeMarker(c,pa),i.addMarker(c,Hs))}}),n.on(["bendpoint.move.out","bendpoint.move.cleanup"],Em,function(o){var a=o.context,s=a.hover,c=a.target;s&&(i.removeMarker(s,ym),i.removeMarker(s,c?pa:Hs))}),n.on("bendpoint.move.move",function(o){var a=o.context,s=a.allowed,c=a.bendpointIndex,l=a.draggerGfx,u=a.hover,p=a.type,f=a.connection,d=f.source,h=f.target,v=f.waypoints.slice(),m={x:o.x,y:o.y},S=a.hints||{},x={};r&&(S.connectionStart&&(x.connectionStart=S.connectionStart),S.connectionEnd&&(x.connectionEnd=S.connectionEnd),p===B1?zs(a)?(x.connectionEnd=x.connectionEnd||m,x.source=h,x.target=u||d,v=v.reverse()):(x.connectionStart=x.connectionStart||m,x.source=u||d,x.target=h):p===N1?zs(a)?(x.connectionStart=x.connectionStart||m,x.source=u||h,x.target=d,v=v.reverse()):(x.connectionEnd=x.connectionEnd||m,x.source=d,x.target=u||h):(x.noCropping=!0,x.noLayout=!0,v[c]=m),p===gm&&(v=e.cropWaypoints(f,v)),x.waypoints=v,r.drawPreview(a,s,x)),ln(l,o.x,o.y)},this),n.on(["bendpoint.move.end","bendpoint.move.cancel"],Em,function(o){var a=o.context,s=a.connection,c=a.draggerGfx,l=a.hover,u=a.target,p=a.waypoints;s.waypoints=p,Zt(c),i.removeMarker(s,_m),i.removeMarker(s,bm),l&&(i.removeMarker(l,pa),i.removeMarker(l,u?pa:Hs)),r&&r.cleanUp(a)})}xm.$inject=["bendpointMove","injector","eventBus","canvas"];var wm="connect-hover",Sm="djs-updating";function Cm(e,t,n){return mu(e,t,e[t]+n)}function mu(e,t,n){return{x:t==="x"?n:e.x,y:t==="y"?n:e.y}}function L1(e,t,n,i){var r=Math.max(t[i],n[i]),o=Math.min(t[i],n[i]),a=20,s=Math.min(Math.max(o+a,e[i]),r-a);return mu(t,i,s)}function Pm(e){return e==="x"?"y":"x"}function Rm(e,t,n){var i,r;return e.original?e.original:(i=Pe(t),r=Pm(n),mu(e,r,i[r]))}function Am(e,t,n,i,r,o){var a=e.get("connectionDocking",!1);this.start=function(p,f,d){var h,v=n.getGraphics(f),m=d-1,S=d,x=f.waypoints,E=x[m],y=x[S],w=pu(n,x,p),R,I,T;R=Pi(E,y),R&&(I=R==="v"?"x":"y",m===0&&(E=Rm(E,f.source,I)),S===x.length-1&&(y=Rm(y,f.target,I)),w?T=w.point:T={x:(E.x+y.x)/2,y:(E.y+y.y)/2},h={connection:f,segmentStartIndex:m,segmentEndIndex:S,segmentStart:E,segmentEnd:y,axis:I,dragPosition:T},i.init(p,T,"connectionSegment.move",{cursor:I==="x"?"resize-ew":"resize-ns",data:{connection:f,connectionGfx:v,context:h}}))};function s(p,f){if(!a)return f;var d=p.waypoints,h;return p.waypoints=f,h=a.getCroppedWaypoints(p),p.waypoints=d,h}function c(p){r.update("connection",p.connection,p.connectionGfx)}function l(p,f,d){var h=p.newWaypoints,v=p.segmentStartIndex+f,m=h[v],S=p.segmentEndIndex+f,x=h[S],E=Pm(p.axis),y=L1(d,m,x,E);ln(p.draggerGfx,y.x,y.y)}function u(p,f){var d=0,h=p.filter(function(v,m){return hl(p[m-1],p[m+1],v)?(d=m<=f?d-1:d,!1):!0});return{waypoints:h,segmentOffset:d}}t.on("connectionSegment.move.start",function(p){var f=p.context,d=p.connection,h=n.getLayer("overlays");f.originalWaypoints=d.waypoints.slice(),f.draggerGfx=hm(h,f.segmentStart,f.segmentEnd),Ke(f.draggerGfx).add("djs-dragging"),n.addMarker(d,Sm)}),t.on("connectionSegment.move.move",function(p){var f=p.context,d=f.connection,h=f.segmentStartIndex,v=f.segmentEndIndex,m=f.segmentStart,S=f.segmentEnd,x=f.axis,E=f.originalWaypoints.slice(),y=Cm(m,x,p["d"+x]),w=Cm(S,x,p["d"+x]),R=E.length,I=0;E[h]=y,E[v]=w;var T,O;h<2&&(T=hn(d.source,y),h===1?T==="intersect"&&(E.shift(),E[0]=y,I--):T!=="intersect"&&(E.unshift(m),I++)),v>R-3&&(O=hn(d.target,w),v===R-2?O==="intersect"&&(E.pop(),E[E.length-1]=w):O!=="intersect"&&E.push(S)),f.newWaypoints=d.waypoints=s(d,E),l(f,I,p),f.newSegmentStartIndex=h+I,c(p)}),t.on("connectionSegment.move.hover",function(p){p.context.hover=p.hover,n.addMarker(p.hover,wm)}),t.on(["connectionSegment.move.out","connectionSegment.move.cleanup"],function(p){var f=p.context.hover;f&&n.removeMarker(f,wm)}),t.on("connectionSegment.move.cleanup",function(p){var f=p.context,d=f.connection;f.draggerGfx&&Zt(f.draggerGfx),n.removeMarker(d,Sm)}),t.on(["connectionSegment.move.cancel","connectionSegment.move.end"],function(p){var f=p.context,d=f.connection;d.waypoints=f.originalWaypoints,c(p)}),t.on("connectionSegment.move.end",function(p){var f=p.context,d=f.connection,h=f.newWaypoints,v=f.newSegmentStartIndex;h=h.map(function(w){return{original:w.original,x:Math.round(w.x),y:Math.round(w.y)}});var m=u(h,v),S=m.waypoints,x=s(d,S),E=m.segmentOffset,y={segmentMove:{segmentStartIndex:f.segmentStartIndex,newSegmentStartIndex:v+E}};o.updateWaypoints(d,x,y)})}Am.$inject=["injector","eventBus","canvas","dragging","graphicsFactory","modeling"];var F1=Math.abs,Tm=Math.round;function j1(e,t,n){n=n===void 0?10:n;var i,r;for(i=0;i<t.length;i++)if(r=t[i],F1(r-e)<=n)return r}function Dm(e){return{x:e.x,y:e.y}}function nM(e){return{x:e.x+e.width,y:e.y}}function iM(e){return{x:e.x,y:e.y+e.height}}function Mm(e){return{x:e.x+e.width,y:e.y+e.height}}function Yn(e,t){return!e||isNaN(e.x)||isNaN(e.y)?t:{x:Tm(e.x+e.width/2),y:Tm(e.y+e.height/2)}}function vo(e,t){var n=e.snapped;return n?typeof t=="string"?n[t]:n.x&&n.y:!1}function zt(e,t,n){if(typeof t!="string")throw new Error("axis must be in [x, y]");if(typeof n!="number"&&n!==!1)throw new Error("value must be Number or false");var i,r=e[t],o=e.snapped=e.snapped||{};return n===!1?o[t]=!1:(o[t]=!0,i=n-r,e[t]+=i,e["d"+t]+=i),r}function km(e){return e.children||[]}var $1=Math.abs,Im=Math.round,vu=10;function Om(e){function t(o,a){if(se(o)){for(var s=o.length;s--;)if($1(o[s]-a)<=vu)return o[s]}else{o=+o;var c=a%o;if(c<vu)return a-c;if(c>o-vu)return a-c+o}return a}function n(o,a){if(o.waypoints)return M1(a,o);if(o.width)return{x:Im(o.width/2+o.x),y:Im(o.height/2+o.y)}}function i(o){var a=o.context,s=a.snapPoints,c=a.connection,l=c.waypoints,u=a.segmentStart,p=a.segmentStartIndex,f=a.segmentEnd,d=a.segmentEndIndex,h=a.axis;if(s)return s;var v=[l[p-1],u,f,l[d+1]];return p<2&&v.unshift(n(c.source,o)),d>l.length-3&&v.unshift(n(c.target,o)),a.snapPoints=s={horizontal:[],vertical:[]},A(v,function(m){m&&(m=m.original||m,h==="y"&&s.horizontal.push(m.y),h==="x"&&s.vertical.push(m.x))}),s}e.on("connectionSegment.move.move",1500,function(o){var a=i(o),s=o.x,c=o.y,l,u;if(a){l=t(a.vertical,s),u=t(a.horizontal,c);var p=s-l,f=c-u;k(o,{dx:o.dx-p,dy:o.dy-f,x:l,y:u}),(p||a.vertical.indexOf(s)!==-1)&&zt(o,"x",l),(f||a.horizontal.indexOf(c)!==-1)&&zt(o,"y",u)}});function r(o){var a=o.snapPoints,s=o.connection.waypoints,c=o.bendpointIndex;if(a)return a;var l=[s[c-1],s[c+1]];return o.snapPoints=a={horizontal:[],vertical:[]},A(l,function(u){u&&(u=u.original||u,a.horizontal.push(u.y),a.vertical.push(u.x))}),a}e.on(["connect.hover","connect.move","connect.end"],1500,function(o){var a=o.context,s=a.hover,c=s&&n(s,o);!pt(s)||!c||!c.x||!c.y||(zt(o,"x",c.x),zt(o,"y",c.y))}),e.on(["bendpoint.move.move","bendpoint.move.end"],1500,function(o){var a=o.context,s=r(a),c=a.hover,l=c&&n(c,o),u=o.x,p=o.y,f,d;if(s){f=t(l?s.vertical.concat([l.x]):s.vertical,u),d=t(l?s.horizontal.concat([l.y]):s.horizontal,p);var h=u-f,v=p-d;k(o,{dx:o.dx-h,dy:o.dy-v,x:o.x-h,y:o.y-v}),(h||s.vertical.indexOf(u)!==-1)&&zt(o,"x",f),(v||s.horizontal.indexOf(p)!==-1)&&zt(o,"y",d)}})}Om.$inject=["eventBus"];var z1={__depends__:[Ni,Ei],__init__:["bendpoints","bendpointSnapping","bendpointMovePreview"],bendpoints:["type",mm],bendpointMove:["type",hu],bendpointMovePreview:["type",xm],connectionSegmentMove:["type",Am],bendpointSnapping:["type",Om]};function Bm(e,t,n,i){function r(a,s){return i.allowed("connection.create",{source:a,target:s})}function o(a,s){return r(s,a)}e.on("connect.hover",function(a){var s=a.context,c=s.start,l=a.hover,u;if(s.hover=l,u=s.canExecute=r(c,l),!tt(u)){if(u!==!1){s.source=c,s.target=l;return}u=s.canExecute=o(c,l),!tt(u)&&u!==!1&&(s.source=l,s.target=c)}}),e.on(["connect.out","connect.cleanup"],function(a){var s=a.context;s.hover=null,s.source=null,s.target=null,s.canExecute=!1}),e.on("connect.end",function(a){var s=a.context,c=s.canExecute,l=s.connectionStart,u={x:a.x,y:a.y},p=s.source,f=s.target;if(!c)return!1;var d=null,h={connectionStart:gu(s)?u:l,connectionEnd:gu(s)?l:u};$(c)&&(d=c),s.connection=n.connect(p,f,d,h)}),this.start=function(a,s,c,l){$(c)||(l=c,c=Pe(s)),t.init(a,"connect",{autoActivate:l,data:{shape:s,context:{start:s,connectionStart:c}}})}}Bm.$inject=["eventBus","dragging","modeling","rules"];function gu(e){var t=e.hover,n=e.source,i=e.target;return t&&n&&t===n&&n!==i}var H1=1100,G1=900,Nm="connect-ok",Lm="connect-not-ok";function Fm(e,t,n){var i=e.get("connectionPreview",!1);i&&t.on("connect.move",function(r){var o=r.context,a=o.canExecute,s=o.hover,c=o.source,l=o.start,u=o.startPosition,p=o.target,f=o.connectionStart||u,d=o.connectionEnd||{x:r.x,y:r.y},h=f,v=d;gu(o)&&(h=d,v=f),i.drawPreview(o,a,{source:c||l,target:p||s,connectionStart:h,connectionEnd:v})}),t.on("connect.hover",G1,function(r){var o=r.context,a=r.hover,s=o.canExecute;s!==null&&n.addMarker(a,s?Nm:Lm)}),t.on(["connect.out","connect.cleanup"],H1,function(r){var o=r.hover;o&&(n.removeMarker(o,Nm),n.removeMarker(o,Lm))}),i&&t.on("connect.cleanup",function(r){i.cleanUp(r.context)})}Fm.$inject=["injector","eventBus","canvas"];var yu={__depends__:[_i,Ei,Ni],__init__:["connectPreview"],connect:["type",Bm],connectPreview:["type",Fm]},U1="djs-dragger";function Li(e,t,n,i){this._canvas=t,this._graphicsFactory=n,this._elementFactory=i,this._connectionDocking=e.get("connectionDocking",!1),this._layouter=e.get("layouter",!1)}Li.$inject=["injector","canvas","graphicsFactory","elementFactory"],Li.prototype.drawPreview=function(e,t,n){n=n||{};var i=e.connectionPreviewGfx,r=e.getConnection,o=n.source,a=n.target,s=n.waypoints,c=n.connectionStart,l=n.connectionEnd,u=n.noLayout,p=n.noCropping,f=n.noNoop,d,h=this;if(i||(i=e.connectionPreviewGfx=this.createConnectionPreviewGfx()),Lo(i),r||(r=e.getConnection=V1(function(v,m,S){return h.getConnection(v,m,S)})),t&&(d=r(t,o,a)),!d){!f&&this.drawNoopPreview(i,n);return}d.waypoints=s||[],this._layouter&&!u&&(d.waypoints=this._layouter.layoutConnection(d,{source:o,target:a,connectionStart:c,connectionEnd:l,waypoints:n.waypoints||d.waypoints})),(!d.waypoints||!d.waypoints.length)&&(d.waypoints=[o?Pe(o):c,a?Pe(a):l]),this._connectionDocking&&(o||a)&&!p&&(d.waypoints=this._connectionDocking.getCroppedWaypoints(d,o,a)),this._graphicsFactory.drawConnection(i,d,{stroke:"var(--element-dragger-color)"})},Li.prototype.drawNoopPreview=function(e,t){var n=t.source,i=t.target,r=t.connectionStart||Pe(n),o=t.connectionEnd||Pe(i),a=this.cropWaypoints(r,o,n,i),s=this.createNoopConnection(a[0],a[1]);we(e,s)},Li.prototype.cropWaypoints=function(e,t,n,i){var r=this._graphicsFactory,o=n&&r.getShapePath(n),a=i&&r.getShapePath(i),s=r.getConnectionPath({waypoints:[e,t]});return e=n&&yl(o,s,!0)||e,t=i&&yl(a,s,!1)||t,[e,t]},Li.prototype.cleanUp=function(e){e&&e.connectionPreviewGfx&&Zt(e.connectionPreviewGfx)},Li.prototype.getConnection=function(e){var t=Z1(e);return this._elementFactory.createConnection(t)},Li.prototype.createConnectionPreviewGfx=function(){var e=ve("g");return ce(e,{pointerEvents:"none"}),Ke(e).add(U1),we(this._canvas.getActiveLayer(),e),e},Li.prototype.createNoopConnection=function(e,t){return Wa([e,t],{stroke:"#333",strokeDasharray:[1],strokeWidth:2,"pointer-events":"none"})};function V1(e){var t={};return function(n){var i=JSON.stringify(n),r=t[i];return r||(r=t[i]=e.apply(null,arguments)),r}}function Z1(e){return $(e)?e:{}}var W1={__init__:["connectionPreview"],connectionPreview:["type",Li]};const Y1=new Jo("ps");var K1=["marker-start","marker-mid","marker-end"],X1=["circle","ellipse","line","path","polygon","polyline","path","rect"];function or(e,t,n,i){this._elementRegistry=e,this._canvas=n,this._styles=i}or.$inject=["elementRegistry","eventBus","canvas","styles"],or.prototype.cleanUp=function(){console.warn("PreviewSupport#cleanUp is deprecated and will be removed in future versions. You do not need to manually clean up previews anymore. cf. https://github.com/bpmn-io/diagram-js/pull/906")},or.prototype.getGfx=function(e){return this._elementRegistry.getGraphics(e)},or.prototype.addDragger=function(e,t,n,i="djs-dragger"){n=n||this.getGfx(e);var r=bf(n),o=n.getBoundingClientRect();return this._cloneMarkers(Rr(r),i),ce(r,this._styles.cls(i,[],{x:o.top,y:o.left})),we(t,r),ce(r,"data-preview-support-element-id",e.id),r},or.prototype.addFrame=function(e,t){var n=ve("rect",{class:"djs-resize-overlay",width:e.width,height:e.height,x:e.x,y:e.y});return we(t,n),ce(n,"data-preview-support-element-id",e.id),n},or.prototype._cloneMarkers=function(e,t="djs-dragger",n=e){var i=this;if(e.childNodes)for(var r=0;r<e.childNodes.length;r++)i._cloneMarkers(e.childNodes[r],t,n);eS(e)&&K1.forEach(function(o){if(ce(e,o)){var a=q1(e,o,i._canvas.getContainer());a&&i._cloneMarker(n,e,a,o,t)}})},or.prototype._cloneMarker=function(e,t,n,i,r="djs-dragger"){var o=[n.id,r,Y1.next()].join("-"),a=ot("marker#"+n.id,e);e=e||this._canvas._svg;var s=a||bf(n);s.id=o,Ke(s).add(r);var c=ot(":scope > defs",e);c||(c=ve("defs"),we(e,c)),we(c,s);var l=J1(s.id);ce(t,i,l)};function q1(e,t,n){var i=Q1(ce(e,t));return ot("marker#"+i,n||document)}function Q1(e){return e.match(/url\(['"]?#([^'"]*)['"]?\)/)[1]}function J1(e){return"url(#"+e+")"}function eS(e){return X1.indexOf(e.nodeName)!==-1}var go={__init__:["previewSupport"],previewSupport:["type",or]};const Gs="complex-preview";class jm{constructor(t,n,i){this._canvas=t,this._graphicsFactory=n,this._previewSupport=i,this._markers=[]}create(t){this.cleanUp();const{created:n=[],moved:i=[],removed:r=[],resized:o=[]}=t,a=this._canvas.getLayer(Gs);n.filter(s=>!tS(s)).forEach(s=>{let c;pt(s)?(c=this._graphicsFactory._createContainer("connection",ve("g")),this._graphicsFactory.drawConnection(Rr(c),s)):(c=this._graphicsFactory._createContainer("shape",ve("g")),this._graphicsFactory.drawShape(Rr(c),s),ln(c,s.x,s.y)),this._previewSupport.addDragger(s,a,c)}),i.forEach(({element:s,delta:c})=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"]);const l=this._previewSupport.addDragger(s,a);pt(s)?ln(l,c.x,c.y):ln(l,s.x+c.x,s.y+c.y)}),r.forEach(s=>{this._previewSupport.addDragger(s,a,void 0,"djs-dragging"),this._canvas.addMarker(s,"djs-element-hidden"),this._markers.push([s,"djs-element-hidden"])}),o.forEach(({shape:s,bounds:c})=>{this._canvas.addMarker(s,"djs-hidden"),this._markers.push([s,"djs-hidden"]),this._previewSupport.addDragger(s,a,void 0,"djs-dragging");const l=this._graphicsFactory._createContainer("shape",ve("g"));this._graphicsFactory.drawShape(Rr(l),s,{width:c.width,height:c.height}),ln(l,c.x,c.y),this._previewSupport.addDragger(s,a,l)})}cleanUp(){Lo(this._canvas.getLayer(Gs)),this._markers.forEach(([t,n])=>this._canvas.removeMarker(t,n)),this._markers=[]}show(){this._canvas.showLayer(Gs)}hide(){this._canvas.hideLayer(Gs)}}jm.$inject=["canvas","graphicsFactory","previewSupport"];function tS(e){return e.hidden}var nS={__depends__:[go],__init__:["complexPreview"],complexPreview:["type",jm]},_u=["top","bottom","left","right"],Us=10;function bu(e,t){X.call(this,e),this.postExecuted(["connection.create","connection.layout","connection.updateWaypoints"],function(r){var o=r.context,a=o.connection,s=a.source,c=a.target,l=o.hints||{};l.createElementsBehavior!==!1&&(n(s),n(c))}),this.postExecuted(["label.create"],function(r){var o=r.context,a=o.shape,s=o.hints||{};s.createElementsBehavior!==!1&&n(a.labelTarget)}),this.postExecuted(["elements.create"],function(r){var o=r.context,a=o.elements,s=o.hints||{};s.createElementsBehavior!==!1&&a.forEach(function(c){n(c)})});function n(r){if(ls(r)){var o=oS(r);o&&i(r,o)}}function i(r,o){var a=Pe(r),s=r.label,c=Pe(s);if(s.parent){var l=Ee(r),u;switch(o){case"top":u={x:a.x,y:l.top-Us-s.height/2};break;case"left":u={x:l.left-Us-s.width/2,y:a.y};break;case"bottom":u={x:a.x,y:l.bottom+Us+s.height/2};break;case"right":u={x:l.right+Us+s.width/2,y:a.y};break}var p=oi(u,c);t.moveShape(s,p)}}}j(bu,X),bu.$inject=["eventBus","modeling"];function iS(e){var t=e.host,n=Pe(e),i=hn(n,t),r;i.indexOf("-")>=0?r=i.split("-"):r=[i];var o=_u.filter(function(a){return r.indexOf(a)===-1});return o}function rS(e){var t=Pe(e),n=[].concat(e.incoming.map(function(i){return i.waypoints[i.waypoints.length-2]}),e.outgoing.map(function(i){return i.waypoints[1]})).map(function(i){return $m(t,i)});return n}function oS(e){var t=Pe(e.label),n=Pe(e),i=$m(n,t);if(aS(i)){var r=rS(e);if(e.host){var o=iS(e);r=r.concat(o)}var a=_u.filter(function(s){return r.indexOf(s)===-1});if(a.indexOf(i)===-1)return a[0]}}function $m(e,t){return hn(t,e,5)}function aS(e){return _u.indexOf(e)!==-1}function Eu(e){X.call(this,e),this.preExecute("shape.append",function(t){var n=t.source,i=t.shape;t.position||(b(i,"bpmn:TextAnnotation")?t.position={x:n.x+n.width/2+75,y:n.y-50-i.height/2}:t.position={x:n.x+n.width+80+i.width/2,y:n.y+n.height/2})},!0)}j(Eu,X),Eu.$inject=["eventBus"];function xu(e,t){e.invoke(X,this),this.postExecute("shape.move",function(n){var i=n.newParent,r=n.shape,o=ne(r.incoming.concat(r.outgoing),function(a){return b(a,"bpmn:Association")});A(o,function(a){t.moveConnection(a,{x:0,y:0},i)})},!0)}j(xu,X),xu.$inject=["injector","modeling"];var zm=500;function Vs(e,t){t.invoke(X,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",zm,function(i){var r=i.elements;r=r.filter(function(o){var a=o.host;return Hm(o,a)}),r.length===1&&r.map(function(o){return r.indexOf(o)}).forEach(function(o){var a=r[o];i.elements[o]=n._replaceShape(r[o],a)})},!0),this.preExecute("elements.move",zm,function(i){var r=i.shapes,o=i.newHost;if(r.length===1){var a=r[0];Hm(a,o)&&(i.shapes=[n._replaceShape(a,o)])}},!0)}Vs.$inject=["bpmnReplace","injector"],j(Vs,X),Vs.prototype._replaceShape=function(e,t){var n=sS(e),i={type:"bpmn:BoundaryEvent",host:t};return n&&(i.eventDefinitionType=n.$type),this._bpmnReplace.replaceElement(e,i,{layoutConnection:!1})};function sS(e){var t=Q(e),n=t.eventDefinitions;return n&&n[0]}function Hm(e,t){return!Xe(e)&&je(e,["bpmn:IntermediateThrowEvent","bpmn:IntermediateCatchEvent"])&&!!t}function wu(e,t){X.call(this,e);function n(i){return ne(i.attachers,function(r){return b(r,"bpmn:BoundaryEvent")})}this.postExecute("connection.create",function(i){var r=i.context.source,o=i.context.target,a=n(o);b(r,"bpmn:EventBasedGateway")&&b(o,"bpmn:ReceiveTask")&&a.length>0&&t.removeElements(a)}),this.postExecute("connection.reconnect",function(i){var r=i.context.oldSource,o=i.context.newSource;b(r,"bpmn:Gateway")&&b(o,"bpmn:EventBasedGateway")&&A(o.outgoing,function(a){var s=a.target,c=n(s);b(s,"bpmn:ReceiveTask")&&c.length>0&&t.removeElements(c)})})}wu.$inject=["eventBus","modeling"],j(wu,X);function Su(e,t,n){X.call(this,e),this.preExecute("shape.replace",s,!0),this.postExecuted("shape.replace",c,!0),this.preExecute("connection.create",r,!0),this.postExecuted("connection.delete",i,!0),this.postExecuted("connection.reconnect",o,!0),this.postExecuted("element.updateProperties",a,!0);function i(m){const S=m.source,x=m.target;yo(S)&&fa(x)&&u(x)}function r(m){const S=m.connection,x=m.source,E=m.target;yo(x)&&Zs(E)&&(l(E),f(x,[S]))}function o(m){const S=m.newTarget,x=m.oldSource,E=m.oldTarget;if(E!==S){const y=x;fa(E)&&u(E),yo(y)&&Zs(S)&&l(S)}}function a(m){const{element:S}=m;fa(S)?(p(S),d(S)):Zs(S)&&h(S)}function s(m){const{newData:S,oldShape:x}=m;if(yo(m.oldShape)&&S.eventDefinitionType!=="bpmn:CompensateEventDefinition"||S.type!=="bpmn:BoundaryEvent"){const E=x.outgoing.find(({target:y})=>fa(y));E&&E.target&&(m._connectionTarget=E.target)}else if(!yo(m.oldShape)&&S.eventDefinitionType==="bpmn:CompensateEventDefinition"&&S.type==="bpmn:BoundaryEvent"){const E=x.outgoing.find(({target:y})=>Zs(y));E&&E.target&&(m._connectionTarget=E.target),v(x)}}function c(m){const{_connectionTarget:S,newShape:x}=m;S&&t.connect(x,S)}function l(m){t.updateProperties(m,{isForCompensation:!0})}function u(m){t.updateProperties(m,{isForCompensation:void 0})}function p(m){for(const S of m.incoming)n.canConnect(S.source,m)||t.removeConnection(S);for(const S of m.outgoing)n.canConnect(m,S.target)||t.removeConnection(S)}function f(m,S){m.outgoing.filter(y=>b(y,"bpmn:Association")).filter(y=>fa(y.target)&&!S.includes(y)).forEach(y=>t.removeConnection(y))}function d(m){const S=m.attachers.slice();S.length&&t.removeElements(S)}function h(m){const S=m.incoming.filter(x=>yo(x.source));t.removeElements(S)}function v(m){const S=m.outgoing.filter(x=>b(x,"bpmn:SequenceFlow"));t.removeElements(S)}}j(Su,X),Su.$inject=["eventBus","modeling","bpmnRules"];function fa(e){const t=Q(e);return t&&t.get("isForCompensation")}function yo(e){return e&&b(e,"bpmn:BoundaryEvent")&&to(e,"bpmn:CompensateEventDefinition")}function Zs(e){return e&&b(e,"bpmn:Activity")&&!vn(e)}function Cu(e){e.invoke(X,this),this.preExecute("shape.create",1500,function(t){var n=t.context,i=n.parent,r=n.shape;b(i,"bpmn:Lane")&&!b(r,"bpmn:Lane")&&(n.parent=fo(i,"bpmn:Participant"))})}Cu.$inject=["injector"],j(Cu,X);function Pu(e,t){X.call(this,e),this.preExecute("shape.create",function(n){var i=n.context,r=i.shape;if(b(r,"bpmn:DataObjectReference")&&r.type!=="label"){var o=t.create("bpmn:DataObject");r.businessObject.dataObjectRef=o}})}Pu.$inject=["eventBus","bpmnFactory"],j(Pu,X);var Ru=20,Au=20,Gm=30,Ws=2e3;function Tu(e,t,n){X.call(this,t),t.on(["create.start","shape.move.start"],Ws,function(r){var o=r.context,a=o.shape,s=e.getRootElement();if(!(!b(a,"bpmn:Participant")||!b(s,"bpmn:Process")||!s.children.length)){var c=s.children.filter(function(p){return!b(p,"bpmn:Group")&&!Xe(p)&&!pt(p)});if(c.length){var l=Xt(c),u=cS(a,l);k(a,u),o.createConstraints=lS(a,l)}}}),t.on("create.start",Ws,function(r){var o=r.context,a=o.shape,s=e.getRootElement(),c=e.getGraphics(s);function l(u){u.element=s,u.gfx=c}b(a,"bpmn:Participant")&&b(s,"bpmn:Process")&&(t.on("element.hover",Ws,l),t.once("create.cleanup",function(){t.off("element.hover",l)}))});function i(){var r=e.getRootElement();return b(r,"bpmn:Collaboration")?r:n.makeCollaboration()}this.preExecute("elements.create",Ws,function(r){var o=r.elements,a=r.parent,s=uS(o),c;s&&b(a,"bpmn:Process")&&(r.parent=i(),c=r.hints=r.hints||{},c.participant=s,c.process=a,c.processRef=Q(s).get("processRef"))},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;b(a,"bpmn:Participant")&&b(o,"bpmn:Process")&&(r.parent=i(),r.process=o,r.processRef=Q(a).get("processRef"))},!0),this.execute("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,s=r.shape,c=o.participant;a&&(!c||s===c)&&Q(s).set("processRef",Q(a))},!0),this.revert("shape.create",function(r){var o=r.hints||{},a=r.process||o.process,s=r.processRef||o.processRef,c=r.shape,l=o.participant;a&&(!l||c===l)&&Q(c).set("processRef",s)},!0),this.postExecute("shape.create",function(r){var o=r.hints||{},a=r.process||r.hints.process,s=r.shape,c=o.participant;if(a){var l=a.children.slice();c?s===c&&n.moveElements(l,{x:0,y:0},c):n.moveElements(l,{x:0,y:0},s)}},!0)}Tu.$inject=["canvas","eventBus","modeling"],j(Tu,X);function cS(e,t){t={width:t.width+Ru*2+Gm,height:t.height+Au*2};var n=Math.max(e.width,t.width),i=Math.max(e.height,t.height);return{x:-n/2,y:-i/2,width:n,height:i}}function lS(e,t){return t=Ee(t),{bottom:t.top+e.height/2-Au,left:t.right-e.width/2+Ru,top:t.bottom-e.height/2+Au,right:t.left+e.width/2-Ru-Gm}}function uS(e){return te(e,function(t){return b(t,"bpmn:Participant")})}var Um="__targetRef_placeholder";function Du(e,t){X.call(this,e),this.executed(["connection.create","connection.delete","connection.move","connection.reconnect"],Vm(o)),this.reverted(["connection.create","connection.delete","connection.move","connection.reconnect"],Vm(o));function n(a,s,c){var l=a.get("dataInputAssociations");return te(l,function(u){return u!==c&&u.targetRef===s})}function i(a,s){var c=a.get("properties"),l=te(c,function(u){return u.name===Um});return!l&&s&&(l=t.create("bpmn:Property",{name:Um}),Wt(c,l)),l}function r(a,s){var c=i(a);c&&(n(a,c,s)||Ft(a.get("properties"),c))}function o(a){var s=a.context,c=s.connection,l=c.businessObject,u=c.target,p=u&&u.businessObject,f=s.newTarget,d=f&&f.businessObject,h=s.oldTarget||s.target,v=h&&h.businessObject,m=c.businessObject,S;v&&v!==p&&r(v,l),d&&d!==p&&r(d,l),p?(S=i(p,!0),m.targetRef=S):m.targetRef=null}}Du.$inject=["eventBus","bpmnFactory"],j(Du,X);function Vm(e){return function(t){var n=t.context,i=n.connection;if(b(i,"bpmn:DataInputAssociation"))return e(t)}}function Ys(e){this._bpmnUpdater=e}Ys.$inject=["bpmnUpdater"],Ys.prototype.execute=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.newSemanticParent,r=e.newDiParent;return e.oldSemanticParent=t.$parent,e.oldDiParent=n.$parent,this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]},Ys.prototype.revert=function(e){var t=e.dataStoreBo,n=e.dataStoreDi,i=e.oldSemanticParent,r=e.oldDiParent;return this._bpmnUpdater.updateSemanticParent(t,i),this._bpmnUpdater.updateDiParent(n,r),[]};function Mu(e,t,n,i){X.call(this,i),t.registerHandler("dataStore.updateContainment",Ys);function r(){return n.filter(function(s){return b(s,"bpmn:Participant")&&Q(s).processRef})[0]}function o(s){return s.children.filter(function(c){return b(c,"bpmn:DataStoreReference")&&!c.labelTarget})}function a(s,c){var l=s.businessObject||s;if(c=c||r(),c){var u=c.businessObject||c;t.execute("dataStore.updateContainment",{dataStoreBo:l,dataStoreDi:qe(s),newSemanticParent:u.processRef||u,newDiParent:qe(c)})}}this.preExecute("shape.create",function(s){var c=s.context,l=c.shape;b(l,"bpmn:DataStoreReference")&&l.type!=="label"&&(c.hints||(c.hints={}),c.hints.autoResize=!1)}),this.preExecute("elements.move",function(s){var c=s.context,l=c.shapes,u=l.filter(function(p){return b(p,"bpmn:DataStoreReference")});u.length&&(c.hints||(c.hints={}),c.hints.autoResize=l.filter(function(p){return!b(p,"bpmn:DataStoreReference")}))}),this.postExecute("shape.create",function(s){var c=s.context,l=c.shape,u=l.parent;b(l,"bpmn:DataStoreReference")&&l.type!=="label"&&b(u,"bpmn:Collaboration")&&a(l)}),this.postExecute("shape.move",function(s){var c=s.context,l=c.shape,u=c.oldParent,p=l.parent;if(!b(u,"bpmn:Collaboration")&&b(l,"bpmn:DataStoreReference")&&l.type!=="label"&&b(p,"bpmn:Collaboration")){var f=b(u,"bpmn:Participant")?u:fS(u,"bpmn:Participant");a(l,f)}}),this.postExecute("shape.delete",function(s){var c=s.context,l=c.shape,u=e.getRootElement();je(l,["bpmn:Participant","bpmn:SubProcess"])&&b(u,"bpmn:Collaboration")&&o(u).filter(function(p){return pS(p,l)}).forEach(function(p){a(p)})}),this.postExecute("canvas.updateRoot",function(s){var c=s.context,l=c.oldRoot,u=c.newRoot,p=o(l);p.forEach(function(f){b(u,"bpmn:Process")&&a(f,u)})})}Mu.$inject=["canvas","commandStack","elementRegistry","eventBus"],j(Mu,X);function pS(e,t){for(var n=e.businessObject||e,i=t.businessObject||t;n.$parent;){if(n.$parent===i.processRef||i)return!0;n=n.$parent}return!1}function fS(e,t){for(;e.parent;){if(b(e.parent,t))return e.parent;e=e.parent}}var Ks=Math.max,Xs=Math.min,dS=20;function Zm(e,t){return{top:e.top-t.top,right:e.right-t.right,bottom:e.bottom-t.bottom,left:e.left-t.left}}function hS(e,t,n){var i=n.x,r=n.y,o={x:e.x,y:e.y,width:e.width,height:e.height};return t.indexOf("n")!==-1?(o.y=e.y+r,o.height=e.height-r):t.indexOf("s")!==-1&&(o.height=e.height+r),t.indexOf("e")!==-1?o.width=e.width+i:t.indexOf("w")!==-1&&(o.x=e.x+i,o.width=e.width-i),o}function mS(e,t){return{x:e.x+(t.left||0),y:e.y+(t.top||0),width:e.width-(t.left||0)+(t.right||0),height:e.height-(t.top||0)+(t.bottom||0)}}function rM(e,t,n){var i=e.width/t.width,r=e.height/t.height;return{x:Math.round(t.x+t.width/2)-Math.floor((e.x+e.width/2-n.x)/i),y:Math.round(t.y+t.height/2)-Math.floor((e.y+e.height/2-n.y)/r)}}function qs(e,t,n){var i=t[e],r=n.min&&n.min[e],o=n.max&&n.max[e];return L(r)&&(i=(/top|left/.test(e)?Xs:Ks)(i,r)),L(o)&&(i=(/top|left/.test(e)?Ks:Xs)(i,o)),i}function vS(e,t){if(!t)return e;var n=Ee(e);return Ja({top:qs("top",n,t),right:qs("right",n,t),bottom:qs("bottom",n,t),left:qs("left",n,t)})}function gS(e,t,n,i){var r=Ee(t),o={top:/n/.test(e)?r.bottom-n.height:r.top,left:/w/.test(e)?r.right-n.width:r.left,bottom:/s/.test(e)?r.top+n.height:r.bottom,right:/e/.test(e)?r.left+n.width:r.right},a=i?Ee(i):o,s={top:Xs(o.top,a.top),left:Xs(o.left,a.left),bottom:Ks(o.bottom,a.bottom),right:Ks(o.right,a.right)};return Ja(s)}function da(e,t){return typeof e!="undefined"?e:dS}function yS(e,t){var n,i,r,o;return typeof t=="object"?(n=da(t.left),i=da(t.right),r=da(t.top),o=da(t.bottom)):n=i=r=o=da(t),{x:e.x-n,y:e.y-r,width:e.width+n+i,height:e.height+r+o}}function _S(e){return!(e.waypoints||e.type==="label")}function Wm(e,t){var n;if(e.length===void 0?n=ne(e.children,_S):n=e,n.length)return yS(Xt(n),t)}var ar=Math.abs;function bS(e,t){return Zm(Ee(t),Ee(e))}var ES=["bpmn:Participant","bpmn:Process","bpmn:SubProcess"],Kn=30;function Qs(e,t){return t=t||[],e.children.filter(function(n){b(n,"bpmn:Lane")&&(Qs(n,t),t.push(n))}),t}function sr(e){return e.children.filter(function(t){return b(t,"bpmn:Lane")})}function Xn(e){return fo(e,ES)||e}function xS(e,t){var n=Xn(e),i=b(n,"bpmn:Process")?[]:[n],r=Qs(n,i),o=Ee(e),a=Ee(t),s=bS(e,t),c=[],l=qt(e);return r.forEach(function(u){if(u!==e){var p=l?0:s.top,f=l?s.right:0,d=l?0:s.bottom,h=l?s.left:0,v=Ee(u);s.top&&(ar(v.bottom-o.top)<10&&(d=a.top-v.bottom),ar(v.top-o.top)<5&&(p=a.top-v.top)),s.left&&(ar(v.right-o.left)<10&&(f=a.left-v.right),ar(v.left-o.left)<5&&(h=a.left-v.left)),s.bottom&&(ar(v.top-o.bottom)<10&&(p=a.bottom-v.top),ar(v.bottom-o.bottom)<5&&(d=a.bottom-v.bottom)),s.right&&(ar(v.left-o.right)<10&&(h=a.right-v.left),ar(v.right-o.right)<5&&(f=a.right-v.right)),(p||f||d||h)&&c.push({shape:u,newBounds:mS(u,{top:p,right:f,bottom:d,left:h})})}}),c}var wS=500;function ku(e,t){X.call(this,e);function n(i,r){var o=qt(i),a=sr(r),s=[],c=[],l=[],u=[];if(Pr(a,function(m){return o?m.y>i.y?c.push(m):s.push(m):m.x>i.x?u.push(m):l.push(m),m.children}),!!a.length){var p;o?c.length&&s.length?p=i.height/2:p=i.height:u.length&&l.length?p=i.width/2:p=i.width;var f,d,h,v;s.length&&(f=t.calculateAdjustments(s,"y",p,i.y-10),t.makeSpace(f.movingShapes,f.resizingShapes,{x:0,y:p},"s")),c.length&&(d=t.calculateAdjustments(c,"y",-p,i.y+i.height+10),t.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:-p},"n")),l.length&&(h=t.calculateAdjustments(l,"x",p,i.x-10),t.makeSpace(h.movingShapes,h.resizingShapes,{x:p,y:0},"e")),u.length&&(v=t.calculateAdjustments(u,"x",-p,i.x+i.width+10),t.makeSpace(v.movingShapes,v.resizingShapes,{x:-p,y:0},"w"))}}this.postExecuted("shape.delete",wS,function(i){var r=i.context,o=r.hints,a=r.shape,s=r.oldParent;b(a,"bpmn:Lane")&&(o&&o.nested||n(a,s))})}ku.$inject=["eventBus","spaceTool"],j(ku,X);var Ym=500;function Js(e,t){t.invoke(X,this),this._bpmnReplace=e;var n=this;this.postExecuted("elements.create",Ym,function(i){var r=i.elements;r.filter(function(o){var a=o.host;return Km(o,a)}).map(function(o){return r.indexOf(o)}).forEach(function(o){i.elements[o]=n._replaceShape(r[o])})},!0),this.preExecute("elements.move",Ym,function(i){var r=i.shapes,o=i.newHost;r.forEach(function(a,s){var c=a.host;Km(a,CS(r,c)?c:o)&&(r[s]=n._replaceShape(a))})},!0)}Js.$inject=["bpmnReplace","injector"],j(Js,X),Js.prototype._replaceShape=function(e){var t=SS(e),n;return t?n={type:"bpmn:IntermediateCatchEvent",eventDefinitionType:t.$type}:n={type:"bpmn:IntermediateThrowEvent"},this._bpmnReplace.replaceElement(e,n,{layoutConnection:!1})};function SS(e){var t=Q(e),n=t.eventDefinitions;return n&&n[0]}function Km(e,t){return!Xe(e)&&b(e,"bpmn:BoundaryEvent")&&!t}function CS(e,t){return e.indexOf(t)!==-1}function Iu(e,t,n){X.call(this,e);function i(r,o,a){var s=o.waypoints,c,l,u,p,f,d,h,v=r.outgoing.slice(),m=r.incoming.slice(),S;L(a.width)?S=Pe(a):S=a;var x=lu(s,S);if(x){if(c=s.slice(0,x.index),l=s.slice(x.index+(x.bendpoint?1:0)),!c.length||!l.length)return;u=x.bendpoint?s[x.index]:S,(c.length===1||!Xm(r,c[c.length-1]))&&c.push(qm(u)),(l.length===1||!Xm(r,l[0]))&&l.unshift(qm(u))}p=o.source,f=o.target,t.canConnect(p,r,o)&&(n.reconnectEnd(o,r,c||S),d=o),t.canConnect(r,f,o)&&(d?h=n.connect(r,f,{type:o.type,waypoints:l}):(n.reconnectStart(o,r,l||S),h=o));var E=[].concat(d&&ne(m,function(y){return y.source===d.source})||[],h&&ne(v,function(y){return y.target===h.target})||[]);E.length&&n.removeElements(E)}this.preExecute("elements.move",function(r){var o=r.newParent,a=r.shapes,s=r.delta,c=a[0];if(!(!c||!o)){o&&o.waypoints&&(r.newParent=o=o.parent);var l=Pe(c),u={x:l.x+s.x,y:l.y+s.y},p=te(o.children,function(f){var d=t.canInsert(a,f);return d&&lu(f.waypoints,u)});p&&(r.targetFlow=p,r.position=u)}},!0),this.postExecuted("elements.move",function(r){var o=r.shapes,a=r.targetFlow,s=r.position;a&&i(o[0],a,s)},!0),this.preExecute("shape.create",function(r){var o=r.parent,a=r.shape;t.canInsert(a,o)&&(r.targetFlow=o,r.parent=o.parent)},!0),this.postExecuted("shape.create",function(r){var o=r.shape,a=r.targetFlow,s=r.position;a&&i(o,a,s)},!0)}j(Iu,X),Iu.$inject=["eventBus","bpmnRules","modeling"];function Xm(e,t){var n=t.x,i=t.y;return n>=e.x&&n<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function qm(e){return k({},e)}function Ou(e,t){X.call(this,e),this.preExecuted("connection.create",function(n){var i=n.context,r=i.connection,o=i.source,a=i.target,s=i.hints;if(!(s&&s.createElementsBehavior===!1)&&_o(r)){var c=[];b(o,"bpmn:EventBasedGateway")?c=a.incoming.filter(l=>l!==r&&_o(l)):c=a.incoming.filter(l=>l!==r&&_o(l)&&b(l.source,"bpmn:EventBasedGateway")),c.forEach(function(l){t.removeConnection(l)})}}),this.preExecuted("shape.replace",function(n){var i=n.context,r=i.newShape;if(b(r,"bpmn:EventBasedGateway")){var o=r.outgoing.filter(_o).reduce(function(a,s){return a.includes(s.target)?a:a.concat(s.target)},[]);o.forEach(function(a){a.incoming.filter(_o).forEach(function(s){const c=a.incoming.filter(_o).filter(function(l){return l.source===r});(s.source!==r||c.length>1)&&t.removeConnection(s)})})}})}Ou.$inject=["eventBus","modeling"],j(Ou,X);function _o(e){return b(e,"bpmn:SequenceFlow")}var ec=1500,Qm=2e3;function Jm(e,t,n){t.on(["create.hover","create.move","create.out","create.end","shape.move.hover","shape.move.move","shape.move.out","shape.move.end"],ec,function(i){var r=i.context,o=r.shape||i.shape,a=i.hover;b(a,"bpmn:Lane")&&!je(o,["bpmn:Lane","bpmn:Participant"])&&(i.hover=Xn(a),i.hoverGfx=e.getGraphics(i.hover));var s=n.getRootElement();a!==s&&(o.labelTarget||je(o,["bpmn:Group","bpmn:TextAnnotation"]))&&(i.hover=s,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.hover","connect.out","connect.end","connect.cleanup","global-connect.hover","global-connect.out","global-connect.end","global-connect.cleanup"],ec,function(i){var r=i.hover;b(r,"bpmn:Lane")&&(i.hover=Xn(r)||r,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["bendpoint.move.hover"],ec,function(i){var r=i.context,o=i.hover,a=r.type;b(o,"bpmn:Lane")&&/reconnect/.test(a)&&(i.hover=Xn(o)||o,i.hoverGfx=e.getGraphics(i.hover))}),t.on(["connect.start"],ec,function(i){var r=i.context,o=r.start;b(o,"bpmn:Lane")&&(r.start=Xn(o)||o)}),t.on("shape.move.start",Qm,function(i){var r=i.shape;b(r,"bpmn:Lane")&&(i.shape=Xn(r)||r)}),t.on("spaceTool.move",Qm,function(i){var r=i.hover;r&&b(r,"bpmn:Lane")&&(i.hover=Xn(r))})}Jm.$inject=["elementRegistry","eventBus","canvas"];function PS(e){return e.create("bpmn:Category")}function RS(e){return e.create("bpmn:CategoryValue")}function AS(e,t,n){return Wt(t.get("categoryValue"),e),e.$parent=t,Wt(n.get("rootElements"),t),t.$parent=n,e}function TS(e){var t=e.$parent;return t&&(Ft(t.get("categoryValue"),e),e.$parent=null),e}function DS(e){var t=e.$parent;return t&&(Ft(t.get("rootElements"),e),e.$parent=null),e}var ev=770;function Bu(e,t,n,i,r,o){r.invoke(X,this);function a(){return n.filter(function(h){return b(h,"bpmn:Group")})}function s(h,v){return h.some(function(m){var S=Q(m),x=S.categoryValueRef&&S.categoryValueRef.$parent;return x===v})}function c(h,v){return h.some(function(m){var S=Q(m);return S.categoryValueRef===v})}function l(h,v,m){var S=a().filter(function(x){return x.businessObject!==m});v&&!s(S,v)&&DS(v),h&&!c(S,h)&&TS(h)}function u(h,v){return AS(h,v,t.getDefinitions())}function p(h,v){var m=Q(h),S=m.categoryValueRef;S||(S=m.categoryValueRef=v.categoryValue=v.categoryValue||RS(e));var x=S.$parent;x||(x=S.$parent=v.category=v.category||PS(e)),u(S,x,t.getDefinitions())}function f(h,v){var m=v.category,S=v.categoryValue,x=Q(h);S?(x.categoryValueRef=null,l(S,m,x)):l(null,x.categoryValueRef.$parent,x)}this.execute("label.create",function(h){var v=h.context,m=v.labelTarget;b(m,"bpmn:Group")&&p(m,v)}),this.revert("label.create",function(h){var v=h.context,m=v.labelTarget;b(m,"bpmn:Group")&&f(m,v)}),this.execute("shape.delete",function(h){var v=h.context,m=v.shape,S=Q(m);if(!(!b(m,"bpmn:Group")||m.labelTarget)){var x=v.categoryValue=S.categoryValueRef,E;x&&(E=v.category=x.$parent,l(x,E,S),S.categoryValueRef=null)}}),this.reverted("shape.delete",function(h){var v=h.context,m=v.shape;if(!(!b(m,"bpmn:Group")||m.labelTarget)){var S=v.category,x=v.categoryValue,E=Q(m);x&&(E.categoryValueRef=x,u(x,S))}}),this.execute("shape.create",function(h){var v=h.context,m=v.shape;!b(m,"bpmn:Group")||m.labelTarget||Q(m).categoryValueRef&&p(m,v)}),this.reverted("shape.create",function(h){var v=h.context,m=v.shape;!b(m,"bpmn:Group")||m.labelTarget||Q(m).categoryValueRef&&f(m,v)});function d(h,v){var m=e.create(h.$type);return o.copyElement(h,m,null,v)}i.on("copyPaste.copyElement",ev,function(h){var v=h.descriptor,m=h.element;if(!(!b(m,"bpmn:Group")||m.labelTarget)){var S=Q(m);if(S.categoryValueRef){var x=S.categoryValueRef;v.categoryValue=d(x,!0),x.$parent&&(v.category=d(x.$parent,!0))}}}),i.on("copyPaste.pasteElement",ev,function(h){var v=h.descriptor,m=v.businessObject,S=v.categoryValue,x=v.category;S&&(S=m.categoryValueRef=d(S)),x&&(S.$parent=d(x)),delete v.category,delete v.categoryValue})}Bu.$inject=["bpmnFactory","bpmnjs","elementRegistry","eventBus","injector","moddleCopy"],j(Bu,X);function Nu(e,t,n,i){var r,o,a,s,c;return r=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y),r==0?null:(o=e.y-n.y,a=e.x-n.x,c=(i.x-n.x)*o-(i.y-n.y)*a,s=c/r,{x:Math.round(e.x+s*(t.x-e.x)),y:Math.round(e.y+s*(t.y-e.y))})}function tv(e){function t(i,r,o){var a={x:o.x,y:o.y-50},s={x:o.x-50,y:o.y},c=Nu(i,r,o,a),l=Nu(i,r,o,s),u;c&&l?nv(c,o)>nv(l,o)?u=l:u=c:u=c||l,i.original=u}function n(i){var r=i.waypoints;t(r[0],r[1],Pe(i.source)),t(r[r.length-1],r[r.length-2],Pe(i.target))}e.on("bpmnElement.added",function(i){var r=i.element;r.waypoints&&n(r)})}tv.$inject=["eventBus"];function nv(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Lu(e){X.call(this,e);var t=["bpmn:Participant","bpmn:Lane"];this.executed(["shape.move","shape.create","shape.resize"],function(n){var i=n.context.shape,r=Q(i),o=qe(i);if(je(r,t)){var a=o.get("isHorizontal");a===void 0&&(a=!0),o.set("isHorizontal",a)}})}Lu.$inject=["eventBus"],j(Lu,X);var iv=Math.sqrt,rv=Math.min,MS=Math.max,ov=Math.abs;function av(e){return Math.pow(e,2)}function ha(e,t){return iv(av(e.x-t.x)+av(e.y-t.y))}function kS(e,t){var n=0,i,r,o,a,s,c,l,u,p,f,d;for(n=0;n<t.length-1;n++){if(i=t[n],r=t[n+1],cv(i,r)?l=[i]:(o=ha(e,i),a=ha(e,r),c=rv(o,a),l=IS(i,r,e,c)),l.length<1)throw new Error("expected between [1, 2] circle -> line intersections");l.length===1&&(u={type:"bendpoint",position:l[0],segmentIndex:n,bendpointIndex:cv(i,l[0])?n:n+1}),l.length===2&&(s=BS(l[0],l[1]),u={type:"segment",position:s,segmentIndex:n,relativeLocation:ha(i,s)/ha(i,r)}),p=ha(u.position,e),(!d||f>p)&&(d=u,f=p)}return d}function IS(e,t,n,i){var r=t.x-e.x,o=t.y-e.y,a=n.x-e.x,s=n.y-e.y,c=r*r+o*o,l=r*a+o*s,u=a*a+s*s-i*i,p=l/c,f=u/c,d=p*p-f;if(d<0&&d>-1e-6&&(d=0),d<0)return[];var h=iv(d),v=-p+h,m=-p-h,S={x:e.x-r*v,y:e.y-o*v};if(d===0)return[S];var x={x:e.x-r*m,y:e.y-o*m};return[S,x].filter(function(E){return OS(E,e,t)})}function OS(e,t,n){return sv(e.x,t.x,n.x)&&sv(e.y,t.y,n.y)}function sv(e,t,n){return e>=rv(t,n)-tc&&e<=MS(t,n)+tc}function BS(e,t){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}var tc=.1;function cv(e,t){return ov(e.x-t.x)<=tc&&ov(e.y-t.y)<=tc}function NS(e,t,n,i){var r=n.segmentIndex,o=t.length-e.length;if(i.segmentMove){var a=i.segmentMove.segmentStartIndex,s=i.segmentMove.newSegmentStartIndex;return r===a?s:r>=s?r+o<s?s:r+o:r}if(i.bendpointMove){var c=i.bendpointMove.insert,l=i.bendpointMove.bendpointIndex,u;if(o===0)return r;if(r>=l&&(u=c?r+1:r-1),r<l&&(u=r,c&&n.type!=="bendpoint"&&l-1===r)){var p=uv(t,l);p<n.relativeLocation&&u++}return u}return o===0?r:i.connectionStart&&r===0?0:i.connectionEnd&&r===e.length-2?t.length-2:Math.floor((t.length-2)/2)}function lv(e,t,n,i){var r=0,o=0,a={point:e,delta:{x:0,y:0}},s=kS(e,n),c=s.segmentIndex,l=NS(n,t,s,i);if(l<0||l>t.length-2||l===null)return a;var u=pv(n,c),p=pv(t,l),f=s.position,d=FS(u,f),h=LS(u,p);if(s.type==="bendpoint"){var v=t.length-n.length,m=s.bendpointIndex,S=n[m];if(t.indexOf(S)!==-1)return a;if(v===0){var x=t[m];return r=x.x-s.position.x,o=x.y-s.position.y,{delta:{x:r,y:o},point:{x:e.x+r,y:e.y+o}}}v<0&&m!==0&&m<n.length-1&&(d=uv(n,m))}var E={x:(p[1].x-p[0].x)*d+p[0].x,y:(p[1].y-p[0].y)*d+p[0].y},y=R1({x:e.x-f.x,y:e.y-f.y},h);return r=E.x+y.x-e.x,o=E.y+y.y-e.y,{point:Ri(E),delta:Ri({x:r,y:o})}}function uv(e,t){var n=$s(e[t-1],e[t]),i=$s(e[t],e[t+1]),r=n/(n+i);return r}function LS(e,t){var n=um(e),i=um(t);return i-n}function pv(e,t){return[e[t],e[t+1]]}function FS(e,t){var n=$s(e[0],e[1]),i=$s(e[0],t);return n===0?0:i/n}function oM(e,t,n,i){return findNewLineStartIndex(e,t,n,i)}function jS(e,t,n,i){var r=Pe(e);return lv(r,t,n,i).delta}function ma(e,t,n){var i=na(t),r=na(n),o=oi(e,i),a={x:o.x*(n.width/t.width),y:o.y*(n.height/t.height)};return Ri({x:r.x+a.x,y:r.y+a.y})}function fv(e,t,n){var i=na(e),r=na(t),o=na(n),a=oi(e,i),s=oi(i,r),c=$S(i,t,n);if(c)return c;var l={x:s.x*(n.width/t.width),y:s.y*(n.height/t.height)},u={x:o.x+l.x,y:o.y+l.y};return Ri({x:u.x+a.x-e.x,y:u.y+a.y-e.y})}function $S(e,t,n){var i=Ee(t),r=Ee(n);if(zS(i,r))return null;var o=hn(t,e),a,s,c;if(o==="top")a={x:0,y:r.bottom-i.bottom};else if(o==="bottom")a={x:0,y:r.top-i.top};else if(o==="right")a={x:r.left-i.left,y:0};else if(o==="left")a={x:r.right-i.right,y:0};else return null;return s={x:e.x+a.x,y:e.y+a.y},c=hn(n,s),c!==o?null:a}function zS(e,t){return HS(e,t)||GS(e,t)}function HS(e,t){return e.right!==t.right&&e.left!==t.left}function GS(e,t){return e.top!==t.top&&e.bottom!==t.bottom}var dv="name",hv="text";function Fu(e,t,n,i){X.call(this,e),this.postExecute("element.updateProperties",r),this.postExecute("element.updateModdleProperties",a=>{Q(a.context.element)===a.context.moddleElement&&r(a)});function r(a){var s=a.context,c=s.element,l=s.properties;if(dv in l&&t.updateLabel(c,l[dv]),hv in l&&b(c,"bpmn:TextAnnotation")){var u=i.getTextAnnotationBounds({x:c.x,y:c.y,width:c.width,height:c.height},l[hv]||"");t.updateLabel(c,l.text,u)}}this.postExecute(["shape.create","connection.create"],function(a){var s=a.context,c=s.hints||{};if(c.createElementsBehavior!==!1){var l=s.shape||s.connection;Xe(l)||!Mr(l)||jn(l)&&t.updateLabel(l,jn(l))}}),this.postExecute("shape.delete",function(a){var s=a.context,c=s.labelTarget,l=s.hints||{};c&&l.unsetLabel!==!1&&t.updateLabel(c,null,null,{removeShape:!1})});function o(a){var s=a.context,c=s.connection,l=c.label,u=k({},s.hints),p=s.newWaypoints||c.waypoints,f=s.oldWaypoints;return typeof u.startChanged=="undefined"&&(u.startChanged=!!u.connectionStart),typeof u.endChanged=="undefined"&&(u.endChanged=!!u.connectionEnd),jS(l,p,f,u)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(a){var s=a.context,c=s.hints||{};if(c.labelBehavior!==!1){var l=s.connection,u=l.label,p;!u||!u.parent||(p=o(a),t.moveShape(u,p))}}),this.postExecute(["shape.replace"],function(a){var s=a.context,c=s.newShape,l=s.oldShape,u=Q(c);u&&Mr(u)&&l.label&&c.label&&(c.label.x=l.label.x,c.label.y=l.label.y)}),this.postExecute("shape.resize",function(a){var s=a.context,c=s.shape,l=s.newBounds,u=s.oldBounds;if(ls(c)){var p=c.label,f=Pe(p),d=ZS(u),h=VS(f,d),v=US(h,u,l);t.moveShape(p,v)}})}j(Fu,X),Fu.$inject=["eventBus","modeling","bpmnFactory","textRenderer"];function US(e,t,n){var i=ma(e,t,n);return Ri(oi(i,e))}function VS(e,t){if(t.length){var n=WS(e,t);return uu(e,n)}}function ZS(e){return[[{x:e.x,y:e.y},{x:e.x+(e.width||0),y:e.y}],[{x:e.x+(e.width||0),y:e.y},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y+(e.height||0)},{x:e.x+(e.width||0),y:e.y+(e.height||0)}],[{x:e.x,y:e.y},{x:e.x,y:e.y+(e.height||0)}]]}function WS(e,t){var n=t.map(function(r){return{line:r,distance:pm(e,r)}}),i=dn(n,"distance");return i[0].line}function YS(e,t,n,i){return lv(e,t,n,i).point}function ju(e,t){X.call(this,e);function n(i,r){var o=i.context,a=o.connection,s=k({},o.hints),c=o.newWaypoints||a.waypoints,l=o.oldWaypoints;return typeof s.startChanged=="undefined"&&(s.startChanged=!!s.connectionStart),typeof s.endChanged=="undefined"&&(s.endChanged=!!s.connectionEnd),YS(r,c,l,s)}this.postExecute(["connection.layout","connection.updateWaypoints"],function(i){var r=i.context,o=r.connection,a=o.outgoing,s=o.incoming;s.forEach(function(c){var l=c.waypoints[c.waypoints.length-1],u=n(i,l),p=[].concat(c.waypoints.slice(0,-1),[u]);t.updateWaypoints(c,p)}),a.forEach(function(c){var l=c.waypoints[0],u=n(i,l),p=[].concat([u],c.waypoints.slice(1));t.updateWaypoints(c,p)})}),this.postExecute(["connection.move"],function(i){var r=i.context,o=r.connection,a=o.outgoing,s=o.incoming,c=r.delta;s.forEach(function(l){var u=l.waypoints[l.waypoints.length-1],p={x:u.x+c.x,y:u.y+c.y},f=[].concat(l.waypoints.slice(0,-1),[p]);t.updateWaypoints(l,f)}),a.forEach(function(l){var u=l.waypoints[0],p={x:u.x+c.x,y:u.y+c.y},f=[].concat([p],l.waypoints.slice(1));t.updateWaypoints(l,f)})})}j(ju,X),ju.$inject=["eventBus","modeling"];function nc(e,t,n){var i=rc(e),r=vv(i,t),o=i[0];return r.length?r[r.length-1]:ma(o.original||o,n,t)}function ic(e,t,n){var i=rc(e),r=vv(i,t),o=i[i.length-1];return r.length?r[0]:ma(o.original||o,n,t)}function $u(e,t,n){var i=rc(e),r=mv(t,n),o=i[0];return ma(o.original||o,r,t)}function zu(e,t,n){var i=rc(e),r=mv(t,n),o=i[i.length-1];return ma(o.original||o,r,t)}function mv(e,t){return{x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height}}function rc(e){var t=e.waypoints;if(!t.length)throw new Error("connection#"+e.id+": no waypoints");return t}function vv(e,t){var n=Tt(e,XS);return ne(n,function(i){return KS(i,t)})}function KS(e,t){return hn(t,e,1)==="intersect"}function XS(e){return e.original||e}function Hu(e,t){X.call(this,e),this.postExecute("shape.replace",function(n){var i=n.oldShape,r=n.newShape;if(qS(i,r)){var o=QS(i);o.incoming.forEach(function(a){var s=ic(a,r,i);t.reconnectEnd(a,r,s)}),o.outgoing.forEach(function(a){var s=nc(a,r,i);t.reconnectStart(a,r,s)})}},!0)}Hu.$inject=["eventBus","modeling"],j(Hu,X);function qS(e,t){return b(e,"bpmn:Participant")&&Ue(e)&&b(t,"bpmn:Participant")&&!Ue(t)}function QS(e){var t=$o([e],!1),n=[],i=[];return t.forEach(function(r){r!==e&&(r.incoming.forEach(function(o){b(o,"bpmn:MessageFlow")&&n.push(o)}),r.outgoing.forEach(function(o){b(o,"bpmn:MessageFlow")&&i.push(o)}))},[]),{incoming:n,outgoing:i}}const JS=["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:EscalationEventDefinition","bpmn:ConditionalEventDefinition","bpmn:SignalEventDefinition"];function gv(e){const t=Q(e);if(!b(t,"bpmn:BoundaryEvent")&&!(b(t,"bpmn:StartEvent")&&vn(t.$parent)))return!1;const n=t.get("eventDefinitions");return!n||!n.length?!1:JS.some(i=>b(n[0],i))}function yv(e){return b(e,"bpmn:BoundaryEvent")?"cancelActivity":"isInterrupting"}function Gu(e,t){e.invoke(X,this),this.postExecuted("shape.replace",function(n){const i=n.context.oldShape,r=n.context.newShape,o=n.context.hints;if(!gv(r))return;const a=yv(r);if(o.targetElement&&o.targetElement[a]!==void 0)return;const c=Q(i).get(a),l=Q(r).get(a);c!==l&&t.updateProperties(r,{[a]:c})})}Gu.$inject=["injector","modeling"],j(Gu,X);function Uu(e,t){X.call(this,e),this.preExecute("shape.resize",function(n){var i=n.shape,r=qe(i),o=r&&r.get("label"),a=o&&o.get("bounds");a&&t.updateModdleProperties(i,o,{bounds:void 0})},!0)}j(Uu,X),Uu.$inject=["eventBus","modeling"];function Vu(e,t,n){X.call(this,e),this.preExecute("shape.delete",function(i){var r=i.context.shape;if(!(r.incoming.length!==1||r.outgoing.length!==1)){var o=r.incoming[0],a=r.outgoing[0];if(!(!b(o,"bpmn:SequenceFlow")||!b(a,"bpmn:SequenceFlow"))&&t.canConnect(o.source,a.target,o)){var s=eC(o.waypoints,a.waypoints);n.reconnectEnd(o,a.target,s)}}})}j(Vu,X),Vu.$inject=["eventBus","bpmnRules","modeling"];function bo(e){return e.original||e}function eC(e,t){var n=Nu(bo(e[e.length-2]),bo(e[e.length-1]),bo(t[1]),bo(t[0]));return n?[].concat(e.slice(0,e.length-1),[n],t.slice(1)):[bo(e[0]),bo(t[t.length-1])]}function Zu(e,t){X.call(this,e),this.preExecute("shape.delete",function(n){var i=n.shape,r=i.parent;b(i,"bpmn:Participant")&&(n.collaborationRoot=r)},!0),this.postExecute("shape.delete",function(n){var i=n.collaborationRoot;if(i&&!i.businessObject.participants.length){var r=t.makeProcess(),o=i.children.slice();t.moveElements(o,{x:0,y:0},r)}},!0)}Zu.$inject=["eventBus","modeling"],j(Zu,X);function Wu(e,t,n,i){X.call(this,e);var r=i.get("dragging",!1);function o(c){var l=c.source,u=c.target,p=c.parent;if(p){var f,d;b(c,"bpmn:SequenceFlow")&&(n.canConnectSequenceFlow(l,u)||(d=!0),n.canConnectMessageFlow(l,u)&&(f="bpmn:MessageFlow")),b(c,"bpmn:MessageFlow")&&(n.canConnectMessageFlow(l,u)||(d=!0),n.canConnectSequenceFlow(l,u)&&(f="bpmn:SequenceFlow")),d&&t.removeConnection(c),f&&t.connect(l,u,{type:f,waypoints:c.waypoints.slice()})}}function a(c){var l=c.context,u=l.connection,p=l.newSource||u.source,f=l.newTarget||u.target,d,h;d=n.canConnect(p,f),!(!d||d.type===u.type)&&(h=t.connect(p,f,{type:d.type,associationDirection:d.associationDirection,waypoints:u.waypoints.slice()}),u.parent&&t.removeConnection(u),l.connection=h,r&&s(u,h))}function s(c,l){var u=r.context(),p=u&&u.payload.previousSelection,f;!p||!p.length||(f=p.indexOf(c),f!==-1&&p.splice(f,1,l))}this.postExecuted("elements.move",function(c){var l=c.closure,u=l.allConnections;A(u,o)},!0),this.preExecute("connection.reconnect",a),this.postExecuted("element.updateProperties",function(c){var l=c.context,u=l.properties,p=l.element,f=p.businessObject,d;u.default&&(d=te(p.outgoing,de({id:p.businessObject.default.id})),d&&t.updateProperties(d,{conditionExpression:void 0})),u.conditionExpression&&f.sourceRef.default===f&&t.updateProperties(p.source,{default:void 0})})}j(Wu,X),Wu.$inject=["eventBus","modeling","bpmnRules","injector"];function oc(e,t,n,i,r,o){i.invoke(X,this),this._bpmnReplace=e,this._elementRegistry=n,this._selection=o,this.postExecuted(["elements.create"],500,function(a){var s=a.context,c=s.parent,l=s.elements,u=Ot(l,function(p,f){var d=t.canReplace([f],f.host||f.parent||c);return d?p.concat(d.replacements):p},[]);u.length&&this._replaceElements(l,u)},this),this.postExecuted(["elements.move"],500,function(a){var s=a.context,c=s.newParent,l=s.newHost,u=[];A(s.closure.topLevel,function(f){vn(f)?u=u.concat(f.children):u=u.concat(f)}),u.length===1&&l&&(c=l);var p=t.canReplace(u,c);p&&this._replaceElements(u,p.replacements,l)},this),this.postExecute(["shape.replace"],1500,function(a){var s=a.context,c=s.oldShape,l=s.newShape,u=c.attachers,p;u&&u.length&&(p=t.canReplace(u,l),this._replaceElements(u,p.replacements))},this),this.postExecuted(["shape.replace"],1500,function(a){var s=a.context,c=s.oldShape,l=s.newShape;r.unclaimId(c.businessObject.id,c.businessObject),r.updateProperties(l,{id:c.id})})}j(oc,X),oc.prototype._replaceElements=function(e,t){var n=this._elementRegistry,i=this._bpmnReplace,r=this._selection;A(t,function(o){var a={type:o.newElementType},s=n.get(o.oldElementId),c=e.indexOf(s);e[c]=i.replaceElement(s,a,{select:!1})}),t&&r.select(e)},oc.$inject=["bpmnReplace","bpmnRules","elementRegistry","injector","modeling","selection"];var tC=1500,nC={width:140,height:120},Yu={width:300,height:60},Ku={width:60,height:300},ac={width:300,height:150},sc={width:150,height:300},_v={width:140,height:120},bv={width:50,height:30};function Ev(e){e.on("resize.start",tC,function(t){var n=t.context,i=n.shape,r=n.direction,o=n.balanced;(b(i,"bpmn:Lane")||b(i,"bpmn:Participant"))&&(n.resizeConstraints=sC(i,r,o)),b(i,"bpmn:SubProcess")&&Ue(i)&&(n.minDimensions=_v),b(i,"bpmn:TextAnnotation")&&(n.minDimensions=bv)})}Ev.$inject=["eventBus"];var cr=Math.abs,iC=Math.min,rC=Math.max;function xv(e,t,n,i){var r=e[t];e[t]=r===void 0?n:i(n,r)}function Eo(e,t,n){return xv(e,t,n,iC)}function xo(e,t,n){return xv(e,t,n,rC)}var oC={top:20,left:50,right:20,bottom:20},aC={top:50,left:20,right:20,bottom:20};function sC(e,t,n){var i=Xn(e),r=!0,o=!0,a=Qs(i,[i]),s=Ee(e),c={},l={},u=qt(e),p=u?Yu:Ku;/n/.test(t)?l.top=s.bottom-p.height:/e/.test(t)?l.right=s.left+p.width:/s/.test(t)?l.bottom=s.top+p.height:/w/.test(t)&&(l.left=s.right-p.width),a.forEach(function(h){var v=Ee(h);u?(v.top<s.top-10&&(r=!1),v.bottom>s.bottom+10&&(o=!1)):(v.left<s.left-10&&(r=!1),v.right>s.right+10&&(o=!1)),/n/.test(t)&&(n&&cr(s.top-v.bottom)<10&&xo(c,"top",v.top+p.height),cr(s.top-v.top)<5&&Eo(l,"top",v.bottom-p.height)),/e/.test(t)&&(n&&cr(s.right-v.left)<10&&Eo(c,"right",v.right-p.width),cr(s.right-v.right)<5&&xo(l,"right",v.left+p.width)),/s/.test(t)&&(n&&cr(s.bottom-v.top)<10&&Eo(c,"bottom",v.bottom-p.height),cr(s.bottom-v.bottom)<5&&xo(l,"bottom",v.top+p.height)),/w/.test(t)&&(n&&cr(s.left-v.right)<10&&xo(c,"left",v.left+p.width),cr(s.left-v.left)<5&&Eo(l,"left",v.right-p.width))});var f=i.children.filter(function(h){return!h.hidden&&!h.waypoints&&(b(h,"bpmn:FlowElement")||b(h,"bpmn:Artifact"))}),d=u?oC:aC;return f.forEach(function(h){var v=Ee(h);/n/.test(t)&&(!u||r)&&Eo(l,"top",v.top-d.top),/e/.test(t)&&(u||o)&&xo(l,"right",v.right+d.right),/s/.test(t)&&(!u||o)&&xo(l,"bottom",v.bottom+d.bottom),/w/.test(t)&&(u||r)&&Eo(l,"left",v.left-d.left)}),{min:l,max:c}}var wv=1001;function Sv(e,t){e.on("resize.start",wv+500,function(n){var i=n.context,r=i.shape;(b(r,"bpmn:Lane")||b(r,"bpmn:Participant"))&&(i.balanced=!ta(n))}),e.on("resize.end",wv,function(n){var i=n.context,r=i.shape,o=i.canExecute,a=i.newBounds;if(b(r,"bpmn:Lane")||b(r,"bpmn:Participant"))return o&&(a=Zf(a),t.resizeLane(r,a,i.balanced)),!1})}Sv.$inject=["eventBus","modeling"];var cC=500;function Xu(e,t,n,i,r){n.invoke(X,this);function o(u){return je(u,["bpmn:ReceiveTask","bpmn:SendTask"])||lC(u,["bpmn:ErrorEventDefinition","bpmn:EscalationEventDefinition","bpmn:MessageEventDefinition","bpmn:SignalEventDefinition"])}function a(u){var p=e.getDefinitions(),f=p.get("rootElements");return!!te(f,de({id:u.id}))}function s(u){if(b(u,"bpmn:ErrorEventDefinition"))return"errorRef";if(b(u,"bpmn:EscalationEventDefinition"))return"escalationRef";if(b(u,"bpmn:MessageEventDefinition"))return"messageRef";if(b(u,"bpmn:SignalEventDefinition"))return"signalRef"}function c(u){if(je(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.get("messageRef");var p=u.get("eventDefinitions"),f=p[0];return f.get(s(f))}function l(u,p){if(je(u,["bpmn:ReceiveTask","bpmn:SendTask"]))return u.set("messageRef",p);var f=u.get("eventDefinitions"),d=f[0];return d.set(s(d),p)}this.executed(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var p=u.shape||u.element;if(o(p)){var f=Q(p),d=c(f),h;d&&!a(d)&&(h=e.getDefinitions().get("rootElements"),Wt(h,d),u.addedRootElement=d)}},!0),this.reverted(["shape.create","element.updateProperties","element.updateModdleProperties"],function(u){var p=u.addedRootElement;if(p){var f=e.getDefinitions().get("rootElements");Ft(f,p)}},!0),t.on("copyPaste.copyElement",function(u){var p=u.descriptor,f=u.element;if(!(f.labelTarget||!o(f))){var d=Q(f),h=c(d);h&&(p.referencedRootElement=h)}}),t.on("copyPaste.pasteElement",cC,function(u){var p=u.descriptor,f=p.businessObject,d=p.referencedRootElement;d&&(a(d)||(d=i.copyElement(d,r.create(d.$type))),l(f,d),delete p.referencedRootElement)})}Xu.$inject=["bpmnjs","eventBus","injector","moddleCopy","bpmnFactory"],j(Xu,X);function lC(e,t){return se(t)||(t=[t]),yn(t,function(n){return to(e,n)})}var Cv=Math.max;function Pv(e){e.on("spaceTool.getMinDimensions",function(t){var n=t.shapes,i=t.axis,r=t.start,o={};return A(n,function(a){var s=a.id;b(a,"bpmn:Participant")&&(o[s]=pC(a,i,r)),b(a,"bpmn:Lane")&&(o[s]=qt(a)?Yu:Ku),b(a,"bpmn:SubProcess")&&Ue(a)&&(o[s]=_v),b(a,"bpmn:TextAnnotation")&&(o[s]=bv),b(a,"bpmn:Group")&&(o[s]=nC)}),o})}Pv.$inject=["eventBus"];function uC(e){return e==="x"}function pC(e,t,n){var i=qt(e);if(!hC(e))return i?ac:sc;var r=uC(t),o={};return r?i?o=ac:o={width:dC(e,n,r),height:sc.height}:i?o={width:ac.width,height:fC(e,n,r)}:o=sc,o}function fC(e,t,n){var i;return i=mC(e,t,n),Cv(ac.height,i)}function dC(e,t,n){var i;return i=vC(e,t,n),Cv(sc.width,i)}function hC(e){return!!sr(e).length}function mC(e,t,n){var i=sr(e),r;return r=qu(i,t,n),e.height-r.height+Yu.height}function vC(e,t,n){var i=sr(e),r;return r=qu(i,t,n),e.width-r.width+Ku.width}function qu(e,t,n){var i,r,o;for(i=0;i<e.length;i++)if(r=e[i],!n&&t>=r.y&&t<=r.y+r.height||n&&t>=r.x&&t<=r.x+r.width)return o=sr(r),o.length?qu(o,t,n):r}var Rv=400,gC=600,Av={x:180,y:160};function lr(e,t,n,i,r,o,a){X.call(this,t),this._canvas=e,this._eventBus=t,this._modeling=n,this._elementFactory=i,this._bpmnFactory=r,this._bpmnjs=o,this._elementRegistry=a;var s=this;function c(p){return b(p,"bpmn:SubProcess")&&!Ue(p)}function l(p){var f=p.shape,d=p.newRootElement,h=Q(f);d=s._addDiagram(d||h),p.newRootElement=e.addRootElement(d)}function u(p){var f=p.shape,d=Q(f);s._removeDiagram(d);var h=p.newRootElement=a.get(ki(d));e.removeRootElement(h)}this.executed("shape.create",function(p){var f=p.shape;c(f)&&l(p)},!0),this.postExecuted("shape.create",function(p){var f=p.shape,d=p.newRootElement;!d||!f.children||(s._showRecursively(f.children),s._moveChildrenToShape(f,d))},!0),this.reverted("shape.create",function(p){var f=p.shape;c(f)&&u(p)},!0),this.preExecuted("shape.delete",function(p){var f=p.shape;if(c(f)){var d=a.get(ki(f));d&&n.removeElements(d.children.slice())}},!0),this.executed("shape.delete",function(p){var f=p.shape;c(f)&&u(p)},!0),this.reverted("shape.delete",function(p){var f=p.shape;c(f)&&l(p)},!0),this.preExecuted("shape.replace",function(p){var f=p.oldShape,d=p.newShape;!c(f)||!c(d)||(p.oldRoot=e.removeRootElement(ki(f)))},!0),this.postExecuted("shape.replace",function(p){var f=p.newShape,d=p.oldRoot,h=e.findRoot(ki(f));if(!(!d||!h)){var v=d.children;n.moveElements(v,{x:0,y:0},h)}},!0),this.executed("element.updateProperties",function(p){var f=p.element;if(b(f,"bpmn:SubProcess")){var d=p.properties,h=p.oldProperties,v=h.id,m=d.id;if(v!==m){if(gs(f)){a.updateId(f,Ir(m)),a.updateId(v,m);return}var S=a.get(Ir(v));S&&a.updateId(Ir(v),Ir(m))}}},!0),this.reverted("element.updateProperties",function(p){var f=p.element;if(b(f,"bpmn:SubProcess")){var d=p.properties,h=p.oldProperties,v=h.id,m=d.id;if(v!==m){if(gs(f)){a.updateId(f,Ir(v)),a.updateId(m,v);return}var S=a.get(Ir(m));S&&a.updateId(S,Ir(v))}}},!0),t.on("element.changed",function(p){var f=p.element;if(gs(f)){var d=f,h=a.get(Ud(d));!h||h===d||t.fire("element.changed",{element:h})}}),this.executed("shape.toggleCollapse",Rv,function(p){var f=p.shape;b(f,"bpmn:SubProcess")&&(Ue(f)?u(p):(l(p),s._showRecursively(f.children)))},!0),this.reverted("shape.toggleCollapse",Rv,function(p){var f=p.shape;b(f,"bpmn:SubProcess")&&(Ue(f)?u(p):(l(p),s._showRecursively(f.children)))},!0),this.postExecuted("shape.toggleCollapse",gC,function(p){var f=p.shape;if(b(f,"bpmn:SubProcess")){var d=p.newRootElement;d&&(Ue(f)?s._moveChildrenToShape(d,f):s._moveChildrenToShape(f,d))}},!0),t.on("copyPaste.createTree",function(p){var f=p.element,d=p.children;if(c(f)){var h=ki(f),v=a.get(h);v&&d.push.apply(d,v.children)}}),t.on("copyPaste.copyElement",function(p){var f=p.descriptor,d=p.element,h=p.elements,v=d.parent,m=b(qe(v),"bpmndi:BPMNPlane");if(m){var S=Ud(v),x=te(h,function(E){return E.id===S});x&&(f.parent=x.id)}}),t.on("copyPaste.pasteElement",function(p){var f=p.descriptor;f.parent&&(c(f.parent)||f.parent.hidden)&&(f.hidden=!0)})}j(lr,X),lr.prototype._moveChildrenToShape=function(e,t){var n=this._modeling,i=e.children,r;if(i){i=i.concat(i.reduce(function(l,u){return u.label&&u.label.parent!==e?l.concat(u.label):l},[]));var o=i.filter(function(l){return!l.hidden});if(!o.length){n.moveElements(i,{x:0,y:0},t,{autoResize:!1});return}var a=Xt(o);if(!t.x)r={x:Av.x-a.x,y:Av.y-a.y};else{var s=Pe(t),c=Pe(a);r={x:s.x-c.x,y:s.y-c.y}}n.moveElements(i,r,t,{autoResize:!1})}},lr.prototype._showRecursively=function(e,t){var n=this,i=[];return e.forEach(function(r){r.hidden=!!t,i=i.concat(r),r.children&&(i=i.concat(n._showRecursively(r.children,r.collapsed||t)))}),i},lr.prototype._addDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams;return e.businessObject||(e=this._createNewDiagram(e)),n.push(e.di.$parent),e},lr.prototype._createNewDiagram=function(e){var t=this._bpmnFactory,n=this._elementFactory,i=t.create("bpmndi:BPMNPlane",{bpmnElement:e}),r=t.create("bpmndi:BPMNDiagram",{plane:i});i.$parent=r;var o=n.createRoot({id:ki(e),type:e.$type,di:i,businessObject:e,collapsed:!0});return o},lr.prototype._removeDiagram=function(e){var t=this._bpmnjs,n=t.getDefinitions().diagrams,i=te(n,function(r){return r.plane.bpmnElement.id===e.id});return n.splice(n.indexOf(i),1),i},lr.$inject=["canvas","eventBus","modeling","elementFactory","bpmnFactory","bpmnjs","elementRegistry"];function Qu(e,t){e.invoke(X,this),this.postExecuted("shape.replace",function(n){var i=n.context.oldShape,r=n.context.newShape;if(!(!b(r,"bpmn:SubProcess")||!(b(i,"bpmn:Task")||b(i,"bpmn:CallActivity"))||!Ue(r))){var o=yC(r);t.createShape({type:"bpmn:StartEvent"},o,r)}})}Qu.$inject=["injector","modeling"],j(Qu,X);function yC(e){return{x:e.x+e.width/6,y:e.y+e.height/2}}function Ju(e){X.call(this,e),this.preExecute("connection.create",function(t){const{target:n}=t;b(n,"bpmn:TextAnnotation")&&(t.parent=n.parent)},!0),this.preExecute(["shape.create","shape.resize","elements.move"],function(t){const n=t.shapes||[t.shape];n.length===1&&b(n[0],"bpmn:TextAnnotation")&&(t.hints=t.hints||{},t.hints.autoResize=!1)},!0)}j(Ju,X),Ju.$inject=["eventBus"];function ep(e,t){X.call(this,e),this.postExecuted("shape.toggleCollapse",1500,function(n){var i=n.shape;if(Ue(i))return;var r=$o(i);r.forEach(function(a){var s=a.incoming.slice(),c=a.outgoing.slice();A(s,function(l){o(l,!0)}),A(c,function(l){o(l,!1)})});function o(a,s){r.indexOf(a.source)!==-1&&r.indexOf(a.target)!==-1||(s?t.reconnectEnd(a,i,Pe(i)):t.reconnectStart(a,i,Pe(i)))}},!0)}j(ep,X),ep.$inject=["eventBus","modeling"];var tp=500;function np(e,t,n){X.call(this,e);function i(a){a.length&&a.forEach(function(s){s.type==="label"&&!s.businessObject.name&&(s.hidden=!0)})}function r(a,s){var c=a.children,l=s,u,p;return u=_C(c).concat([a]),p=Wm(u),p?(l.width=Math.max(p.width,l.width),l.height=Math.max(p.height,l.height),l.x=p.x+(p.width-l.width)/2,l.y=p.y+(p.height-l.height)/2):(l.x=a.x+(a.width-l.width)/2,l.y=a.y+(a.height-l.height)/2),l}function o(a,s){return{x:a.x+(a.width-s.width)/2,y:a.y+(a.height-s.height)/2,width:s.width,height:s.height}}this.executed(["shape.toggleCollapse"],tp,function(a){var s=a.context,c=s.shape;b(c,"bpmn:SubProcess")&&(c.collapsed?qe(c).isExpanded=!1:(i(c.children),qe(c).isExpanded=!0))}),this.reverted(["shape.toggleCollapse"],tp,function(a){var s=a.context,c=s.shape;c.collapsed?qe(c).isExpanded=!1:qe(c).isExpanded=!0}),this.postExecuted(["shape.toggleCollapse"],tp,function(a){var s=a.context.shape,c=t.getDefaultSize(s),l;s.collapsed?l=o(s,c):l=r(s,c),n.resizeShape(s,l,null,{autoResize:s.collapsed?!1:"nwse"})})}j(np,X),np.$inject=["eventBus","elementFactory","modeling"];function _C(e){return e.filter(function(t){return!t.hidden})}function ip(e,t,n,i){t.invoke(X,this),this.preExecute("shape.delete",function(r){var o=r.context,a=o.shape,s=a.businessObject;Xe(a)||(b(a,"bpmn:Participant")&&Ue(a)&&n.ids.unclaim(s.processRef.id),i.unclaimId(s.id,s))}),this.preExecute("connection.delete",function(r){var o=r.context,a=o.connection,s=a.businessObject;i.unclaimId(s.id,s)}),this.preExecute("canvas.updateRoot",function(){var r=e.getRootElement(),o=r.businessObject;b(r,"bpmn:Collaboration")&&n.ids.unclaim(o.id)})}j(ip,X),ip.$inject=["canvas","injector","moddle","modeling"];function rp(e,t){X.call(this,e),this.preExecute("connection.delete",function(n){var i=n.context,r=i.connection,o=r.source;bC(r,o)&&t.updateProperties(o,{default:null})})}j(rp,X),rp.$inject=["eventBus","modeling"];function bC(e,t){if(!b(e,"bpmn:SequenceFlow"))return!1;var n=Q(t),i=Q(e);return n.get("default")===i}var EC=500,xC=5e3;function op(e,t){X.call(this,e);var n;function i(){return n=n||new wC,n.enter(),n}function r(){if(!n)throw new Error("out of bounds release");return n}function o(){if(!n)throw new Error("out of bounds release");var s=n.leave();return s&&(t.updateLaneRefs(n.flowNodes,n.lanes),n=null),s}var a=["spaceTool","lane.add","lane.resize","lane.split","elements.create","elements.delete","elements.move","shape.create","shape.delete","shape.move","shape.resize"];this.preExecute(a,xC,function(s){i()}),this.postExecuted(a,EC,function(s){o()}),this.preExecute(["shape.create","shape.move","shape.delete","shape.resize"],function(s){var c=s.context,l=c.shape,u=r();l.labelTarget||(b(l,"bpmn:Lane")&&u.addLane(l),b(l,"bpmn:FlowNode")&&u.addFlowNode(l))})}op.$inject=["eventBus","modeling"],j(op,X);function wC(){this.flowNodes=[],this.lanes=[],this.counter=0,this.addLane=function(e){this.lanes.push(e)},this.addFlowNode=function(e){this.flowNodes.push(e)},this.enter=function(){this.counter++},this.leave=function(){return this.counter--,!this.counter}}function ap(e,t){X.call(this,e),this.postExecuted("elements.create",function(n){const i=n.context,r=i.elements;for(const o of r)SC(o)&&!PC(o)&&t.updateProperties(o,{isForCompensation:void 0})})}j(ap,X),ap.$inject=["eventBus","modeling"];function SC(e){const t=Q(e);return t&&t.isForCompensation}function CC(e){return e&&b(e,"bpmn:BoundaryEvent")&&to(e,"bpmn:CompensateEventDefinition")}function PC(e){return e.incoming.filter(n=>CC(n.source)).length>0}var RC={__init__:["adaptiveLabelPositioningBehavior","appendBehavior","associationBehavior","attachEventBehavior","boundaryEventBehavior","compensateBoundaryEventBehaviour","createBehavior","createDataObjectBehavior","createParticipantBehavior","dataInputAssociationBehavior","dataStoreBehavior","deleteLaneBehavior","detachEventBehavior","dropOnFlowBehavior","eventBasedGatewayBehavior","fixHoverBehavior","groupBehavior","importDockingFix","isHorizontalFix","labelBehavior","layoutConnectionBehavior","messageFlowBehavior","nonInterruptingBehavior","removeElementBehavior","removeEmbeddedLabelBoundsBehavior","removeParticipantBehavior","replaceConnectionBehavior","replaceElementBehaviour","resizeBehavior","resizeLaneBehavior","rootElementReferenceBehavior","spaceToolBehavior","subProcessPlaneBehavior","subProcessStartEventBehavior","textAnnotationBehavior","toggleCollapseConnectionBehaviour","toggleElementCollapseBehaviour","unclaimIdBehavior","updateFlowNodeRefsBehavior","unsetDefaultFlowBehavior","setCompensationActivityAfterPasteBehavior"],adaptiveLabelPositioningBehavior:["type",bu],appendBehavior:["type",Eu],associationBehavior:["type",xu],attachEventBehavior:["type",Vs],boundaryEventBehavior:["type",wu],compensateBoundaryEventBehaviour:["type",Su],createBehavior:["type",Cu],createDataObjectBehavior:["type",Pu],createParticipantBehavior:["type",Tu],dataInputAssociationBehavior:["type",Du],dataStoreBehavior:["type",Mu],deleteLaneBehavior:["type",ku],detachEventBehavior:["type",Js],dropOnFlowBehavior:["type",Iu],eventBasedGatewayBehavior:["type",Ou],fixHoverBehavior:["type",Jm],groupBehavior:["type",Bu],importDockingFix:["type",tv],isHorizontalFix:["type",Lu],labelBehavior:["type",Fu],layoutConnectionBehavior:["type",ju],messageFlowBehavior:["type",Hu],nonInterruptingBehavior:["type",Gu],removeElementBehavior:["type",Vu],removeEmbeddedLabelBoundsBehavior:["type",Uu],removeParticipantBehavior:["type",Zu],replaceConnectionBehavior:["type",Wu],replaceElementBehaviour:["type",oc],resizeBehavior:["type",Ev],resizeLaneBehavior:["type",Sv],rootElementReferenceBehavior:["type",Xu],spaceToolBehavior:["type",Pv],subProcessPlaneBehavior:["type",lr],subProcessStartEventBehavior:["type",Qu],textAnnotationBehavior:["type",Ju],toggleCollapseConnectionBehaviour:["type",ep],toggleElementCollapseBehaviour:["type",np],unclaimIdBehavior:["type",ip],unsetDefaultFlowBehavior:["type",rp],updateFlowNodeRefsBehavior:["type",op],setCompensationActivityAfterPasteBehavior:["type",ap]};function Tv(e,t){var n=hn(e,t,-15);return n!=="intersect"?n:null}function pn(e){Wn.call(this,e)}j(pn,Wn),pn.$inject=["eventBus"],pn.prototype.init=function(){this.addRule("connection.start",function(e){var t=e.source;return AC(t)}),this.addRule("connection.create",function(e){var t=e.source,n=e.target,i=e.hints||{},r=i.targetParent,o=i.targetAttach;if(o)return!1;r&&(n.parent=r);try{return lc(t,n)}finally{r&&(n.parent=null)}}),this.addRule("connection.reconnect",function(e){var t=e.connection,n=e.source,i=e.target;return lc(n,i,t)}),this.addRule("connection.updateWaypoints",function(e){return{type:e.connection.type}}),this.addRule("shape.resize",function(e){var t=e.shape,n=e.newBounds;return $v(t,n)}),this.addRule("elements.create",function(e){var t=e.elements,n=e.position,i=e.target;return pt(i)&&!uc(t,i,n)?!1:An(t,function(r){return pt(r)?lc(r.source,r.target,r):r.host?va(r,r.host,null,n):pp(r,i,null,n)})}),this.addRule("elements.move",function(e){var t=e.target,n=e.shapes,i=e.position;return va(n,t,null,i)||Fv(n,t,i)||jv(n,t,i)||uc(n,t,i)}),this.addRule("shape.create",function(e){return pp(e.shape,e.target,e.source,e.position)}),this.addRule("shape.attach",function(e){return va(e.shape,e.target,null,e.position)}),this.addRule("element.copy",function(e){var t=e.element,n=e.elements;return Vv(n,t)})},pn.prototype.canConnectMessageFlow=Gv,pn.prototype.canConnectSequenceFlow=Uv,pn.prototype.canConnectDataAssociation=fp,pn.prototype.canConnectAssociation=zv,pn.prototype.canConnectCompensationAssociation=Hv,pn.prototype.canMove=jv,pn.prototype.canAttach=va,pn.prototype.canReplace=Fv,pn.prototype.canDrop=wo,pn.prototype.canInsert=uc,pn.prototype.canCreate=pp,pn.prototype.canConnect=lc,pn.prototype.canResize=$v,pn.prototype.canCopy=Vv;function AC(e){return sp(e)?null:je(e,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference","bpmn:Group","bpmn:TextAnnotation"])}function sp(e){return!e||Xe(e)}function TC(e,t){return e===t}function Dv(e){do{if(b(e,"bpmn:Process"))return Q(e);if(b(e,"bpmn:Participant"))return Q(e).processRef||Q(e)}while(e=e.parent)}function cp(e){return b(e,"bpmn:TextAnnotation")}function lp(e){return b(e,"bpmn:Group")&&!e.labelTarget}function Mv(e){return b(e,"bpmn:BoundaryEvent")&&xi(e,"bpmn:CompensateEventDefinition")}function cc(e){return Q(e).isForCompensation}function DC(e,t){var n=Dv(e),i=Dv(t);return n===i}function MC(e){return b(e,"bpmn:InteractionNode")&&!b(e,"bpmn:BoundaryEvent")&&(!b(e,"bpmn:Event")||b(e,"bpmn:ThrowEvent")&&Ov(e,"bpmn:MessageEventDefinition"))}function kC(e){return b(e,"bpmn:InteractionNode")&&!cc(e)&&(!b(e,"bpmn:Event")||b(e,"bpmn:CatchEvent")&&Ov(e,"bpmn:MessageEventDefinition"))&&!(b(e,"bpmn:BoundaryEvent")&&!xi(e,"bpmn:MessageEventDefinition"))}function kv(e){for(var t=e;t=t.parent;){if(b(t,"bpmn:FlowElementsContainer"))return Q(t);if(b(t,"bpmn:Participant"))return Q(t).processRef}return null}function Iv(e,t){var n=kv(e),i=kv(t);return n===i}function xi(e,t){var n=Q(e);return!!te(n.eventDefinitions||[],function(i){return b(i,t)})}function Ov(e,t){var n=Q(e);return(n.eventDefinitions||[]).every(function(i){return b(i,t)})}function IC(e){return b(e,"bpmn:FlowNode")&&!b(e,"bpmn:EndEvent")&&!vn(e)&&!(b(e,"bpmn:IntermediateThrowEvent")&&xi(e,"bpmn:LinkEventDefinition"))&&!Mv(e)&&!cc(e)}function OC(e){return b(e,"bpmn:FlowNode")&&!b(e,"bpmn:StartEvent")&&!b(e,"bpmn:BoundaryEvent")&&!vn(e)&&!(b(e,"bpmn:IntermediateCatchEvent")&&xi(e,"bpmn:LinkEventDefinition"))&&!cc(e)}function BC(e){return b(e,"bpmn:ReceiveTask")||b(e,"bpmn:IntermediateCatchEvent")&&(xi(e,"bpmn:MessageEventDefinition")||xi(e,"bpmn:TimerEventDefinition")||xi(e,"bpmn:ConditionalEventDefinition")||xi(e,"bpmn:SignalEventDefinition"))}function NC(e){for(var t=[];e;)e=e.parent,e&&t.push(e);return t}function up(e,t){var n=NC(t);return n.indexOf(e)!==-1}function lc(e,t,n){if(sp(e)||sp(t))return null;if(!b(n,"bpmn:DataAssociation")){if(Gv(e,t))return{type:"bpmn:MessageFlow"};if(Uv(e,t))return{type:"bpmn:SequenceFlow"}}var i=fp(e,t);return i||(Hv(e,t)?{type:"bpmn:Association",associationDirection:"One"}:zv(e,t)?{type:"bpmn:Association",associationDirection:"None"}:!1)}function wo(e,t){return Xe(e)||lp(e)?!0:b(t,"bpmn:Participant")&&!Ue(t)?!1:b(e,"bpmn:Participant")?b(t,"bpmn:Process")||b(t,"bpmn:Collaboration"):je(e,["bpmn:DataInput","bpmn:DataOutput"])&&e.parent?t===e.parent:b(e,"bpmn:Lane")?b(t,"bpmn:Participant")||b(t,"bpmn:Lane"):b(e,"bpmn:BoundaryEvent")&&!LC(e)?!1:b(e,"bpmn:FlowElement")&&!b(e,"bpmn:DataStoreReference")?b(t,"bpmn:FlowElementsContainer")?Ue(t):je(t,["bpmn:Participant","bpmn:Lane"]):b(e,"bpmn:DataStoreReference")&&b(t,"bpmn:Collaboration")?yn(Q(t).get("participants"),function(n){return!!n.get("processRef")}):je(e,["bpmn:Artifact","bpmn:DataAssociation","bpmn:DataStoreReference"])?je(t,["bpmn:Collaboration","bpmn:Lane","bpmn:Participant","bpmn:Process","bpmn:SubProcess"]):b(e,"bpmn:MessageFlow")?b(t,"bpmn:Collaboration")||e.source.parent==t||e.target.parent==t:!1}function LC(e){return Q(e).cancelActivity&&(Bv(e)||Nv(e))}function FC(e){return!Xe(e)&&b(e,"bpmn:BoundaryEvent")}function jC(e){return b(e,"bpmn:Lane")}function $C(e){return FC(e)||b(e,"bpmn:IntermediateThrowEvent")&&Bv(e)?!0:b(e,"bpmn:IntermediateCatchEvent")&&Nv(e)}function Bv(e){var t=Q(e);return t&&!(t.eventDefinitions&&t.eventDefinitions.length)}function Nv(e){return Lv(e,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])}function Lv(e,t){return t.some(function(n){return xi(e,n)})}function zC(e){return b(e,"bpmn:ReceiveTask")&&te(e.incoming,function(t){return b(t.source,"bpmn:EventBasedGateway")})}function va(e,t,n,i){if(Array.isArray(e)||(e=[e]),e.length!==1)return!1;var r=e[0];return Xe(r)||!$C(r)||vn(t)||!b(t,"bpmn:Activity")||cc(t)||i&&!Tv(i,t)||zC(t)?!1:"attach"}function Fv(e,t,n){if(!t)return!1;var i={replacements:[]};return A(e,function(r){vn(t)||b(r,"bpmn:StartEvent")&&r.type!=="label"&&wo(r,t)&&(PE(r)||i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),(RE(r)||AE(r)||TE(r))&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"}),Lv(r,["bpmn:MessageEventDefinition","bpmn:TimerEventDefinition","bpmn:SignalEventDefinition","bpmn:ConditionalEventDefinition"])&&b(t,"bpmn:SubProcess")&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:StartEvent"})),b(t,"bpmn:Transaction")||xi(r,"bpmn:CancelEventDefinition")&&r.type!=="label"&&(b(r,"bpmn:EndEvent")&&wo(r,t)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:EndEvent"}),b(r,"bpmn:BoundaryEvent")&&va(r,t,null,n)&&i.replacements.push({oldElementId:r.id,newElementType:"bpmn:BoundaryEvent"}))}),i.replacements.length?i:!1}function jv(e,t){return yn(e,jC)?!1:t?e.every(function(n){return wo(n,t)}):!0}function pp(e,t,n,i){return t?Xe(e)||lp(e)?!0:TC(n,t)||n&&up(n,t)?!1:wo(e,t,i)||uc(e,t,i):!1}function $v(e,t){return b(e,"bpmn:SubProcess")?Ue(e)&&(!t||t.width>=100&&t.height>=80):!!(b(e,"bpmn:Lane")||b(e,"bpmn:Participant")||cp(e)||lp(e))}function HC(e,t){var n=cp(e),i=cp(t);return(n||i)&&n!==i}function zv(e,t){return up(t,e)||up(e,t)?!1:HC(e,t)?!0:!!fp(e,t)}function Hv(e,t){return Iv(e,t)&&Mv(e)&&b(t,"bpmn:Activity")&&!UC(t,e)&&!vn(t)}function Gv(e,t){return Zv(e)&&!Zv(t)?!1:MC(e)&&kC(t)&&!DC(e,t)}function Uv(e,t){return IC(e)&&OC(t)&&Iv(e,t)&&!(b(e,"bpmn:EventBasedGateway")&&!BC(t))}function fp(e,t){return je(e,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&je(t,["bpmn:Activity","bpmn:ThrowEvent"])?{type:"bpmn:DataInputAssociation"}:je(t,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&je(e,["bpmn:Activity","bpmn:CatchEvent"])?{type:"bpmn:DataOutputAssociation"}:!1}function uc(e,t,n){if(!t)return!1;if(Array.isArray(e)){if(e.length!==1)return!1;e=e[0]}return t.source===e||t.target===e?!1:je(t,["bpmn:SequenceFlow","bpmn:MessageFlow"])&&!Xe(t)&&b(e,"bpmn:FlowNode")&&!b(e,"bpmn:BoundaryEvent")&&wo(e,t.parent,n)}function GC(e,t){return e&&t&&e.indexOf(t)!==-1}function Vv(e,t){return Xe(t)?!0:!(b(t,"bpmn:Lane")&&!GC(e,t.parent))}function Zv(e){return fo(e,"bpmn:Process")||fo(e,"bpmn:Collaboration")}function UC(e,t){return e.attachers.includes(t)}var VC={__depends__:[Ei],__init__:["bpmnRules"],bpmnRules:["type",pn]},ZC=2e3;function Wv(e,t){e.on("saveXML.start",ZC,n);function n(){var i=t.getRootElements();A(i,function(r){var o=qe(r),a,s;a=$o([r],!1),a=ne(a,function(c){return c!==r&&!c.labelTarget}),s=Tt(a,qe),o.set("planeElement",s)})}}Wv.$inject=["eventBus","canvas"];var WC={__init__:["bpmnDiOrdering"],bpmnDiOrdering:["type",Wv]};function pc(e){X.call(this,e);var t=this;this.preExecute(["shape.create","connection.create"],function(n){var i=n.context,r=i.shape||i.connection,o=i.parent,a=t.getOrdering(r,o);a&&(a.parent!==void 0&&(i.parent=a.parent),i.parentIndex=a.index)}),this.preExecute(["shape.move","connection.move"],function(n){var i=n.context,r=i.shape||i.connection,o=i.newParent||r.parent,a=t.getOrdering(r,o);a&&(a.parent!==void 0&&(i.newParent=a.parent),i.newParentIndex=a.index)})}pc.prototype.getOrdering=function(e,t){return null},j(pc,X);function dp(e,t){pc.call(this,e);var n=[{type:"bpmn:SubProcess",order:{level:6}},{type:"bpmn:SequenceFlow",order:{level:9,containers:["bpmn:Participant","bpmn:FlowElementsContainer"]}},{type:"bpmn:DataAssociation",order:{level:9,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:TextAnnotation",order:{level:9}},{type:"bpmn:MessageFlow",order:{level:9,containers:["bpmn:Collaboration"]}},{type:"bpmn:Association",order:{level:6,containers:["bpmn:Participant","bpmn:FlowElementsContainer","bpmn:Collaboration"]}},{type:"bpmn:BoundaryEvent",order:{level:8}},{type:"bpmn:Group",order:{level:10,containers:["bpmn:Collaboration","bpmn:FlowElementsContainer"]}},{type:"bpmn:FlowElement",order:{level:5}},{type:"bpmn:Participant",order:{level:-2}},{type:"bpmn:Lane",order:{level:-1}}];function i(a){if(a.labelTarget)return{level:10};var s=te(n,function(c){return je(a,[c.type])});return s&&s.order||{level:1}}function r(a){var s=a.order;if(s||(a.order=s=i(a)),!s)throw new Error(`no order for <${a.id}>`);return s}function o(a,s,c){for(var l=s;l&&!je(l,c);)l=l.parent;if(!l)throw new Error(`no parent for <${a.id}> in <${s&&s.id}>`);return l}this.getOrdering=function(a,s){if(a.labelTarget||b(a,"bpmn:TextAnnotation"))return{parent:t.findRoot(s)||t.getRootElement(),index:-1};var c=r(a);c.containers&&(s=o(a,s,c.containers));var l=s.children.indexOf(a),u=ae(s.children,function(p){return!a.labelTarget&&p.labelTarget?!1:c.level<r(p).level});return u!==-1&&l!==-1&&l<u&&(u-=1),{index:u,parent:s}}}dp.$inject=["eventBus","canvas"],j(dp,pc);var YC={__init__:["bpmnOrderingProvider"],bpmnOrderingProvider:["type",dp]};function ga(){}ga.prototype.get=function(){return this._data},ga.prototype.set=function(e){this._data=e},ga.prototype.clear=function(){var e=this._data;return delete this._data,e},ga.prototype.isEmpty=function(){return!this._data};var KC={clipboard:["type",ga]},XC="drop-ok",Yv="drop-not-ok",Kv="attach-ok",Xv="new-parent",qv="create",qC=2e3;function Qv(e,t,n,i,r){function o(c,l,u,p,f){if(!l)return!1;c=ne(c,function(x){var E=x.labelTarget;return!x.parent&&!(Xe(x)&&c.indexOf(E)!==-1)});var d=te(c,function(x){return!pt(x)}),h=!1,v=!1,m=!1;eg(c)&&(h=r.allowed("shape.attach",{position:u,shape:d,target:l})),h||(eg(c)?m=r.allowed("shape.create",{position:u,shape:d,source:p,target:l}):m=r.allowed("elements.create",{elements:c,position:u,target:l}));var S=f.connectionTarget;return m||h?(d&&p&&(v=r.allowed("connection.create",{source:S===p?d:p,target:S===p?p:d,hints:{targetParent:l,targetAttach:h}})),{attach:h,connect:v}):m===null||h===null?null:!1}function a(c,l){[Kv,XC,Yv,Xv].forEach(function(u){u===l?e.addMarker(c,u):e.removeMarker(c,u)})}n.on(["create.move","create.hover"],function(c){var l=c.context,u=l.elements,p=c.hover,f=l.source,d=l.hints||{};if(!p){l.canExecute=!1,l.target=null;return}Jv(c);var h={x:c.x,y:c.y},v=l.canExecute=p&&o(u,p,h,f,d);p&&v!==null&&(l.target=p,v&&v.attach?a(p,Kv):a(p,v?Xv:Yv))}),n.on(["create.end","create.out","create.cleanup"],function(c){var l=c.hover;l&&a(l,null)}),n.on("create.end",function(c){var l=c.context,u=l.source,p=l.shape,f=l.elements,d=l.target,h=l.canExecute,v=h&&h.attach,m=h&&h.connect,S=l.hints||{};if(h===!1||!d)return!1;Jv(c);var x={x:c.x,y:c.y};m?p=i.appendShape(u,p,x,d,{attach:v,connection:m===!0?{}:m,connectionTarget:S.connectionTarget}):(f=i.createElements(f,x,d,k({},S,{attach:v})),p=te(f,function(E){return!pt(E)})),k(l,{elements:f,shape:p}),k(c,{elements:f,shape:p})});function s(){var c=t.context();c&&c.prefix===qv&&t.cancel()}n.on("create.init",function(){n.on("elements.changed",s),n.once(["create.cancel","create.end"],qC,function(){n.off("elements.changed",s)})}),this.start=function(c,l,u){se(l)||(l=[l]);var p=te(l,function(h){return!pt(h)});if(p){u=k({elements:l,hints:{},shape:p},u||{}),A(l,function(h){L(h.x)||(h.x=0),L(h.y)||(h.y=0)});var f=ne(l,function(h){return!h.hidden}),d=Xt(f);A(l,function(h){pt(h)&&(h.waypoints=Tt(h.waypoints,function(v){return{x:v.x-d.x-d.width/2,y:v.y-d.y-d.height/2}})),k(h,{x:h.x-d.x-d.width/2,y:h.y-d.y-d.height/2})}),t.init(c,qv,{cursor:"grabbing",autoActivate:!0,data:{shape:p,elements:l,context:u}})}}}Qv.$inject=["canvas","dragging","eventBus","modeling","rules"];function Jv(e){var t=e.context,n=t.createConstraints;n&&(n.left&&(e.x=Math.max(e.x,n.left)),n.right&&(e.x=Math.min(e.x,n.right)),n.top&&(e.y=Math.max(e.y,n.top)),n.bottom&&(e.y=Math.min(e.y,n.bottom)))}function eg(e){return e&&e.length===1&&!pt(e[0])}var QC=750;function tg(e,t,n,i,r){function o(a){var s=ve("g");ce(s,r.cls("djs-drag-group",["no-events"]));var c=ve("g");return a.forEach(function(l){var u;l.hidden||(l.waypoints?(u=n._createContainer("connection",c),n.drawConnection(Rr(u),l)):(u=n._createContainer("shape",c),n.drawShape(Rr(u),l),ln(u,l.x,l.y)),i.addDragger(l,s,u))}),s}t.on("create.move",QC,function(a){var s=a.hover,c=a.context,l=c.elements,u=c.dragGroup;u||(u=c.dragGroup=o(l));var p;s?(u.parentNode||(p=e.getActiveLayer(),we(p,u)),ln(u,a.x,a.y)):Zt(u)}),t.on("create.cleanup",function(a){var s=a.context,c=s.dragGroup;c&&Zt(c)})}tg.$inject=["canvas","eventBus","graphicsFactory","previewSupport","styles"];var fc={__depends__:[Ni,go,Ei,_i],__init__:["create","createPreview"],create:["type",Qv],createPreview:["type",tg]};function hp(e){var t=this;this._lastMoveEvent=null;function n(i){t._lastMoveEvent=i}e.on("canvas.init",function(i){var r=t._svg=i.svg;r.addEventListener("mousemove",n)}),e.on("canvas.destroy",function(){t._lastMouseEvent=null,t._svg.removeEventListener("mousemove",n)})}hp.$inject=["eventBus"],hp.prototype.getLastMoveEvent=function(){return this._lastMoveEvent||JC(0,0)};function JC(e,t){var n=document.createEvent("MouseEvent"),i=e,r=t,o=e,a=t;return n.initMouseEvent&&n.initMouseEvent("mousemove",!0,!0,window,0,i,r,o,a,!1,!1,!1,!1,0,null),n}var ya={__init__:["mouse"],mouse:["type",hp]};function ai(e,t,n,i,r,o,a,s){this._canvas=e,this._create=t,this._clipboard=n,this._elementFactory=i,this._eventBus=r,this._modeling=o,this._mouse=a,this._rules=s,r.on("copyPaste.copyElement",function(c){var l=c.descriptor,u=c.element,p=c.elements;l.priority=1,l.id=u.id;var f=te(p,function(d){return d===u.parent});f&&(l.parent=u.parent.id),eP(u)&&(l.priority=2,l.host=u.host.id),pt(u)&&(l.priority=3,l.source=u.source.id,l.target=u.target.id,l.waypoints=tP(u)),Xe(u)&&(l.priority=4,l.labelTarget=u.labelTarget.id),A(["x","y","width","height"],function(d){L(u[d])&&(l[d]=u[d])}),l.hidden=u.hidden,l.collapsed=u.collapsed}),r.on("copyPaste.pasteElements",function(c){var l=c.hints;k(l,{createElementsBehavior:!1})})}ai.$inject=["canvas","create","clipboard","elementFactory","eventBus","modeling","mouse","rules"],ai.prototype.copy=function(e){var t,n;return se(e)||(e=e?[e]:[]),t=this._eventBus.fire("copyPaste.canCopyElements",{elements:e}),t===!1?n={}:n=this.createTree(se(t)?t:e),this._clipboard.set(n),this._eventBus.fire("copyPaste.elementsCopied",{elements:e,tree:n}),n},ai.prototype.paste=function(e){var t=this._clipboard.get();if(!this._clipboard.isEmpty()){var n=e&&e.hints||{};this._eventBus.fire("copyPaste.pasteElements",{hints:n});var i=this._createElements(t);if(e&&e.element&&e.point)return this._paste(i,e.element,e.point,n);this._create.start(this._mouse.getLastMoveEvent(),i,{hints:n||{}})}},ai.prototype._paste=function(e,t,n,i){A(e,function(o){L(o.x)||(o.x=0),L(o.y)||(o.y=0)});var r=Xt(e);return A(e,function(o){pt(o)&&(o.waypoints=Tt(o.waypoints,function(a){return{x:a.x-r.x-r.width/2,y:a.y-r.y-r.height/2}})),k(o,{x:o.x-r.x-r.width/2,y:o.y-r.y-r.height/2})}),this._modeling.createElements(e,n,t,k({},i))},ai.prototype._createElements=function(e){var t=this,n=this._eventBus,i={},r=[];return A(e,function(o,a){a=parseInt(a,10),o=dn(o,"priority"),A(o,function(s){var c=k({},Ut(s,["priority"]));i[s.parent]?c.parent=i[s.parent]:delete c.parent,n.fire("copyPaste.pasteElement",{cache:i,descriptor:c});var l;if(pt(c)){c.source=i[s.source],c.target=i[s.target],l=i[s.id]=t.createConnection(c),r.push(l);return}if(Xe(c)){c.labelTarget=i[c.labelTarget],l=i[s.id]=t.createLabel(c),r.push(l);return}c.host&&(c.host=i[c.host]),l=i[s.id]=t.createShape(c),r.push(l)})}),r},ai.prototype.createConnection=function(e){var t=this._elementFactory.createConnection(Ut(e,["id"]));return t},ai.prototype.createLabel=function(e){var t=this._elementFactory.createLabel(Ut(e,["id"]));return t},ai.prototype.createShape=function(e){var t=this._elementFactory.createShape(Ut(e,["id"]));return t},ai.prototype.hasRelations=function(e,t){var n,i,r;return!(pt(e)&&(i=te(t,de({id:e.source.id})),r=te(t,de({id:e.target.id})),!i||!r)||Xe(e)&&(n=te(t,de({id:e.labelTarget.id})),!n))},ai.prototype.createTree=function(e){var t=this._rules,n=this,i={},r=[],o=Ya(e);function a(l,u){return t.allowed("element.copy",{element:l,elements:u})}function s(l,u){var p=te(r,function(f){return l===f.element});if(!p){r.push({element:l,depth:u});return}p.depth<u&&(r=c(p,r),r.push({element:p.element,depth:u}))}function c(l,u){var p=u.indexOf(l);return p!==-1&&u.splice(p,1),u}return Pr(o,function(l,u,p){if(Xe(l))return;A(l.labels,function(h){s(h,p)});function f(h){h&&h.length&&A(h,function(v){A(v.labels,function(m){s(m,p)}),s(v,p)})}A([l.attachers,l.incoming,l.outgoing],f),s(l,p);var d=[];return l.children&&(d=l.children.slice()),n._eventBus.fire("copyPaste.createTree",{element:l,children:d}),d}),e=Tt(r,function(l){return l.element}),r=Tt(r,function(l){return l.descriptor={},n._eventBus.fire("copyPaste.copyElement",{descriptor:l.descriptor,element:l.element,elements:e}),l}),r=dn(r,function(l){return l.descriptor.priority}),e=Tt(r,function(l){return l.element}),A(r,function(l){var u=l.depth;if(!n.hasRelations(l.element,e)){ig(l.element,e);return}if(!a(l.element,e)){ig(l.element,e);return}i[u]||(i[u]=[]),i[u].push(l.descriptor)}),i};function eP(e){return!!e.host}function tP(e){return Tt(e.waypoints,function(t){return t=ng(t),t.original&&(t.original=ng(t.original)),t})}function ng(e){return k({},e)}function ig(e,t){var n=t.indexOf(e);return n===-1?t:t.splice(n,1)}var nP={__depends__:[KC,fc,ya,Ei],__init__:["copyPaste"],copyPaste:["type",ai]};function mp(e,t,n){se(n)||(n=[n]),A(n,function(i){Jt(e[i])||(t[i]=e[i])})}var vp=750;function rg(e,t,n){function i(c,l){var u=e.create(c.$type);return n.copyElement(c,u,null,l)}t.on("copyPaste.copyElement",vp,function(c){var l=c.descriptor,u=c.element,p=Q(u);if(Xe(u))return l;var f=l.businessObject=i(p,!0),d=l.di=i(qe(u),!0);d.bpmnElement=f,mp(f,l,"name"),mp(d,l,"isExpanded"),p.default&&(l.default=p.default.id)});var r="-bpmn-js-refs";function o(c){return c[r]=c[r]||{}}function a(c,l){c[r]=l}function s(c,l,u){var p=Q(c);return c.default&&(u[c.default]={element:p,property:"default"}),c.host&&(Q(c).attachedToRef=Q(l[c.host])),Ut(u,Ot(u,function(f,d,h){var v=d.element,m=d.property;return h===c.id&&(v.set(m,p),f.push(c.id)),f},[]))}t.on("copyPaste.pasteElement",function(c){var l=c.cache,u=c.descriptor,p=u.businessObject,f=u.di;if(Xe(u)){u.businessObject=Q(l[u.labelTarget]),u.di=qe(l[u.labelTarget]);return}p=u.businessObject=i(p),f=u.di=i(f),f.bpmnElement=p,mp(u,p,["isExpanded","name"]),u.type=p.$type}),t.on("copyPaste.copyElement",vp,function(c){var l=c.descriptor,u=c.element;if(b(u,"bpmn:Participant")){var p=Q(u);p.processRef&&(l.processRef=i(p.processRef,!0))}}),t.on("copyPaste.pasteElement",function(c){var l=c.descriptor,u=l.processRef;u&&(l.processRef=i(u))}),t.on("copyPaste.pasteElement",vp,function(c){var l=c.cache,u=c.descriptor;a(l,s(u,l,o(l)))})}rg.$inject=["bpmnFactory","eventBus","moddleCopy"];var iP=["artifacts","dataInputAssociations","dataOutputAssociations","default","flowElements","lanes","incoming","outgoing","categoryValue"];function _a(e,t,n){this._bpmnFactory=t,this._eventBus=e,this._moddle=n,e.on("moddleCopy.canCopyProperties",function(i){var r=i.propertyNames;if(!(!r||!r.length))return dn(r,function(o){return o==="extensionElements"})}),e.on("moddleCopy.canCopyProperty",function(i){var r=i.parent,o=$(r)&&r.$descriptor,a=i.propertyName;if(a&&iP.indexOf(a)!==-1||a&&o&&!te(o.properties,de({name:a})))return!1}),e.on("moddleCopy.canSetCopiedProperty",function(i){var r=i.property;if(rP(r,"bpmn:ExtensionElements")&&(!r.values||!r.values.length))return!1})}_a.$inject=["eventBus","bpmnFactory","moddle"],_a.prototype.copyElement=function(e,t,n,i=!1){var r=this;n&&!se(n)&&(n=[n]),n=n||gp(e.$descriptor);var o=this._eventBus.fire("moddleCopy.canCopyProperties",{propertyNames:n,sourceElement:e,targetElement:t,clone:i});return o===!1||(se(o)&&(n=o),A(n,function(a){var s;U(e,a)&&(s=e.get(a));var c=r.copyProperty(s,t,a,i);if(Ge(c)){var l=r._eventBus.fire("moddleCopy.canSetCopiedProperty",{parent:t,property:c,propertyName:a});l!==!1&&t.set(a,c)}})),t},_a.prototype.copyProperty=function(e,t,n,i=!1){var r=this,o=this._eventBus.fire("moddleCopy.canCopyProperty",{parent:t,property:e,propertyName:n,clone:i});if(o!==!1){if(o)return $(o)&&o.$type&&!o.$parent&&(o.$parent=t),o;var a=this._moddle.getPropertyDescriptor(t,n);if(!a.isReference)return a.isId?e&&this._copyId(e,t,i):se(e)?Ot(e,function(s,c){return o=r.copyProperty(c,t,n,i),o?s.concat(o):s},[]):$(e)&&e.$type?this._moddle.getElementDescriptor(e).isGeneric?void 0:(o=r._bpmnFactory.create(e.$type),o.$parent=t,o=r.copyElement(e,o,null,i),o):e}},_a.prototype._copyId=function(e,t,n=!1){if(n)return e;if(!this._moddle.ids.assigned(e))return this._moddle.ids.claim(e,t),e};function gp(e,t){return Ot(e.properties,function(n,i){return t&&i.default?n:n.concat(i.name)},[])}function rP(e,t){return e&&q(e.$instanceOf)&&e.$instanceOf(t)}var og={__depends__:[nP],__init__:["bpmnCopyPaste","moddleCopy"],bpmnCopyPaste:["type",rg],moddleCopy:["type",_a]},ag=Math.round;function yp(e,t){this._modeling=e,this._eventBus=t}yp.$inject=["modeling","eventBus"],yp.prototype.replaceElement=function(e,t,n){if(e.waypoints)return null;var i=this._modeling,r=this._eventBus;r.fire("replace.start",{element:e,attrs:t,hints:n});var o=t.width||e.width,a=t.height||e.height,s=t.x||e.x,c=t.y||e.y,l=ag(s+o/2),u=ag(c+a/2),p=i.replaceShape(e,k({},t,{x:l,y:u,width:o,height:a}),n);return r.fire("replace.end",{element:e,newElement:p,hints:n}),p};function sg(e,t){t.on("replace.end",500,function(n){const{newElement:i,hints:r={}}=n;r.select!==!1&&e.select(i)})}sg.$inject=["selection","eventBus"];var oP={__init__:["replace","replaceSelectionBehavior"],replaceSelectionBehavior:["type",sg],replace:["type",yp]};function aP(e,t,n){se(n)||(n=[n]),A(n,function(i){Jt(e[i])||(t[i]=e[i])})}var sP=["cancelActivity","instantiate","eventGatewayType","triggeredByEvent","isInterrupting"];function cP(e,t){var n=e&&U(e,"collapsed")?e.collapsed:!Ue(e),i;return t&&(U(t,"collapsed")||U(t,"isExpanded"))?i=U(t,"collapsed")?t.collapsed:!t.isExpanded:i=n,n!==i}function cg(e,t,n,i,r,o){function a(s,c,l){l=l||{};var u=c.type,p=s.businessObject;if(dc(p)&&u==="bpmn:SubProcess"&&cP(s,c))return i.toggleCollapse(s),s;var f=e.create(u),d={type:u,businessObject:f};d.di={},u==="bpmn:ExclusiveGateway"&&(d.di.isMarkerVisible=!0),aP(s.di,d.di,["fill","stroke","background-color","border-color","color"]);var h=gp(p.$descriptor),v=gp(f.$descriptor,!0),m=lP(h,v);k(f,Nt(c,sP));var S=ne(m,function(y){return y==="eventDefinitions"?lg(s,c.eventDefinitionType):y==="loopCharacteristics"?!vn(f):U(f,y)||y==="processRef"&&c.isExpanded===!1||y==="triggeredByEvent"?!1:y==="isForCompensation"?!vn(f):!0});if(f=n.copyElement(p,f,S),c.eventDefinitionType&&(lg(f,c.eventDefinitionType)||(d.eventDefinitionType=c.eventDefinitionType,d.eventDefinitionAttrs=c.eventDefinitionAttrs)),b(p,"bpmn:Activity")){if(dc(p))d.isExpanded=Ue(s);else if(c&&U(c,"isExpanded")){d.isExpanded=c.isExpanded;var x=t.getDefaultSize(f,{isExpanded:d.isExpanded});d.width=x.width,d.height=x.height,d.x=s.x-(d.width-s.width)/2,d.y=s.y-(d.height-s.height)/2}Ue(s)&&!b(p,"bpmn:Task")&&d.isExpanded&&(d.width=s.width,d.height=s.height)}if(dc(p)&&!dc(f)&&(l.moveChildren=!1),b(p,"bpmn:Participant")){c.isExpanded===!0?f.processRef=e.create("bpmn:Process"):l.moveChildren=!1;var E=qt(s);qe(s).isHorizontal||(qe(d).isHorizontal=E),d.width=E?s.width:t.getDefaultSize(d).width,d.height=E?t.getDefaultSize(d).height:s.height}return o.allowed("shape.resize",{shape:f})||(d.height=t.getDefaultSize(d).height,d.width=t.getDefaultSize(d).width),f.name=p.name,je(p,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&je(f,["bpmn:ExclusiveGateway","bpmn:InclusiveGateway","bpmn:Activity"])&&(f.default=p.default),c.host&&!b(p,"bpmn:BoundaryEvent")&&b(f,"bpmn:BoundaryEvent")&&(d.host=c.host),(d.type==="bpmn:DataStoreReference"||d.type==="bpmn:DataObjectReference")&&(d.x=s.x+(s.width-d.width)/2),r.replaceElement(s,d,Gt(Be({},l),{targetElement:c}))}this.replaceElement=a}cg.$inject=["bpmnFactory","elementFactory","moddleCopy","modeling","replace","rules"];function dc(e){return b(e,"bpmn:SubProcess")}function lg(e,t){var n=Q(e);return t&&n.get("eventDefinitions").some(function(i){return b(i,t)})}function lP(e,t){return e.filter(function(n){return t.includes(n)})}var ug={__depends__:[og,oP,_i],bpmnReplace:["type",cg]},uP=250;function Hr(e){this._eventBus=e,this._tools=[],this._active=null}Hr.$inject=["eventBus"],Hr.prototype.registerTool=function(e,t){var n=this._tools;if(!t)throw new Error(`A tool has to be registered with it's "events"`);n.push(e),this.bindEvents(e,t)},Hr.prototype.isActive=function(e){return e&&this._active===e},Hr.prototype.length=function(e){return this._tools.length},Hr.prototype.setActive=function(e){var t=this._eventBus;this._active!==e&&(this._active=e,t.fire("tool-manager.update",{tool:e}))},Hr.prototype.bindEvents=function(e,t){var n=this._eventBus,i=[];n.on(t.tool+".init",function(r){var o=r.context;if(!o.reactivate&&this.isActive(e)){this.setActive(null);return}this.setActive(e)},this),A(t,function(r){i.push(r+".ended"),i.push(r+".canceled")}),n.on(i,uP,function(r){this._active&&(pP(r)||this.setActive(null))},this)};function pP(e){var t=e.originalEvent&&e.originalEvent.target;return t&&Gn(t,'.group[data-group="tools"]')}var hc={__depends__:[Ni],__init__:["toolManager"],toolManager:["type",Hr]};function fP(e,t){if(e==="x"){if(t>0)return"e";if(t<0)return"w"}if(e==="y"){if(t>0)return"s";if(t<0)return"n"}return null}function dP(e,t){var n=[];return A(e.concat(t),function(i){var r=i.incoming,o=i.outgoing;A(r.concat(o),function(a){var s=a.source,c=a.target;(ba(e,s)||ba(e,c)||ba(t,s)||ba(t,c))&&(ba(n,a)||n.push(a))})}),n}function ba(e,t){return e.indexOf(t)!==-1}function hP(e,t,n){var i=e.x,r=e.y,o=e.width,a=e.height,s=n.x,c=n.y;switch(t){case"n":return{x:i,y:r+c,width:o,height:a-c};case"s":return{x:i,y:r,width:o,height:a+c};case"w":return{x:i+s,y:r,width:o-s,height:a};case"e":return{x:i,y:r,width:o+s,height:a};default:throw new Error("unknown direction: "+t)}}var _p=Math.abs,mP=Math.round,Fi={x:"width",y:"height"},pg="crosshair",ur={n:"top",w:"left",s:"bottom",e:"right"},vP=1500,mc={n:"s",w:"e",s:"n",e:"w"},vc=20;function qn(e,t,n,i,r,o,a){this._canvas=e,this._dragging=t,this._eventBus=n,this._modeling=i,this._rules=r,this._toolManager=o,this._mouse=a;var s=this;o.registerTool("space",{tool:"spaceTool.selection",dragging:"spaceTool"}),n.on("spaceTool.selection.end",function(c){n.once("spaceTool.selection.ended",function(){s.activateMakeSpace(c.originalEvent)})}),n.on("spaceTool.move",vP,function(c){var l=c.context,u=l.initialized;u||(u=l.initialized=s.init(c,l)),u&&dg(c)}),n.on("spaceTool.end",function(c){var l=c.context,u=l.axis,p=l.direction,f=l.movingShapes,d=l.resizingShapes,h=l.start;if(l.initialized){dg(c);var v={x:0,y:0};v[u]=mP(c["d"+u]),s.makeSpace(f,d,v,p,h),n.once("spaceTool.ended",function(m){s.activateSelection(m.originalEvent,!0,!0)})}})}qn.$inject=["canvas","dragging","eventBus","modeling","rules","toolManager","mouse"],qn.prototype.activateSelection=function(e,t,n){this._dragging.init(e,"spaceTool.selection",{autoActivate:t,cursor:pg,data:{context:{reactivate:n}},trapClick:!1})},qn.prototype.activateMakeSpace=function(e){this._dragging.init(e,"spaceTool",{autoActivate:!0,cursor:pg,data:{context:{}}})},qn.prototype.makeSpace=function(e,t,n,i,r){return this._modeling.createSpace(e,t,n,i,r)},qn.prototype.init=function(e,t){var n=_p(e.dx)>_p(e.dy)?"x":"y",i=e["d"+n],r=e[n]-i;if(_p(i)<5)return!1;i<0&&(i*=-1),ta(e)&&(i*=-1);var o=fP(n,i),a=this._canvas.getRootElement();!bs(e)&&e.hover&&(a=e.hover);var s=[...$o(a,!0),...a.attachers||[]],c=this.calculateAdjustments(s,n,i,r),l=this._eventBus.fire("spaceTool.getMinDimensions",{axis:n,direction:o,shapes:c.resizingShapes,start:r}),u=gP(c,n,o,r,l);return k(t,c,{axis:n,direction:o,spaceToolConstraints:u,start:r}),Cs("resize-"+(n==="x"?"ew":"ns")),!0},qn.prototype.calculateAdjustments=function(e,t,n,i){var r=this._rules,o=[],a=[],s=[],c=[];function l(f){o.includes(f)||o.push(f);var d=f.label;d&&!o.includes(d)&&o.push(d)}function u(f){a.includes(f)||a.push(f)}A(e,function(f){if(!(!f.parent||Xe(f))){if(pt(f)){c.push(f);return}var d=f[t],h=d+f[Fi[t]];if(yP(f)&&(n>0&&Pe(f)[t]>i||n<0&&Pe(f)[t]<i)){s.push(f);return}if(n>0&&d>i||n<0&&h<i){l(f);return}if(d<i&&h>i&&r.allowed("shape.resize",{shape:f})){u(f);return}}}),A(o,function(f){var d=f.attachers;d&&A(d,function(h){l(h)})});var p=o.concat(a);return A(s,function(f){var d=f.host;Gr(p,d)&&l(f)}),p=o.concat(a),A(c,function(f){var d=f.source,h=f.target,v=f.label;Gr(p,d)&&Gr(p,h)&&v&&l(v)}),{movingShapes:o,resizingShapes:a}},qn.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},qn.prototype.isActive=function(){var e=this._dragging.context();return e?/^spaceTool/.test(e.prefix):!1};function fg(e){return{top:e.top-vc,right:e.right+vc,bottom:e.bottom+vc,left:e.left-vc}}function dg(e){var t=e.context,n=t.spaceToolConstraints;if(n){var i,r;L(n.left)&&(i=Math.max(e.x,n.left),e.dx=e.dx+i-e.x,e.x=i),L(n.right)&&(i=Math.min(e.x,n.right),e.dx=e.dx+i-e.x,e.x=i),L(n.top)&&(r=Math.max(e.y,n.top),e.dy=e.dy+r-e.y,e.y=r),L(n.bottom)&&(r=Math.min(e.y,n.bottom),e.dy=e.dy+r-e.y,e.y=r)}}function gP(e,t,n,i,r){var o=e.movingShapes,a=e.resizingShapes;if(a.length){var s={},c,l;return A(a,function(u){var p=u.attachers,f=u.children,d=Ee(u),h=ne(f,function(B){return!pt(B)&&!Xe(B)&&!Gr(o,B)&&!Gr(a,B)}),v=ne(f,function(B){return!pt(B)&&!Xe(B)&&Gr(o,B)}),m,S,x,E=[],y=[],w,R,I,T;h.length&&(S=fg(Ee(Xt(h))),m=i-d[ur[n]]+S[ur[n]],n==="n"?s.bottom=l=L(l)?Math.min(l,m):m:n==="w"?s.right=l=L(l)?Math.min(l,m):m:n==="s"?s.top=c=L(c)?Math.max(c,m):m:n==="e"&&(s.left=c=L(c)?Math.max(c,m):m)),v.length&&(x=fg(Ee(Xt(v))),m=i-x[ur[mc[n]]]+d[ur[mc[n]]],n==="n"?s.bottom=l=L(l)?Math.min(l,m):m:n==="w"?s.right=l=L(l)?Math.min(l,m):m:n==="s"?s.top=c=L(c)?Math.max(c,m):m:n==="e"&&(s.left=c=L(c)?Math.max(c,m):m)),p&&p.length&&(p.forEach(function(B){Gr(o,B)?E.push(B):y.push(B)}),E.length&&(w=Ee(Xt(E.map(Pe))),R=d[ur[mc[n]]]-(w[ur[mc[n]]]-i)),y.length&&(I=Ee(Xt(y.map(Pe))),T=I[ur[n]]-(d[ur[n]]-i)),n==="n"?(m=Math.min(R||1/0,T||1/0),s.bottom=l=L(l)?Math.min(l,m):m):n==="w"?(m=Math.min(R||1/0,T||1/0),s.right=l=L(l)?Math.min(l,m):m):n==="s"?(m=Math.max(R||-1/0,T||-1/0),s.top=c=L(c)?Math.max(c,m):m):n==="e"&&(m=Math.max(R||-1/0,T||-1/0),s.left=c=L(c)?Math.max(c,m):m));var O=r&&r[u.id];O&&(n==="n"?(m=i+u[Fi[t]]-O[Fi[t]],s.bottom=l=L(l)?Math.min(l,m):m):n==="w"?(m=i+u[Fi[t]]-O[Fi[t]],s.right=l=L(l)?Math.min(l,m):m):n==="s"?(m=i-u[Fi[t]]+O[Fi[t]],s.top=c=L(c)?Math.max(c,m):m):n==="e"&&(m=i-u[Fi[t]]+O[Fi[t]],s.left=c=L(c)?Math.max(c,m):m))}),s}}function Gr(e,t){return e.indexOf(t)!==-1}function yP(e){return!!e.host}var bp="djs-dragging",hg="djs-resizing",_P=250,gc=Math.max;function mg(e,t,n,i,r){function o(a,s){A(a,function(c){r.addDragger(c,s),n.addMarker(c,bp)})}e.on("spaceTool.selection.start",function(a){var s=n.getLayer("space"),c=a.context,l={x:"M 0,-10000 L 0,10000",y:"M -10000,0 L 10000,0"},u=ve("g");ce(u,i.cls("djs-crosshair-group",["no-events"])),we(s,u);var p=ve("path");ce(p,"d",l.x),Ke(p).add("djs-crosshair"),we(u,p);var f=ve("path");ce(f,"d",l.y),Ke(f).add("djs-crosshair"),we(u,f),c.crosshairGroup=u}),e.on("spaceTool.selection.move",function(a){var s=a.context.crosshairGroup;ln(s,a.x,a.y)}),e.on("spaceTool.selection.cleanup",function(a){var s=a.context,c=s.crosshairGroup;c&&Zt(c)}),e.on("spaceTool.move",_P,function(a){var s=a.context,c=s.line,l=s.axis,u=s.movingShapes,p=s.resizingShapes;if(s.initialized){if(!s.dragGroup){var f=n.getLayer("space");c=ve("path"),ce(c,"d","M0,0 L0,0"),Ke(c).add("djs-crosshair"),we(f,c),s.line=c;var d=ve("g");ce(d,i.cls("djs-drag-group",["no-events"])),we(n.getActiveLayer(),d),o(u,d);var h=s.movingConnections=t.filter(function(y){var w=!1;A(u,function(O){A(O.outgoing,function(B){y===B&&(w=!0)})});var R=!1;A(u,function(O){A(O.incoming,function(B){y===B&&(R=!0)})});var I=!1;A(p,function(O){A(O.outgoing,function(B){y===B&&(I=!0)})});var T=!1;return A(p,function(O){A(O.incoming,function(B){y===B&&(T=!0)})}),pt(y)&&(w||I)&&(R||T)});o(h,d),s.dragGroup=d}if(!s.frameGroup){var v=ve("g");ce(v,i.cls("djs-frame-group",["no-events"])),we(n.getActiveLayer(),v);var m=[];A(p,function(y){var w=r.addFrame(y,v),R=w.getBBox();m.push({element:w,initialBounds:R}),n.addMarker(y,hg)}),s.frameGroup=v,s.frames=m}var S={x:"M"+a.x+", -10000 L"+a.x+", 10000",y:"M -10000, "+a.y+" L 10000, "+a.y};ce(c,{d:S[l]});var x={x:"y",y:"x"},E={x:a.dx,y:a.dy};E[x[s.axis]]=0,ln(s.dragGroup,E.x,E.y),A(s.frames,function(y){var w=y.element,R=y.initialBounds,I,T;s.direction==="e"?ce(w,{width:gc(R.width+E.x,5)}):(I=gc(R.width-E.x,5),ce(w,{width:I,x:R.x+R.width-I})),s.direction==="s"?ce(w,{height:gc(R.height+E.y,5)}):(T=gc(R.height-E.y,5),ce(w,{height:T,y:R.y+R.height-T}))})}}),e.on("spaceTool.cleanup",function(a){var s=a.context,c=s.movingShapes,l=s.movingConnections,u=s.resizingShapes,p=s.line,f=s.dragGroup,d=s.frameGroup;A(c,function(h){n.removeMarker(h,bp)}),A(l,function(h){n.removeMarker(h,bp)}),f&&(Zt(p),Zt(f)),A(u,function(h){n.removeMarker(h,hg)}),d&&Zt(d)})}mg.$inject=["eventBus","elementRegistry","canvas","styles","previewSupport"];var bP={__init__:["spaceToolPreview"],__depends__:[Ni,Ei,hc,go,ya],spaceTool:["type",qn],spaceToolPreview:["type",mg]};function yc(e){e.invoke(qn,this)}yc.$inject=["injector"],j(yc,qn),yc.prototype.calculateAdjustments=function(e,t,n,i){var r=qn.prototype.calculateAdjustments.call(this,e,t,n,i);return r.resizingShapes=r.resizingShapes.filter(function(o){return!(b(o,"bpmn:TextAnnotation")||EP(o)&&(t==="y"&&qt(o)||t==="x"&&!qt(o)))}),r};function EP(e){return b(e,"bpmn:Participant")&&!Q(e).processRef}var vg={__depends__:[bP],spaceTool:["type",yc]};function Ct(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],function(){this.clear(!1)},this)}Ct.$inject=["eventBus","injector"],Ct.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()},Ct.prototype.canExecute=function(e,t){const n={command:e,context:t},i=this._getHandler(e);let r=this._fire(e,"canExecute",n);if(r===void 0){if(!i)return!1;i.canExecute&&(r=i.canExecute(t))}return r},Ct.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,e!==!1&&this._fire("changed",{trigger:"clear"})},Ct.prototype.undo=function(){let e=this._getUndoAction(),t;if(e){for(this._currentExecution.trigger="undo",this._pushAction(e);e&&(this._internalUndo(e),t=this._getUndoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}},Ct.prototype.redo=function(){let e=this._getRedoAction(),t;if(e){for(this._currentExecution.trigger="redo",this._pushAction(e);e&&(this._internalExecute(e,!0),t=this._getRedoAction(),!(!t||t.id!==e.id));)e=t;this._popAction()}},Ct.prototype.register=function(e,t){this._setHandler(e,t)},Ct.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)},Ct.prototype.canUndo=function(){return!!this._getUndoAction()},Ct.prototype.canRedo=function(){return!!this._getRedoAction()},Ct.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},Ct.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},Ct.prototype._internalUndo=function(e){const t=e.command,n=e.context,i=this._getHandler(t);this._atomicDo(()=>{this._fire(t,"revert",e),i.revert&&this._markDirty(i.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)})},Ct.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const i=t?[e+"."+t,t]:[e];let r;n=this._eventBus.createEvent(n);for(const o of i)if(r=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return r},Ct.prototype._createId=function(){return this._uid++},Ct.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},Ct.prototype._internalExecute=function(e,t){const n=e.command,i=e.context,r=this._getHandler(n);if(!r)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),r.preExecute&&r.preExecute(i),this._fire(n,"preExecuted",e)),this._atomicDo(()=>{this._fire(n,"execute",e),r.execute&&this._markDirty(r.execute(i)),this._executedAction(e,t),this._fire(n,"executed",e)}),t||(this._fire(n,"postExecute",e),r.postExecute&&r.postExecute(i),this._fire(n,"postExecuted",e)),this._popAction()},Ct.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,i=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=i&&i.id||this._createId()),n.push(e)},Ct.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,i=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:ni("id",i.reverse())}),i.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},Ct.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=se(e)?e:[e],t.dirty=t.dirty.concat(e))},Ct.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},Ct.prototype._revertedAction=function(e){this._stackIdx--},Ct.prototype._getHandler=function(e){return this._handlerMap[e]},Ct.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};var xP={commandStack:["type",Ct]};function pr(e,t){if(typeof t!="function")throw new Error("removeFn iterator must be a function");if(e){for(var n;n=e[0];)t(n);return e}}var wP=250,gg=1400;function Ep(e,t,n){X.call(this,t);var i=e.get("movePreview",!1);t.on("shape.move.start",gg,function(r){var o=r.context,a=o.shapes,s=o.validatedShapes;o.shapes=yg(a),o.validatedShapes=yg(s)}),i&&t.on("shape.move.start",wP,function(r){var o=r.context,a=o.shapes,s=[];A(a,function(c){A(c.labels,function(l){!l.hidden&&o.shapes.indexOf(l)===-1&&s.push(l),c.labelTarget&&s.push(c)})}),A(s,function(c){i.makeDraggable(o,c,!0)})}),this.preExecuted("elements.move",gg,function(r){var o=r.context,a=o.closure,s=a.enclosedElements,c=[];A(s,function(l){A(l.labels,function(u){s[u.id]||c.push(u)})}),a.addAll(c)}),this.preExecute(["connection.delete","shape.delete"],function(r){var o=r.context,a=o.connection||o.shape;pr(a.labels,function(s){n.removeShape(s,{nested:!0})})}),this.execute("shape.delete",function(r){var o=r.context,a=o.shape,s=a.labelTarget;s&&(o.labelTargetIndex=dl(s.labels,a),o.labelTarget=s,a.labelTarget=null)}),this.revert("shape.delete",function(r){var o=r.context,a=o.shape,s=o.labelTarget,c=o.labelTargetIndex;s&&(Wt(s.labels,a,c),a.labelTarget=s)})}j(Ep,X),Ep.$inject=["injector","eventBus","modeling"];function yg(e){return ne(e,function(t){return e.indexOf(t.labelTarget)===-1})}var SP={__init__:["labelSupport"],labelSupport:["type",Ep]},CP=251,_g=1401,bg="attach-ok";function xp(e,t,n,i,r){X.call(this,t);var o=e.get("movePreview",!1);t.on("shape.move.start",_g,function(a){var s=a.context,c=s.shapes,l=s.validatedShapes;s.shapes=PP(c),s.validatedShapes=RP(l)}),o&&t.on("shape.move.start",CP,function(a){var s=a.context,c=s.shapes,l=wp(c);A(l,function(u){o.makeDraggable(s,u,!0),A(u.labels,function(p){o.makeDraggable(s,p,!0)})})}),o&&t.on("shape.move.start",function(a){var s=a.context,c=s.shapes;if(c.length===1){var l=c[0],u=l.host;u&&(n.addMarker(u,bg),t.once(["shape.move.out","shape.move.cleanup"],function(){n.removeMarker(u,bg)}))}}),this.preExecuted("elements.move",_g,function(a){var s=a.context,c=s.closure,l=s.shapes,u=wp(l);A(u,function(p){c.add(p,c.topLevel[p.host.id])})}),this.postExecuted("elements.move",function(a){var s=a.context,c=s.shapes,l=s.newHost,u;l&&c.length!==1||(l?u=c:u=ne(c,function(p){var f=p.host;return AP(p)&&!TP(c,f)}),A(u,function(p){r.updateAttachment(p,l)}))}),this.postExecuted("elements.move",function(a){var s=a.context.shapes;A(s,function(c){A(c.attachers,function(l){A(l.outgoing.slice(),function(u){var p=i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});p||r.removeConnection(u)}),A(l.incoming.slice(),function(u){var p=i.allowed("connection.reconnect",{connection:u,source:u.source,target:u.target});p||r.removeConnection(u)})})})}),this.postExecute("shape.create",function(a){var s=a.context,c=s.shape,l=s.host;l&&r.updateAttachment(c,l)}),this.postExecute("shape.replace",function(a){var s=a.context,c=s.oldShape,l=s.newShape;pr(c.attachers,function(u){var p=i.allowed("elements.move",{target:l,shapes:[u]});p==="attach"?r.updateAttachment(u,l):r.removeShape(u)}),l.attachers.length&&A(l.attachers,function(u){var p=fv(u,c,l);r.moveShape(u,p,u.parent)})}),this.postExecute("shape.resize",function(a){var s=a.context,c=s.shape,l=s.oldBounds,u=s.newBounds,p=c.attachers,f=s.hints||{};f.attachSupport!==!1&&A(p,function(d){var h=fv(d,l,u);r.moveShape(d,h,d.parent),A(d.labels,function(v){r.moveShape(v,h,v.parent)})})}),this.preExecute("shape.delete",function(a){var s=a.context.shape;pr(s.attachers,function(c){r.removeShape(c)}),s.host&&r.updateAttachment(s,null)})}j(xp,X),xp.$inject=["injector","eventBus","canvas","rules","modeling"];function wp(e){return Yt(Tt(e,function(t){return t.attachers||[]}))}function PP(e){var t=wp(e);return an("id",e,t)}function RP(e){var t=_n(e,"id");return ne(e,function(n){for(;n;){if(n.host&&t[n.host.id])return!1;n=n.parent}return!0})}function AP(e){return!!e.host}function TP(e,t){return e.indexOf(t)!==-1}var DP={__depends__:[Ei],__init__:["attachSupport"],attachSupport:["type",xp]};function Qn(e){this._model=e}Qn.$inject=["moddle"],Qn.prototype._needsId=function(e){return je(e,["bpmn:RootElement","bpmn:FlowElement","bpmn:MessageFlow","bpmn:DataAssociation","bpmn:Artifact","bpmn:Participant","bpmn:Lane","bpmn:LaneSet","bpmn:Process","bpmn:Collaboration","bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane","bpmn:Property","bpmn:CategoryValue"])},Qn.prototype._ensureId=function(e){if(e.id){this._model.ids.claim(e.id,e);return}var t;b(e,"bpmn:Activity")?t="Activity":b(e,"bpmn:Event")?t="Event":b(e,"bpmn:Gateway")?t="Gateway":je(e,["bpmn:SequenceFlow","bpmn:MessageFlow"])?t="Flow":t=(e.$type||"").replace(/^[^:]*:/g,""),t+="_",!e.id&&this._needsId(e)&&(e.id=this._model.ids.nextPrefixed(t,e))},Qn.prototype.create=function(e,t){var n=this._model.create(e,t||{});return this._ensureId(n),n},Qn.prototype.createDiLabel=function(){return this.create("bpmndi:BPMNLabel",{bounds:this.createDiBounds()})},Qn.prototype.createDiShape=function(e,t){return this.create("bpmndi:BPMNShape",k({bpmnElement:e,bounds:this.createDiBounds()},t))},Qn.prototype.createDiBounds=function(e){return this.create("dc:Bounds",e)},Qn.prototype.createDiWaypoints=function(e){var t=this;return Tt(e,function(n){return t.createDiWaypoint(n)})},Qn.prototype.createDiWaypoint=function(e){return this.create("dc:Point",Nt(e,["x","y"]))},Qn.prototype.createDiEdge=function(e,t){return this.create("bpmndi:BPMNEdge",k({bpmnElement:e,waypoint:this.createDiWaypoints([])},t))},Qn.prototype.createDiPlane=function(e,t){return this.create("bpmndi:BPMNPlane",k({bpmnElement:e},t))};function kn(e,t,n){X.call(this,e),this._bpmnFactory=t;var i=this;function r(d){var h=d.context,v=h.hints||{},m;!h.cropped&&v.createElementsBehavior!==!1&&(m=h.connection,m.waypoints=n.getCroppedWaypoints(m),h.cropped=!0)}this.executed(["connection.layout","connection.create"],r),this.reverted(["connection.layout"],function(d){delete d.context.cropped});function o(d){var h=d.context;i.updateParent(h.shape||h.connection,h.oldParent)}function a(d){var h=d.context,v=h.shape||h.connection,m=h.parent||h.newParent;i.updateParent(v,m)}this.executed(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],In(o)),this.reverted(["shape.move","shape.create","shape.delete","connection.create","connection.move","connection.delete"],In(a));function s(d){var h=d.context,v=h.oldRoot,m=v.children;A(m,function(S){b(S,"bpmn:BaseElement")&&i.updateParent(S)})}this.executed(["canvas.updateRoot"],s),this.reverted(["canvas.updateRoot"],s);function c(d){var h=d.context.shape;b(h,"bpmn:BaseElement")&&i.updateBounds(h)}this.executed(["shape.move","shape.create","shape.resize"],In(function(d){d.context.shape.type!=="label"&&c(d)})),this.reverted(["shape.move","shape.create","shape.resize"],In(function(d){d.context.shape.type!=="label"&&c(d)})),e.on("shape.changed",function(d){d.element.type==="label"&&c({context:{shape:d.element}})});function l(d){i.updateConnection(d.context)}this.executed(["connection.create","connection.move","connection.delete","connection.reconnect"],In(l)),this.reverted(["connection.create","connection.move","connection.delete","connection.reconnect"],In(l));function u(d){i.updateConnectionWaypoints(d.context.connection)}this.executed(["connection.layout","connection.move","connection.updateWaypoints"],In(u)),this.reverted(["connection.layout","connection.move","connection.updateWaypoints"],In(u)),this.executed("connection.reconnect",In(function(d){var h=d.context,v=h.connection,m=h.oldSource,S=h.newSource,x=Q(v),E=Q(m),y=Q(S);x.conditionExpression&&!je(y,["bpmn:Activity","bpmn:ExclusiveGateway","bpmn:InclusiveGateway"])&&(h.oldConditionExpression=x.conditionExpression,delete x.conditionExpression),m!==S&&E.default===x&&(h.oldDefault=E.default,delete E.default)})),this.reverted("connection.reconnect",In(function(d){var h=d.context,v=h.connection,m=h.oldSource,S=h.newSource,x=Q(v),E=Q(m),y=Q(S);h.oldConditionExpression&&(x.conditionExpression=h.oldConditionExpression),h.oldDefault&&(E.default=h.oldDefault,delete y.default)}));function p(d){i.updateAttachment(d.context)}this.executed(["element.updateAttachment"],In(p)),this.reverted(["element.updateAttachment"],In(p)),this.executed("element.updateLabel",In(f)),this.reverted("element.updateLabel",In(f));function f(d){const{element:h}=d.context,v=jn(h),m=qe(h),S=m&&m.get("label");Mr(h)||gs(h)||(v&&!S?m.set("label",t.create("bpmndi:BPMNLabel")):!v&&S&&m.set("label",void 0))}}j(kn,X),kn.$inject=["eventBus","bpmnFactory","connectionDocking"],kn.prototype.updateAttachment=function(e){var t=e.shape,n=t.businessObject,i=t.host;n.attachedToRef=i&&i.businessObject},kn.prototype.updateParent=function(e,t){if(!Xe(e)&&!(b(e,"bpmn:DataStoreReference")&&e.parent&&b(e.parent,"bpmn:Collaboration"))){var n=e.parent,i=e.businessObject,r=qe(e),o=n&&n.businessObject,a=qe(n);b(e,"bpmn:FlowNode")&&this.updateFlowNodeRefs(i,o,t&&t.businessObject),b(e,"bpmn:DataOutputAssociation")&&(e.source?o=e.source.businessObject:o=null),b(e,"bpmn:DataInputAssociation")&&(e.target?o=e.target.businessObject:o=null),this.updateSemanticParent(i,o),b(e,"bpmn:DataObjectReference")&&i.dataObjectRef&&this.updateSemanticParent(i.dataObjectRef,o),this.updateDiParent(r,a)}},kn.prototype.updateBounds=function(e){var t=qe(e),n=kP(e);if(n){var i=oi(n,t.get("bounds"));k(n,{x:e.x+i.x,y:e.y+i.y})}var r=Xe(e)?this._getLabel(t):t,o=r.bounds;o||(o=this._bpmnFactory.createDiBounds(),r.set("bounds",o)),k(o,{x:e.x,y:e.y,width:e.width,height:e.height})},kn.prototype.updateFlowNodeRefs=function(e,t,n){if(n!==t){var i,r;b(n,"bpmn:Lane")&&(i=n.get("flowNodeRef"),Ft(i,e)),b(t,"bpmn:Lane")&&(r=t.get("flowNodeRef"),Wt(r,e))}},kn.prototype.updateDiConnection=function(e,t,n){var i=qe(e),r=qe(t),o=qe(n);i.sourceElement&&i.sourceElement.bpmnElement!==Q(t)&&(i.sourceElement=t&&r),i.targetElement&&i.targetElement.bpmnElement!==Q(n)&&(i.targetElement=n&&o)},kn.prototype.updateDiParent=function(e,t){if(t&&!b(t,"bpmndi:BPMNPlane")&&(t=t.$parent),e.$parent!==t){var n=(t||e.$parent).get("planeElement");t?(n.push(e),e.$parent=t):(Ft(n,e),e.$parent=null)}};function MP(e){for(;e&&!b(e,"bpmn:Definitions");)e=e.$parent;return e}kn.prototype.getLaneSet=function(e){var t,n;return b(e,"bpmn:Lane")?(t=e.childLaneSet,t||(t=this._bpmnFactory.create("bpmn:LaneSet"),e.childLaneSet=t,t.$parent=e),t):(b(e,"bpmn:Participant")&&(e=e.processRef),n=e.get("laneSets"),t=n[0],t||(t=this._bpmnFactory.create("bpmn:LaneSet"),t.$parent=e,n.push(t)),t)},kn.prototype.updateSemanticParent=function(e,t,n){var i;if(e.$parent!==t&&!((b(e,"bpmn:DataInput")||b(e,"bpmn:DataOutput"))&&(b(t,"bpmn:Participant")&&"processRef"in t&&(t=t.processRef),"ioSpecification"in t&&t.ioSpecification===e.$parent))){if(b(e,"bpmn:Lane"))t&&(t=this.getLaneSet(t)),i="lanes";else if(b(e,"bpmn:FlowElement")){if(t){if(b(t,"bpmn:Participant"))t=t.processRef;else if(b(t,"bpmn:Lane"))do t=t.$parent.$parent;while(b(t,"bpmn:Lane"))}i="flowElements"}else if(b(e,"bpmn:Artifact")){for(;t&&!b(t,"bpmn:Process")&&!b(t,"bpmn:SubProcess")&&!b(t,"bpmn:Collaboration");)if(b(t,"bpmn:Participant")){t=t.processRef;break}else t=t.$parent;i="artifacts"}else if(b(e,"bpmn:MessageFlow"))i="messageFlows";else if(b(e,"bpmn:Participant")){i="participants";var r=e.processRef,o;r&&(o=MP(e.$parent||t),e.$parent&&(Ft(o.get("rootElements"),r),r.$parent=null),t&&(Wt(o.get("rootElements"),r),r.$parent=o))}else b(e,"bpmn:DataOutputAssociation")?i="dataOutputAssociations":b(e,"bpmn:DataInputAssociation")&&(i="dataInputAssociations");if(!i)throw new Error(`no parent for <${e.id}> in <${t.id}>`);var a;if(e.$parent&&(a=e.$parent.get(i),Ft(a,e)),t?(a=t.get(i),a.push(e),e.$parent=t):e.$parent=null,n){var s=n.get(i);Ft(a,e),t&&(s||(s=[],t.set(i,s)),s.push(e))}}},kn.prototype.updateConnectionWaypoints=function(e){var t=qe(e);t.set("waypoint",this._bpmnFactory.createDiWaypoints(e.waypoints))},kn.prototype.updateConnection=function(e){var t=e.connection,n=Q(t),i=t.source,r=Q(i),o=t.target,a=Q(t.target),s;if(b(n,"bpmn:DataAssociation"))b(n,"bpmn:DataInputAssociation")?(n.get("sourceRef")[0]=r,s=e.parent||e.newParent||a,this.updateSemanticParent(n,a,s)):b(n,"bpmn:DataOutputAssociation")&&(s=e.parent||e.newParent||r,this.updateSemanticParent(n,r,s),n.targetRef=a);else{var c=b(n,"bpmn:SequenceFlow");n.sourceRef!==r&&(c&&(Ft(n.sourceRef&&n.sourceRef.get("outgoing"),n),r&&r.get("outgoing")&&r.get("outgoing").push(n)),n.sourceRef=r),n.targetRef!==a&&(c&&(Ft(n.targetRef&&n.targetRef.get("incoming"),n),a&&a.get("incoming")&&a.get("incoming").push(n)),n.targetRef=a)}this.updateConnectionWaypoints(t),this.updateDiConnection(t,i,o)},kn.prototype._getLabel=function(e){return e.label||(e.label=this._bpmnFactory.createDiLabel()),e.label};function In(e){return function(t){var n=t.context,i=n.shape||n.connection||n.element;b(i,"bpmn:BaseElement")&&e(t)}}function kP(e){if(b(e,"bpmn:Activity")){var t=qe(e);if(t){var n=t.get("label");if(n)return n.get("bounds")}}}function fr(e,t){Ai.call(this),this._bpmnFactory=e,this._moddle=t}j(fr,Ai),fr.$inject=["bpmnFactory","moddle"],fr.prototype._baseCreate=Ai.prototype.create,fr.prototype.create=function(e,t){if(e==="label"){var n=t.di||this._bpmnFactory.createDiLabel();return this._baseCreate(e,k({type:"label",di:n},Xo,t))}return this.createElement(e,t)},fr.prototype.createElement=function(e,t){t=k({},t||{});var n,i=t.businessObject,r=t.di;if(!i){if(!t.type)throw new Error("no shape type specified");i=this._bpmnFactory.create(t.type),Td(i)}if(!OP(r)){var o=k({},r||{},{id:i.id+"_di"});e==="root"?r=this._bpmnFactory.createDiPlane(i,o):e==="connection"?r=this._bpmnFactory.createDiEdge(i,o):r=this._bpmnFactory.createDiShape(i,o)}b(i,"bpmn:Group")&&(t=k({isFrame:!0},t)),t=IP(i,t,["processRef","isInterrupting","associationDirection","isForCompensation"]),t.isExpanded&&(t=Sp(r,t,"isExpanded")),je(i,["bpmn:Lane","bpmn:Participant"])&&(t=Sp(r,t,"isHorizontal")),b(i,"bpmn:SubProcess")&&(t.collapsed=!Ue(i,r)),b(i,"bpmn:ExclusiveGateway")&&(U(r,"isMarkerVisible")?r.isMarkerVisible===void 0&&(r.isMarkerVisible=!1):r.isMarkerVisible=!0),Ge(t.triggeredByEvent)&&(i.triggeredByEvent=t.triggeredByEvent,delete t.triggeredByEvent),Ge(t.cancelActivity)&&(i.cancelActivity=t.cancelActivity,delete t.cancelActivity);var a,s;return t.eventDefinitionType&&(a=i.get("eventDefinitions")||[],s=this._bpmnFactory.create(t.eventDefinitionType,t.eventDefinitionAttrs),t.eventDefinitionType==="bpmn:ConditionalEventDefinition"&&(s.condition=this._bpmnFactory.create("bpmn:FormalExpression")),a.push(s),s.$parent=i,i.eventDefinitions=a,delete t.eventDefinitionType),n=this.getDefaultSize(i,r),t=k({id:i.id},n,t,{businessObject:i,di:r}),this._baseCreate(e,t)},fr.prototype.getDefaultSize=function(e,t){var n=Q(e);if(t=t||qe(e),b(n,"bpmn:SubProcess"))return Ue(n,t)?{width:350,height:200}:{width:100,height:80};if(b(n,"bpmn:Task"))return{width:100,height:80};if(b(n,"bpmn:Gateway"))return{width:50,height:50};if(b(n,"bpmn:Event"))return{width:36,height:36};if(b(n,"bpmn:Participant")){var i=t.isHorizontal===void 0||t.isHorizontal===!0;return Ue(n,t)?i?{width:600,height:250}:{width:250,height:600}:i?{width:400,height:60}:{width:60,height:400}}return b(n,"bpmn:Lane")?{width:400,height:100}:b(n,"bpmn:DataObjectReference")?{width:36,height:50}:b(n,"bpmn:DataStoreReference")?{width:50,height:50}:b(n,"bpmn:TextAnnotation")?{width:100,height:30}:b(n,"bpmn:Group")?{width:300,height:300}:{width:100,height:80}},fr.prototype.createParticipantShape=function(e){return $(e)||(e={isExpanded:e}),e=k({type:"bpmn:Participant"},e||{}),e.isExpanded!==!1&&(e.processRef=this._bpmnFactory.create("bpmn:Process")),this.createShape(e)};function IP(e,t,n){return A(n,function(i){t=Sp(e,t,i)}),t}function Sp(e,t,n){return t[n]===void 0?t:(e[n]=t[n],Ut(t,[n]))}function OP(e){return je(e,["bpmndi:BPMNShape","bpmndi:BPMNEdge","bpmndi:BPMNDiagram","bpmndi:BPMNPlane"])}function _c(e,t){this._modeling=e,this._canvas=t}_c.$inject=["modeling","canvas"],_c.prototype.preExecute=function(e){var t=this._modeling,n=e.elements,i=e.alignment;A(n,function(r){var o={x:0,y:0};Ge(i.left)?o.x=i.left-r.x:Ge(i.right)?o.x=i.right-r.width-r.x:Ge(i.center)?o.x=i.center-Math.round(r.width/2)-r.x:Ge(i.top)?o.y=i.top-r.y:Ge(i.bottom)?o.y=i.bottom-r.height-r.y:Ge(i.middle)&&(o.y=i.middle-Math.round(r.height/2)-r.y),t.moveElements([r],o,r.parent)})},_c.prototype.postExecute=function(e){};function bc(e){this._modeling=e}bc.$inject=["modeling"],bc.prototype.preExecute=function(e){var t=e.source;if(!t)throw new Error("source required");var n=e.target||t.parent,i=e.shape,r=e.hints||{};i=e.shape=this._modeling.createShape(i,e.position,n,{attach:r.attach}),e.shape=i},bc.prototype.postExecute=function(e){var t=e.hints||{};BP(e.source,e.shape)||(t.connectionTarget===e.source?this._modeling.connect(e.shape,e.source,e.connection):this._modeling.connect(e.source,e.shape,e.connection))};function BP(e,t){return yn(e.outgoing,function(n){return n.target===t})}function Ec(e,t){this._canvas=e,this._layouter=t}Ec.$inject=["canvas","layouter"],Ec.prototype.execute=function(e){var t=e.connection,n=e.source,i=e.target,r=e.parent,o=e.parentIndex,a=e.hints;if(!n||!i)throw new Error("source and target required");if(!r)throw new Error("parent required");return t.source=n,t.target=i,t.waypoints||(t.waypoints=this._layouter.layoutConnection(t,a)),this._canvas.addConnection(t,r,o),t},Ec.prototype.revert=function(e){var t=e.connection;return this._canvas.removeConnection(t),t.source=null,t.target=null,t};var xc=Math.round;function Cp(e){this._modeling=e}Cp.$inject=["modeling"],Cp.prototype.preExecute=function(e){var t=e.elements,n=e.parent,i=e.parentIndex,r=e.position,o=e.hints,a=this._modeling;A(t,function(p){L(p.x)||(p.x=0),L(p.y)||(p.y=0)});var s=ne(t,function(p){return!p.hidden}),c=Xt(s);A(t,function(p){pt(p)&&(p.waypoints=Tt(p.waypoints,function(f){return{x:xc(f.x-c.x-c.width/2+r.x),y:xc(f.y-c.y-c.height/2+r.y)}})),k(p,{x:xc(p.x-c.x-c.width/2+r.x),y:xc(p.y-c.y-c.height/2+r.y)})});var l=Ya(t),u={};A(t,function(p){if(pt(p)){u[p.id]=L(i)?a.createConnection(u[p.source.id],u[p.target.id],i,p,p.parent||n,o):a.createConnection(u[p.source.id],u[p.target.id],p,p.parent||n,o);return}var f=k({},o);l.indexOf(p)===-1&&(f.autoResize=!1),Xe(p)&&(f=Ut(f,["attach"])),u[p.id]=L(i)?a.createShape(p,Nt(p,["x","y","width","height"]),p.parent||n,i,f):a.createShape(p,Nt(p,["x","y","width","height"]),p.parent||n,f)}),e.elements=on(u)};var Eg=Math.round;function dr(e){this._canvas=e}dr.$inject=["canvas"],dr.prototype.execute=function(e){var t=e.shape,n=e.position,i=e.parent,r=e.parentIndex;if(!i)throw new Error("parent required");if(!n)throw new Error("position required");return n.width!==void 0?k(t,n):k(t,{x:n.x-Eg(t.width/2),y:n.y-Eg(t.height/2)}),this._canvas.addShape(t,i,r),t},dr.prototype.revert=function(e){var t=e.shape;return this._canvas.removeShape(t),t};function Ea(e){dr.call(this,e)}j(Ea,dr),Ea.$inject=["canvas"];var NP=dr.prototype.execute;Ea.prototype.execute=function(e){var t=e.shape;return FP(t),t.labelTarget=e.labelTarget,NP.call(this,e)};var LP=dr.prototype.revert;Ea.prototype.revert=function(e){return e.shape.labelTarget=null,LP.call(this,e)};function FP(e){["width","height"].forEach(function(t){typeof e[t]=="undefined"&&(e[t]=0)})}function xa(e,t){this._canvas=e,this._modeling=t}xa.$inject=["canvas","modeling"],xa.prototype.preExecute=function(e){var t=this._modeling,n=e.connection;pr(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),pr(n.outgoing,function(i){t.removeConnection(i,{nested:!0})})},xa.prototype.execute=function(e){var t=e.connection,n=t.parent;return e.parent=n,e.parentIndex=dl(n.children,t),e.source=t.source,e.target=t.target,this._canvas.removeConnection(t),t.source=null,t.target=null,t},xa.prototype.revert=function(e){var t=e.connection,n=e.parent,i=e.parentIndex;return t.source=e.source,t.target=e.target,Wt(n.children,t,i),this._canvas.addConnection(t,n),t};function Pp(e,t){this._modeling=e,this._elementRegistry=t}Pp.$inject=["modeling","elementRegistry"],Pp.prototype.postExecute=function(e){var t=this._modeling,n=this._elementRegistry,i=e.elements;A(i,function(r){n.get(r.id)&&(r.waypoints?t.removeConnection(r):t.removeShape(r))})};function wa(e,t){this._canvas=e,this._modeling=t}wa.$inject=["canvas","modeling"],wa.prototype.preExecute=function(e){var t=this._modeling,n=e.shape;pr(n.incoming,function(i){t.removeConnection(i,{nested:!0})}),pr(n.outgoing,function(i){t.removeConnection(i,{nested:!0})}),pr(n.children,function(i){pt(i)?t.removeConnection(i,{nested:!0}):t.removeShape(i,{nested:!0})})},wa.prototype.execute=function(e){var t=this._canvas,n=e.shape,i=n.parent;return e.oldParent=i,e.oldParentIndex=dl(i.children,n),t.removeShape(n),n},wa.prototype.revert=function(e){var t=this._canvas,n=e.shape,i=e.oldParent,r=e.oldParentIndex;return Wt(i.children,n,r),t.addShape(n,i),n};function wc(e){this._modeling=e}wc.$inject=["modeling"];var xg={x:"y",y:"x"};wc.prototype.preExecute=function(e){var t=this._modeling,n=e.groups,i=e.axis,r=e.dimension;function o(m,S){m.range.min=Math.min(S[i],m.range.min),m.range.max=Math.max(S[i]+S[r],m.range.max)}function a(m){return m[i]+m[r]/2}function s(m){return m.length-1}function c(m){return m.max-m.min}function l(m,S){var x={y:0};x[i]=m-a(S),x[i]&&(x[xg[i]]=0,t.moveElements([S],x,S.parent))}var u=n[0],p=s(n),f=n[p],d,h,v=0;A(n,function(m,S){var x,E,y;if(m.elements.length<2){S&&S!==n.length-1&&(o(m,m.elements[0]),v+=c(m.range));return}x=dn(m.elements,i),E=x[0],S===p&&(E=x[s(x)]),y=a(E),m.range=null,A(x,function(w){if(l(y,w),m.range===null){m.range={min:w[i],max:w[i]+w[r]};return}o(m,w)}),S&&S!==n.length-1&&(v+=c(m.range))}),h=Math.abs(f.range.min-u.range.max),d=Math.round((h-v)/(n.length-1)),!(d<n.length-1)&&A(n,function(m,S){var x={},E;m===u||m===f||(E=n[S-1],m.range.max=0,A(m.elements,function(y,w){x[xg[i]]=0,x[i]=E.range.max-y[i]+d,m.range.min!==y[i]&&(x[i]+=y[i]-m.range.min),x[i]&&t.moveElements([y],x,y.parent),m.range.max=Math.max(y[i]+y[r],w?m.range.max:0)}))})},wc.prototype.postExecute=function(e){};function Sc(e,t){this._layouter=e,this._canvas=t}Sc.$inject=["layouter","canvas"],Sc.prototype.execute=function(e){var t=e.connection,n=t.waypoints;return k(e,{oldWaypoints:n}),t.waypoints=this._layouter.layoutConnection(t,e.hints),t},Sc.prototype.revert=function(e){var t=e.connection;return t.waypoints=e.oldWaypoints,t};function Rp(){}Rp.prototype.execute=function(e){var t=e.connection,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldParent=o,e.oldParentIndex=Ft(o.children,t),Wt(i.children,t,r),t.parent=i,A(t.waypoints,function(a){a.x+=n.x,a.y+=n.y,a.original&&(a.original.x+=n.x,a.original.y+=n.y)}),t},Rp.prototype.revert=function(e){var t=e.connection,n=t.parent,i=e.oldParent,r=e.oldParentIndex,o=e.delta;return Ft(n.children,t),Wt(i.children,t,r),t.parent=i,A(t.waypoints,function(a){a.x-=o.x,a.y-=o.y,a.original&&(a.original.x-=o.x,a.original.y-=o.y)}),t};function Ap(){this.allShapes={},this.allConnections={},this.enclosedElements={},this.enclosedConnections={},this.topLevel={}}Ap.prototype.add=function(e,t){return this.addAll([e],t)},Ap.prototype.addAll=function(e,t){var n=J0(e,!!t,this);return k(this,n),this};function Sa(e){this._modeling=e}Sa.prototype.moveRecursive=function(e,t,n){return e?this.moveClosure(this.getClosure(e),t,n):[]},Sa.prototype.moveClosure=function(e,t,n,i,r){var o=this._modeling,a=e.allShapes,s=e.allConnections,c=e.enclosedConnections,l=e.topLevel,u=!1;r&&r.parent===n&&(u=!0),A(a,function(p){o.moveShape(p,t,l[p.id]&&!u&&n,{recurse:!1,layout:!1})}),A(s,function(p){var f=!!a[p.source.id],d=!!a[p.target.id];c[p.id]&&f&&d?o.moveConnection(p,t,l[p.id]&&!u&&n):o.layoutConnection(p,{connectionStart:f&&$u(p,p.source,t),connectionEnd:d&&zu(p,p.target,t)})})},Sa.prototype.getClosure=function(e){return new Ap().addAll(e,!0)};function Cc(e){this._helper=new Sa(e)}Cc.$inject=["modeling"],Cc.prototype.preExecute=function(e){e.closure=this._helper.getClosure(e.shapes)},Cc.prototype.postExecute=function(e){var t=e.hints,n;t&&t.primaryShape&&(n=t.primaryShape,t.oldParent=n.parent),this._helper.moveClosure(e.closure,e.delta,e.newParent,e.newHost,n)};function Ur(e){this._modeling=e,this._helper=new Sa(e)}Ur.$inject=["modeling"],Ur.prototype.execute=function(e){var t=e.shape,n=e.delta,i=e.newParent||t.parent,r=e.newParentIndex,o=t.parent;return e.oldBounds=Nt(t,["x","y","width","height"]),e.oldParent=o,e.oldParentIndex=Ft(o.children,t),Wt(i.children,t,r),k(t,{parent:i,x:t.x+n.x,y:t.y+n.y}),t},Ur.prototype.postExecute=function(e){var t=e.shape,n=e.delta,i=e.hints,r=this._modeling;i.layout!==!1&&(A(t.incoming,function(o){r.layoutConnection(o,{connectionEnd:zu(o,t,n)})}),A(t.outgoing,function(o){r.layoutConnection(o,{connectionStart:$u(o,t,n)})})),i.recurse!==!1&&this.moveChildren(e)},Ur.prototype.revert=function(e){var t=e.shape,n=e.oldParent,i=e.oldParentIndex,r=e.delta;return Wt(n.children,t,i),k(t,{parent:n,x:t.x-r.x,y:t.y-r.y}),t},Ur.prototype.moveChildren=function(e){var t=e.delta,n=e.shape;this._helper.moveRecursive(n.children,t,null)},Ur.prototype.getNewParent=function(e){return e.newParent||e.shape.parent};function Ca(e){this._modeling=e}Ca.$inject=["modeling"],Ca.prototype.execute=function(e){var t=e.newSource,n=e.newTarget,i=e.connection,r=e.dockingOrPoints;if(!t&&!n)throw new Error("newSource or newTarget required");return se(r)&&(e.oldWaypoints=i.waypoints,i.waypoints=r),t&&(e.oldSource=i.source,i.source=t),n&&(e.oldTarget=i.target,i.target=n),i},Ca.prototype.postExecute=function(e){var t=e.connection,n=e.newSource,i=e.newTarget,r=e.dockingOrPoints,o=e.hints||{},a={};o.connectionStart&&(a.connectionStart=o.connectionStart),o.connectionEnd&&(a.connectionEnd=o.connectionEnd),o.layoutConnection!==!1&&(n&&(!i||o.docking==="source")&&(a.connectionStart=a.connectionStart||wg(se(r)?r[0]:r)),i&&(!n||o.docking==="target")&&(a.connectionEnd=a.connectionEnd||wg(se(r)?r[r.length-1]:r)),o.newWaypoints&&(a.waypoints=o.newWaypoints),this._modeling.layoutConnection(t,a))},Ca.prototype.revert=function(e){var t=e.oldSource,n=e.oldTarget,i=e.oldWaypoints,r=e.connection;return t&&(r.source=t),n&&(r.target=n),i&&(r.waypoints=i),r};function wg(e){return e.original||e}function ji(e,t){this._modeling=e,this._rules=t}ji.$inject=["modeling","rules"],ji.prototype.preExecute=function(e){var t=this,n=this._modeling,i=this._rules,r=e.oldShape,o=e.newData,a=e.hints||{},s;function c(h,v,m){return i.allowed("connection.reconnect",{connection:m,source:h,target:v})}var l={x:o.x,y:o.y},u={x:r.x,y:r.y,width:r.width,height:r.height};s=e.newShape=e.newShape||t.createShape(o,l,r.parent,a),r.host&&n.updateAttachment(s,r.host);var p;a.moveChildren!==!1&&(p=r.children.slice(),n.moveElements(p,{x:0,y:0},s,a));var f=r.incoming.slice(),d=r.outgoing.slice();A(f,function(h){var v=h.source,m=c(v,s,h);m&&t.reconnectEnd(h,s,ic(h,s,u),a)}),A(d,function(h){var v=h.target,m=c(s,v,h);m&&t.reconnectStart(h,s,nc(h,s,u),a)})},ji.prototype.postExecute=function(e){var t=e.oldShape;this._modeling.removeShape(t)},ji.prototype.execute=function(e){},ji.prototype.revert=function(e){},ji.prototype.createShape=function(e,t,n,i){return this._modeling.createShape(e,t,n,i)},ji.prototype.reconnectStart=function(e,t,n,i){this._modeling.reconnectStart(e,t,n,i)},ji.prototype.reconnectEnd=function(e,t,n,i){this._modeling.reconnectEnd(e,t,n,i)};function Pa(e){this._modeling=e}Pa.$inject=["modeling"],Pa.prototype.execute=function(e){var t=e.shape,n=e.newBounds,i=e.minBounds;if(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)throw new Error("newBounds must have {x, y, width, height} properties");if(i&&(n.width<i.width||n.height<i.height))throw new Error("width and height cannot be less than minimum height and width");if(!i&&n.width<10||n.height<10)throw new Error("width and height cannot be less than 10px");return e.oldBounds={width:t.width,height:t.height,x:t.x,y:t.y},k(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t},Pa.prototype.postExecute=function(e){var t=this._modeling,n=e.shape,i=e.oldBounds,r=e.hints||{};r.layout!==!1&&(A(n.incoming,function(o){t.layoutConnection(o,{connectionEnd:ic(o,n,i)})}),A(n.outgoing,function(o){t.layoutConnection(o,{connectionStart:nc(o,n,i)})}))},Pa.prototype.revert=function(e){var t=e.shape,n=e.oldBounds;return k(t,{width:n.width,height:n.height,x:n.x,y:n.y}),t};function hr(e){this._modeling=e}hr.$inject=["modeling"],hr.prototype.preExecute=function(e){var t=e.delta,n=e.direction,i=e.movingShapes,r=e.resizingShapes,o=e.start,a={};this.moveShapes(i,t),A(r,function(s){a[s.id]=$P(s)}),this.resizeShapes(r,t,n),this.updateConnectionWaypoints(dP(i,r),t,n,o,i,r,a)},hr.prototype.execute=function(){},hr.prototype.revert=function(){},hr.prototype.moveShapes=function(e,t){var n=this;A(e,function(i){n._modeling.moveShape(i,t,null,{autoResize:!1,layout:!1,recurse:!1})})},hr.prototype.resizeShapes=function(e,t,n){var i=this;A(e,function(r){var o=hP(r,n,t);i._modeling.resizeShape(r,o,null,{attachSupport:!1,autoResize:!1,layout:!1})})},hr.prototype.updateConnectionWaypoints=function(e,t,n,i,r,o,a){var s=this,c=r.concat(o);A(e,function(l){var u=l.source,p=l.target,f=jP(l),d=Cg(n),h={};mr(c,u)&&mr(c,p)?(f=Tt(f,function(v){return Pg(v,i,n)&&(v[d]=v[d]+t[d]),v.original&&Pg(v.original,i,n)&&(v.original[d]=v.original[d]+t[d]),v}),s._modeling.updateWaypoints(l,f,{labelBehavior:!1})):(mr(c,u)||mr(c,p))&&(mr(r,u)?h.connectionStart=$u(l,u,t):mr(r,p)?h.connectionEnd=zu(l,p,t):mr(o,u)?h.connectionStart=nc(l,u,a[u.id]):mr(o,p)&&(h.connectionEnd=ic(l,p,a[p.id])),s._modeling.layoutConnection(l,h))})};function Sg(e){return k({},e)}function jP(e){return Tt(e.waypoints,function(t){return t=Sg(t),t.original&&(t.original=Sg(t.original)),t})}function Cg(e){switch(e){case"n":return"y";case"w":return"x";case"s":return"y";case"e":return"x"}}function Pg(e,t,n){var i=Cg(n);if(/e|s/.test(n))return e[i]>t;if(/n|w/.test(n))return e[i]<t}function mr(e,t){return e.indexOf(t)!==-1}function $P(e){return{x:e.x,y:e.y,height:e.height,width:e.width}}function Pc(e){this._modeling=e}Pc.$inject=["modeling"],Pc.prototype.execute=function(e){var t=e.shape,n=t.children;e.oldChildrenVisibility=Rg(n),t.collapsed=!t.collapsed;var i=Ag(n,t.collapsed);return[t].concat(i)},Pc.prototype.revert=function(e){var t=e.shape,n=e.oldChildrenVisibility,i=t.children,r=Tg(i,n);return t.collapsed=!t.collapsed,[t].concat(r)};function Rg(e){var t={};return A(e,function(n){t[n.id]=n.hidden,n.children&&(t=k({},t,Rg(n.children)))}),t}function Ag(e,t){var n=[];return A(e,function(i){i.hidden=t,n=n.concat(i),i.children&&(n=n.concat(Ag(i.children,i.collapsed||t)))}),n}function Tg(e,t){var n=[];return A(e,function(i){i.hidden=t[i.id],n=n.concat(i),i.children&&(n=n.concat(Tg(i.children,t)))}),n}function Rc(e){this._modeling=e}Rc.$inject=["modeling"],Rc.prototype.execute=function(e){var t=e.shape,n=e.newHost,i=t.host;return e.oldHost=i,e.attacherIdx=Dg(i,t),Mg(n,t),t.host=n,t},Rc.prototype.revert=function(e){var t=e.shape,n=e.newHost,i=e.oldHost,r=e.attacherIdx;return t.host=i,Dg(n,t),Mg(i,t,r),t};function Dg(e,t){return Ft(e&&e.attachers,t)}function Mg(e,t,n){if(e){var i=e.attachers;i||(e.attachers=i=[]),Wt(i,t,n)}}function Tp(){}Tp.prototype.execute=function(e){var t=e.connection,n=e.newWaypoints;return e.oldWaypoints=t.waypoints,t.waypoints=n,t},Tp.prototype.revert=function(e){var t=e.connection,n=e.oldWaypoints;return t.waypoints=n,t};function ct(e,t,n){this._eventBus=e,this._elementFactory=t,this._commandStack=n;var i=this;e.on("diagram.init",function(){i.registerHandlers(n)})}ct.$inject=["eventBus","elementFactory","commandStack"],ct.prototype.getHandlers=function(){return{"shape.append":bc,"shape.create":dr,"shape.delete":wa,"shape.move":Ur,"shape.resize":Pa,"shape.replace":ji,"shape.toggleCollapse":Pc,spaceTool:hr,"label.create":Ea,"connection.create":Ec,"connection.delete":xa,"connection.move":Rp,"connection.layout":Sc,"connection.updateWaypoints":Tp,"connection.reconnect":Ca,"elements.create":Cp,"elements.move":Cc,"elements.delete":Pp,"elements.distribute":wc,"elements.align":_c,"element.updateAttachment":Rc}},ct.prototype.registerHandlers=function(e){A(this.getHandlers(),function(t,n){e.registerHandler(n,t)})},ct.prototype.moveShape=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=null);var o={shape:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("shape.move",o)},ct.prototype.updateAttachment=function(e,t){var n={shape:e,newHost:t};this._commandStack.execute("element.updateAttachment",n)},ct.prototype.moveElements=function(e,t,n,i){i=i||{};var r=i.attach,o=n,a;r===!0?(a=n,o=n.parent):r===!1&&(a=null);var s={shapes:e,delta:t,newParent:o,newHost:a,hints:i};this._commandStack.execute("elements.move",s)},ct.prototype.moveConnection=function(e,t,n,i,r){typeof i=="object"&&(r=i,i=void 0);var o={connection:e,delta:t,newParent:n,newParentIndex:i,hints:r||{}};this._commandStack.execute("connection.move",o)},ct.prototype.layoutConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.layout",n)},ct.prototype.createConnection=function(e,t,n,i,r,o){typeof n=="object"&&(o=r,r=i,i=n,n=void 0),i=this._create("connection",i);var a={source:e,target:t,parent:r,parentIndex:n,connection:i,hints:o};return this._commandStack.execute("connection.create",a),a.connection},ct.prototype.createShape=function(e,t,n,i,r){typeof i!="number"&&(r=i,i=void 0),r=r||{};var o=r.attach,a,s;e=this._create("shape",e),o?(a=n.parent,s=n):a=n;var c={position:t,shape:e,parent:a,parentIndex:i,host:s,hints:r};return this._commandStack.execute("shape.create",c),c.shape},ct.prototype.createElements=function(e,t,n,i,r){se(e)||(e=[e]),typeof i!="number"&&(r=i,i=void 0),r=r||{};var o={position:t,elements:e,parent:n,parentIndex:i,hints:r};return this._commandStack.execute("elements.create",o),o.elements},ct.prototype.createLabel=function(e,t,n,i){n=this._create("label",n);var r={labelTarget:e,position:t,parent:i||e.parent,shape:n};return this._commandStack.execute("label.create",r),r.shape},ct.prototype.appendShape=function(e,t,n,i,r){r=r||{},t=this._create("shape",t);var o={source:e,position:n,target:i,shape:t,connection:r.connection,connectionParent:r.connectionParent,hints:r};return this._commandStack.execute("shape.append",o),o.shape},ct.prototype.removeElements=function(e){var t={elements:e};this._commandStack.execute("elements.delete",t)},ct.prototype.distributeElements=function(e,t,n){var i={groups:e,axis:t,dimension:n};this._commandStack.execute("elements.distribute",i)},ct.prototype.removeShape=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.delete",n)},ct.prototype.removeConnection=function(e,t){var n={connection:e,hints:t||{}};this._commandStack.execute("connection.delete",n)},ct.prototype.replaceShape=function(e,t,n){var i={oldShape:e,newData:t,hints:n||{}};return this._commandStack.execute("shape.replace",i),i.newShape},ct.prototype.alignElements=function(e,t){var n={elements:e,alignment:t};this._commandStack.execute("elements.align",n)},ct.prototype.resizeShape=function(e,t,n,i){var r={shape:e,newBounds:t,minBounds:n,hints:i};this._commandStack.execute("shape.resize",r)},ct.prototype.createSpace=function(e,t,n,i,r){var o={delta:n,direction:i,movingShapes:e,resizingShapes:t,start:r};this._commandStack.execute("spaceTool",o)},ct.prototype.updateWaypoints=function(e,t,n){var i={connection:e,newWaypoints:t,hints:n||{}};this._commandStack.execute("connection.updateWaypoints",i)},ct.prototype.reconnect=function(e,t,n,i,r){var o={connection:e,newSource:t,newTarget:n,dockingOrPoints:i,hints:r||{}};this._commandStack.execute("connection.reconnect",o)},ct.prototype.reconnectStart=function(e,t,n,i){i||(i={}),this.reconnect(e,t,e.target,n,k(i,{docking:"source"}))},ct.prototype.reconnectEnd=function(e,t,n,i){i||(i={}),this.reconnect(e,e.source,t,n,k(i,{docking:"target"}))},ct.prototype.connect=function(e,t,n,i){return this.createConnection(e,t,n||{},e.parent,i)},ct.prototype._create=function(e,t){return M_(t)?t:this._elementFactory.create(e,t)},ct.prototype.toggleCollapse=function(e,t){var n={shape:e,hints:t||{}};this._commandStack.execute("shape.toggleCollapse",n)};function Ra(e){this._elementRegistry=e}Ra.$inject=["elementRegistry"],Ra.prototype.execute=function(e){var t=e.element,n=e.moddleElement,i=e.properties;if(!n)throw new Error("<moddleElement> required");var r=e.changed||this._getVisualReferences(n).concat(t),o=e.oldProperties||zP(n,ti(i));return kg(n,i),e.oldProperties=o,e.changed=r,r},Ra.prototype.revert=function(e){var t=e.oldProperties,n=e.moddleElement,i=e.changed;return kg(n,t),i},Ra.prototype._getVisualReferences=function(e){var t=this._elementRegistry;return b(e,"bpmn:DataObject")?HP(e,t):[]};function zP(e,t){return Ot(t,function(n,i){return n[i]=e.get(i),n},{})}function kg(e,t){A(t,function(n,i){e.set(i,n)})}function HP(e,t){return t.filter(function(n){return b(n,"bpmn:DataObjectReference")&&Q(n).dataObjectRef===e})}var Aa="default",$i="id",Ig="di",GP={width:0,height:0};function Ta(e,t,n,i){this._elementRegistry=e,this._moddle=t,this._modeling=n,this._textRenderer=i}Ta.$inject=["elementRegistry","moddle","modeling","textRenderer"],Ta.prototype.execute=function(e){var t=e.element,n=[t];if(!t)throw new Error("element required");var i=this._elementRegistry,r=this._moddle.ids,o=t.businessObject,a=YP(e.properties),s=e.oldProperties||UP(t,a);return Og(a,o)&&(r.unclaim(o[$i]),i.updateId(t,a[$i]),r.claim(a[$i],o)),Aa in a&&(a[Aa]&&n.push(i.get(a[Aa].id)),o[Aa]&&n.push(i.get(o[Aa].id))),Bg(t,a),e.oldProperties=s,e.changed=n,n},Ta.prototype.postExecute=function(e){var t=e.element,n=t.label,i=n&&Q(n).name;if(i){var r=this._textRenderer.getExternalLabelBounds(n,i);this._modeling.resizeShape(n,r,GP)}},Ta.prototype.revert=function(e){var t=e.element,n=e.properties,i=e.oldProperties,r=t.businessObject,o=this._elementRegistry,a=this._moddle.ids;return Bg(t,i),Og(n,r)&&(a.unclaim(n[$i]),o.updateId(t,i[$i]),a.claim(i[$i],r)),e.changed};function Og(e,t){return $i in e&&e[$i]!==t[$i]}function UP(e,t){var n=ti(t),i=e.businessObject,r=qe(e);return Ot(n,function(o,a){return a!==Ig?o[a]=i.get(a):o[a]=VP(r,ti(t.di)),o},{})}function VP(e,t){return Ot(t,function(n,i){return n[i]=e&&e.get(i),n},{})}function Bg(e,t){var n=e.businessObject,i=qe(e);A(t,function(r,o){o!==Ig?n.set(o,r):i&&ZP(i,r)})}function ZP(e,t){A(t,function(n,i){e.set(i,n)})}var WP=["default"];function YP(e){var t=k({},e);return WP.forEach(function(n){n in e&&(t[n]=Q(t[n]))}),t}function Ac(e,t){this._canvas=e,this._modeling=t}Ac.$inject=["canvas","modeling"],Ac.prototype.execute=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=t.getRootElement(),o=r.businessObject,a=o.$parent,s=qe(r);return t.setRootElement(n),t.removeRootElement(r),Wt(a.rootElements,i),i.$parent=a,Ft(a.rootElements,o),o.$parent=null,r.di=null,s.bpmnElement=i,n.di=s,e.oldRoot=r,[]},Ac.prototype.revert=function(e){var t=this._canvas,n=e.newRoot,i=n.businessObject,r=e.oldRoot,o=r.businessObject,a=i.$parent,s=qe(n);return t.setRootElement(r),t.removeRootElement(n),Ft(a.rootElements,i),i.$parent=null,Wt(a.rootElements,o),o.$parent=a,n.di=null,s.bpmnElement=o,r.di=s,[]};function Dp(e,t){this._modeling=e,this._spaceTool=t}Dp.$inject=["modeling","spaceTool"],Dp.prototype.preExecute=function(e){var t=this._spaceTool,n=this._modeling,i=e.shape,r=e.location,o=Xn(i),a=o===i,s=a?i:i.parent,c=sr(s),l=qt(i);if(l?r==="left"?r="top":r==="right"&&(r="bottom"):r==="top"?r="left":r==="bottom"&&(r="right"),!c.length){var u=l?{x:i.x+Kn,y:i.y,width:i.width-Kn,height:i.height}:{x:i.x,y:i.y+Kn,width:i.width,height:i.height-Kn};n.createShape({type:"bpmn:Lane",isHorizontal:l},u,s)}var p=[];Pr(o,function(y){return p.push(y),y.label&&p.push(y.label),y===i?[]:ne(y.children,function(w){return w!==i})});var f,d,h,v,m;r==="top"?(f=-120,d=i.y,h=d+10,v="n",m="y"):r==="left"?(f=-120,d=i.x,h=d+10,v="w",m="x"):r==="bottom"?(f=120,d=i.y+i.height,h=d-10,v="s",m="y"):r==="right"&&(f=120,d=i.x+i.width,h=d-10,v="e",m="x");var S=t.calculateAdjustments(p,m,f,h),x=l?{x:0,y:f}:{x:f,y:0};t.makeSpace(S.movingShapes,S.resizingShapes,x,v,h);var E=l?{x:i.x+(a?Kn:0),y:d-(r==="top"?120:0),width:i.width-(a?Kn:0),height:120}:{x:d-(r==="left"?120:0),y:i.y+(a?Kn:0),width:120,height:i.height-(a?Kn:0)};e.newLane=n.createShape({type:"bpmn:Lane",isHorizontal:l},E,s)};function Mp(e){this._modeling=e}Mp.$inject=["modeling"],Mp.prototype.preExecute=function(e){var t=this._modeling,n=e.shape,i=e.count,r=sr(n),o=r.length;if(o>i)throw new Error(`more than <${i}> child lanes`);var a=qt(n),s=a?n.height:n.width,c=Math.round(s/i),l,u,p,f;for(f=0;f<i;f++)f===i-1?l=s-c*f:l=c,u=a?{x:n.x+Kn,y:n.y+f*c,width:n.width-Kn,height:l}:{x:n.x+f*c,y:n.y+Kn,width:l,height:n.height-Kn},f<o?t.resizeShape(r[f],u):(p={type:"bpmn:Lane",isHorizontal:a},t.createShape(p,u,n))};function Da(e,t){this._modeling=e,this._spaceTool=t}Da.$inject=["modeling","spaceTool"],Da.prototype.preExecute=function(e){var t=e.shape,n=e.newBounds,i=e.balanced;i!==!1?this.resizeBalanced(t,n):this.resizeSpace(t,n)},Da.prototype.resizeBalanced=function(e,t){var n=this._modeling,i=xS(e,t);n.resizeShape(e,t),i.forEach(function(r){n.resizeShape(r.shape,r.newBounds)})},Da.prototype.resizeSpace=function(e,t){var n=this._spaceTool,i=Ee(e),r=Ee(t),o=Zm(r,i),a=Xn(e),s=[],c=[];Pr(a,function(h){return s.push(h),(b(h,"bpmn:Lane")||b(h,"bpmn:Participant"))&&c.push(h),h.children});var l,u,p,f,d;(o.bottom||o.top)&&(l=o.bottom||o.top,u=e.y+(o.bottom?e.height:0)+(o.bottom?-10:10),p=o.bottom?"s":"n",f=o.top>0||o.bottom<0?-l:l,d=n.calculateAdjustments(s,"y",f,u),n.makeSpace(d.movingShapes,d.resizingShapes,{x:0,y:l},p)),(o.left||o.right)&&(l=o.right||o.left,u=e.x+(o.right?e.width:0)+(o.right?-10:100),p=o.right?"e":"w",f=o.left>0||o.right<0?-l:l,d=n.calculateAdjustments(c,"x",f,u),n.makeSpace(d.movingShapes,d.resizingShapes,{x:l,y:0},p))};var Ma="flowNodeRef",kp="lanes";function ka(e){this._elementRegistry=e}ka.$inject=["elementRegistry"],ka.prototype._computeUpdates=function(e,t){var n=[],i=[],r={},o=[];function a(u,p){var f=Ee(p),d={x:u.x+u.width/2,y:u.y+u.height/2};return d.x>f.left&&d.x<f.right&&d.y>f.top&&d.y<f.bottom}function s(u){n.indexOf(u)===-1&&(o.push(u),n.push(u))}function c(u){var p=Xn(u);return r[p.id]||(r[p.id]=Qs(p)),r[p.id]}function l(u){if(!u.parent)return[];var p=c(u);return p.filter(function(f){return a(u,f)}).map(function(f){return f.businessObject})}return t.forEach(function(u){var p=Xn(u);if(!(!p||n.indexOf(p)!==-1)){var f=p.children.filter(function(d){return b(d,"bpmn:FlowNode")});f.forEach(s),n.push(p)}}),e.forEach(s),o.forEach(function(u){var p=u.businessObject,f=p.get(kp),d=f.slice(),h=l(u);i.push({flowNode:p,remove:d,add:h})}),t.forEach(function(u){var p=u.businessObject;u.parent||p.get(Ma).forEach(function(f){i.push({flowNode:f,remove:[p],add:[]})})}),i},ka.prototype.execute=function(e){var t=e.updates;return t||(t=e.updates=this._computeUpdates(e.flowNodeShapes,e.laneShapes)),t.forEach(function(n){var i=n.flowNode,r=i.get(kp);n.remove.forEach(function(o){Ft(r,o),Ft(o.get(Ma),i)}),n.add.forEach(function(o){Wt(r,o),Wt(o.get(Ma),i)})}),[]},ka.prototype.revert=function(e){var t=e.updates;return t.forEach(function(n){var i=n.flowNode,r=i.get(kp);n.add.forEach(function(o){Ft(r,o),Ft(o.get(Ma),i)}),n.remove.forEach(function(o){Wt(r,o),Wt(o.get(Ma),i)})}),[]};function Tc(e){this._moddle=e}Tc.$inject=["moddle"],Tc.prototype.execute=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.claim(n,i):t.unclaim(n),[]},Tc.prototype.revert=function(e){var t=this._moddle.ids,n=e.id,i=e.element,r=e.claiming;return r?t.unclaim(n):t.claim(n,i),[]};var KP={fill:void 0,stroke:void 0};function Ip(e){this._commandStack=e,this._normalizeColor=function(t){if(t){if(ee(t)){var n=XP(t);if(n)return n}throw new Error(`invalid color value: ${t}`)}}}Ip.$inject=["commandStack"],Ip.prototype.postExecute=function(e){var t=e.elements,n=e.colors||KP,i=this,r={};"fill"in n&&k(r,{"background-color":this._normalizeColor(n.fill)}),"stroke"in n&&k(r,{"border-color":this._normalizeColor(n.stroke)}),A(t,function(o){var a=pt(o)?Nt(r,["border-color"]):r,s=qe(o);if(qP(a),Xe(o))i._commandStack.execute("element.updateModdleProperties",{element:o,moddleElement:s.label,properties:{color:r["border-color"]}});else{if(!je(s,["bpmndi:BPMNEdge","bpmndi:BPMNShape"]))return;i._commandStack.execute("element.updateProperties",{element:o,properties:{di:a}})}})};function XP(e){var t=document.createElement("canvas").getContext("2d");return t.fillStyle="transparent",t.fillStyle=e,/^#[0-9a-fA-F]{6}$/.test(t.fillStyle)?t.fillStyle:null}function qP(e){"border-color"in e&&(e.stroke=e["border-color"]),"background-color"in e&&(e.fill=e["background-color"])}var QP={width:0,height:0};function Ng(e,t,n){function i(c,l){var u=c.label||c,p=c.labelTarget||c;return OE(u,l,p!==u),[u,p]}function r(c){var l=c.element,u=l.businessObject,p=c.newLabel;if(!Xe(l)&&Mr(l)&&!ls(l)&&!Lg(p)){var f=7,d=Ml(l);d={x:d.x,y:d.y+f},e.createLabel(l,d,{id:u.id+"_label",businessObject:u,di:l.di})}}function o(c){return c.oldLabel=jn(c.element),i(c.element,c.newLabel)}function a(c){return i(c.element,c.oldLabel)}function s(c){var l=c.element,u=l.label||l,p=c.newLabel,f=c.newBounds,d=c.hints||{};if(!(!Xe(u)&&!b(u,"bpmn:TextAnnotation"))){if(Xe(u)&&Lg(p)){d.removeShape!==!1&&e.removeShape(u,{unsetLabel:!1});return}var h=jn(l);typeof f=="undefined"&&(f=t.getExternalLabelBounds(u,h)),f&&e.resizeShape(u,f,QP)}}this.preExecute=r,this.execute=o,this.revert=a,this.postExecute=s}Ng.$inject=["modeling","textRenderer","bpmnFactory"];function Lg(e){return!e||!e.trim()}function gn(e,t,n,i){ct.call(this,e,t,n),this._bpmnRules=i}j(gn,ct),gn.$inject=["eventBus","elementFactory","commandStack","bpmnRules"],gn.prototype.getHandlers=function(){var e=ct.prototype.getHandlers.call(this);return e["element.updateModdleProperties"]=Ra,e["element.updateProperties"]=Ta,e["canvas.updateRoot"]=Ac,e["lane.add"]=Dp,e["lane.resize"]=Da,e["lane.split"]=Mp,e["lane.updateRefs"]=ka,e["id.updateClaim"]=Tc,e["element.setColor"]=Ip,e["element.updateLabel"]=Ng,e},gn.prototype.updateLabel=function(e,t,n,i){this._commandStack.execute("element.updateLabel",{element:e,newLabel:t,newBounds:n,hints:i||{}})},gn.prototype.connect=function(e,t,n,i){var r=this._bpmnRules;if(n||(n=r.canConnect(e,t)),!!n)return this.createConnection(e,t,n,e.parent,i)},gn.prototype.updateModdleProperties=function(e,t,n){this._commandStack.execute("element.updateModdleProperties",{element:e,moddleElement:t,properties:n})},gn.prototype.updateProperties=function(e,t){this._commandStack.execute("element.updateProperties",{element:e,properties:t})},gn.prototype.resizeLane=function(e,t,n){this._commandStack.execute("lane.resize",{shape:e,newBounds:t,balanced:n})},gn.prototype.addLane=function(e,t){var n={shape:e,location:t};return this._commandStack.execute("lane.add",n),n.newLane},gn.prototype.splitLane=function(e,t){this._commandStack.execute("lane.split",{shape:e,count:t})},gn.prototype.makeCollaboration=function(){var e=this._create("root",{type:"bpmn:Collaboration"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},gn.prototype.makeProcess=function(){var e=this._create("root",{type:"bpmn:Process"}),t={newRoot:e};return this._commandStack.execute("canvas.updateRoot",t),e},gn.prototype.updateLaneRefs=function(e,t){this._commandStack.execute("lane.updateRefs",{flowNodeShapes:e,laneShapes:t})},gn.prototype.claimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t,claiming:!0})},gn.prototype.unclaimId=function(e,t){this._commandStack.execute("id.updateClaim",{id:e,element:t})},gn.prototype.setColor=function(e,t){e.length||(e=[e]),this._commandStack.execute("element.setColor",{elements:e,colors:t})};function Fg(){}Fg.prototype.layoutConnection=function(e,t){return t=t||{},[t.connectionStart||Pe(t.source||e.source),t.connectionEnd||Pe(t.target||e.target)]};var Dc=20,JP=5,Mc=Math.round,jg=20,eR={"h:h":20,"v:v":20,"h:v":-10,"v:h":-10};function tR(e,t){return!{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/./,v:/./}[t].test(e)}function nR(e,t){return{t:/top/,r:/right/,b:/bottom/,l:/left/,h:/left|right/,v:/top|bottom/}[e].test(t)}function $g(e,t,n){var i=hn(t,e,JP),r=n.split(":")[0],o=Mc((t.x-e.x)/2+e.x),a=Mc((t.y-e.y)/2+e.y),s,c,l=nR(r,i),u=/h|r|l/.test(r),p=!1,f=!1;return l?(s=u?{x:o,y:e.y}:{x:e.x,y:a},c=u?"h:h":"v:v"):(p=tR(i,r),c=u?"h:v":"v:h",p?u?(f=a===e.y,s={x:e.x+Dc*(/l/.test(r)?-1:1),y:f?a+Dc:a}):(f=o===e.x,s={x:f?o+Dc:o,y:e.y+Dc*(/t/.test(r)?-1:1)}):s={x:o,y:a}),{waypoints:Op(e,s,c).concat(s),directions:c,turnNextDirections:f}}function iR(e,t,n){return $g(e,t,n)}function rR(e,t,n){var i=$g(t,e,zg(n));return{waypoints:i.waypoints.slice().reverse(),directions:zg(i.directions),turnNextDirections:i.turnNextDirections}}function oR(e,t){var n=e.directions.split(":")[1],i=t.directions.split(":")[0];e.turnNextDirections&&(n=n=="h"?"v":"h"),t.turnNextDirections&&(i=i=="h"?"v":"h");var r=n+":"+i,o=Op(e.waypoints[e.waypoints.length-1],t.waypoints[0],r);return{waypoints:o,directions:r}}function zg(e){return e.split(":").reverse().join(":")}function aR(e,t,n){var i=Mc((t.x-e.x)/2+e.x),r=Mc((t.y-e.y)/2+e.y);if(n==="h:v")return[{x:t.x,y:e.y}];if(n==="v:h")return[{x:e.x,y:t.y}];if(n==="h:h")return[{x:i,y:e.y},{x:i,y:t.y}];if(n==="v:v")return[{x:e.x,y:r},{x:t.x,y:r}];throw new Error("invalid directions: can only handle varians of [hv]:[hv]")}function Op(e,t,n){if(n=n||"h:h",!mR(n))throw new Error("unknown directions: <"+n+">: must be specified as <start>:<end> with start/end in { h,v,t,r,b,l }");if(Gg(n)){var i=iR(e,t,n),r=rR(e,t,n),o=oR(i,r);return[].concat(i.waypoints,o.waypoints,r.waypoints)}return aR(e,t,n)}function sR(e,t,n){var i=Op(e,t,n);return i.unshift(e),i.push(t),Vg(i)}function cR(e,t,n,i,r){var o=r&&r.preferredLayouts||[],a=Cn(o,"straight")[0]||"h:h",s=eR[a]||0,c=hn(e,t,s),l=hR(c,a);n=n||Pe(e),i=i||Pe(t);var u=l.split(":"),p=Ug(n,e,u[0],vR(c)),f=Ug(i,t,u[1],c);return sR(p,f,l)}function lR(e,t,n,i,r,o){se(n)&&(r=n,o=i,n=Pe(e),i=Pe(t)),o=k({preferredLayouts:[]},o),r=r||[];var a=o.preferredLayouts,s=a.indexOf("straight")!==-1,c;return c=s&&pR(e,t,n,i,o),c||(c=o.connectionEnd&&dR(t,e,i,r),c)||(c=o.connectionStart&&fR(e,t,n,r),c)?c:!o.connectionStart&&!o.connectionEnd&&r&&r.length?r:cR(e,t,n,i,o)}function uR(e,t,n){return e>=t&&e<=n}function Hg(e,t,n){var i={x:"width",y:"height"};return uR(t[e],n[e],n[e]+n[i[e]])}function pR(e,t,n,i,r){var o={},a,s;return s=hn(e,t),/^(top|bottom|left|right)$/.test(s)?(/top|bottom/.test(s)&&(a="x"),/left|right/.test(s)&&(a="y"),r.preserveDocking==="target"?Hg(a,i,e)?(o[a]=i[a],[{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y,original:{x:o.x!==void 0?o.x:n.x,y:o.y!==void 0?o.y:n.y}},{x:i.x,y:i.y}]):null:Hg(a,n,t)?(o[a]=n[a],[{x:n.x,y:n.y},{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y,original:{x:o.x!==void 0?o.x:i.x,y:o.y!==void 0?o.y:i.y}}]):null):null}function fR(e,t,n,i){return Bp(e,t,n,i)}function dR(e,t,n,i){var r=i.slice().reverse();return r=Bp(e,t,n,r),r?r.reverse():null}function Bp(e,t,n,i){function r(u){return u.length<3?!0:u.length>4?!1:!!te(u,function(p,f){var d=u[f-1];return d&&Ho(p,d)<3})}function o(u,p,f){var d=Pi(p,u);switch(d){case"v":return{x:f.x,y:u.y};case"h":return{x:u.x,y:f.y}}return{x:u.x,y:u.y}}function a(u,p,f){var d;for(d=u.length-2;d!==0;d--)if(If(u[d],p,jg)||If(u[d],f,jg))return u.slice(d);return u}if(r(i))return null;var s=i[0],c=i.slice(),l;return c[0]=n,c[1]=o(c[1],s,n),l=a(c,e,t),l!==c&&(c=Bp(e,t,n,l)),c&&Pi(c)?null:c}function hR(e,t){if(Gg(t))return t;switch(e){case"intersect":return"t:t";case"top":case"bottom":return"v:v";case"left":case"right":return"h:h";default:return t}}function mR(e){return e&&/^h|v|t|r|b|l:h|v|t|r|b|l$/.test(e)}function Gg(e){return e&&/t|r|b|l/.test(e)}function vR(e){return{top:"bottom",bottom:"top",left:"right",right:"left","top-left":"bottom-right","bottom-right":"top-left","top-right":"bottom-left","bottom-left":"top-right"}[e]}function Ug(e,t,n,i){if(n==="h"&&(n=/left/.test(i)?"l":"r"),n==="v"&&(n=/top/.test(i)?"t":"b"),n==="t")return{original:e,x:e.x,y:t.y};if(n==="r")return{original:e,x:t.x+t.width,y:e.y};if(n==="b")return{original:e,x:e.x,y:t.y+t.height};if(n==="l")return{original:e,x:t.x,y:e.y};throw new Error("unexpected dockingDirection: <"+n+">")}function Vg(e){return e.reduce(function(t,n,i){var r=t[t.length-1],o=e[i+1];return hl(r,o,n,0)||t.push(n),t},[])}var gR=-10,yR=40,_R={default:["h:h"],fromGateway:["v:h"],toGateway:["h:v"],loop:{fromTop:["t:r"],fromRight:["r:b"],fromLeft:["l:t"],fromBottom:["b:l"]},boundaryLoop:{alternateHorizontalSide:"b",alternateVerticalSide:"l",default:"v"},messageFlow:["straight","v:v"],subProcess:["straight","h:h"],isHorizontal:!0},bR={default:["v:v"],fromGateway:["h:v"],toGateway:["v:h"],loop:{fromTop:["t:l"],fromRight:["r:t"],fromLeft:["l:b"],fromBottom:["b:r"]},boundaryLoop:{alternateHorizontalSide:"t",alternateVerticalSide:"r",default:"h"},messageFlow:["straight","h:h"],subProcess:["straight","v:v"],isHorizontal:!1},Np={top:"bottom","top-right":"bottom-left","top-left":"bottom-right",right:"left",bottom:"top","bottom-right":"top-left","bottom-left":"top-right",left:"right"},Ia={top:"t",right:"r",bottom:"b",left:"l"};function kc(e){this._elementRegistry=e}j(kc,Fg),kc.prototype.layoutConnection=function(e,t){t||(t={});var n=t.source||e.source,i=t.target||e.target,r=t.waypoints||e.waypoints,o=t.connectionStart,a=t.connectionEnd,s=this._elementRegistry,c,l;if(o||(o=Zg(r&&r[0],n)),a||(a=Zg(r&&r[r.length-1],i)),(b(e,"bpmn:Association")||b(e,"bpmn:DataAssociation"))&&r&&!Wg(n,i))return[].concat([o],r.slice(1,-1),[a]);var u=em(n,s)?_R:bR;return b(e,"bpmn:MessageFlow")?c=xR(n,i,u):(b(e,"bpmn:SequenceFlow")||Wg(n,i))&&(n===i?c={preferredLayouts:AR(n,e,u)}:b(n,"bpmn:BoundaryEvent")?c={preferredLayouts:TR(n,i,a,u)}:Oa(n)||Oa(i)?c={preferredLayouts:u.subProcess,preserveDocking:SR(n)}:b(n,"bpmn:Gateway")?c={preferredLayouts:u.fromGateway}:b(i,"bpmn:Gateway")?c={preferredLayouts:u.toGateway}:c={preferredLayouts:u.default}),c&&(c=k(c,t),l=Vg(lR(n,i,o,a,r,c))),l||[o,a]};function ER(e){var t=e.host;return hn(Pe(e),t,gR)}function xR(e,t,n){return{preferredLayouts:n.messageFlow,preserveDocking:wR(e,t)}}function wR(e,t){return b(t,"bpmn:Participant")?"source":b(e,"bpmn:Participant")?"target":Oa(t)?"source":Oa(e)||b(t,"bpmn:Event")?"target":b(e,"bpmn:Event")?"source":null}function SR(e){return Oa(e)?"target":"source"}function Zg(e,t){return e?e.original||e:Pe(t)}function Wg(e,t){return b(t,"bpmn:Activity")&&b(e,"bpmn:BoundaryEvent")&&t.businessObject.isForCompensation}function Oa(e){return b(e,"bpmn:SubProcess")&&Ue(e)}function Vr(e,t){return e===t}function CR(e,t){return t.indexOf(e)!==-1}function So(e){var t=/right|left/.exec(e);return t&&t[0]}function Co(e){var t=/top|bottom/.exec(e);return t&&t[0]}function Yg(e,t){return Np[e]===t}function PR(e,t){var n=So(e),i=Np[n];return t.indexOf(i)!==-1}function RR(e,t){var n=Co(e),i=Np[n];return t.indexOf(i)!==-1}function Kg(e){return e==="right"||e==="left"}function AR(e,t,n){var i=t.waypoints,r=i&&i.length&&hn(i[0],e);return r==="top"?n.loop.fromTop:r==="right"?n.loop.fromRight:r==="left"?n.loop.fromLeft:n.loop.fromBottom}function TR(e,t,n,i){var r=Pe(e),o=Pe(t),a=ER(e),s,c,l=Vr(e.host,t),u=CR(a,["top","right","bottom","left"]),p=hn(o,r,{x:e.width/2+t.width/2,y:e.height/2+t.height/2});return l?DR(a,u,e,t,n,i):(s=MR(a,p,u,i.isHorizontal),c=kR(a,p,u,i.isHorizontal),[s+":"+c])}function DR(e,t,n,i,r,o){var a=t?e:o.isHorizontal?Co(e):So(e),s=Ia[a],c;return t?Kg(e)?c=Xg("y",n,i,r)?"h":o.boundaryLoop.alternateHorizontalSide:c=Xg("x",n,i,r)?"v":o.boundaryLoop.alternateVerticalSide:c=o.boundaryLoop.default,[s+":"+c]}function Xg(e,t,n,i){var r=yR;return!(Lp(e,i,n,r)||Lp(e,i,{x:n.x+n.width,y:n.y+n.height},r)||Lp(e,i,Pe(t),r))}function Lp(e,t,n,i){return Math.abs(t[e]-n[e])<i}function MR(e,t,n,i){if(n)return Ia[e];var r=Co(e),o=So(e),a=Co(t),s=So(t);if(i){if(Vr(r,a)||Yg(o,s))return Ia[r]}else if(Vr(o,s)||Yg(r,a))return Ia[o];return Ia[i?o:r]}function kR(e,t,n,i){return n?Kg(e)?PR(e,t)||Vr(e,t)?"h":"v":RR(e,t)||Vr(e,t)?"v":"h":i?Vr(Co(e),Co(t))?"h":"v":Vr(So(e),So(t))?"v":"h"}kc.$inject=["elementRegistry"];function qg(e){return k({original:e.point.original||e.point},e.actual)}function vr(e,t){this._elementRegistry=e,this._graphicsFactory=t}vr.$inject=["elementRegistry","graphicsFactory"],vr.prototype.getCroppedWaypoints=function(e,t,n){t=t||e.source,n=n||e.target;var i=this.getDockingPoint(e,t,!0),r=this.getDockingPoint(e,n),o=e.waypoints.slice(i.idx+1,r.idx);return o.unshift(qg(i)),o.push(qg(r)),o},vr.prototype.getDockingPoint=function(e,t,n){var i=e.waypoints,r,o,a;return r=n?0:i.length-1,o=i[r],a=this._getIntersection(t,e,n),{point:o,actual:a||o,idx:r}},vr.prototype._getIntersection=function(e,t,n){var i=this._getShapePath(e),r=this._getConnectionPath(t);return yl(i,r,n)},vr.prototype._getConnectionPath=function(e){return this._graphicsFactory.getConnectionPath(e)},vr.prototype._getShapePath=function(e){return this._graphicsFactory.getShapePath(e)},vr.prototype._getGfx=function(e){return this._elementRegistry.getGraphics(e)};var Qg={__init__:["modeling","bpmnUpdater"],__depends__:[RC,VC,WC,YC,ug,xP,SP,DP,_i,Il,vg],bpmnFactory:["type",Qn],bpmnUpdater:["type",kn],elementFactory:["type",fr],modeling:["type",gn],layouter:["type",kc],connectionDocking:["type",vr]};const Jg=Math.round;function Ic(e,t,n,i,r,o){this._complexPreview=e,this._connectionDocking=t,this._elementFactory=n,this._eventBus=i,this._layouter=r,this._rules=o}Ic.prototype.create=function(e,t,n){const i=this._complexPreview,r=this._connectionDocking,o=this._elementFactory,a=this._eventBus,s=this._layouter,c=this._rules,l=o.createShape(k({type:t},n)),u=a.fire("autoPlace",{source:e,shape:l});if(!u)return;k(l,{x:u.x-Jg(l.width/2),y:u.y-Jg(l.height/2)});const p=c.allowed("connection.create",{source:e,target:l,hints:{targetParent:e.parent}});let f=null;p&&(f=o.createConnection(p),f.waypoints=s.layoutConnection(f,{source:e,target:l}),f.waypoints=r.getCroppedWaypoints(f,e,l)),i.create({created:[l,f].filter(d=>!tt(d))})},Ic.prototype.cleanUp=function(){this._complexPreview.cleanUp()},Ic.$inject=["complexPreview","connectionDocking","elementFactory","eventBus","layouter","rules"];var IR={__depends__:[su,nS,Qg],__init__:["appendPreview"],appendPreview:["type",Ic]},ey=Math.min,ty=Math.max;function Fp(e){e.preventDefault()}function Ba(e){e.stopPropagation()}function OR(e){return e.nodeType===Node.TEXT_NODE}function BR(e){return[].slice.call(e)}function si(e){this.container=e.container,this.parent=st('<div class="djs-direct-editing-parent"><div class="djs-direct-editing-content" contenteditable="true"></div></div>'),this.content=ot("[contenteditable]",this.parent),this.keyHandler=e.keyHandler||function(){},this.resizeHandler=e.resizeHandler||function(){},this.autoResize=rt(this.autoResize,this),this.handlePaste=rt(this.handlePaste,this)}si.prototype.create=function(e,t,n,i){var r=this,o=this.parent,a=this.content,s=this.container;i=this.options=i||{},t=this.style=t||{};var c=Nt(t,["width","height","maxWidth","maxHeight","minWidth","minHeight","left","top","backgroundColor","position","overflow","border","wordWrap","textAlign","outline","transform"]);k(o.style,{width:e.width+"px",height:e.height+"px",maxWidth:e.maxWidth+"px",maxHeight:e.maxHeight+"px",minWidth:e.minWidth+"px",minHeight:e.minHeight+"px",left:e.x+"px",top:e.y+"px",backgroundColor:"#ffffff",position:"absolute",overflow:"visible",border:"1px solid #ccc",boxSizing:"border-box",wordWrap:"normal",textAlign:"center",outline:"none"},c);var l=Nt(t,["fontFamily","fontSize","fontWeight","lineHeight","padding","paddingTop","paddingRight","paddingBottom","paddingLeft"]);return k(a.style,{boxSizing:"border-box",width:"100%",outline:"none",wordWrap:"break-word"},l),i.centerVertically&&k(a.style,{position:"absolute",top:"50%",transform:"translate(0, -50%)"},l),a.innerText=n,be.bind(a,"keydown",this.keyHandler),be.bind(a,"mousedown",Ba),be.bind(a,"paste",r.handlePaste),i.autoResize&&be.bind(a,"input",this.autoResize),i.resizable&&this.resizable(t),s.appendChild(o),this.setSelection(a.lastChild,a.lastChild&&a.lastChild.length),o},si.prototype.handlePaste=function(e){var t=this.options,n=this.style;e.preventDefault();var i;if(e.clipboardData?i=e.clipboardData.getData("text/plain"):i=window.clipboardData.getData("Text"),this.insertText(i),t.autoResize){var r=this.autoResize(n);r&&this.resizeHandler(r)}},si.prototype.insertText=function(e){e=NR(e);var t=document.execCommand("insertText",!1,e);t||this._insertTextIE(e)},si.prototype._insertTextIE=function(e){var t=this.getSelection(),n=t.startContainer,i=t.endContainer,r=t.startOffset,o=t.endOffset,a=t.commonAncestorContainer,s=BR(a.childNodes),c,l;if(OR(a)){var u=n.textContent;n.textContent=u.substring(0,r)+e+u.substring(o),c=n,l=r+e.length}else if(n===this.content&&i===this.content){var p=document.createTextNode(e);this.content.insertBefore(p,s[r]),c=p,l=p.textContent.length}else{var f=s.indexOf(n),d=s.indexOf(i);s.forEach(function(h,v){v===f?h.textContent=n.textContent.substring(0,r)+e+i.textContent.substring(o):v>f&&v<=d&&bn(h)}),c=n,l=r+e.length}c&&l!==void 0&&setTimeout(function(){self.setSelection(c,l)})},si.prototype.autoResize=function(){var e=this.parent,t=this.content,n=parseInt(this.style.fontSize)||12;if(t.scrollHeight>e.offsetHeight||t.scrollHeight<e.offsetHeight-n){var i=e.getBoundingClientRect(),r=t.scrollHeight;e.style.height=r+"px",this.resizeHandler({width:i.width,height:i.height,dx:0,dy:r-i.height})}},si.prototype.resizable=function(){var e=this,t=this.parent,n=this.resizeHandle,i=parseInt(this.style.minWidth)||0,r=parseInt(this.style.minHeight)||0,o=parseInt(this.style.maxWidth)||1/0,a=parseInt(this.style.maxHeight)||1/0;if(!n){n=this.resizeHandle=st('<div class="djs-direct-editing-resize-handle"></div>');var s,c,l,u,p=function(h){Fp(h),Ba(h),s=h.clientX,c=h.clientY;var v=t.getBoundingClientRect();l=v.width,u=v.height,be.bind(document,"mousemove",f),be.bind(document,"mouseup",d)},f=function(h){Fp(h),Ba(h);var v=ey(ty(l+h.clientX-s,i),o),m=ey(ty(u+h.clientY-c,r),a);t.style.width=v+"px",t.style.height=m+"px",e.resizeHandler({width:l,height:u,dx:h.clientX-s,dy:h.clientY-c})},d=function(h){Fp(h),Ba(h),be.unbind(document,"mousemove",f,!1),be.unbind(document,"mouseup",d,!1)};be.bind(n,"mousedown",p)}k(n.style,{position:"absolute",bottom:"0px",right:"0px",cursor:"nwse-resize",width:"0",height:"0",borderTop:(parseInt(this.style.fontSize)/4||3)+"px solid transparent",borderRight:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderBottom:(parseInt(this.style.fontSize)/4||3)+"px solid #ccc",borderLeft:(parseInt(this.style.fontSize)/4||3)+"px solid transparent"}),t.appendChild(n)},si.prototype.destroy=function(){var e=this.parent,t=this.content,n=this.resizeHandle;t.innerText="",e.removeAttribute("style"),t.removeAttribute("style"),be.unbind(t,"keydown",this.keyHandler),be.unbind(t,"mousedown",Ba),be.unbind(t,"input",this.autoResize),be.unbind(t,"paste",this.handlePaste),n&&(n.removeAttribute("style"),bn(n)),bn(e)},si.prototype.getValue=function(){return this.content.innerText.trim()},si.prototype.getSelection=function(){var e=window.getSelection(),t=e.getRangeAt(0);return t},si.prototype.setSelection=function(e,t){var n=document.createRange();e===null?n.selectNodeContents(this.content):(n.setStart(e,t),n.setEnd(e,t));var i=window.getSelection();i.removeAllRanges(),i.addRange(n)};function NR(e){return e.replace(/\r\n|\r|\n/g,`
`)}function Jn(e,t){this._eventBus=e,this._canvas=t,this._providers=[],this._textbox=new si({container:t.getContainer(),keyHandler:rt(this._handleKey,this),resizeHandler:rt(this._handleResize,this)})}Jn.$inject=["eventBus","canvas"],Jn.prototype.registerProvider=function(e){this._providers.push(e)},Jn.prototype.isActive=function(e){return!!(this._active&&(!e||this._active.element===e))},Jn.prototype.cancel=function(){this._active&&(this._fire("cancel"),this.close())},Jn.prototype._fire=function(e,t){this._eventBus.fire("directEditing."+e,t||{active:this._active})},Jn.prototype.close=function(){this._textbox.destroy(),this._fire("deactivate"),this._active=null,this.resizable=void 0,this._canvas.restoreFocus&&this._canvas.restoreFocus()},Jn.prototype.complete=function(){var e=this._active;if(e){var t,n=e.context.bounds,i=this.$textbox.getBoundingClientRect(),r=this.getValue(),o=e.context.text;(r!==o||i.height!==n.height||i.width!==n.width)&&(t=this._textbox.container.getBoundingClientRect(),e.provider.update(e.element,r,e.context.text,{x:i.left-t.left,y:i.top-t.top,width:i.width,height:i.height})),this._fire("complete"),this.close()}},Jn.prototype.getValue=function(){return this._textbox.getValue()},Jn.prototype._handleKey=function(e){e.stopPropagation();var t=e.keyCode||e.charCode;if(t===27)return e.preventDefault(),this.cancel();if(t===13&&!e.shiftKey)return e.preventDefault(),this.complete()},Jn.prototype._handleResize=function(e){this._fire("resize",e)},Jn.prototype.activate=function(e){this.isActive()&&this.cancel();var t,n=te(this._providers,function(i){return(t=i.activate(e))?i:null});return t&&(this.$textbox=this._textbox.create(t.bounds,t.style,t.text,t.options),this._active={element:e,context:t,provider:n},t.options&&t.options.resizable&&(this.resizable=!0),this._fire("activate")),!!t};var ny={__depends__:[xs],__init__:["directEditing"],directEditing:["type",Jn]};function iy(e){return function(t){var n=t.target,i=Q(e),r=i.eventDefinitions&&i.eventDefinitions[0],o=i.$type===n.type,a=(r&&r.$type)===n.eventDefinitionType,s=!!n.triggeredByEvent==!!i.triggeredByEvent,c=n.isExpanded===void 0||n.isExpanded===Ue(e);return!o||!a||!s||!c}}var LR=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],FR=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throwing",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}}],jR=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message intermediate catch event",actionName:"replace-with-message-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Message intermediate throw event",actionName:"replace-with-message-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-message",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Timer intermediate catch event",actionName:"replace-with-timer-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:TimerEventDefinition"}},{label:"Escalation intermediate throw event",actionName:"replace-with-escalation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-escalation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Conditional intermediate catch event",actionName:"replace-with-conditional-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition"}},{label:"Link intermediate catch event",actionName:"replace-with-link-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-link",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Link intermediate throw event",actionName:"replace-with-link-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-link",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:LinkEventDefinition",eventDefinitionAttrs:{name:""}}},{label:"Compensation intermediate throw event",actionName:"replace-with-compensation-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-compensation",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal intermediate catch event",actionName:"replace-with-signal-intermediate-catch",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:IntermediateCatchEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Signal intermediate throw event",actionName:"replace-with-signal-intermediate-throw",className:"bpmn-icon-intermediate-event-throw-signal",target:{type:"bpmn:IntermediateThrowEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}}],$R=[{label:"Start event",actionName:"replace-with-none-start",className:"bpmn-icon-start-event-none",target:{type:"bpmn:StartEvent"}},{label:"Intermediate throw event",actionName:"replace-with-none-intermediate-throw",className:"bpmn-icon-intermediate-event-none",target:{type:"bpmn:IntermediateThrowEvent"}},{label:"End event",actionName:"replace-with-none-end",className:"bpmn-icon-end-event-none",target:{type:"bpmn:EndEvent"}},{label:"Message end event",actionName:"replace-with-message-end",className:"bpmn-icon-end-event-message",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:MessageEventDefinition"}},{label:"Escalation end event",actionName:"replace-with-escalation-end",className:"bpmn-icon-end-event-escalation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:EscalationEventDefinition"}},{label:"Error end event",actionName:"replace-with-error-end",className:"bpmn-icon-end-event-error",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:ErrorEventDefinition"}},{label:"Cancel end event",actionName:"replace-with-cancel-end",className:"bpmn-icon-end-event-cancel",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CancelEventDefinition"}},{label:"Compensation end event",actionName:"replace-with-compensation-end",className:"bpmn-icon-end-event-compensation",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:CompensateEventDefinition"}},{label:"Signal end event",actionName:"replace-with-signal-end",className:"bpmn-icon-end-event-signal",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:SignalEventDefinition"}},{label:"Terminate end event",actionName:"replace-with-terminate-end",className:"bpmn-icon-end-event-terminate",target:{type:"bpmn:EndEvent",eventDefinitionType:"bpmn:TerminateEventDefinition"}}],zR=[{label:"Exclusive gateway",actionName:"replace-with-exclusive-gateway",className:"bpmn-icon-gateway-xor",target:{type:"bpmn:ExclusiveGateway"}},{label:"Parallel gateway",actionName:"replace-with-parallel-gateway",className:"bpmn-icon-gateway-parallel",target:{type:"bpmn:ParallelGateway"}},{label:"Inclusive gateway",actionName:"replace-with-inclusive-gateway",className:"bpmn-icon-gateway-or",target:{type:"bpmn:InclusiveGateway"}},{label:"Complex gateway",actionName:"replace-with-complex-gateway",className:"bpmn-icon-gateway-complex",target:{type:"bpmn:ComplexGateway"}},{label:"Event-based gateway",actionName:"replace-with-event-based-gateway",className:"bpmn-icon-gateway-eventbased",target:{type:"bpmn:EventBasedGateway",instantiate:!1,eventGatewayType:"Exclusive"}}],HR=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}}],ry=[{label:"Transaction",actionName:"replace-with-transaction",className:"bpmn-icon-transaction",target:{type:"bpmn:Transaction",isExpanded:!0}},{label:"Sub-process",actionName:"replace-with-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}},{label:"Event sub-process",actionName:"replace-with-event-subprocess",className:"bpmn-icon-event-subprocess-expanded",target:{type:"bpmn:SubProcess",triggeredByEvent:!0,isExpanded:!0}}],GR=ry,oy=[{label:"Task",actionName:"replace-with-task",className:"bpmn-icon-task",target:{type:"bpmn:Task"}},{label:"User task",actionName:"replace-with-user-task",className:"bpmn-icon-user",target:{type:"bpmn:UserTask"}},{label:"Service task",actionName:"replace-with-service-task",className:"bpmn-icon-service",target:{type:"bpmn:ServiceTask"}},{label:"Send task",actionName:"replace-with-send-task",className:"bpmn-icon-send",target:{type:"bpmn:SendTask"}},{label:"Receive task",actionName:"replace-with-receive-task",className:"bpmn-icon-receive",target:{type:"bpmn:ReceiveTask"}},{label:"Manual task",actionName:"replace-with-manual-task",className:"bpmn-icon-manual",target:{type:"bpmn:ManualTask"}},{label:"Business rule task",actionName:"replace-with-rule-task",className:"bpmn-icon-business-rule",target:{type:"bpmn:BusinessRuleTask"}},{label:"Script task",actionName:"replace-with-script-task",className:"bpmn-icon-script",target:{type:"bpmn:ScriptTask"}},{label:"Call activity",actionName:"replace-with-call-activity",className:"bpmn-icon-call-activity",target:{type:"bpmn:CallActivity"}},{label:"Sub-process (collapsed)",actionName:"replace-with-collapsed-subprocess",className:"bpmn-icon-subprocess-collapsed",target:{type:"bpmn:SubProcess",isExpanded:!1}},{label:"Sub-process (expanded)",actionName:"replace-with-expanded-subprocess",className:"bpmn-icon-subprocess-expanded",target:{type:"bpmn:SubProcess",isExpanded:!0}}],UR=[{label:"Data store reference",actionName:"replace-with-data-store-reference",className:"bpmn-icon-data-store",target:{type:"bpmn:DataStoreReference"}}],VR=[{label:"Data object reference",actionName:"replace-with-data-object-reference",className:"bpmn-icon-data-object",target:{type:"bpmn:DataObjectReference"}}],ZR=[{label:"Message boundary event",actionName:"replace-with-message-boundary",className:"bpmn-icon-intermediate-event-catch-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!0}},{label:"Timer boundary event",actionName:"replace-with-timer-boundary",className:"bpmn-icon-intermediate-event-catch-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!0}},{label:"Escalation boundary event",actionName:"replace-with-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!0}},{label:"Conditional boundary event",actionName:"replace-with-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!0}},{label:"Error boundary event",actionName:"replace-with-error-boundary",className:"bpmn-icon-intermediate-event-catch-error",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",cancelActivity:!0}},{label:"Cancel boundary event",actionName:"replace-with-cancel-boundary",className:"bpmn-icon-intermediate-event-catch-cancel",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CancelEventDefinition",cancelActivity:!0}},{label:"Signal boundary event",actionName:"replace-with-signal-boundary",className:"bpmn-icon-intermediate-event-catch-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!0}},{label:"Compensation boundary event",actionName:"replace-with-compensation-boundary",className:"bpmn-icon-intermediate-event-catch-compensation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",cancelActivity:!0}},{label:"Message boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-message-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-message",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:MessageEventDefinition",cancelActivity:!1}},{label:"Timer boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-timer",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:TimerEventDefinition",cancelActivity:!1}},{label:"Escalation boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-escalation",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",cancelActivity:!1}},{label:"Conditional boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-condition",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",cancelActivity:!1}},{label:"Signal boundary event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-boundary",className:"bpmn-icon-intermediate-event-catch-non-interrupting-signal",target:{type:"bpmn:BoundaryEvent",eventDefinitionType:"bpmn:SignalEventDefinition",cancelActivity:!1}}],WR=[{label:"Message start event",actionName:"replace-with-message-start",className:"bpmn-icon-start-event-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!0}},{label:"Timer start event",actionName:"replace-with-timer-start",className:"bpmn-icon-start-event-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!0}},{label:"Conditional start event",actionName:"replace-with-conditional-start",className:"bpmn-icon-start-event-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!0}},{label:"Signal start event",actionName:"replace-with-signal-start",className:"bpmn-icon-start-event-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!0}},{label:"Error start event",actionName:"replace-with-error-start",className:"bpmn-icon-start-event-error",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ErrorEventDefinition",isInterrupting:!0}},{label:"Escalation start event",actionName:"replace-with-escalation-start",className:"bpmn-icon-start-event-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!0}},{label:"Compensation start event",actionName:"replace-with-compensation-start",className:"bpmn-icon-start-event-compensation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:CompensateEventDefinition",isInterrupting:!0}},{label:"Message start event (non-interrupting)",actionName:"replace-with-non-interrupting-message-start",className:"bpmn-icon-start-event-non-interrupting-message",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:MessageEventDefinition",isInterrupting:!1}},{label:"Timer start event (non-interrupting)",actionName:"replace-with-non-interrupting-timer-start",className:"bpmn-icon-start-event-non-interrupting-timer",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:TimerEventDefinition",isInterrupting:!1}},{label:"Conditional start event (non-interrupting)",actionName:"replace-with-non-interrupting-conditional-start",className:"bpmn-icon-start-event-non-interrupting-condition",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:ConditionalEventDefinition",isInterrupting:!1}},{label:"Signal start event (non-interrupting)",actionName:"replace-with-non-interrupting-signal-start",className:"bpmn-icon-start-event-non-interrupting-signal",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:SignalEventDefinition",isInterrupting:!1}},{label:"Escalation start event (non-interrupting)",actionName:"replace-with-non-interrupting-escalation-start",className:"bpmn-icon-start-event-non-interrupting-escalation",target:{type:"bpmn:StartEvent",eventDefinitionType:"bpmn:EscalationEventDefinition",isInterrupting:!1}}],YR=[{label:"Sequence flow",actionName:"replace-with-sequence-flow",className:"bpmn-icon-connection"},{label:"Default flow",actionName:"replace-with-default-flow",className:"bpmn-icon-default-flow"},{label:"Conditional flow",actionName:"replace-with-conditional-flow",className:"bpmn-icon-conditional-flow"}],KR=[{label:"Expanded pool/participant",actionName:"replace-with-expanded-pool",className:"bpmn-icon-participant",target:{type:"bpmn:Participant",isExpanded:!0}},{label:function(e){var t="Empty pool/participant";return e.children&&e.children.length&&(t+=" (removes content)"),t},actionName:"replace-with-collapsed-pool",className:"bpmn-icon-lane",target:{type:"bpmn:Participant",isExpanded:!1}}],ay={"start-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
    <g transform="translate(0 995.64)">
      <path d="m1899 28.357c21.545 567.43-598.38 1023.5-1133.6 835.92-548.09-147.21-801.57-873.95-463.59-1330 302.62-480.3 1071.7-507.54 1407.6-49.847 122.14 153.12 190.07 348.07 189.59 543.91z" fill="none" stroke="currentColor" stroke-dasharray="418.310422, 361.2328165" stroke-linecap="round" stroke-width="100"/>
    </g>
  </svg>`,"intermediate-event-non-interrupting":`
  <svg viewBox="0 0 2048 2048" xmlns="http://www.w3.org/2000/svg">
     <g transform="translate(0 995.64)" fill="none" stroke="currentColor" stroke-linecap="round">
        <circle cx="1024" cy="28.357" r="875" stroke-dasharray="418.310422, 361.2328165" stroke-width="100"/>
        <circle cx="1024" cy="28.357" r="685" stroke-dasharray="348.31044857,261.23283643" stroke-dashoffset="500" stroke-width="100"/>
     </g>
  </svg>`};function On(e,t,n,i,r,o,a,s){this._bpmnFactory=e,this._popupMenu=t,this._modeling=n,this._moddle=i,this._bpmnReplace=r,this._rules=o,this._translate=a,this._moddleCopy=s,this._register()}On.$inject=["bpmnFactory","popupMenu","modeling","moddle","bpmnReplace","rules","translate","moddleCopy"],On.prototype._register=function(){this._popupMenu.registerProvider("bpmn-replace",this)},On.prototype.getPopupMenuEntries=function(e){var t=e.businessObject,n=this._rules,i=[];if(se(e)||!n.allowed("shape.replace",{element:e}))return{};var r=iy(e);return b(t,"bpmn:DataObjectReference")?this._createEntries(e,UR):b(t,"bpmn:DataStoreReference")&&!b(e.parent,"bpmn:Collaboration")?this._createEntries(e,VR):b(t,"bpmn:StartEvent")&&!b(t.$parent,"bpmn:SubProcess")?(i=ne(LR,r),this._createEntries(e,i)):b(t,"bpmn:Participant")?(i=ne(KR,function(o){return Ue(e)!==o.target.isExpanded}),this._createEntries(e,i)):b(t,"bpmn:StartEvent")&&vn(t.$parent)?(i=ne(WR,function(o){var a=o.target,s=a.isInterrupting!==!1,c=t.isInterrupting===s;return r(o)||!r(o)&&!c}),this._createEntries(e,i)):b(t,"bpmn:StartEvent")&&!vn(t.$parent)&&b(t.$parent,"bpmn:SubProcess")?(i=ne(FR,r),this._createEntries(e,i)):b(t,"bpmn:EndEvent")?(i=ne($R,function(o){var a=o.target;return a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!b(t.$parent,"bpmn:Transaction")?!1:r(o)}),this._createEntries(e,i)):b(t,"bpmn:BoundaryEvent")?(i=ne(ZR,function(o){var a=o.target;if(a.eventDefinitionType=="bpmn:CancelEventDefinition"&&!b(t.attachedToRef,"bpmn:Transaction"))return!1;var s=a.cancelActivity!==!1,c=t.cancelActivity==s;return r(o)||!r(o)&&!c}),this._createEntries(e,i)):b(t,"bpmn:IntermediateCatchEvent")||b(t,"bpmn:IntermediateThrowEvent")?(i=ne(jR,r),this._createEntries(e,i)):b(t,"bpmn:Gateway")?(i=ne(zR,r),this._createEntries(e,i)):b(t,"bpmn:Transaction")?(i=ne(ry,r),this._createEntries(e,i)):vn(t)&&Ue(e)?(i=ne(GR,r),this._createEntries(e,i)):b(t,"bpmn:SubProcess")&&Ue(e)?(i=ne(HR,r),this._createEntries(e,i)):b(t,"bpmn:AdHocSubProcess")&&!Ue(e)?(i=ne(oy,function(o){var a=o.target,s=a.type==="bpmn:SubProcess",c=a.isExpanded===!0;return iy(a,a)&&(!s||c)}),this._createEntries(e,i)):b(t,"bpmn:SequenceFlow")?this._createSequenceFlowEntries(e,YR):b(t,"bpmn:FlowNode")?(i=ne(oy,r),b(t,"bpmn:SubProcess")&&!Ue(e)&&(i=ne(i,function(o){return o.label!=="Sub-process (collapsed)"})),this._createEntries(e,i)):{}},On.prototype.getPopupMenuHeaderEntries=function(e){var t={};return b(e,"bpmn:Activity")&&!vn(e)&&(t=Be(Be({},t),this._getLoopCharacteristicsHeaderEntries(e))),b(e,"bpmn:DataObjectReference")&&(t=Be(Be({},t),this._getCollectionHeaderEntries(e))),b(e,"bpmn:Participant")&&(t=Be(Be({},t),this._getParticipantMultiplicityHeaderEntries(e))),b(e,"bpmn:SubProcess")&&!b(e,"bpmn:Transaction")&&!vn(e)&&(t=Be(Be({},t),this._getAdHocHeaderEntries(e))),gv(e)&&(t=Be(Be({},t),this._getNonInterruptingHeaderEntries(e))),t},On.prototype._createEntries=function(e,t){var n={},i=this;return A(t,function(r){n[r.actionName]=i._createEntry(r,e)}),n},On.prototype._createSequenceFlowEntries=function(e,t){var n=Q(e),i={},r=this._modeling,o=this._moddle,a=this;return A(t,function(s){switch(s.actionName){case"replace-with-default-flow":n.sourceRef.default!==n&&(b(n.sourceRef,"bpmn:ExclusiveGateway")||b(n.sourceRef,"bpmn:InclusiveGateway")||b(n.sourceRef,"bpmn:ComplexGateway")||b(n.sourceRef,"bpmn:Activity"))&&(i=Gt(Be({},i),{[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e.source,{default:n})})}));break;case"replace-with-conditional-flow":!n.conditionExpression&&b(n.sourceRef,"bpmn:Activity")&&(i=Gt(Be({},i),{[s.actionName]:a._createEntry(s,e,function(){var c=o.create("bpmn:FormalExpression",{body:""});r.updateProperties(e,{conditionExpression:c})})}));break;default:b(n.sourceRef,"bpmn:Activity")&&n.conditionExpression&&(i=Gt(Be({},i),{[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e,{conditionExpression:void 0})})})),(b(n.sourceRef,"bpmn:ExclusiveGateway")||b(n.sourceRef,"bpmn:InclusiveGateway")||b(n.sourceRef,"bpmn:ComplexGateway")||b(n.sourceRef,"bpmn:Activity"))&&n.sourceRef.default===n&&(i=Gt(Be({},i),{[s.actionName]:a._createEntry(s,e,function(){r.updateProperties(e.source,{default:void 0})})}))}}),i},On.prototype._createEntry=function(e,t,n){var i=this._translate,r=this._bpmnReplace.replaceElement,o=function(){return r(t,e.target)},a=e.label;return a&&typeof a=="function"&&(a=a(t)),n=n||o,{label:i(a),className:e.className,action:n}},On.prototype._getLoopCharacteristicsHeaderEntries=function(e){var t=this,n=this._translate;function i(l,u){if(u.active){t._modeling.updateProperties(e,{loopCharacteristics:void 0});return}const p=e.businessObject.get("loopCharacteristics"),f=t._moddle.create(u.options.loopCharacteristics);p&&t._moddleCopy.copyElement(p,f),f.set("isSequential",u.options.isSequential),t._modeling.updateProperties(e,{loopCharacteristics:f})}var r=Q(e),o=r.loopCharacteristics,a,s,c;return o&&(a=o.isSequential,s=o.isSequential===void 0,c=o.isSequential!==void 0&&!o.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:n("Parallel multi-instance"),active:c,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:n("Sequential multi-instance"),active:a,action:i,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}},"toggle-loop":{className:"bpmn-icon-loop-marker",title:n("Loop"),active:s,action:i,options:{loopCharacteristics:"bpmn:StandardLoopCharacteristics"}}}},On.prototype._getCollectionHeaderEntries=function(e){var t=this,n=this._translate,i=e.businessObject.dataObjectRef;if(!i)return{};function r(a,s){t._modeling.updateModdleProperties(e,i,{isCollection:!s.active})}var o=i.isCollection;return{"toggle-is-collection":{className:"bpmn-icon-parallel-mi-marker",title:n("Collection"),active:o,action:r}}},On.prototype._getParticipantMultiplicityHeaderEntries=function(e){var t=this,n=this._bpmnFactory,i=this._translate;function r(a,s){var c=s.active,l;c||(l=n.create("bpmn:ParticipantMultiplicity")),t._modeling.updateProperties(e,{participantMultiplicity:l})}var o=e.businessObject.participantMultiplicity;return{"toggle-participant-multiplicity":{className:"bpmn-icon-parallel-mi-marker",title:i("Participant multiplicity"),active:!!o,action:r}}},On.prototype._getAdHocHeaderEntries=function(e){var t=this._translate,n=Q(e),i=b(n,"bpmn:AdHocSubProcess"),r=this._bpmnReplace.replaceElement;return{"toggle-adhoc":{className:"bpmn-icon-ad-hoc-marker",title:t("Ad-hoc"),active:i,action:function(o,a){return i?r(e,{type:"bpmn:SubProcess"},{autoResize:!1,layoutConnection:!1}):r(e,{type:"bpmn:AdHocSubProcess"},{autoResize:!1,layoutConnection:!1})}}}},On.prototype._getNonInterruptingHeaderEntries=function(e){const t=this._translate,n=Q(e),i=this,r=yv(e),o=b(e,"bpmn:BoundaryEvent")?ay["intermediate-event-non-interrupting"]:ay["start-event-non-interrupting"],a=!n[r];return{"toggle-non-interrupting":{imageHtml:o,title:t("Toggle non-interrupting"),active:a,action:function(){i._modeling.updateProperties(e,{[r]:!!a})}}}};var XR={__depends__:[iu,ug,su],__init__:["replaceMenuProvider"],replaceMenuProvider:["type",On]};function Po(e,t,n,i,r,o,a,s,c,l,u,p,f){e=e||{},i.registerProvider(this),this._contextPad=i,this._modeling=r,this._elementFactory=o,this._connect=a,this._create=s,this._popupMenu=c,this._canvas=l,this._rules=u,this._translate=p,this._eventBus=n,this._appendPreview=f,e.autoPlace!==!1&&(this._autoPlace=t.get("autoPlace",!1)),n.on("create.end",250,function(d){var h=d.context,v=h.shape;if(!(!ta(d)||!i.isOpen(v))){var m=i.getEntries(v);m.replace&&m.replace.action.click(d,v)}}),n.on("contextPad.close",function(){f.cleanUp()})}Po.$inject=["config.contextPad","injector","eventBus","contextPad","modeling","elementFactory","connect","create","popupMenu","canvas","rules","translate","appendPreview"],Po.prototype.getMultiElementContextPadEntries=function(e){var t=this._modeling,n={};return this._isDeleteAllowed(e)&&k(n,{delete:{group:"edit",className:"bpmn-icon-trash",title:this._translate("Delete"),action:{click:function(i,r){t.removeElements(r.slice())}}}}),n},Po.prototype._isDeleteAllowed=function(e){var t=this._rules.allowed("elements.delete",{elements:e});return se(t)?An(e,n=>t.includes(n)):t},Po.prototype.getContextPadEntries=function(e){var t=this._contextPad,n=this._modeling,i=this._elementFactory,r=this._connect,o=this._create,a=this._popupMenu,s=this._autoPlace,c=this._translate,l=this._appendPreview,u={};if(e.type==="label")return this._isDeleteAllowed([e])&&k(u,h()),u;var p=e.businessObject;function f(E,y){r.start(E,y)}function d(E,y){n.removeElements([y])}function h(){return{delete:{group:"edit",className:"bpmn-icon-trash",title:c("Delete"),action:{click:d}}}}function v(E){var y=5,w=t.getPad(E).html,R=w.getBoundingClientRect(),I={x:R.left,y:R.bottom+y};return I}function m(E,y,w,R){function I(B,F){var z=i.createShape(k({type:E},R));o.start(B,z,{source:F})}var T=s?function(B,F){var z=i.createShape(k({type:E},R));s.append(F,z)}:I,O=s?function(B,F){return l.create(F,E,R),()=>{l.cleanUp()}}:null;return{group:"model",className:y,title:w,action:{dragstart:I,click:T,hover:O}}}function S(E){return function(y,w){n.splitLane(w,E),t.open(w,!0)}}if(je(p,["bpmn:Lane","bpmn:Participant"])&&Ue(e)){var x=sr(e);k(u,{"lane-insert-above":{group:"lane-insert-above",className:"bpmn-icon-lane-insert-above",title:c("Add lane above"),action:{click:function(E,y){n.addLane(y,"top")}}}}),x.length<2&&((qt(e)?e.height>=120:e.width>=120)&&k(u,{"lane-divide-two":{group:"lane-divide",className:"bpmn-icon-lane-divide-two",title:c("Divide into two lanes"),action:{click:S(2)}}}),(qt(e)?e.height>=180:e.width>=180)&&k(u,{"lane-divide-three":{group:"lane-divide",className:"bpmn-icon-lane-divide-three",title:c("Divide into three lanes"),action:{click:S(3)}}})),k(u,{"lane-insert-below":{group:"lane-insert-below",className:"bpmn-icon-lane-insert-below",title:c("Add lane below"),action:{click:function(E,y){n.addLane(y,"bottom")}}}})}return b(p,"bpmn:FlowNode")&&(b(p,"bpmn:EventBasedGateway")?k(u,{"append.receive-task":m("bpmn:ReceiveTask","bpmn-icon-receive-task",c("Append receive task")),"append.message-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-message",c("Append message intermediate catch event"),{eventDefinitionType:"bpmn:MessageEventDefinition"}),"append.timer-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-timer",c("Append timer intermediate catch event"),{eventDefinitionType:"bpmn:TimerEventDefinition"}),"append.condition-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-condition",c("Append conditional intermediate catch event"),{eventDefinitionType:"bpmn:ConditionalEventDefinition"}),"append.signal-intermediate-event":m("bpmn:IntermediateCatchEvent","bpmn-icon-intermediate-event-catch-signal",c("Append signal intermediate catch event"),{eventDefinitionType:"bpmn:SignalEventDefinition"})}):sy(p,"bpmn:BoundaryEvent","bpmn:CompensateEventDefinition")?k(u,{"append.compensation-activity":m("bpmn:Task","bpmn-icon-task",c("Append compensation activity"),{isForCompensation:!0})}):!b(p,"bpmn:EndEvent")&&!p.isForCompensation&&!sy(p,"bpmn:IntermediateThrowEvent","bpmn:LinkEventDefinition")&&!vn(p)&&k(u,{"append.end-event":m("bpmn:EndEvent","bpmn-icon-end-event-none",c("Append end event")),"append.gateway":m("bpmn:ExclusiveGateway","bpmn-icon-gateway-none",c("Append gateway")),"append.append-task":m("bpmn:Task","bpmn-icon-task",c("Append task")),"append.intermediate-event":m("bpmn:IntermediateThrowEvent","bpmn-icon-intermediate-event-none",c("Append intermediate/boundary event"))})),a.isEmpty(e,"bpmn-replace")||k(u,{replace:{group:"edit",className:"bpmn-icon-screw-wrench",title:c("Change element"),action:{click:function(E,y){var w=k(v(y),{cursor:{x:E.x,y:E.y}});a.open(y,"bpmn-replace",w,{title:c("Change element"),width:300,search:!0})}}}}),b(p,"bpmn:SequenceFlow")&&k(u,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),je(p,["bpmn:FlowNode","bpmn:InteractionNode","bpmn:DataObjectReference","bpmn:DataStoreReference"])&&k(u,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation")),connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect to other element"),action:{click:f,dragstart:f}}}),b(p,"bpmn:TextAnnotation")&&k(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using association"),action:{click:f,dragstart:f}}}),je(p,["bpmn:DataObjectReference","bpmn:DataStoreReference"])&&k(u,{connect:{group:"connect",className:"bpmn-icon-connection-multi",title:c("Connect using data input association"),action:{click:f,dragstart:f}}}),b(p,"bpmn:Group")&&k(u,{"append.text-annotation":m("bpmn:TextAnnotation","bpmn-icon-text-annotation",c("Add text annotation"))}),this._isDeleteAllowed([e])&&k(u,h()),u};function sy(e,t,n){var i=e.$instanceOf(t),r=!1,o=e.eventDefinitions||[];return A(o,function(a){a.$type===n&&(r=!0)}),i&&r}var qR={__depends__:[IR,ny,_h,_i,yu,fc,XR],__init__:["contextPadProvider"],contextPadProvider:["type",Po]},QR={horizontal:["x","width"],vertical:["y","height"]},cy=5;function zi(e,t){this._modeling=e,this._filters=[],this.registerFilter(function(n){var i=t.allowed("elements.distribute",{elements:n});return se(i)?i:i?n:[]})}zi.$inject=["modeling","rules"],zi.prototype.registerFilter=function(e){if(typeof e!="function")throw new Error("the filter has to be a function");this._filters.push(e)},zi.prototype.trigger=function(e,t){var n=this._modeling,i,r;if(!(e.length<3)&&(this._setOrientation(t),r=this._filterElements(e),i=this._createGroups(r),!(i.length<=2)))return n.distributeElements(i,this._axis,this._dimension),i},zi.prototype._filterElements=function(e){var t=this._filters,n=this._axis,i=this._dimension,r=[].concat(e);return t.length?(A(t,function(o){r=o(r,n,i)}),r):e},zi.prototype._createGroups=function(e){var t=[],n=this,i=this._axis,r=this._dimension;if(!i)throw new Error('must have a defined "axis" and "dimension"');var o=dn(e,i);return A(o,function(a,s){var c=n._findRange(a,i,r),l,u=t[t.length-1];u&&n._hasIntersection(u.range,c)?t[t.length-1].elements.push(a):(l={range:c,elements:[a]},t.push(l))}),t},zi.prototype._setOrientation=function(e){var t=QR[e];this._axis=t[0],this._dimension=t[1]},zi.prototype._hasIntersection=function(e,t){return Math.max(e.min,e.max)>=Math.min(t.min,t.max)&&Math.min(e.min,e.max)<=Math.max(t.min,t.max)},zi.prototype._findRange=function(e){var t=e[this._axis],n=e[this._dimension];return{min:t+cy,max:t+n-cy}};var JR={__init__:["distributeElements"],distributeElements:["type",zi]};function Oc(e){Wn.call(this,e)}Oc.$inject=["eventBus"],j(Oc,Wn),Oc.prototype.init=function(){this.addRule("elements.distribute",function(e){var t=e.elements;return t=ne(t,function(n){var i=je(n,["bpmn:Association","bpmn:BoundaryEvent","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:Lane","bpmn:MessageFlow","bpmn:SequenceFlow","bpmn:TextAnnotation"]);return!(n.labelTarget||i)}),t=Ya(t),t.length<3?!1:t})};var eA={horizontal:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
                <polyline points="450 400 450 150 1350 150 1350 400" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
                <rect x="150" y="450" width="600" height="1200" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
                <rect x="1050" y="450" width="600" height="800" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
              </svg>`,vertical:`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1800 1800">
              <polyline points="400 1350 150 1350 150 450 400 450" style="fill:none;stroke:currentColor;stroke-width:100;stroke-linejoin:round;"/>
              <rect x="450" y="150" width="1200" height="600" rx="1" style="fill:none;stroke:currentColor;stroke-width:100;"></rect>
              <rect x="450" y="1050" width="800" height="600" rx="1" style="fill:currentColor;stroke:currentColor;stroke-width:100;opacity:.5;"></rect>
            </svg>`},ly=eA,tA=900;function Na(e,t,n,i){this._distributeElements=t,this._translate=n,this._popupMenu=e,this._rules=i,e.registerProvider("align-elements",tA,this)}Na.$inject=["popupMenu","distributeElements","translate","rules"],Na.prototype.getPopupMenuEntries=function(e){var t={};return this._isAllowed(e)&&k(t,this._getEntries(e)),t},Na.prototype._isAllowed=function(e){return this._rules.allowed("elements.distribute",{elements:e})},Na.prototype._getEntries=function(e){var t=this._distributeElements,n=this._translate,i=this._popupMenu,r={"distribute-elements-horizontal":{group:"distribute",title:n("Distribute elements horizontally"),className:"bjs-align-elements-menu-entry",imageHtml:ly.horizontal,action:function(o,a){t.trigger(e,"horizontal"),i.close()}},"distribute-elements-vertical":{group:"distribute",title:n("Distribute elements vertically"),imageHtml:ly.vertical,action:function(o,a){t.trigger(e,"vertical"),i.close()}}};return r};var nA={__depends__:[iu,JR],__init__:["bpmnDistributeElements","distributeElementsMenuProvider"],bpmnDistributeElements:["type",Oc],distributeElementsMenuProvider:["type",Na]},uy="is not a registered action",iA="is already registered";function ei(e,t){this._actions={};var n=this;e.on("diagram.init",function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})})}ei.$inject=["eventBus","injector"],ei.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),i=e.get("selection",!1),r=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),a=e.get("canvas",!1),s=e.get("rules",!1),c=e.get("keyboardMove",!1),l=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",function(){t.undo()}),this.register("redo",function(){t.redo()})),o&&i&&this.register("copy",function(){var u=i.get();if(u.length)return o.copy(u)}),o&&this.register("paste",function(){o.paste()}),r&&this.register("stepZoom",function(u){r.stepZoom(u.value)}),a&&this.register("zoom",function(u){a.zoom(u.value)}),n&&i&&s&&this.register("removeSelection",function(){var u=i.get();if(u.length){var p=s.allowed("elements.delete",{elements:u}),f;p!==!1&&(se(p)?f=p:f=u,f.length&&n.removeElements(f.slice()))}}),c&&this.register("moveCanvas",function(u){c.moveCanvas(u)}),l&&this.register("moveSelection",function(u){l.moveSelection(u.direction,u.accelerated)})},ei.prototype.trigger=function(e,t){if(!this._actions[e])throw jp(e,uy);return this._actions[e](t)},ei.prototype.register=function(e,t){var n=this;if(typeof e=="string")return this._registerAction(e,t);A(e,function(i,r){n._registerAction(r,i)})},ei.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw jp(e,iA);this._actions[e]=t},ei.prototype.unregister=function(e){if(!this.isRegistered(e))throw jp(e,uy);this._actions[e]=void 0},ei.prototype.getActions=function(){return Object.keys(this._actions)},ei.prototype.isRegistered=function(e){return!!this._actions[e]};function jp(e,t){return new Error(e+" "+t)}var rA={__init__:["editorActions"],editorActions:["type",ei]};function Bc(e){e.invoke(ei,this)}j(Bc,ei),Bc.$inject=["injector"],Bc.prototype._registerDefaultActions=function(e){ei.prototype._registerDefaultActions.call(this,e);var t=e.get("canvas",!1),n=e.get("elementRegistry",!1),i=e.get("selection",!1),r=e.get("spaceTool",!1),o=e.get("lassoTool",!1),a=e.get("handTool",!1),s=e.get("globalConnect",!1),c=e.get("distributeElements",!1),l=e.get("alignElements",!1),u=e.get("directEditing",!1),p=e.get("searchPad",!1),f=e.get("modeling",!1),d=e.get("contextPad",!1);t&&n&&i&&this._registerAction("selectElements",function(){var h=t.getRootElement(),v=n.filter(function(m){return m!==h});return i.select(v),v}),r&&this._registerAction("spaceTool",function(){r.toggle()}),o&&this._registerAction("lassoTool",function(){o.toggle()}),a&&this._registerAction("handTool",function(){a.toggle()}),s&&this._registerAction("globalConnectTool",function(){s.toggle()}),i&&c&&this._registerAction("distributeElements",function(h){var v=i.get(),m=h.type;v.length&&c.trigger(v,m)}),i&&l&&this._registerAction("alignElements",function(h){var v=i.get(),m=[],S=h.type;v.length&&(m=ne(v,function(x){return!b(x,"bpmn:Lane")}),l.trigger(m,S))}),i&&f&&this._registerAction("setColor",function(h){var v=i.get();v.length&&f.setColor(v,h)}),i&&u&&this._registerAction("directEditing",function(){var h=i.get();h.length&&u.activate(h[0])}),p&&this._registerAction("find",function(){p.toggle()}),t&&f&&this._registerAction("moveToOrigin",function(){var h=t.getRootElement(),v,m;b(h,"bpmn:Collaboration")?m=n.filter(function(S){return b(S.parent,"bpmn:Collaboration")}):m=n.filter(function(S){return S!==h&&!b(S.parent,"bpmn:SubProcess")}),v=Xt(m),f.moveElements(m,{x:-v.x,y:-v.y},h)}),i&&d&&this._registerAction("replaceElement",function(h){d.triggerEntry("replace","click",h)})};var oA={__depends__:[rA],editorActions:["type",Bc]};function py(e){e.on(["create.init","shape.move.init"],function(t){var n=t.context,i=t.shape;je(i,["bpmn:Participant","bpmn:SubProcess","bpmn:TextAnnotation"])&&(n.gridSnappingContext||(n.gridSnappingContext={}),n.gridSnappingContext.snapLocation="top-left")})}py.$inject=["eventBus"];var Nc=10;function $p(e,t,n){return n||(n="round"),Math[n](e/t)*t}var aA=1200,sA=800;function gr(e,t,n){var i=!n||n.active!==!1;this._eventBus=t;var r=this;t.on("diagram.init",sA,function(){r.setActive(i)}),t.on(["create.move","create.end","bendpoint.move.move","bendpoint.move.end","connect.move","connect.end","connectionSegment.move.move","connectionSegment.move.end","resize.move","resize.end","shape.move.move","shape.move.end"],aA,function(o){var a=o.originalEvent;if(!(!r.active||a&&$n(a))){var s=o.context,c=s.gridSnappingContext;c||(c=s.gridSnappingContext={}),["x","y"].forEach(function(l){var u={},p=lA(o,l,e);p&&(u.offset=p);var f=cA(o,l);f&&k(u,f),vo(o,l)||r.snapEvent(o,l,u)})}})}gr.prototype.snapEvent=function(e,t,n){var i=this.snapValue(e[t],n);zt(e,t,i)},gr.prototype.getGridSpacing=function(){return Nc},gr.prototype.snapValue=function(e,t){var n=0;t&&t.offset&&(n=t.offset),e+=n,e=$p(e,Nc);var i,r;return t&&t.min&&(i=t.min,L(i)&&(i=$p(i+n,Nc,"ceil"),e=Math.max(e,i))),t&&t.max&&(r=t.max,L(r)&&(r=$p(r+n,Nc,"floor"),e=Math.min(e,r))),e-=n,e},gr.prototype.isActive=function(){return this.active},gr.prototype.setActive=function(e){this.active=e,this._eventBus.fire("gridSnapping.toggle",{active:e})},gr.prototype.toggleActive=function(){this.setActive(!this.active)},gr.$inject=["elementRegistry","eventBus","config.gridSnapping"];function cA(e,t){var n=e.context,i=n.createConstraints,r=n.resizeConstraints||{},o=n.gridSnappingContext,a=o.snapConstraints;if(a&&a[t])return a[t];a||(a=o.snapConstraints={}),a[t]||(a[t]={});var s=n.direction;i&&(Lc(t)?(a.x.min=i.left,a.x.max=i.right):(a.y.min=i.top,a.y.max=i.bottom));var c=r.min,l=r.max;return c&&(Lc(t)?dy(s)?a.x.max=c.left:a.x.min=c.right:fy(s)?a.y.max=c.top:a.y.min=c.bottom),l&&(Lc(t)?dy(s)?a.x.min=l.left:a.x.max=l.right:fy(s)?a.y.min=l.top:a.y.max=l.bottom),a[t]}function lA(e,t,n){var i=e.context,r=e.shape,o=i.gridSnappingContext,a=o.snapLocation,s=o.snapOffset;return s&&L(s[t])||(s||(s=o.snapOffset={}),L(s[t])||(s[t]=0),!r)||(n.get(r.id)||(Lc(t)?s[t]+=r[t]+r.width/2:s[t]+=r[t]+r.height/2),!a)||(t==="x"?/left/.test(a)?s[t]-=r.width/2:/right/.test(a)&&(s[t]+=r.width/2):/top/.test(a)?s[t]-=r.height/2:/bottom/.test(a)&&(s[t]+=r.height/2)),s[t]}function Lc(e){return e==="x"}function fy(e){return e.indexOf("n")!==-1}function dy(e){return e.indexOf("w")!==-1}function Zr(e,t){X.call(this,e),this._gridSnapping=t;var n=this;this.preExecute("shape.resize",function(i){var r=i.context,o=r.hints||{},a=o.autoResize;if(a){var s=r.shape,c=r.newBounds;ee(a)?r.newBounds=n.snapComplex(c,a):r.newBounds=n.snapSimple(s,c)}})}Zr.$inject=["eventBus","gridSnapping","modeling"],j(Zr,X),Zr.prototype.snapSimple=function(e,t){var n=this._gridSnapping;return t.width=n.snapValue(t.width,{min:t.width}),t.height=n.snapValue(t.height,{min:t.height}),t.x=e.x+e.width/2-t.width/2,t.y=e.y+e.height/2-t.height/2,t},Zr.prototype.snapComplex=function(e,t){return/w|e/.test(t)&&(e=this.snapHorizontally(e,t)),/n|s/.test(t)&&(e=this.snapVertically(e,t)),e},Zr.prototype.snapHorizontally=function(e,t){var n=this._gridSnapping,i=/w/.test(t),r=/e/.test(t),o={};return o.width=n.snapValue(e.width,{min:e.width}),r&&(i?(o.x=n.snapValue(e.x,{max:e.x}),o.width+=n.snapValue(e.x-o.x,{min:e.x-o.x})):e.x=e.x+e.width-o.width),k(e,o),e},Zr.prototype.snapVertically=function(e,t){var n=this._gridSnapping,i=/n/.test(t),r=/s/.test(t),o={};return o.height=n.snapValue(e.height,{min:e.height}),i&&(r?(o.y=n.snapValue(e.y,{max:e.y}),o.height+=n.snapValue(e.y-o.y,{min:e.y-o.y})):e.y=e.y+e.height-o.height),k(e,o),e};var uA=2e3;function hy(e,t){e.on(["spaceTool.move","spaceTool.end"],uA,function(n){var i=n.context;if(i.initialized){var r=i.axis,o;r==="x"?(o=t.snapValue(n.dx),n.x=n.x+o-n.dx,n.dx=o):(o=t.snapValue(n.dy),n.y=n.y+o-n.dy,n.dy=o)}})}hy.$inject=["eventBus","gridSnapping"];var pA={__init__:["gridSnappingResizeBehavior","gridSnappingSpaceToolBehavior"],gridSnappingResizeBehavior:["type",Zr],gridSnappingSpaceToolBehavior:["type",hy]},fA={__depends__:[pA],__init__:["gridSnapping"],gridSnapping:["type",gr]},dA=2e3;function my(e,t,n){e.on("autoPlace",dA,function(i){var r=i.source,o=Pe(r),a=i.shape,s=tm(r,a,n);return["x","y"].forEach(function(c){var l={};s[c]!==o[c]&&(s[c]>o[c]?l.min=s[c]:l.max=s[c],b(a,"bpmn:TextAnnotation")&&(hA(c)?l.offset=-a.width/2:l.offset=-a.height/2),s[c]=t.snapValue(s[c],l))}),s})}my.$inject=["eventBus","gridSnapping","elementRegistry"];function hA(e){return e==="x"}var mA=1750;function vy(e,t,n){t.on(["create.start","shape.move.start"],mA,function(i){var r=i.context,o=r.shape,a=e.getRootElement();if(!(!b(o,"bpmn:Participant")||!b(a,"bpmn:Process")||!a.children.length)){var s=r.createConstraints;s&&(o.width=n.snapValue(o.width,{min:o.width}),o.height=n.snapValue(o.height,{min:o.height}))}})}vy.$inject=["canvas","eventBus","gridSnapping"];var vA=3e3;function Fc(e,t,n){X.call(this,e),this._gridSnapping=t;var i=this;this.postExecuted(["connection.create","connection.layout"],vA,function(r){var o=r.context,a=o.connection,s=o.hints||{},c=a.waypoints;s.connectionStart||s.connectionEnd||s.createElementsBehavior===!1||gA(c)&&n.updateWaypoints(a,i.snapMiddleSegments(c))})}Fc.$inject=["eventBus","gridSnapping","modeling"],j(Fc,X),Fc.prototype.snapMiddleSegments=function(e){var t=this._gridSnapping,n;e=e.slice();for(var i=1;i<e.length-2;i++)n=bA(t,e[i],e[i+1]),e[i]=n[0],e[i+1]=n[1];return e};function gA(e){return e.length>3}function yA(e){return e==="h"}function _A(e){return e==="v"}function bA(e,t,n){var i=Pi(t,n),r={};return yA(i)&&(r.y=e.snapValue(t.y)),_A(i)&&(r.x=e.snapValue(t.x)),("x"in r||"y"in r)&&(t=k({},t,r),n=k({},n,r)),[t,n]}var EA={__init__:["gridSnappingAutoPlaceBehavior","gridSnappingParticipantBehavior","gridSnappingLayoutConnectionBehavior"],gridSnappingAutoPlaceBehavior:["type",my],gridSnappingParticipantBehavior:["type",vy],gridSnappingLayoutConnectionBehavior:["type",Fc]},xA={__depends__:[fA,EA],__init__:["bpmnGridSnapping"],bpmnGridSnapping:["type",py]},wA=30,gy=30;function La(e,t){this._interactionEvents=t;var n=this;e.on(["interactionEvents.createHit","interactionEvents.updateHit"],function(i){var r=i.element,o=i.gfx;if(b(r,"bpmn:Lane"))return n._createParticipantHit(r,o);if(b(r,"bpmn:Participant"))return Ue(r)?n._createParticipantHit(r,o):n._createDefaultHit(r,o);if(b(r,"bpmn:SubProcess"))return Ue(r)?n._createSubProcessHit(r,o):n._createDefaultHit(r,o)})}La.$inject=["eventBus","interactionEvents"],La.prototype._createDefaultHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createDefaultHit(e,t),!0},La.prototype._createParticipantHit=function(e,t){this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height});var n=qt(e)?{width:wA,height:e.height}:{width:e.width,height:gy};return this._interactionEvents.createBoxHit(t,"all",n),!0},La.prototype._createSubProcessHit=function(e,t){return this._interactionEvents.removeHits(t),this._interactionEvents.createBoxHit(t,"no-move",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"click-stroke",{width:e.width,height:e.height}),this._interactionEvents.createBoxHit(t,"all",{width:e.width,height:gy}),!0};var SA={__init__:["bpmnInteractionEvents"],bpmnInteractionEvents:["type",La]};function jc(e){e.invoke(oo,this)}j(jc,oo),jc.$inject=["injector"],jc.prototype.registerBindings=function(e,t){oo.prototype.registerBindings.call(this,e,t);function n(i,r){t.isRegistered(i)&&e.addListener(r)}n("selectElements",function(i){var r=i.keyEvent;if(e.isKey(["a","A"],r)&&e.isCmd(r))return t.trigger("selectElements"),!0}),n("find",function(i){var r=i.keyEvent;if(e.isKey(["f","F"],r)&&e.isCmd(r))return t.trigger("find"),!0}),n("spaceTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["s","S"],r))return t.trigger("spaceTool"),!0}),n("lassoTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["l","L"],r))return t.trigger("lassoTool"),!0}),n("handTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["h","H"],r))return t.trigger("handTool"),!0}),n("globalConnectTool",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["c","C"],r))return t.trigger("globalConnectTool"),!0}),n("directEditing",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["e","E"],r))return t.trigger("directEditing"),!0}),n("replaceElement",function(i){var r=i.keyEvent;if(!e.hasModifier(r)&&e.isKey(["r","R"],r))return t.trigger("replaceElement",r),!0})};var CA={__depends__:[zl],__init__:["keyboardBindings"],keyboardBindings:["type",jc]},PA={moveSpeed:1,moveSpeedAccelerated:10},RA=1500,yy="left",_y="up",by="right",Ey="down",AA={ArrowLeft:yy,Left:yy,ArrowUp:_y,Up:_y,ArrowRight:by,Right:by,ArrowDown:Ey,Down:Ey},TA={left:function(e){return{x:-e,y:0}},up:function(e){return{x:0,y:-e}},right:function(e){return{x:e,y:0}},down:function(e){return{x:0,y:e}}};function xy(e,t,n,i,r){var o=this;this._config=k({},PA,e||{}),t.addListener(RA,function(a){var s=a.keyEvent,c=AA[s.key];if(c&&!t.isCmd(s)){var l=t.isShift(s);return o.moveSelection(c,l),!0}}),this.moveSelection=function(a,s){var c=r.get();if(c.length){var l=this._config[s?"moveSpeedAccelerated":"moveSpeed"],u=TA[a](l),p=i.allowed("elements.move",{shapes:c});p&&n.moveElements(c,u)}}}xy.$inject=["config.keyboardMoveSelection","keyboard","modeling","rules","selection"];var DA={__depends__:[zl,_i],__init__:["keyboardMoveSelection"],keyboardMoveSelection:["type",xy]},wy=10;function Fa(e,t,n,i){this._dragging=i,this._rules=t;var r=this;function o(c,l){var u=c.shape,p=c.direction,f=c.resizeConstraints,d;c.delta=l,d=hS(u,p,l),c.newBounds=vS(d,f),c.canExecute=r.canResize(c)}function a(c){var l=c.resizeConstraints,u=c.minBounds;l===void 0&&(u===void 0&&(u=r.computeMinResizeBox(c)),c.resizeConstraints={min:Ee(u)})}function s(c){var l=c.shape,u=c.canExecute,p=c.newBounds;if(u){if(p=Zf(p),!MA(l,p))return;n.resizeShape(l,p)}}e.on("resize.start",function(c){a(c.context)}),e.on("resize.move",function(c){var l={x:c.dx,y:c.dy};o(c.context,l)}),e.on("resize.end",function(c){s(c.context)})}Fa.prototype.canResize=function(e){var t=this._rules,n=Nt(e,["newBounds","shape","delta","direction"]);return t.allowed("shape.resize",n)},Fa.prototype.activate=function(e,t,n){var i=this._dragging,r,o;if(typeof n=="string"&&(n={direction:n}),r=k({shape:t},n),o=r.direction,!o)throw new Error("must provide a direction (n|w|s|e|nw|se|ne|sw)");i.init(e,Sy(t,o),"resize",{autoActivate:!0,cursor:kA(o),data:{shape:t,context:r}})},Fa.prototype.computeMinResizeBox=function(e){var t=e.shape,n=e.direction,i,r;return i=e.minDimensions||{width:wy,height:wy},r=Wm(t,e.childrenBoxPadding),gS(n,t,i,r)},Fa.$inject=["eventBus","rules","modeling","dragging"];function MA(e,t){return e.x!==t.x||e.y!==t.y||e.width!==t.width||e.height!==t.height}function Sy(e,t){var n=Pe(e),i=Ee(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function kA(e){var t="resize-";return e==="n"||e==="s"?t+"ns":e==="e"||e==="w"?t+"ew":e==="nw"||e==="se"?t+"nwse":t+"nesw"}var Cy="djs-resizing",Py="resize-not-ok",IA=500;function Ry(e,t,n){function i(o){var a=o.shape,s=o.newBounds,c=o.frame;c||(c=o.frame=n.addFrame(a,t.getActiveLayer()),t.addMarker(a,Cy)),s.width>5&&ce(c,{x:s.x,width:s.width}),s.height>5&&ce(c,{y:s.y,height:s.height}),o.canExecute?Ke(c).remove(Py):Ke(c).add(Py)}function r(o){var a=o.shape,s=o.frame;s&&Zt(o.frame),t.removeMarker(a,Cy)}e.on("resize.move",IA,function(o){i(o.context)}),e.on("resize.cleanup",function(o){r(o.context)})}Ry.$inject=["eventBus","canvas","previewSupport"];var $c=-6,zc=8,Hc=20,ja="djs-resizer",OA=["n","w","s","e","nw","ne","se","sw"];function yr(e,t,n,i){this._resize=i,this._canvas=t;var r=this;e.on("selection.changed",function(o){var a=o.newSelection;r.removeResizers(),a.length===1&&A(a,rt(r.addResizer,r))}),e.on("shape.changed",function(o){var a=o.element;n.isSelected(a)&&(r.removeResizers(),r.addResizer(a))})}yr.prototype.makeDraggable=function(e,t,n){var i=this._resize;function r(o){ir(o)&&i.activate(o,e,n)}be.bind(t,"mousedown",r),be.bind(t,"touchstart",r)},yr.prototype._createResizer=function(e,t,n,i){var r=this._getResizersParent(),o=BA(i),a=ve("g");Ke(a).add(ja),Ke(a).add(ja+"-"+e.id),Ke(a).add(ja+"-"+i),we(r,a);var s=ve("rect");ce(s,{x:-zc/2+o.x,y:-zc/2+o.y,width:zc,height:zc}),Ke(s).add(ja+"-visual"),we(a,s);var c=ve("rect");return ce(c,{x:-Hc/2+o.x,y:-Hc/2+o.y,width:Hc,height:Hc}),Ke(c).add(ja+"-hit"),we(a,c),ns(a,t,n),a},yr.prototype.createResizer=function(e,t){var n=Sy(e,t),i=this._createResizer(e,n.x,n.y,t);this.makeDraggable(e,i,t)},yr.prototype.addResizer=function(e){var t=this;pt(e)||!this._resize.canResize({shape:e})||A(OA,function(n){t.createResizer(e,n)})},yr.prototype.removeResizers=function(){var e=this._getResizersParent();Lo(e)},yr.prototype._getResizersParent=function(){return this._canvas.getLayer("resizers")},yr.$inject=["eventBus","canvas","selection","resize"];function BA(e){var t={x:0,y:0};return e.indexOf("e")!==-1?t.x=-$c:e.indexOf("w")!==-1&&(t.x=$c),e.indexOf("s")!==-1?t.y=-$c:e.indexOf("n")!==-1&&(t.y=$c),t}var Ay={__depends__:[Ei,Ni,go],__init__:["resize","resizePreview","resizeHandles"],resize:["type",Fa],resizePreview:["type",Ry],resizeHandles:["type",yr]},NA=2e3;function $a(e,t,n,i,r,o,a){this._bpmnFactory=t,this._canvas=n,this._modeling=r,this._textRenderer=a,i.registerProvider(this),e.on("element.dblclick",function(c){s(c.element,!0)}),e.on(["autoPlace.start","canvas.viewbox.changing","drag.init","element.mousedown","popupMenu.open","root.set","selection.changed"],function(){i.isActive()&&i.complete()}),e.on(["shape.remove","connection.remove"],NA,function(c){i.isActive(c.element)&&i.cancel()}),e.on(["commandStack.changed"],function(c){i.isActive()&&i.cancel()}),e.on("directEditing.activate",function(c){o.removeResizers()}),e.on("create.end",500,function(c){var l=c.context,u=l.shape,p=c.context.canExecute,f=c.isTouch;f||p&&(l.hints&&l.hints.createElementsBehavior===!1||s(u))}),e.on("autoPlace.end",500,function(c){s(c.shape)});function s(c,l){(l||je(c,["bpmn:Task","bpmn:TextAnnotation","bpmn:Participant"])||zp(c))&&i.activate(c)}}$a.$inject=["eventBus","bpmnFactory","canvas","directEditing","modeling","resizeHandles","textRenderer"],$a.prototype.activate=function(e){var t=jn(e);if(t!==void 0){var n={text:t},i=this.getEditingBBox(e);k(n,i);var r={},o=n.style||{};return k(o,{backgroundColor:null,border:null}),(je(e,["bpmn:Task","bpmn:Participant","bpmn:Lane","bpmn:CallActivity"])||zp(e))&&k(r,{centerVertically:!0}),Mr(e)&&(k(r,{autoResize:!0}),k(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),b(e,"bpmn:TextAnnotation")&&(k(r,{resizable:!0,autoResize:!0}),k(o,{backgroundColor:"#ffffff",border:"1px solid #ccc"})),k(n,{options:r,style:o}),n}},$a.prototype.getEditingBBox=function(e){var t=this._canvas,n=e.label||e,i=t.getAbsoluteBBox(n),r={x:i.x+i.width/2,y:i.y+i.height/2},o={x:i.x,y:i.y},a=t.zoom(),s=this._textRenderer.getDefaultStyle(),c=this._textRenderer.getExternalStyle(),l=c.fontSize*a,u=c.lineHeight,p=s.fontSize*a,f=s.lineHeight,d={fontFamily:this._textRenderer.getDefaultStyle().fontFamily,fontWeight:this._textRenderer.getDefaultStyle().fontWeight};if(b(e,"bpmn:Lane")||jA(e)){var h=qt(e),v=h?{width:i.height,height:30*a,x:i.x-i.height/2+15*a,y:r.y-30*a/2}:{width:i.width,height:30*a};k(o,v),k(d,{fontSize:p+"px",lineHeight:f,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:h?"rotate(-90deg)":null})}if(FA(e)){var m=qt(e),S=m?{width:i.width,height:i.height}:{width:i.height,height:i.width,x:r.x-i.height/2,y:r.y-i.width/2};k(o,S),k(d,{fontSize:p+"px",lineHeight:f,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px",transform:m?null:"rotate(-90deg)"})}(je(e,["bpmn:Task","bpmn:CallActivity"])||zp(e))&&(k(o,{width:i.width,height:i.height}),k(d,{fontSize:p+"px",lineHeight:f,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"})),LA(e)&&(k(o,{width:i.width,x:i.x}),k(d,{fontSize:p+"px",lineHeight:f,paddingTop:7*a+"px",paddingBottom:7*a+"px",paddingLeft:5*a+"px",paddingRight:5*a+"px"}));var x=90*a,E=7*a,y=4*a;if(n.labelTarget&&(k(o,{width:x,height:i.height+E+y,x:r.x-x/2,y:i.y-E}),k(d,{fontSize:l+"px",lineHeight:u,paddingTop:E+"px",paddingBottom:y+"px"})),Mr(n)&&!ls(n)&&!Xe(n)){var w=Ml(e),R=t.getAbsoluteBBox({x:w.x,y:w.y,width:0,height:0}),I=l+E+y;k(o,{width:x,height:I,x:R.x-x/2,y:R.y-I/2}),k(d,{fontSize:l+"px",lineHeight:u,paddingTop:E+"px",paddingBottom:y+"px"})}return b(e,"bpmn:TextAnnotation")&&(k(o,{width:i.width,height:i.height,minWidth:30*a,minHeight:10*a}),k(d,{textAlign:"left",paddingTop:5*a+"px",paddingBottom:7*a+"px",paddingLeft:7*a+"px",paddingRight:5*a+"px",fontSize:p+"px",lineHeight:f})),{bounds:o,style:d}},$a.prototype.update=function(e,t,n,i){var r,o;b(e,"bpmn:TextAnnotation")&&(o=this._canvas.getAbsoluteBBox(e),r={x:e.x,y:e.y,width:e.width/o.width*i.width,height:e.height/o.height*i.height}),$A(t)&&(t=null),this._modeling.updateLabel(e,t,r)};function zp(e){return b(e,"bpmn:SubProcess")&&!Ue(e)}function LA(e){return b(e,"bpmn:SubProcess")&&Ue(e)}function FA(e){return b(e,"bpmn:Participant")&&!Ue(e)}function jA(e){return b(e,"bpmn:Participant")&&Ue(e)}function $A(e){return!e||!e.trim()}var Ty="djs-element-hidden",Dy="djs-label-hidden";function My(e,t,n){var i=this,r=t.getDefaultLayer(),o,a,s;e.on("directEditing.activate",function(c){var l=c.active;if(o=l.element.label||l.element,b(o,"bpmn:TextAnnotation")){a=t.getAbsoluteBBox(o),s=ve("g");var u=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:o.height,position:{mx:0,my:0}}),p=i.path=ve("path");ce(p,{d:u,strokeWidth:2,stroke:zA(o)}),we(s,p),we(r,s),ln(s,o.x,o.y)}b(o,"bpmn:TextAnnotation")||o.labelTarget?t.addMarker(o,Ty):(b(o,"bpmn:Task")||b(o,"bpmn:CallActivity")||b(o,"bpmn:SubProcess")||b(o,"bpmn:Participant")||b(o,"bpmn:Lane"))&&t.addMarker(o,Dy)}),e.on("directEditing.resize",function(c){if(b(o,"bpmn:TextAnnotation")){var l=c.height,u=c.dy,p=Math.max(o.height/a.height*(l+u),0),f=n.getScaledPath("TEXT_ANNOTATION",{xScaleFactor:1,yScaleFactor:1,containerWidth:o.width,containerHeight:p,position:{mx:0,my:0}});ce(i.path,{d:f})}}),e.on(["directEditing.complete","directEditing.cancel"],function(c){var l=c.active;l&&(t.removeMarker(l.element.label||l.element,Ty),t.removeMarker(o,Dy)),o=void 0,a=void 0,s&&(Zt(s),s=void 0)})}My.$inject=["eventBus","canvas","pathMap"];function zA(e,t){var n=qe(e);return n.get("stroke")||t||"black"}var HA={__depends__:[Il,Ay,ny],__init__:["labelEditingProvider","labelEditingPreview"],labelEditingProvider:["type",$a],labelEditingPreview:["type",My]},GA=new Jo("tt");function UA(e){var t=st('<div class="djs-tooltip-container" />');return Rt(t,{position:"absolute",width:"0",height:"0"}),e.insertBefore(t,e.firstChild),t}function VA(e,t,n){Rt(e,{left:t+"px",top:n+"px"})}function Hp(e,t){e.style.display=t===!1?"none":""}var ky="djs-tooltip",Gp="."+ky;function Rn(e,t){this._eventBus=e,this._canvas=t,this._ids=GA,this._tooltipDefaults={show:{minZoom:.7,maxZoom:5}},this._tooltips={},this._tooltipRoot=UA(t.getContainer());var n=this;vt.bind(this._tooltipRoot,Gp,"mousedown",function(i){i.stopPropagation()}),vt.bind(this._tooltipRoot,Gp,"mouseover",function(i){n.trigger("mouseover",i)}),vt.bind(this._tooltipRoot,Gp,"mouseout",function(i){n.trigger("mouseout",i)}),this._init()}Rn.$inject=["eventBus","canvas"],Rn.prototype.add=function(e){if(!e.position)throw new Error("must specifiy tooltip position");if(!e.html)throw new Error("must specifiy tooltip html");var t=this._ids.next();return e=k({},this._tooltipDefaults,e,{id:t}),this._addTooltip(e),e.timeout&&this.setTimeout(e),t},Rn.prototype.trigger=function(e,t){var n=t.delegateTarget||t.target,i=this.get(Vt(n,"data-tooltip-id"));i&&(e==="mouseover"&&i.timeout&&this.clearTimeout(i),e==="mouseout"&&i.timeout&&(i.timeout=1e3,this.setTimeout(i)))},Rn.prototype.get=function(e){return typeof e!="string"&&(e=e.id),this._tooltips[e]},Rn.prototype.clearTimeout=function(e){if(e=this.get(e),!!e){var t=e.removeTimer;t&&(clearTimeout(t),e.removeTimer=null)}},Rn.prototype.setTimeout=function(e){if(e=this.get(e),!!e){this.clearTimeout(e);var t=this;e.removeTimer=setTimeout(function(){t.remove(e)},e.timeout)}},Rn.prototype.remove=function(e){var t=this.get(e);t&&(bn(t.html),bn(t.htmlContainer),delete t.htmlContainer,delete this._tooltips[t.id])},Rn.prototype.show=function(){Hp(this._tooltipRoot)},Rn.prototype.hide=function(){Hp(this._tooltipRoot,!1)},Rn.prototype._updateRoot=function(e){var t=e.scale||1,n=e.scale||1,i="matrix("+t+",0,0,"+n+","+-1*e.x*t+","+-1*e.y*n+")";this._tooltipRoot.style.transform=i,this._tooltipRoot.style["-ms-transform"]=i},Rn.prototype._addTooltip=function(e){var t=e.id,n=e.html,i,r=this._tooltipRoot;n.get&&n.constructor.prototype.jquery&&(n=n.get(0)),ee(n)&&(n=st(n)),i=st('<div data-tooltip-id="'+t+'" class="'+ky+'">'),Rt(i,{position:"absolute"}),i.appendChild(n),e.type&&Ne(i).add("djs-tooltip-"+e.type),e.className&&Ne(i).add(e.className),e.htmlContainer=i,r.appendChild(i),this._tooltips[t]=e,this._updateTooltip(e)},Rn.prototype._updateTooltip=function(e){var t=e.position,n=e.htmlContainer;VA(n,t.x,t.y)},Rn.prototype._updateTooltipVisibilty=function(e){A(this._tooltips,function(t){var n=t.show,i=t.htmlContainer,r=!0;n&&((n.minZoom>e.scale||n.maxZoom<e.scale)&&(r=!1),Hp(i,r))})},Rn.prototype._init=function(){var e=this;function t(n){e._updateRoot(n),e._updateTooltipVisibilty(n),e.show()}this._eventBus.on("canvas.viewbox.changing",function(n){e.hide()}),this._eventBus.on("canvas.viewbox.changed",function(n){t(n.viewbox)})};var ZA={__init__:["tooltips"],tooltips:["type",Rn]},WA="flow elements must be children of pools/participants";function Iy(e,t,n){function i(r,o,a){t.add({position:{x:r.x+5,y:r.y+5},type:"error",timeout:a||2e3,html:"<div>"+o+"</div>"})}e.on(["shape.move.rejected","create.rejected"],function(r){var o=r.context,a=o.shape,s=o.target;b(s,"bpmn:Collaboration")&&b(a,"bpmn:FlowNode")&&i(r,n(WA))})}Iy.$inject=["eventBus","tooltips","translate"];var YA={__depends__:[ZA],__init__:["modelingFeedback"],modelingFeedback:["type",Iy]},KA=500,XA=1250,qA=1500,Gc=Math.round;function QA(e){return{x:e.x+Gc(e.width/2),y:e.y+Gc(e.height/2)}}function Oy(e,t,n,i,r){function o(s,c,l,u){return r.allowed("elements.move",{shapes:s,delta:c,position:l,target:u})}e.on("shape.move.start",qA,function(s){var c=s.context,l=s.shape,u=i.get().slice();u.indexOf(l)===-1&&(u=[l]),u=JA(u),k(c,{shapes:u,validatedShapes:u,shape:l})}),e.on("shape.move.start",XA,function(s){var c=s.context,l=c.validatedShapes,u;if(u=c.canExecute=o(l),!u)return!1}),e.on("shape.move.move",KA,function(s){var c=s.context,l=c.validatedShapes,u=s.hover,p={x:s.dx,y:s.dy},f={x:s.x,y:s.y},d;if(d=o(l,p,f,u),c.delta=p,c.canExecute=d,d===null){c.target=null;return}c.target=u}),e.on("shape.move.end",function(s){var c=s.context,l=c.delta,u=c.canExecute,p=u==="attach",f=c.shapes;if(u===!1)return!1;l.x=Gc(l.x),l.y=Gc(l.y),!(l.x===0&&l.y===0)&&n.moveElements(f,l,c.target,{primaryShape:c.shape,attach:p})}),e.on("element.mousedown",function(s){if(ir(s)){var c=io(s);if(!c)throw new Error("must supply DOM mousedown event");return a(c,s.element)}});function a(s,c,l,u){if($(l)&&(u=l,l=!1),!(c.waypoints||!c.parent)&&!Ke(s.target).has("djs-hit-no-move")){var p=QA(c);return t.init(s,p,"shape.move",{cursor:"grabbing",autoActivate:l,data:{shape:c,context:u||{}}}),!0}}this.start=a}Oy.$inject=["eventBus","dragging","modeling","selection","rules"];function JA(e){var t=_n(e,"id");return ne(e,function(n){for(;n=n.parent;)if(t[n.id])return!1;return!0})}var By=499,Up="djs-dragging",Ny="drop-ok",Ly="drop-not-ok",Fy="new-parent",jy="attach-ok";function $y(e,t,n,i){function r(c){var l=o(c),u=eT(l);return u}function o(c){var l=$o(c,!0),u=l.flatMap(d=>(d.incoming||[]).concat(d.outgoing||[])),p=l.concat(u),f=[...new Set(p)];return f}function a(c,l){[jy,Ny,Ly,Fy].forEach(function(u){u===l?t.addMarker(c,u):t.removeMarker(c,u)})}function s(c,l,u){i.addDragger(l,c.dragGroup),u&&t.addMarker(l,Up),c.allDraggedElements?c.allDraggedElements.push(l):c.allDraggedElements=[l]}e.on("shape.move.start",By,function(c){var l=c.context,u=l.shapes,p=l.allDraggedElements,f=r(u);if(!l.dragGroup){var d=ve("g");ce(d,n.cls("djs-drag-group",["no-events"]));var h=t.getActiveLayer();we(h,d),l.dragGroup=d}f.forEach(function(v){i.addDragger(v,l.dragGroup)}),p?p=Yt([p,o(u)]):p=o(u),A(p,function(v){t.addMarker(v,Up)}),l.allDraggedElements=p,l.differentParents=tT(u)}),e.on("shape.move.move",By,function(c){var l=c.context,u=l.dragGroup,p=l.target,f=l.shape.parent,d=l.canExecute;p&&(d==="attach"?a(p,jy):l.canExecute&&f&&p.id!==f.id?a(p,Fy):a(p,l.canExecute?Ny:Ly)),ln(u,c.dx,c.dy)}),e.on(["shape.move.out","shape.move.cleanup"],function(c){var l=c.context,u=l.target;u&&a(u,null)}),e.on("shape.move.cleanup",function(c){var l=c.context,u=l.allDraggedElements,p=l.dragGroup;A(u,function(f){t.removeMarker(f,Up)}),p&&Zt(p)}),this.makeDraggable=s}$y.$inject=["eventBus","canvas","styles","previewSupport"];function eT(e){var t=ne(e,function(n){return pt(n)?te(e,de({id:n.source.id}))&&te(e,de({id:n.target.id})):!0});return t}function tT(e){return Bt(_n(e,function(t){return t.parent&&t.parent.id}))!==1}var nT={__depends__:[xs,_i,Nl,Ei,Ni,go],__init__:["move","movePreview"],move:["type",Oy],movePreview:["type",$y]},zy=".djs-palette-toggle",Hy=".entry",iT=zy+", "+Hy,Vp="djs-palette-",rT="shown",Zp="open",Gy="two-column",oT=1e3;function Ht(e,t){this._eventBus=e,this._canvas=t;var n=this;e.on("tool-manager.update",function(i){var r=i.tool;n.updateToolHighlight(r)}),e.on("i18n.changed",function(){n._update()}),e.on("diagram.init",function(){n._diagramInitialized=!0,n._rebuild()})}Ht.$inject=["eventBus","canvas"],Ht.prototype.registerProvider=function(e,t){t||(t=e,e=oT),this._eventBus.on("palette.getProviders",e,function(n){n.providers.push(t)}),this._rebuild()},Ht.prototype.getEntries=function(){var e=this._getProviders();return e.reduce(sT,{})},Ht.prototype._rebuild=function(){if(this._diagramInitialized){var e=this._getProviders();e.length&&(this._container||this._init(),this._update())}},Ht.prototype._init=function(){var e=this,t=this._eventBus,n=this._getParentContainer(),i=this._container=st(Ht.HTML_MARKUP);n.appendChild(i),Ne(n).add(Vp+rT),vt.bind(i,iT,"click",function(r){var o=r.delegateTarget;if(Si(o,zy))return e.toggle();e.trigger("click",r)}),be.bind(i,"mousedown",function(r){r.stopPropagation()}),vt.bind(i,Hy,"dragstart",function(r){e.trigger("dragstart",r)}),t.on("canvas.resized",this._layoutChanged,this),t.fire("palette.create",{container:i})},Ht.prototype._getProviders=function(e){var t=this._eventBus.createEvent({type:"palette.getProviders",providers:[]});return this._eventBus.fire(t),t.providers},Ht.prototype._toggleState=function(e){e=e||{};var t=this._getParentContainer(),n=this._container,i=this._eventBus,r,o=Ne(n),a=Ne(t);"twoColumn"in e?r=e.twoColumn:r=this._needsCollapse(t.clientHeight,this._entries||{}),o.toggle(Gy,r),a.toggle(Vp+Gy,r),"open"in e&&(o.toggle(Zp,e.open),a.toggle(Vp+Zp,e.open)),i.fire("palette.changed",{twoColumn:r,open:this.isOpen()})},Ht.prototype._update=function(){var e=ot(".djs-palette-entries",this._container),t=this._entries=this.getEntries();Ui(e),A(t,function(n,i){var r=n.group||"default",o=ot("[data-group="+ea(r)+"]",e);o||(o=st('<div class="group"></div>'),Vt(o,"data-group",r),e.appendChild(o));var a=n.html||(n.separator?'<hr class="separator" />':'<div class="entry" draggable="true"></div>'),s=st(a);if(o.appendChild(s),!n.separator&&(Vt(s,"data-action",i),n.title&&Vt(s,"title",n.title),n.className&&aT(s,n.className),n.imageUrl)){var c=st("<img>");Vt(c,"src",n.imageUrl),s.appendChild(c)}}),this.open()},Ht.prototype.trigger=function(e,t,n){var i,r,o=t.delegateTarget||t.target;return o?(i=Vt(o,"data-action"),r=t.originalEvent||t,this.triggerEntry(i,e,r,n)):t.preventDefault()},Ht.prototype.triggerEntry=function(e,t,n,i){var r=this._entries,o,a;if(o=r[e],!!o&&(a=o.action,this._eventBus.fire("palette.trigger",{entry:o,event:n})!==!1)){if(q(a)){if(t==="click")return a(n,i)}else if(a[t])return a[t](n,i);n.preventDefault()}},Ht.prototype._layoutChanged=function(){this._toggleState({})},Ht.prototype._needsCollapse=function(e,t){var n=50,i=Object.keys(t).length*46;return e<i+n},Ht.prototype.close=function(){this._toggleState({open:!1,twoColumn:!1})},Ht.prototype.open=function(){this._toggleState({open:!0})},Ht.prototype.toggle=function(){this.isOpen()?this.close():this.open()},Ht.prototype.isActiveTool=function(e){return e&&this._activeTool===e},Ht.prototype.updateToolHighlight=function(e){var t,n;this._toolsContainer||(t=ot(".djs-palette-entries",this._container),this._toolsContainer=ot("[data-group=tools]",t)),n=this._toolsContainer,A(n.children,function(i){var r=i.getAttribute("data-action");if(r){var o=Ne(i);r=r.replace("-tool",""),o.contains("entry")&&r===e?o.add("highlighted-entry"):o.remove("highlighted-entry")}})},Ht.prototype.isOpen=function(){return Ne(this._container).has(Zp)},Ht.prototype._getParentContainer=function(){return this._canvas.getContainer()},Ht.HTML_MARKUP='<div class="djs-palette"><div class="djs-palette-entries"></div><div class="djs-palette-toggle"></div></div>';function aT(e,t){var n=Ne(e),i=se(t)?t:t.split(/\s+/g);i.forEach(function(r){n.add(r)})}function sT(e,t){var n=t.getPaletteEntries();return q(n)?n(e):(A(n,function(i,r){e[r]=i}),e)}var cT={__init__:["palette"],palette:["type",Ht]},Uy="crosshair";function Wr(e,t,n,i,r,o,a){this._selection=r,this._dragging=n,this._mouse=a;var s=this,c={create:function(l){var u=t.getActiveLayer(),p;p=l.frame=ve("rect"),ce(p,{class:"djs-lasso-overlay",width:1,height:1,x:0,y:0}),we(u,p)},update:function(l){var u=l.frame,p=l.bbox;ce(u,{x:p.x,y:p.y,width:p.width,height:p.height})},remove:function(l){l.frame&&Zt(l.frame)}};o.registerTool("lasso",{tool:"lasso.selection",dragging:"lasso"}),e.on("lasso.selection.end",function(l){var u=l.originalEvent.target;!l.hover&&!(u instanceof SVGElement)||e.once("lasso.selection.ended",function(){s.activateLasso(l.originalEvent,!0)})}),e.on("lasso.end",0,function(l){var u=l.context,p=Wp(l),f=i.filter(function(h){return h}),d=bs(l);s.select(f,p,d?u.selection:[])}),e.on("lasso.start",function(l){var u=l.context;u.bbox=Wp(l),c.create(u),u.selection=r.get()}),e.on("lasso.move",function(l){var u=l.context;u.bbox=Wp(l),c.update(u)}),e.on("lasso.cleanup",function(l){var u=l.context;c.remove(u)}),e.on("element.mousedown",1500,function(l){if(bs(l))return s.activateLasso(l.originalEvent),!0})}Wr.$inject=["eventBus","canvas","dragging","elementRegistry","selection","toolManager","mouse"],Wr.prototype.activateLasso=function(e,t){this._dragging.init(e,"lasso",{autoActivate:t,cursor:Uy,data:{context:{}}})},Wr.prototype.activateSelection=function(e,t){this._dragging.init(e,"lasso.selection",{trapClick:!1,autoActivate:t,cursor:Uy,data:{context:{}},keepSelection:!0})},Wr.prototype.select=function(e,t,n=[]){var i=e_(e,t);this._selection.select([...n,...on(i)])},Wr.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateSelection(e,!!e)},Wr.prototype.isActive=function(){var e=this._dragging.context();return e&&/^lasso/.test(e.prefix)};function Wp(e){var t={x:e.x-e.dx,y:e.y-e.dy},n={x:e.x,y:e.y},i;return t.x<=n.x&&t.y<n.y||t.x<n.x&&t.y<=n.y?i={x:t.x,y:t.y,width:n.x-t.x,height:n.y-t.y}:t.x>=n.x&&t.y<n.y||t.x>n.x&&t.y<=n.y?i={x:n.x,y:t.y,width:t.x-n.x,height:n.y-t.y}:t.x<=n.x&&t.y>n.y||t.x<n.x&&t.y>=n.y?i={x:t.x,y:n.y,width:n.x-t.x,height:t.y-n.y}:t.x>=n.x&&t.y>n.y||t.x>n.x&&t.y>=n.y?i={x:n.x,y:n.y,width:t.x-n.x,height:t.y-n.y}:i={x:n.x,y:n.y,width:0,height:0},i}var lT={__depends__:[hc,ya],__init__:["lassoTool"],lassoTool:["type",Wr]},Yp=1500,Vy="grab";function Ro(e,t,n,i,r,o){this._dragging=n,this._mouse=o;var a=this,s=i.get("keyboard",!1);r.registerTool("hand",{tool:"hand",dragging:"hand.move"}),e.on("element.mousedown",Yp,function(c){if(ta(c))return a.activateMove(c.originalEvent,!0),!1}),s&&s.addListener(Yp,function(c){if(!(!Zy(c.keyEvent)||a.isActive())){var l=a._mouse.getLastMoveEvent();a.activateMove(l,!!l)}},"keyboard.keydown"),s&&s.addListener(Yp,function(c){!Zy(c.keyEvent)||!a.isActive()||a.toggle()},"keyboard.keyup"),e.on("hand.end",function(c){var l=c.originalEvent.target;if(!c.hover&&!(l instanceof SVGElement))return!1;e.once("hand.ended",function(){a.activateMove(c.originalEvent,{reactivate:!0})})}),e.on("hand.move.move",function(c){var l=t.viewbox().scale;t.scroll({dx:c.dx*l,dy:c.dy*l})}),e.on("hand.move.end",function(c){var l=c.context,u=l.reactivate;return!ta(c)&&u&&e.once("hand.move.ended",function(p){a.activateHand(p.originalEvent,!0,!0)}),!1})}Ro.$inject=["eventBus","canvas","dragging","injector","toolManager","mouse"],Ro.prototype.activateMove=function(e,t,n){typeof t=="object"&&(n=t,t=!1),this._dragging.init(e,"hand.move",{autoActivate:t,cursor:Vy,data:{context:n||{}}})},Ro.prototype.activateHand=function(e,t,n){this._dragging.init(e,"hand",{trapClick:!1,autoActivate:t,cursor:Vy,data:{context:{reactivate:n}}})},Ro.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();this.activateHand(e,!!e)},Ro.prototype.isActive=function(){var e=this._dragging.context();return e?/^(hand|hand\.move)$/.test(e.prefix):!1};function Zy(e){return Qt("Space",e)}var uT={__depends__:[hc,ya],__init__:["handTool"],handTool:["type",Ro]},Wy="connect-ok",Yy="connect-not-ok";function Ao(e,t,n,i,r,o,a){var s=this;this._dragging=t,this._rules=o,this._mouse=a,r.registerTool("global-connect",{tool:"global-connect",dragging:"global-connect.drag"}),e.on("global-connect.hover",function(c){var l=c.context,u=c.hover,p=l.canStartConnect=s.canStartConnect(u);p!==null&&(l.startTarget=u,i.addMarker(u,p?Wy:Yy))}),e.on(["global-connect.out","global-connect.cleanup"],function(c){var l=c.context.startTarget,u=c.context.canStartConnect;l&&i.removeMarker(l,u?Wy:Yy)}),e.on(["global-connect.ended"],function(c){var l=c.context,u=l.startTarget,p={x:c.x,y:c.y},f=s.canStartConnect(u);if(f)return e.once("element.out",function(){e.once(["connect.ended","connect.canceled"],function(){e.fire("global-connect.drag.ended")}),n.start(null,u,p)}),!1})}Ao.$inject=["eventBus","dragging","connect","canvas","toolManager","rules","mouse"],Ao.prototype.start=function(e,t){this._dragging.init(e,"global-connect",{autoActivate:t,trapClick:!1,data:{context:{}}})},Ao.prototype.toggle=function(){if(this.isActive())return this._dragging.cancel();var e=this._mouse.getLastMoveEvent();return this.start(e,!!e)},Ao.prototype.isActive=function(){var e=this._dragging.context();return e&&/^global-connect/.test(e.prefix)},Ao.prototype.canStartConnect=function(e){return this._rules.allowed("connection.start",{source:e})};var pT={__depends__:[yu,Ei,Ni,hc,ya],globalConnect:["type",Ao]};function Uc(e,t,n,i,r,o,a,s){this._palette=e,this._create=t,this._elementFactory=n,this._spaceTool=i,this._lassoTool=r,this._handTool=o,this._globalConnect=a,this._translate=s,e.registerProvider(this)}Uc.$inject=["palette","create","elementFactory","spaceTool","lassoTool","handTool","globalConnect","translate"],Uc.prototype.getPaletteEntries=function(){var e={},t=this._create,n=this._elementFactory,i=this._spaceTool,r=this._lassoTool,o=this._handTool,a=this._globalConnect,s=this._translate;function c(p,f,d,h,v){function m(S){var x=n.createShape(k({type:p},v));t.start(S,x)}return{group:f,className:d,title:h,action:{dragstart:m,click:m}}}function l(p){var f=n.createShape({type:"bpmn:SubProcess",x:0,y:0,isExpanded:!0}),d=n.createShape({type:"bpmn:StartEvent",x:40,y:82,parent:f});t.start(p,[f,d],{hints:{autoSelect:[f]}})}function u(p){t.start(p,n.createParticipantShape())}return k(e,{"hand-tool":{group:"tools",className:"bpmn-icon-hand-tool",title:s("Activate hand tool"),action:{click:function(p){o.activateHand(p)}}},"lasso-tool":{group:"tools",className:"bpmn-icon-lasso-tool",title:s("Activate lasso tool"),action:{click:function(p){r.activateSelection(p)}}},"space-tool":{group:"tools",className:"bpmn-icon-space-tool",title:s("Activate create/remove space tool"),action:{click:function(p){i.activateSelection(p)}}},"global-connect-tool":{group:"tools",className:"bpmn-icon-connection-multi",title:s("Activate global connect tool"),action:{click:function(p){a.start(p)}}},"tool-separator":{group:"tools",separator:!0},"create.start-event":c("bpmn:StartEvent","event","bpmn-icon-start-event-none",s("Create start event")),"create.intermediate-event":c("bpmn:IntermediateThrowEvent","event","bpmn-icon-intermediate-event-none",s("Create intermediate/boundary event")),"create.end-event":c("bpmn:EndEvent","event","bpmn-icon-end-event-none",s("Create end event")),"create.exclusive-gateway":c("bpmn:ExclusiveGateway","gateway","bpmn-icon-gateway-none",s("Create gateway")),"create.task":c("bpmn:Task","activity","bpmn-icon-task",s("Create task")),"create.data-object":c("bpmn:DataObjectReference","data-object","bpmn-icon-data-object",s("Create data object reference")),"create.data-store":c("bpmn:DataStoreReference","data-store","bpmn-icon-data-store",s("Create data store reference")),"create.subprocess-expanded":{group:"activity",className:"bpmn-icon-subprocess-expanded",title:s("Create expanded sub-process"),action:{dragstart:l,click:l}},"create.participant-expanded":{group:"collaboration",className:"bpmn-icon-participant",title:s("Create pool/participant"),action:{dragstart:u,click:u}},"create.group":c("bpmn:Group","artifact","bpmn-icon-group",s("Create group"))}),e};var fT={__depends__:[cT,fc,vg,lT,uT,pT,ds],__init__:["paletteProvider"],paletteProvider:["type",Uc]},dT=250;function Kp(e,t,n,i,r){X.call(this,e);function o(s){var c=s.canExecute.replacements;A(c,function(l){var u=l.oldElementId,p={type:l.newElementType};if(!s.visualReplacements[u]){var f=t.get(u);k(p,{x:f.x,y:f.y});var d=n.createShape(p);i.addShape(d,f.parent);var h=ot('[data-element-id="'+ea(f.id)+'"]',s.dragGroup);h&&ce(h,{display:"none"});var v=r.addDragger(d,s.dragGroup);s.visualReplacements[u]=v,i.removeShape(d)}})}function a(s){var c=s.visualReplacements;A(c,function(l,u){var p=ot('[data-element-id="'+ea(u)+'"]',s.dragGroup);p&&ce(p,{display:"inline"}),l.remove(),c[u]&&delete c[u]})}e.on("shape.move.move",dT,function(s){var c=s.context,l=c.canExecute;c.visualReplacements||(c.visualReplacements={}),l&&l.replacements?o(c):a(c)})}Kp.$inject=["eventBus","elementRegistry","elementFactory","canvas","previewSupport"],j(Kp,X);var hT={__depends__:[go],__init__:["bpmnReplacePreview"],bpmnReplacePreview:["type",Kp]},mT=1250,Xp=40,vT=20,gT=10,Ky=20,Xy=["x","y"],yT=Math.abs;function qy(e){e.on(["connect.hover","connect.move","connect.end"],mT,function(t){var n=t.context,i=n.canExecute,r=n.start,o=n.hover,a=n.source,s=n.target;t.originalEvent&&$n(t.originalEvent)||(n.initialConnectionStart||(n.initialConnectionStart=n.connectionStart),i&&o&&_T(t,o,wT(o)),o&&xT(i,["bpmn:Association","bpmn:DataInputAssociation","bpmn:DataOutputAssociation","bpmn:SequenceFlow"])?(n.connectionStart=Yn(r),je(o,["bpmn:Event","bpmn:Gateway"])&&Qy(t,Yn(o)),je(o,["bpmn:Task","bpmn:SubProcess"])&&bT(t,o),b(a,"bpmn:BoundaryEvent")&&s===a.host&&ET(t)):Jy(i,"bpmn:MessageFlow")?(b(r,"bpmn:Event")&&(n.connectionStart=Yn(r)),b(o,"bpmn:Event")&&Qy(t,Yn(o))):n.connectionStart=n.initialConnectionStart)})}qy.$inject=["eventBus"];function _T(e,t,n){Xy.forEach(function(i){var r=e0(i,t);e[i]<t[i]+n?zt(e,i,t[i]+n):e[i]>t[i]+r-n&&zt(e,i,t[i]+r-n)})}function bT(e,t){var n=Yn(t);Xy.forEach(function(i){ST(e,t,i)&&zt(e,i,n[i])})}function ET(e){var t=e.context,n=t.source,i=t.target;if(!CT(t)){var r=Yn(n),o=hn(r,i,-10),a=[];/top|bottom/.test(o)&&a.push("x"),/left|right/.test(o)&&a.push("y"),a.forEach(function(s){var c=e[s],l;yT(c-r[s])<Xp&&(c>r[s]?l=r[s]+Xp:l=r[s]-Xp,zt(e,s,l))})}}function Qy(e,t){zt(e,"x",t.x),zt(e,"y",t.y)}function Jy(e,t){return e&&e.type===t}function xT(e,t){return yn(t,function(n){return Jy(e,n)})}function e0(e,t){return e==="x"?t.width:t.height}function wT(e){return b(e,"bpmn:Task")?gT:vT}function ST(e,t,n){return e[n]>t[n]+Ky&&e[n]<t[n]+e0(n,t)-Ky}function CT(e){var t=e.hover,n=e.source;return t&&n&&t===n}function _r(){this._targets={},this._snapOrigins={},this._snapLocations=[],this._defaultSnaps={}}_r.prototype.getSnapOrigin=function(e){return this._snapOrigins[e]},_r.prototype.setSnapOrigin=function(e,t){this._snapOrigins[e]=t,this._snapLocations.indexOf(e)===-1&&this._snapLocations.push(e)},_r.prototype.addDefaultSnap=function(e,t){var n=this._defaultSnaps[e];n||(n=this._defaultSnaps[e]=[]),n.push(t)},_r.prototype.getSnapLocations=function(){return this._snapLocations},_r.prototype.setSnapLocations=function(e){this._snapLocations=e},_r.prototype.pointsForTarget=function(e){var t=e.id||e,n=this._targets[t];return n||(n=this._targets[t]=new Vc,n.initDefaults(this._defaultSnaps)),n};function Vc(){this._snapValues={}}Vc.prototype.add=function(e,t){var n=this._snapValues[e];n||(n=this._snapValues[e]={x:[],y:[]}),n.x.indexOf(t.x)===-1&&n.x.push(t.x),n.y.indexOf(t.y)===-1&&n.y.push(t.y)},Vc.prototype.snap=function(e,t,n,i){var r=this._snapValues[t];return r&&j1(e[n],r[n],i)},Vc.prototype.initDefaults=function(e){var t=this;A(e||{},function(n,i){A(n,function(r){t.add(i,r)})})};var PT=1250;function wi(e,t,n){var i=this;this._elementRegistry=e,t.on(["create.start","shape.move.start"],function(r){i.initSnap(r)}),t.on(["create.move","create.end","shape.move.move","shape.move.end"],PT,function(r){var o=r.context,a=o.shape,s=o.snapContext,c=o.target;if(!(r.originalEvent&&$n(r.originalEvent))&&!(vo(r)||!c)){var l=s.pointsForTarget(c);l.initialized||(l=i.addSnapTargetPoints(l,a,c),l.initialized=!0),n.snap(r,l)}}),t.on(["create.cleanup","shape.move.cleanup"],function(){n.hide()})}wi.$inject=["elementRegistry","eventBus","snapping"],wi.prototype.initSnap=function(e){var t=this._elementRegistry,n=e.context,i=n.shape,r=n.snapContext;r||(r=n.snapContext=new _r);var o;t.get(i.id)?o=Yn(i,e):o={x:e.x+Yn(i).x,y:e.y+Yn(i).y};var a={x:o.x-i.width/2,y:o.y-i.height/2},s={x:o.x+i.width/2,y:o.y+i.height/2};return r.setSnapOrigin("mid",{x:o.x-e.x,y:o.y-e.y}),Xe(i)||(r.setSnapOrigin("top-left",{x:a.x-e.x,y:a.y-e.y}),r.setSnapOrigin("bottom-right",{x:s.x-e.x,y:s.y-e.y})),r},wi.prototype.addSnapTargetPoints=function(e,t,n){var i=this.getSnapTargets(t,n);return A(i,function(r){if(Xe(r)){Xe(t)&&e.add("mid",Yn(r));return}if(pt(r)){if(r.waypoints.length<3)return;var o=r.waypoints.slice(1,-1);A(o,function(a){e.add("mid",a)});return}e.add("mid",Yn(r))}),!L(t.x)||!L(t.y)||this._elementRegistry.get(t.id)&&e.add("mid",Yn(t)),e},wi.prototype.getSnapTargets=function(e,t){return km(t).filter(function(n){return!RT(n)})};function RT(e){return!!e.hidden}var t0=1500;function To(e,t){t.invoke(wi,this),e.on(["create.move","create.end"],t0,MT),e.on(["create.move","create.end","shape.move.move","shape.move.end"],t0,function(n){var i=n.context,r=i.canExecute,o=i.target,a=r&&(r==="attach"||r.attach);a&&!vo(n)&&AT(n,o)})}j(To,wi),To.$inject=["eventBus","injector"],To.prototype.initSnap=function(e){var t=wi.prototype.initSnap.call(this,e),n=e.shape,i=!!this._elementRegistry.get(n.id);return A(n.outgoing,function(r){var o=r.waypoints[0];o=o.original||o,t.setSnapOrigin(r.id+"-docking",i0(o,i,e))}),A(n.incoming,function(r){var o=r.waypoints[r.waypoints.length-1];o=o.original||o,t.setSnapOrigin(r.id+"-docking",i0(o,i,e))}),b(n,"bpmn:Participant")&&t.setSnapLocations(["top-left","bottom-right","mid"]),t},To.prototype.addSnapTargetPoints=function(e,t,n){wi.prototype.addSnapTargetPoints.call(this,e,t,n);var i=this.getSnapTargets(t,n);A(i,function(o){(DT(o)||TT([t,o],"bpmn:TextAnnotation"))&&(e.add("top-left",Dm(o)),e.add("bottom-right",Mm(o)))});var r=this._elementRegistry;return A(t.incoming,function(o){if(r.get(t.id)){n0(i,o.source)||e.add("mid",Pe(o.source));var a=o.waypoints[0];e.add(o.id+"-docking",a.original||a)}}),A(t.outgoing,function(o){if(r.get(t.id)){n0(i,o.target)||e.add("mid",Pe(o.target));var a=o.waypoints[o.waypoints.length-1];e.add(o.id+"-docking",a.original||a)}}),b(n,"bpmn:SequenceFlow")&&(e=this.addSnapTargetPoints(e,t,n.parent)),e},To.prototype.getSnapTargets=function(e,t){return wi.prototype.getSnapTargets.call(this,e,t).filter(function(n){return!b(n,"bpmn:Lane")})};function AT(e,t){var n=Ee(t),i=Tv(e,t),r=e.context,o=r.shape,a;o.parent?a={x:0,y:0}:a=Pe(o),/top/.test(i)?zt(e,"y",n.top-a.y):/bottom/.test(i)&&zt(e,"y",n.bottom-a.y),/left/.test(i)?zt(e,"x",n.left-a.x):/right/.test(i)&&zt(e,"x",n.right-a.x)}function TT(e,t){return e.every(function(n){return b(n,t)})}function DT(e){return b(e,"bpmn:SubProcess")&&Ue(e)?!0:b(e,"bpmn:Participant")}function MT(e){var t=e.context,n=t.createConstraints;if(n){var i=n.top,r=n.right,o=n.bottom,a=n.left;(a&&a>=e.x||r&&r<=e.x)&&zt(e,"x",e.x),(i&&i>=e.y||o&&o<=e.y)&&zt(e,"y",e.y)}}function n0(e,t){return e.indexOf(t)!==-1}function i0(e,t,n){return t?{x:e.x-n.x,y:e.y-n.y}:{x:e.x,y:e.y}}var kT=1250;function za(e,t){var n=this;e.on(["resize.start"],function(i){n.initSnap(i)}),e.on(["resize.move","resize.end"],kT,function(i){var r=i.context,o=r.shape,a=o.parent,s=r.direction,c=r.snapContext;if(!(i.originalEvent&&$n(i.originalEvent))&&!vo(i)){var l=c.pointsForTarget(a);l.initialized||(l=n.addSnapTargetPoints(l,o,a,s),l.initialized=!0),BT(s)&&zt(i,"x",i.x),NT(s)&&zt(i,"y",i.y),t.snap(i,l)}}),e.on(["resize.cleanup"],function(){t.hide()})}za.prototype.initSnap=function(e){var t=e.context,n=t.shape,i=t.direction,r=t.snapContext;r||(r=t.snapContext=new _r);var o=r0(n,i);return r.setSnapOrigin("corner",{x:o.x-e.x,y:o.y-e.y}),r},za.prototype.addSnapTargetPoints=function(e,t,n,i){var r=this.getSnapTargets(t,n);return A(r,function(o){e.add("corner",Mm(o)),e.add("corner",Dm(o))}),e.add("corner",r0(t,i)),e},za.$inject=["eventBus","snapping"],za.prototype.getSnapTargets=function(e,t){return km(t).filter(function(n){return!IT(n,e)&&!pt(n)&&!OT(n)&&!Xe(n)})};function r0(e,t){var n=Pe(e),i=Ee(e),r={x:n.x,y:n.y};return t.indexOf("n")!==-1?r.y=i.top:t.indexOf("s")!==-1&&(r.y=i.bottom),t.indexOf("e")!==-1?r.x=i.right:t.indexOf("w")!==-1&&(r.x=i.left),r}function IT(e,t){return e.host===t}function OT(e){return!!e.hidden}function BT(e){return e==="n"||e==="s"}function NT(e){return e==="e"||e==="w"}var LT=7,FT=1e3;function br(e){this._canvas=e,this._asyncHide=Dt(rt(this.hide,this),FT)}br.$inject=["canvas"],br.prototype.snap=function(e,t){var n=e.context,i=n.snapContext,r=i.getSnapLocations(),o={x:vo(e,"x"),y:vo(e,"y")};A(r,function(a){var s=i.getSnapOrigin(a),c={x:e.x+s.x,y:e.y+s.y};if(A(["x","y"],function(l){var u;o[l]||(u=t.snap(c,a,l,LT),u!==void 0&&(o[l]={value:u,originValue:u-s[l]}))}),o.x&&o.y)return!1}),this.showSnapLine("vertical",o.x&&o.x.value),this.showSnapLine("horizontal",o.y&&o.y.value),A(["x","y"],function(a){var s=o[a];$(s)&&zt(e,a,s.originValue)})},br.prototype._createLine=function(e){var t=this._canvas.getLayer("snap"),n=ve("path");return ce(n,{d:"M0,0 L0,0"}),Ke(n).add("djs-snap-line"),we(t,n),{update:function(i){L(i)?e==="horizontal"?ce(n,{d:"M-100000,"+i+" L+100000,"+i,display:""}):ce(n,{d:"M "+i+",-100000 L "+i+", +100000",display:""}):ce(n,{display:"none"})}}},br.prototype._createSnapLines=function(){this._snapLines={horizontal:this._createLine("horizontal"),vertical:this._createLine("vertical")}},br.prototype.showSnapLine=function(e,t){var n=this.getSnapLine(e);n&&n.update(t),this._asyncHide()},br.prototype.getSnapLine=function(e){return this._snapLines||this._createSnapLines(),this._snapLines[e]},br.prototype.hide=function(){A(this._snapLines,function(e){e.update()})};var jT={__init__:["createMoveSnapping","resizeSnapping","snapping"],createMoveSnapping:["type",wi],resizeSnapping:["type",za],snapping:["type",br]},$T={__depends__:[jT],__init__:["connectSnapping","createMoveSnapping"],connectSnapping:["type",qy],createMoveSnapping:["type",To]},o0=300;function Re(e,t,n,i){this._open=!1,this._results={},this._eventMaps=[],this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._canvas=e,this._eventBus=t,this._selection=n,this._translate=i,this._container=this._getBoxHtml(),this._searchInput=ot(Re.INPUT_SELECTOR,this._container),this._resultsContainer=ot(Re.RESULTS_CONTAINER_SELECTOR,this._container),this._canvas.getContainer().appendChild(this._container),t.on(["canvas.destroy","diagram.destroy","drag.init","elements.changed"],this.close,this)}Re.$inject=["canvas","eventBus","selection","translate"],Re.prototype._bindEvents=function(){var e=this;function t(n,i,r,o){e._eventMaps.push({el:n,type:r,listener:vt.bind(n,i,r,o)})}t(document,"html","click",function(n){e.close(!1)}),t(this._container,Re.INPUT_SELECTOR,"click",function(n){n.stopPropagation(),n.delegateTarget.focus()}),t(this._container,Re.RESULT_SELECTOR,"mouseover",function(n){n.stopPropagation(),e._scrollToNode(n.delegateTarget),e._preselect(n.delegateTarget)}),t(this._container,Re.RESULT_SELECTOR,"click",function(n){n.stopPropagation(),e._select(n.delegateTarget)}),t(this._container,Re.INPUT_SELECTOR,"keydown",function(n){Qt("ArrowUp",n)&&n.preventDefault(),Qt("ArrowDown",n)&&n.preventDefault()}),t(this._container,Re.INPUT_SELECTOR,"keyup",function(n){if(Qt("Escape",n))return e.close();if(Qt("Enter",n)){var i=e._getCurrentResult();return i?e._select(i):e.close(!1)}if(Qt("ArrowUp",n))return e._scrollToDirection(!0);if(Qt("ArrowDown",n))return e._scrollToDirection();Qt(["ArrowLeft","ArrowRight"],n)||e._search(n.delegateTarget.value)})},Re.prototype._unbindEvents=function(){this._eventMaps.forEach(function(e){vt.unbind(e.el,e.type,e.listener)})},Re.prototype._search=function(e){var t=this;if(this._clearResults(),!(!e||e==="")){var n=this._searchProvider.find(e);if(n=n.filter(function(r){return!t._canvas.getRootElements().includes(r.element)}),!n.length){this._clearMarkers(),this._selection.select(null);return}n.forEach(function(r){var o=r.element.id,a=t._createResultNode(r,o);t._results[o]={element:r.element,node:a}});var i=ot(Re.RESULT_SELECTOR,this._resultsContainer);this._scrollToNode(i),this._preselect(i)}},Re.prototype._scrollToDirection=function(e){var t=this._getCurrentResult();if(t){var n=e?t.previousElementSibling:t.nextElementSibling;n&&(this._scrollToNode(n),this._preselect(n))}},Re.prototype._scrollToNode=function(e){if(!(!e||e===this._getCurrentResult())){var t=e.offsetTop,n=this._resultsContainer.scrollTop,i=t-this._resultsContainer.clientHeight+e.clientHeight;t<n?this._resultsContainer.scrollTop=t:n<i&&(this._resultsContainer.scrollTop=i)}},Re.prototype._clearResults=function(){Ui(this._resultsContainer),this._results={},this._eventBus.fire("searchPad.cleared")},Re.prototype._clearMarkers=function(){for(var e in this._results)this._canvas.removeMarker(this._results[e].element,"djs-search-preselected")},Re.prototype._getCurrentResult=function(){return ot(Re.RESULT_SELECTED_SELECTOR,this._resultsContainer)},Re.prototype._createResultNode=function(e,t){var n=st(Re.RESULT_HTML);return e.primaryTokens.length>0&&a0(n,e.primaryTokens,Re.RESULT_PRIMARY_HTML),a0(n,e.secondaryTokens,Re.RESULT_SECONDARY_HTML),Vt(n,Re.RESULT_ID_ATTRIBUTE,t),this._resultsContainer.appendChild(n),n},Re.prototype.registerProvider=function(e){this._searchProvider=e},Re.prototype.open=function(){if(!this._searchProvider)throw new Error("no search provider registered");this.isOpen()||(this._cachedRootElement=this._canvas.getRootElement(),this._cachedSelection=this._selection.get(),this._cachedViewbox=this._canvas.viewbox(),this._bindEvents(),this._open=!0,Ne(this._canvas.getContainer()).add("djs-search-open"),Ne(this._container).add("open"),this._searchInput.focus(),this._eventBus.fire("searchPad.opened"))},Re.prototype.close=function(e=!0){this.isOpen()&&(e&&(this._cachedRootElement&&this._canvas.setRootElement(this._cachedRootElement),this._cachedSelection&&this._selection.select(this._cachedSelection),this._cachedViewbox&&this._canvas.viewbox(this._cachedViewbox),this._eventBus.fire("searchPad.restored")),this._cachedRootElement=null,this._cachedSelection=null,this._cachedViewbox=null,this._unbindEvents(),this._open=!1,Ne(this._canvas.getContainer()).remove("djs-search-open"),Ne(this._container).remove("open"),this._clearMarkers(),this._clearResults(),this._searchInput.value="",this._searchInput.blur(),this._eventBus.fire("searchPad.closed"))},Re.prototype.toggle=function(){this.isOpen()?this.close():this.open()},Re.prototype.isOpen=function(){return this._open},Re.prototype._preselect=function(e){var t=this._getCurrentResult();if(e!==t){this._clearMarkers(),t&&Ne(t).remove(Re.RESULT_SELECTED_CLASS);var n=Vt(e,Re.RESULT_ID_ATTRIBUTE),i=this._results[n].element;Ne(e).add(Re.RESULT_SELECTED_CLASS),this._canvas.scrollToElement(i,{top:o0}),this._selection.select(i),this._canvas.addMarker(i,"djs-search-preselected"),this._eventBus.fire("searchPad.preselected",i)}},Re.prototype._select=function(e){var t=Vt(e,Re.RESULT_ID_ATTRIBUTE),n=this._results[t].element;this._cachedSelection=null,this._cachedViewbox=null,this.close(!1),this._canvas.scrollToElement(n,{top:o0}),this._selection.select(n),this._eventBus.fire("searchPad.selected",n)},Re.prototype._getBoxHtml=function(){const e=st(Re.BOX_HTML),t=ot(Re.INPUT_SELECTOR,e);return t&&t.setAttribute("aria-label",this._translate("Search in diagram")),e};function a0(e,t,n){var i=zT(t),r=st(n);r.innerHTML=i,e.appendChild(r)}function zT(e){var t="";return e.forEach(function(n){n.matched?t+='<b class="'+Re.RESULT_HIGHLIGHT_CLASS+'">'+Bl(n.matched)+"</b>":t+=Bl(n.normal)}),t!==""?t:null}Re.CONTAINER_SELECTOR=".djs-search-container",Re.INPUT_SELECTOR=".djs-search-input input",Re.RESULTS_CONTAINER_SELECTOR=".djs-search-results",Re.RESULT_SELECTOR=".djs-search-result",Re.RESULT_SELECTED_CLASS="djs-search-result-selected",Re.RESULT_SELECTED_SELECTOR="."+Re.RESULT_SELECTED_CLASS,Re.RESULT_ID_ATTRIBUTE="data-result-id",Re.RESULT_HIGHLIGHT_CLASS="djs-search-highlight",Re.BOX_HTML=`<div class="djs-search-container djs-scrollable">
  <div class="djs-search-input">
    <svg class="djs-search-icon" width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path fill-rule="evenodd" clip-rule="evenodd" d="M9.0325 8.5H9.625L13.3675 12.25L12.25 13.3675L8.5 9.625V9.0325L8.2975 8.8225C7.4425 9.5575 6.3325 10 5.125 10C2.4325 10 0.25 7.8175 0.25 5.125C0.25 2.4325 2.4325 0.25 5.125 0.25C7.8175 0.25 10 2.4325 10 5.125C10 6.3325 9.5575 7.4425 8.8225 8.2975L9.0325 8.5ZM1.75 5.125C1.75 6.9925 3.2575 8.5 5.125 8.5C6.9925 8.5 8.5 6.9925 8.5 5.125C8.5 3.2575 6.9925 1.75 5.125 1.75C3.2575 1.75 1.75 3.2575 1.75 5.125Z" fill="#22242A"/>
    </svg>
    <input type="text" spellcheck="false" />
  </div>
  <div class="djs-search-results" />
</div>`,Re.RESULT_HTML='<div class="djs-search-result"></div>',Re.RESULT_PRIMARY_HTML='<div class="djs-search-result-primary"></div>',Re.RESULT_SECONDARY_HTML='<p class="djs-search-result-secondary"></p>';var HT={__depends__:[ds,vs,_i],searchPad:["type",Re]};function qp(e,t,n){this._elementRegistry=e,this._canvas=n,t.registerProvider(this)}qp.$inject=["elementRegistry","searchPad","canvas"],qp.prototype.find=function(e){var t=this._canvas.getRootElements(),n=this._elementRegistry.filter(function(i){return!Xe(i)&&!t.includes(i)});return n.reduce(function(i,r){var o=jn(r),a=l0(o,e),s=l0(r.id,e);return Zc(a)||Zc(s)?[...i,{primaryTokens:a,secondaryTokens:s,element:r}]:i},[]).sort(function(i,r){return s0(i.primaryTokens,r.primaryTokens)||s0(i.secondaryTokens,r.secondaryTokens)||c0(jn(i.element),jn(r.element))||c0(i.element.id,r.element.id)}).map(function(i){return{element:i.element,primaryTokens:i.primaryTokens.map(function(r){return Ut(r,["index"])}),secondaryTokens:i.secondaryTokens.map(function(r){return Ut(r,["index"])})}})};function Qp(e){return"matched"in e}function Zc(e){return e.find(Qp)}function s0(e,t){const n=Zc(e),i=Zc(t);if(n&&!i)return-1;if(!n&&i)return 1;if(!n&&!i)return 0;const r=e.find(Qp),o=t.find(Qp);return r.index<o.index?-1:r.index>o.index?1:0}function c0(e="",t=""){return e.localeCompare(t)}function l0(e,t){var n=[],i=e;if(!e)return n;e=e.toLowerCase(),t=t.toLowerCase();var r=e.indexOf(t);return r>-1?(r!==0&&n.push({normal:i.slice(0,r),index:0}),n.push({matched:i.slice(r,r+t.length),index:r}),t.length+r<e.length&&n.push({normal:i.slice(r+t.length),index:r+t.length})):n.push({normal:i,index:0}),n}var GT={__depends__:[HT],__init__:["bpmnSearch"],bpmnSearch:["type",qp]},UT='<?xml version="1.0" encoding="UTF-8"?><bpmn:definitions xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" targetNamespace="http://bpmn.io/schema/bpmn" id="Definitions_1"><bpmn:process id="Process_1" isExecutable="false"><bpmn:startEvent id="StartEvent_1"/></bpmn:process><bpmndi:BPMNDiagram id="BPMNDiagram_1"><bpmndi:BPMNPlane id="BPMNPlane_1" bpmnElement="Process_1"><bpmndi:BPMNShape id="_BPMNShape_StartEvent_2" bpmnElement="StartEvent_1"><dc:Bounds height="36.0" width="36.0" x="173.0" y="102.0"/></bpmndi:BPMNShape></bpmndi:BPMNPlane></bpmndi:BPMNDiagram></bpmn:definitions>';function ci(e){Ko.call(this,e)}j(ci,Ko),ci.Viewer=rr,ci.NavigatedViewer=ia,ci.prototype.createDiagram=function(){return this.importXML(UT)},ci.prototype._interactionModules=[ch,fh,mh],ci.prototype._modelingModules=[Qw,su,E1,m1,z1,yu,W1,qR,og,fc,nA,oA,xA,SA,CA,DA,HA,Qg,YA,nT,fT,hT,Ay,$T,GT],ci.prototype._modules=[].concat(rr.prototype._modules,ci.prototype._interactionModules,ci.prototype._modelingModules);var Er=N(74165),Wc=N(15861),VT={border:"1px solid #eee",padding:"0px",margin:"0px",overflow:"hidden",background:"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImEiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTTAgMTBoNDBNMTAgMHY0ME0wIDIwaDQwTTIwIDB2NDBNMCAzMGg0ME0zMCAwdjQwIiBmaWxsPSJub25lIiBzdHJva2U9IiNlMGUwZTAiIG9wYWNpdHk9Ii4yIi8+PHBhdGggZD0iTTQwIDBIMHY0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2EpIi8+PC9zdmc+)"},ZT={borderTop:"1px solid #eee",borderRight:"1px solid #eee",borderLeft:"1px solid #eee",paddingLeft:"10px",height:"40px",lineHeight:"30px",background:"url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImEiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTTAgMTBoNDBNMTAgMHY0ME0wIDIwaDQwTTIwIDB2NDBNMCAzMGg0ME0zMCAwdjQwIiBmaWxsPSJub25lIiBzdHJva2U9IiNlMGUwZTAiIG9wYWNpdHk9Ii4yIi8+PHBhdGggZD0iTTQwIDBIMHY0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIi8+PC9wYXR0ZXJuPjwvZGVmcz48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSJ1cmwoI2EpIi8+PC9zdmc+)"},u0=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"easy-flowable-custom",n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"\u6D41\u7A0B\u8BBE\u8BA1\u5668";return`<?xml version="1.0" encoding="UTF-8"?>
<definitions id="definitions" xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
    xmlns:flowable="http://flowable.org/bpmn"
    typeLanguage="http://www.w3.org/2001/XMLSchema"
    expressionLanguage="http://www.w3.org/1999/XPath"
    targetNamespace="http://www.flowable.org/processdef">
<process id="`.concat(t,'" name="').concat(n,`" isExecutable="true">
    <startEvent id="StartEvent_1y45yut" name="\u5F00\u59CB">
    <outgoing>SequenceFlow_0h21x7r</outgoing>
    </startEvent>
    <task id="Task_1hcentk">
    <incoming>SequenceFlow_0h21x7r</incoming>
    </task>
    <sequenceFlow id="SequenceFlow_0h21x7r" sourceRef="StartEvent_1y45yut" targetRef="Task_1hcentk" />
</process>
<bpmndi:BPMNDiagram id="BpmnDiagram_1">
    <bpmndi:BPMNPlane id="BpmnPlane_1" bpmnElement="`).concat(t,`">
    <bpmndi:BPMNShape id="StartEvent_1y45yut_di" bpmnElement="StartEvent_1y45yut">
        <omgdc:Bounds x="152" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
        <omgdc:Bounds x="160" y="145" width="22" height="14" />
        </bpmndi:BPMNLabel>
    </bpmndi:BPMNShape>
    <bpmndi:BPMNShape id="Task_1hcentk_di" bpmnElement="Task_1hcentk">
        <omgdc:Bounds x="240" y="80" width="100" height="80" />
    </bpmndi:BPMNShape>
    <bpmndi:BPMNEdge id="SequenceFlow_0h21x7r_di" bpmnElement="SequenceFlow_0h21x7r">
        <omgdi:waypoint x="188" y="120" />
        <omgdi:waypoint x="240" y="120" />
    </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
</bpmndi:BPMNDiagram>
</definitions>`)},p0=function(){var e=(0,Wc.Z)((0,Er.Z)().mark(function t(n,i){var r,o,a,s;return(0,Er.Z)().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,n.saveSVG();case 2:r=l.sent,o=document.createElement("canvas"),a=o.getContext("2d"),a&&(a.fillStyle="#fff",a.fillRect(0,0,1e4,1e4),s=new Image,s.src="data:image/svg+xml;charset=utf-8,".concat(encodeURIComponent(r.svg)),s.onload=function(){o.width=s.width+100,o.height=s.height+200;var u=(o.width-s.width)/2,p=(o.height-s.height)/2;a.drawImage(s,u,p);var f=new Image;f.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAABMCAYAAADHl1ErAAAACXBIWXMAAC4jAAAuIwF4pT92AAAQSUlEQVR4nO2bCXgT1b7A/5Ot2ZemSZu2adOFUtrSVbBla1hEBWXTspTlPi9eFMtVEHhyr3opFxUEBa6KIoqi+ERakfWxiZAqUkpLm0LTvWm6l6RpszV7Zt438cJ16Tbep8/nN7/v6zczyTkz//Obc86ccyZFMAwDkpFDIV0RgxRGEFIYQUhhBCGFEYQURhBSGEFIYQQhhRGEFEYQUhhBSGEEIYURhBRGEFIYQUhhBCGFEYQURhBSGEFIYQQhhRGENtLkNpsjqqmxQ4GiGBodI+sRCLgNAEAFAMdvpTC/BsO+ZvN4vJJ3953aC4AsSEsfhWKoj1pX34FoNDqnJEhgeuTRyblxcXLV70XIcAwpDEVR6v79p8uW5s5I5vJY4HU7MZ/PS7lZ2QxiPorQ2GL01IkiikjIQ2+o25AluTOmiURcLDQsyMBmM6t/K4X832TIPuyjg+fenD51bAqPz0ZwuXZrH94EUYnAh4SEy8Fm7KQ8NDMeRsdHIpmZo7HTp66+wmYzf7eyYChh585e31xyVb06UhEC39VEFHH2m0Db2EZhMBDQ680g4FFBJA3H5KECND6SQZmYEZRVePjMFXu/Y5q935ltNtuyjUZz9q9aol+YQYUZjZbpS3LGg9dHwWsXeFwOYLB4UFfXBlYXG6uq1EBtsxNrqm9API4eqkQWijFFCre+z8s78tmll9TqhjyPxyflclmG34krP4M+Jbu7e6kzlanQ0tgIsWPiAO/qVN9ooeJmB2K12gH1oSjNqkfqahwYl0tHAnjiw5MnJf/XqlWz+3k8FnDYTFMAk1H56xbnl2dQYUIBy6ttsYDNbMGq643ACKDDxEnJyJQJEeCw9OBJKFeLm6C0tB7cwDC8tnPa9tCwoFu/HzUDM6iwbGX62uPHVOdQl1X6ZN48jCcKBgxFQd/a4f++vrEHKmosmEIRDM21NYEdnT2xPxbWW3R+g6uzjePWd0vcRn2iW98Fbn2XkiGV6RL3FUb9XxT432XYcdjzG/dgeU8ogRcYAnZrL9htDujq8WEV5fUQT/0KkfWchHO3BMCZ9FzhE+ufWPj9vKUzkjBXR+tPzhkgC4dxl6qRkcRu19bnuDpbgZuQ0kYPlFz7NeUMxLAjfY5Q0nLqXGMkP0ALdLsFeuvLsSOn65CN2xdCZmwsuHSZcD9SCmfL9uf09eUmiES8u0MKVkS03tXRKqWLJSDMUqoY0lATQypTB4SGjyg47fa/HOv8aO88fJ8SwISEt4/ME06YemKoPC3NxmyXywvyCJGOxWa0DJauoU6f/cG+b/OqNd2jMAyjL1k+rnDJinFbhotpWGGb/rIk47ncJT3mEg0sppmhPj0YyZZZAXW6wcEcDcI4KnjsJphir4OPDp5fuXbdo+vv5GXKo4qgWJXDDIuE0TsPTB3uWj+GHRPfMeqVd/LpgUGG2rUr9nZ//vHawYRV3ezM+cPCgwU6rdF/vCpvkmrb7vkDXtPnQ8NzHtqvamvpA2kwD3oMNrj6dVNibJzEMi5TsXuomIadfFMoFGNEmlITkk0DE40K4NAD02aHjq+KIVAiAWAFg2h0FoTIeHDr0rFl38/LjPium+pvrIGatSsuV+be11w6PQkrm5kyop89chNTvuy9dCan4a9P7UWdDkCd9kHTvr7ty824LOX0OPVbBxbnL/vjvfmDpdXc6srCZaWmh+uPnXty3jMbp+3Fe6aD+4vnDOtjJIHPWTT/cX0zAlKGD1LrGDAOpYH7phowhApAoQKVwQFO6ChgmiulTodLcicfMyK6EN+i9n4wnj+utFaUKPD+yNn5037tx6Bud3j16kXH+2tvJUY+80I+3u9R2JxB06emy8/j27ra26kuh5c/ekzIoLMNr8fn36rL26UT03Ye3/3qV3n4cWODQTlcXEM2yW9UpU/Zao/vpUQ8uJNCV5hu9VqF8VI3tHAp4NE5oKpaD4mhbugyuOFavRi4QjtsePYtfc6i6ZpRsWGFVFHI3XNJ5+UW8pLv0TCkMmAEy1QYikoQCmXQQa3lxtUs/Kkqvm+Oxt1zW+gx9QKVzR001ry12dsZDGrAvje+Xrp+zefPtrX1Rb+4ddb8gdKGR4j0/q1cCKvWTM4XB3HBanGmWswO4XDCBqxhfX3W8MMHPqnSlp7cW37LANNnZr0xZfnyPYxMCvTcRwO9jA4hNDd8fVULGIbCt2oTzJsVC39/QQnrHuyEotPH+MJA3ttBCYnn75xTNPm+YtmSx7eIp8/ewoqIBoe2bsi7yR2bUcyKjtMbvzyZ2L5/11rUYQcqZ3BhZrMzJi1DXpQ9PU6NH7dojYMWXhrMKwqW8eH2bSuw2AywmB38N1+/POHVly4o7XZ3wlBxDVjDvjx/fWVCUHtiuxuF/kC+zm538sViYci5LgWUnbFBFMcB64Rd0GR14yMTmJzKg71vF0FbixkSpk6DvOxm+RcfvF+wbM2aqTS+ELwWE7T8Y+um1r3bduG1xmezApXDg6yyjkGHFjQurz3t+NU4h64xNSAkTGdvrFXQBCLmYOn/9tzJFz47VDYb32dzGLBoWcbBoQr+9Pqpe17YeHLtxj8f9fd1dDoVtmx7qJDNZgy5cDDgOOzkiSvr6O1Hd93ucUFiqA28ASHwzbfNIKcYYYpcB842C9w4iYL2PzbChlwulH11CQLMtVCqsYM7fRO2ekY3cuLUTaCmbHhWuOfJXdTbAz/dM0talTS+sGioAEeKTmvMbGowyAOYNLw/K+byAtqHy9pYp89RXaqfhfowzrSZo/fGxkmHjWVAYUajJaGy6NTLt66Xz+Px2KoYBR9ulDWmxvSWC1N8LcBWOOBiCR+QBS/CwklWwNwWKClphj43H8JkbEiJ44KuphbUAasXpndcmeU16hX0ICnefxkCpDIDI1j2XV8WFPyzZGHePgG4DamYxwDgNQPm61dSeGmFCCv2F19WGrBJisX86mkLls6ftmDp3c8amlfdHsdqgr4yGrTW0UHdwoGlz3EBQ3uBQqECQqHDpRIj7NggBpetF+xuBAJlfFA88vxjPzc41FaRg/VXA+ZoysEcjYA5m2aBq50DlAAArxUfUf0zJQIQ+SKfGrZm/TCn/LcZ0Zq+pqo5p/V6jbQrCCAwmQKVH6PgGJ0EiTFMQEwe8HlcEMusB5tFDB+f6ASLkw4+7njVM8uSR7R0jfZXp2D9lRMxR+Mo8DnCAHP5AEN5QGU3gK8/FfOaAXw2CYIwOBhdDODuBqDxAKGH4KNjDcKKKwWf3eLVbd4MqIsJmDcTMM8/XdKdgNCvAYUFCI0HQBUA0EQGhC7WAF0MCCNUh9BFg84Ifsywc8m+XmvCq1t3v/9Y3AdZglYToAKAt3ZyYca+v0H2KD0gmAccvZ1w9fQFsE355NmkxKjysPAgF5vNHHbeh1quZWP2mjkIXXINYce3IazYa5i9PtzX8Y9dqLUsB5w6vAH+KwNCA2DIAAkIVyEB4QagBwFC5QPQ+Cqg8g0IlQ1A4YC/Bv4YzAeAuQFQl3+Lof/aR+jSmQhn7H6EFVU6XMxD1jBNVXN22VfHVQ9n0uGGdhF01tSA8VolqGMmwAN2HQBKB6e5GyzacjivjYPlK0LKo2NC1VQqxTzchXEo/MwiwP++B4Y6YhBmtIbKScZrgAmhS9RAlwDCkOgQumTENYEghSNNPmQN27X9w4JVk2pz3t33NcRG0GH6tHjododBe6cJ6uq6YfksAVh1avjvyz3wxbV4GKtXA5owTr9832trkpJjRhzE/yeGnBpx+Xy9vg8Fg3CuRqftgqMfnoCSgk8hVH8UFM4roL9xDs6W0U0RSw/tHWtuhLmhAPfpS6QHp84s+Hve9j5dc9fm7q6euX29luzNm05dXjLvwOV1qwsv4ysKmWNf9d8pr9cnsZgdKeB/peeL9Lh9kS6XN8XnQyUOh8f/PsDp8ERaLU7/gPK1ly8UnD1VtflOjMpxr2P4yoM/ndPzk0HnoQPXdj+96sjlv64/fqyz3ZRts7kiewy2u+8ZHHa3/9ooigrwWO583mOwpXz/+A4DNsnubmPmla9vLosbE13UVH81L43zTWLQ3MP5xQUn7y/74ousshQK0CgYfF7OAB+bLxx75r28Savj4di7TfCIyASZjD6oOrJPeCk2IvGP63L9SybXi3XKZY/dm581Maoar9QOhwcvoGRCyg6914vCf74wcxeLTbeoLjbcX1vdHbNi5b1Fn3x4PfvUxaemKsfv0uArCmdUa5S9vXZYmXsof8YD8Ss/OPyHDPw8eCtZ/dinrcVXtPJxmQrNe4eWJd0pS9XNzlRxEMdQV3M7ofDT8jwfimpe33YxP3NClP7o2SeClz364Z6Sb5uVgWIOoBgG1zWbEpOjt2rwvAsWphXueGPBD9b4flLDdq/ZcuzlpbnF3J25ec4dKwounaiGpLRooKhfyqeiNtfDmzaoni+4plxzQDVv6uLHCxcsSDfFjFFAf+QjqoDFK6+bgmkQJeXAzBCA9v1bc26V35x799zbL+a/+tKFgjvHLc3GBD6fCfs/XjbvzMmqZanpctXZU1VZtZpu6bYt53OS08KuMgJo1Q8+nKiSR4igsqLdP53a+eYjeyputMsb6m7frVHHCtXy8VkKjbaxJxE/rqxoz+7qNPu/v3CmJru8tDUs9R65X8Qb+xcttJgd9s52Uw5+vHXnnMLZc5NUNCoFujrNErfbCy/tnKPCb9KwNSwoOqrjnooDUEMLgfHtffCYsh6OrLsJPRlpQK89pRSdLQDtlPHp4+9N2B3556d/sDaF34p3ttovc26/rxRV+CAp2QyGanUqpCf70+16J0c5ZeqoIp3W6G8SYjHX0KLrxZvNyxGKwKKYUZIiBEFgwaI0zScfliTeOyFK3dRgyFFdrE+QhQnaHPbvhgrvv3Ml1+Xy4JPou5P3sDAhRCrEFtSH+SfWFaVteakZ4cX4fmycpCmASYtpb+3j4/P6p//0WcG4TIU+NFyI97NPUakUAAQBGp0CGPpdn47HMRDU/PwfLhslZCR8e7mDEYOpryf2udzgbKbAaLkX5B1GSAnkAgvzwmmrKJwj4Em0TZ3K3l6rQiIRdFKoFP9i1bjsyR91CJTVTREiSZ9wduk906YWtrUZFDQajSMJZnrYLApTKOLpomOCTGn3yD/PnBhl4AtYuj/lTdrCYNDso8cEw+x5SW+npMl10+8ffTAkVNCAzw0zxkdcSM2Ql8aOkrTEjwnRbd3xcJ5QxK7GRY0ZK1PNX5j2qdnkoDzwUOJ7oeHCutQMeWFIqOCaQMgCUSDb+Oji9MJZc5J2FF/RKh+en6x65fW5SxEEceE1PCk5tDJSEagZmxqmHpsSpgoNF5rGZ0WpFFGBlVExQT+YPQz6lOxo1yd88f7RfH2RKsfd1gI0px1MCBNYEZH6mMWLi2ThEv+rNy6XBfJwSbEiSvYJkxXwm38HefhQ6WZZqKBaOT3uZz3Fyf/5Jgj5+zCCkMIIQgojCCmMIKQwgpDCCEIKIwgpjCCkMIKQwghCCiMIKYwgpDCCkMIIQgojCCmMIKQwgpDCCEIKIwgpjCCkMIKQwghCCiMCAPwPTmnYI2NMkP0AAAAASUVORK5CYII=",f.onload=function(){if(a.drawImage(f,s.width+20,s.height+130),i)i(o.toDataURL("image/png"));else{var d=document.createElement("a");d.download="easy-flowable".concat(new Date().getSeconds(),".png"),d.href=o.toDataURL("image/png"),d.click()}}});case 6:case"end":return l.stop()}},t)}));return function(n,i){return e.apply(this,arguments)}}(),WT={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M608 112c-167.9 0-304 136.1-304 304 0 70.3 23.9 135 63.9 186.5l-41.1 41.1-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-44.9 44.9-62.3-62.3a8.15 8.15 0 00-11.4 0l-39.8 39.8a8.15 8.15 0 000 11.4l62.3 62.3-65.3 65.3a8.03 8.03 0 000 11.3l42.3 42.3c3.1 3.1 8.2 3.1 11.3 0l253.6-253.6A304.06 304.06 0 00608 720c167.9 0 304-136.1 304-304S775.9 112 608 112zm161.2 465.2C726.2 620.3 668.9 644 608 644c-60.9 0-118.2-23.7-161.2-66.8-43.1-43-66.8-100.3-66.8-161.2 0-60.9 23.7-118.2 66.8-161.2 43-43.1 100.3-66.8 161.2-66.8 60.9 0 118.2 23.7 161.2 66.8 43.1 43 66.8 100.3 66.8 161.2 0 60.9-23.7 118.2-66.8 161.2z"}}]},name:"key",theme:"outlined"},YT=WT,Yc=N(84089),KT=function(t,n){return P.createElement(Yc.Z,(0,K.Z)({},t,{ref:n,icon:YT}))},XT=P.forwardRef(KT),qT=XT,QT=N(35598),JT=N(15668),e2=N(33160),t2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"},n2=t2,i2=function(t,n){return P.createElement(Yc.Z,(0,K.Z)({},t,{ref:n,icon:n2}))},r2=P.forwardRef(i2),o2=r2,a2={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 912H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32h360c4.4 0 8 3.6 8 8v56c0 4.4-3.6 8-8 8H184v656h656V520c0-4.4 3.6-8 8-8h56c4.4 0 8 3.6 8 8v360c0 17.7-14.3 32-32 32zM653.3 424.6l52.2 52.2a8.01 8.01 0 01-4.7 13.6l-179.4 21c-5.1.6-9.5-3.7-8.9-8.9l21-179.4c.8-6.6 8.9-9.4 13.6-4.7l52.4 52.4 256.2-256.2c3.1-3.1 8.2-3.1 11.3 0l42.4 42.4c3.1 3.1 3.1 8.2 0 11.3L653.3 424.6z"}}]},name:"import",theme:"outlined"},s2=a2,c2=function(t,n){return P.createElement(Yc.Z,(0,K.Z)({},t,{ref:n,icon:s2}))},l2=P.forwardRef(c2),u2=l2,p2=N(99611),f2=N(23430),d2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144 144-64.5 144-144-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80 80 35.8 80 80-35.8 80-80 80z"}}]},name:"save",theme:"outlined"},h2=d2,m2=function(t,n){return P.createElement(Yc.Z,(0,K.Z)({},t,{ref:n,icon:h2}))},v2=P.forwardRef(m2),g2=v2,y2=N(15660),Kc=N.n(y2),aM=N(35433),sM=N(39980),cM=N(62356),lM=N(24335),_2=N(40460),f0=N.n(_2);function b2(e){var t=(0,P.useRef)(!1);(0,P.useEffect)(function(){var n=function(o){if((o.ctrlKey||o.metaKey)&&(t.current=!0),t.current&&o.key=="s")return t.current=!1,o.preventDefault(),e(),!1};document.addEventListener("keydown",n);var i=function(o){t.current=!1};return document.addEventListener("keyup",i),function(){document.removeEventListener("keydown",n),document.removeEventListener("keyup",i)}},[])}var d0=N(25593),h0=N(17788),li=N(14726),Do=N(78957),ui=N(55241),E2=N(31365),x2=N(85418),w2=["modeler","save","style"],S2=d0.Z.Paragraph,C2=function(t){var n=t.modeler,i=t.save,r=t.style,o=r===void 0?{}:r,a=(0,Ie.Z)(t,w2),s=P.useRef(1),c=P.useRef(),l=P.useState(!1),u=(0,pe.Z)(l,2),p=u[0],f=u[1];P.useEffect(function(){if(n){var y=n.get("eventBus"),w=function(I){c.current=I.newSelection};return y.on("selection.changed",w),function(){y.off("selection.changed",w)}}},[]);var d=function(){var y=(0,Wc.Z)((0,Er.Z)().mark(function w(){var R,I;return(0,Er.Z)().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!i){O.next=12;break}return O.next=3,n.saveXML({format:!0});case 3:if(R=O.sent,I=(0,J.Z)({},a.bpmnData),!R.xml){O.next=12;break}if(I.xml=R.xml,!a.isBase64){O.next=10;break}return O.next=10,p0(n,function(B){return I.base64=B});case 10:return O.next=12,i(I);case 12:case"end":return O.stop()}},w)}));return function(){return y.apply(this,arguments)}}(),h=function(){var y=(0,Wc.Z)((0,Er.Z)().mark(function w(){var R;return(0,Er.Z)().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return T.next=2,n.saveXML({format:!0});case 2:R=T.sent,R.xml&&h0.Z.info({title:P.createElement(S2,{copyable:{tooltips:!1,text:R.xml}},"XML\u6E90\u7801\u9884\u89C8"),width:"60%",footer:!1,closable:!0,icon:null,centered:!0,content:P.createElement(f0(),{value:R.xml,disabled:!0,style:{maxHeight:"500px",overflow:"auto",scrollbarWidth:"thin"},onValueChange:function(){},highlight:function(B){return Kc().highlight(B,Kc().languages.xml,"xml")}})});case 4:case"end":return T.stop()}},w)}));return function(){return y.apply(this,arguments)}}();function v(){s.current+=.05,n.get("canvas").zoom(s.current,"auto")}function m(){s.current-=.05,n.get("canvas").zoom(s.current,"auto")}function S(){n.get("commandStack").undo()}function x(){n.get("commandStack").redo()}var E=[{label:"\u4E0B\u8F7D\u4E3AXML",key:"xml",onClick:function(){var y=(0,Wc.Z)((0,Er.Z)().mark(function R(){var I,T,O,B,F;return(0,Er.Z)().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return H.next=2,n.saveXML({format:!0});case 2:I=H.sent,I.xml&&(T=new DOMParser,O=T.parseFromString(I.xml,"text/xml"),B=new XMLSerializer().serializeToString(O.documentElement),F=document.createElement("a"),F.download="".concat(a.title||"easy-flowable",".xml"),F.href="data:text/xml;charset=utf-8,".concat(encodeURIComponent(B)),F.click());case 4:case"end":return H.stop()}},R)}));function w(){return y.apply(this,arguments)}return w}()},{label:"\u4E0B\u8F7D\u4E3APNG",key:"png",onClick:function(){return p0(n)}}];return b2(d),P.createElement("div",{style:(0,J.Z)((0,J.Z)({},ZT),o)},P.createElement(h0.Z,{title:"\u5FEB\u6377\u952E",open:p,width:"25%",centered:!0,footer:P.createElement(li.ZP,{type:"primary",key:"back",onClick:function(){return f(!1)}},"\u597D\u7684"),onCancel:function(){return f(!1)}},P.createElement("ul",null,P.createElement("li",null,"\u64A4\u9500\uFF1A\u2318 (Ctrl) + Z"),P.createElement("li",null,"\u91CD\u505A\uFF1A\u2318 (Ctrl) + \u21E7 (Shift) + Z"),P.createElement("li",null,"\u5168\u9009\uFF1A\u2318 (Ctrl) + A"),P.createElement("li",null,"\u5220\u9664: Delete (\u5220\u9664\u952E)"),P.createElement("li",null,"\u4FDD\u5B58\uFF1A\u2318 (Ctrl) + S"),P.createElement("li",null,"\u7F16\u8F91\u6587\u5B57: E"),P.createElement("li",null,"\u6293\u624B\u5DE5\u5177: H"),P.createElement("li",null,"\u5957\u7D22\u5DE5\u5177: L"),P.createElement("li",null,"\u7A7A\u95F4\u5DE5\u5177: S"))),P.createElement(Do.Z,null,P.createElement(Do.Z.Compact,{block:!0},P.createElement(ui.Z,{content:"\u5FEB\u6377\u952E"},P.createElement(li.ZP,{onClick:function(){return f(!0)},icon:P.createElement(qT,null)}))),P.createElement(Do.Z.Compact,{block:!0},P.createElement(ui.Z,{content:"\u653E\u5927"},P.createElement(li.ZP,{onClick:v,icon:P.createElement(QT.Z,null)})),P.createElement(ui.Z,{content:"\u7F29\u5C0F"},P.createElement(li.ZP,{onClick:m,icon:P.createElement(JT.Z,null)}))),P.createElement(Do.Z.Compact,{block:!0},P.createElement(ui.Z,{content:"\u91CD\u505A"},P.createElement(li.ZP,{onClick:x,icon:P.createElement(e2.Z,null)})),P.createElement(ui.Z,{content:"\u64A4\u9500"},P.createElement(li.ZP,{onClick:S,icon:P.createElement(o2,null)}))),P.createElement(Do.Z.Compact,{block:!0},P.createElement(ui.Z,{content:"\u5BFC\u5165xml\u6587\u4EF6"},P.createElement(E2.Z,{accept:".xml",showUploadList:!1,onChange:function(w){var R=w.file;if(R.status==="done"&&R.type==="text/xml"){var I=new FileReader;I.readAsText(R.originFileObj),I.onload=function(T){var O;(O=T.target)!==null&&O!==void 0&&O.result&&a.uploadXml(T.target.result.toString())}}}},P.createElement(li.ZP,{icon:P.createElement(u2,null)}))),P.createElement(ui.Z,{content:"\u9884\u89C8"},P.createElement(li.ZP,{icon:P.createElement(p2.Z,null),onClick:function(){return h()}})),P.createElement(x2.Z,{menu:{items:E}},P.createElement(li.ZP,{icon:P.createElement(f2.Z,null)}))),P.createElement(Do.Z.Compact,{block:!0},i&&P.createElement(ui.Z,{content:"\u4FDD\u5B58\u66F4\u65B0"},P.createElement(li.ZP,{icon:P.createElement(g2,null),onClick:function(){return d()}}))),a.title?a.title:P.createElement(li.ZP,{type:"link",style:{color:"GrayText"},size:"large"},"Easy-Flowable\u6D41\u7A0B\u8BBE\u8BA1\u5668")))},P2=C2,m0=N(71002),ft=N(4942),pi=N(25278),dt=N(99859),Xc=N(78045),v0=N(34041),g0=N(40056),R2=N(72269),y0=N(84567),A2=N(71230),T2=N(15746),Jp=N(2487),D2=N(47221),Pt=N(44815),M2=[{label:"\u5355\u4E2A\u7528\u6237",value:"assignee"},{label:"\u5019\u9009\u7528\u6237",value:"candidateUsers"},{label:"\u5019\u9009\u7EC4",value:"candidateGroups"}],k2=[{label:"\u7C7B",value:"class"},{label:"\u59D4\u6258\u8868\u8FBE\u5F0F",value:"delegateExpression"},{label:"\u8868\u8FBE\u5F0F",value:"expression"}],I2=[{label:"javascript",value:"JavaScript"},{label:"Groovy",value:"groovy"},{label:"juel(EL)",value:"juel"}],O2=function(t,n){if(t){var i=(0,Pt.aY)(t);if(i=="UserTask")return t.$attrs["".concat(n,"candidateUsers")]?"candidateUsers":t.$attrs["".concat(n,"candidateGroups")]?"candidateGroups":"assignee";if(i=="ServiceTask")return t.$attrs["".concat(n,"delegateExpression")]?"delegateExpression":t.$attrs["".concat(n,"expression")]?"expression":"class"}},Ha=[{label:"\u6D41\u7A0B\u53D1\u8D77\u4EBA",value:"${initiator}"}],B2=N(25035),N2=["modeler","defaultElement","attrPrefix"],Ga=pi.Z.TextArea,qc=d0.Z.Paragraph,L2=function(t){var n=t.modeler,i=t.defaultElement,r=t.attrPrefix,o=r===void 0?"flowable:":r,a=(0,Ie.Z)(t,N2),s=n.get("modeling"),c=dt.Z.useForm(),l=(0,pe.Z)(c,1),u=l[0],p=P.useRef(!1),f=P.useRef(),d=P.useState(i),h=(0,pe.Z)(d,2),v=h[0],m=h[1],S=P.useState(),x=(0,pe.Z)(S,2),E=x[0],y=x[1],w=P.useState("custom"),R=(0,pe.Z)(w,2),I=R[0],T=R[1],O=P.useState([]),B=(0,pe.Z)(O,2),F=B[0],z=B[1],H=P.useState(!1),oe=(0,pe.Z)(H,2),ke=oe[0],Ae=oe[1],Se=P.useState([]),It=(0,pe.Z)(Se,2),ht=It[0],De=It[1],mt=P.useState(!1),V=(0,pe.Z)(mt,2),W=V[0],ue=V[1],Ve=P.useState({text:"",show:!1,isLoop:!1}),C=(0,pe.Z)(Ve,2),g=C[0],_=C[1],D=P.useState(""),M=(0,pe.Z)(D,2),G=M[0],he=M[1],fe=function(xe){var Le=xe.businessObject;f.current=Le;var me=(0,Pt.aY)(Le);if(me!=="Association"&&me!=="TextAnnotation"){var He=Le.$attrs,Je={};for(var bt in He)if(Object.prototype.hasOwnProperty.call(He,bt))if(bt.startsWith(o)){var ye=bt.substring(o==null?void 0:o.length);Je[ye]=He[bt]}else Je[bt]=He[bt];var et=Le.loopCharacteristics&&Le.loopCharacteristics.$attrs;et&&(Je.loopCharacteristics={collection:et["".concat(o,"collection")],elementVariable:et["".concat(o,"elementVariable")]}),Le.script&&he(Le.script),Je.candidateUsers&&!Array.isArray(Je.candidateUsers)&&(Je.candidateUsers=Je.candidateUsers.split(",")),Je.candidateGroups&&!Array.isArray(Je.candidateGroups)&&(Je.candidateGroups=Je.candidateGroups.split(",")),u.resetFields(),u.setFieldsValue((0,J.Z)((0,J.Z)({},Le),Je)),me.endsWith("Task")&&y(O2(Le,o)),Le.loopCharacteristics?_({text:(0,Pt.GY)(Le.loopCharacteristics),show:!0,isLoop:(0,Pt.aY)(Le.loopCharacteristics)==="StandardLoopCharacteristics"}):_({show:!1})}m(xe)};P.useEffect(function(){var at=n.get("eventBus"),xe=function(He){fe(He.element)};at.on("element.click",xe);var Le=function(He){if(!p.current){if((0,Pt.aY)(He.element.businessObject)=="SequenceFlow")return;fe(He.element)}};return at.on("element.changed",Le),fe(i),function(){at.off("element.click",xe),at.off("element.changed",Le)}},[n]);var Te=function(xe){var Le,me,He,Je=n.get("bpmnFactory"),bt=(Le=xe.loopCharacteristics)===null||Le===void 0||(Le=Le.completionCondition)===null||Le===void 0?void 0:Le.body;if(xe.id||xe.name||xe.scriptFormat||xe.documentation)lt((0,J.Z)({},xe));else if((me=xe.conditionExpression)!==null&&me!==void 0&&me.body&&(0,Pt.Nm)((He=xe.conditionExpression)===null||He===void 0?void 0:He.body)){var ye,et=Je.create("bpmn:FormalExpression");et.body=(ye=xe.conditionExpression)===null||ye===void 0?void 0:ye.body,lt({conditionExpression:et})}else if(xe.loopCharacteristics){var cf,Hi=(cf=f.current)===null||cf===void 0?void 0:cf.loopCharacteristics;if(Hi){var lf,uf,pf;if((lf=xe.loopCharacteristics)!==null&&lf!==void 0&&lf.collection){var ff;if(Hi.$attrs["".concat(o,"collection")]=xe.loopCharacteristics.collection,!((ff=xe.loopCharacteristics)!==null&&ff!==void 0&&ff.elementVariable)){var x0="${item}";u.setFieldValue("assignee",x0),u.setFieldValue("loopCharacteristics.elementVariable","item"),lt((0,ft.Z)({},o+"assignee",x0)),Hi.$attrs["".concat(o,"elementVariable")]="item"}}else if((uf=xe.loopCharacteristics)!==null&&uf!==void 0&&uf.elementVariable){var df,hf,w0="${"+((df=xe.loopCharacteristics)===null||df===void 0?void 0:df.elementVariable)+"}";u.setFieldValue("assignee",w0),lt((0,ft.Z)({},o+"assignee",w0)),Hi.$attrs["".concat(o,"elementVariable")]=(hf=xe.loopCharacteristics)===null||hf===void 0?void 0:hf.elementVariable}else if((pf=xe.loopCharacteristics)!==null&&pf!==void 0&&pf.loopCardinality){var mf,vf=Je.create("bpmn:Expression");vf.body=(mf=xe.loopCharacteristics)===null||mf===void 0?void 0:mf.loopCardinality,vf.$parent=Hi,Hi.loopCardinality=vf}else if(bt&&(0,Pt.Nm)(bt)){var gf=Je.create("bpmn:Expression");gf.body=bt,gf.$parent=Hi,Hi.completionCondition=gf}lt({loopCharacteristics:Hi})}else lt({loopCharacteristics:null})}else{var DD=["expression","delegateExpression"];for(var tl in xe){if(DD.includes(tl)&&!(0,Pt.Nm)(xe[tl]))break;lt((0,ft.Z)({},"".concat(o).concat(tl),xe[tl]))}}};P.useEffect(function(){G&&lt({script:G})},[G]);var lt=function(xe){if(f.current&&v)try{p.current=!0,s.updateProperties(v,(0,J.Z)({},xe))}finally{p.current=!1}};P.useEffect(function(){a.users?a.users instanceof Array?z(Ha.concat(a.users)):(0,m0.Z)(a.users())==="object"&&typeof a.users().then=="function"?(Ae(!0),a.users().then(function(at){Ae(!1),at&&at.length?z(Ha.concat(at)):z(Ha)})):z(Ha):z(Ha)},[]),P.useEffect(function(){a.groups&&(a.groups instanceof Array?De(a.groups):(0,m0.Z)(a.groups())==="object"&&typeof a.groups().then=="function"&&(ue(!0),a.groups().then(function(at){ue(!1),at&&at.length&&De(at)})))},[]);var wn=function(){var xe=[{key:"base",label:"\u57FA\u7840\u5C5E\u6027",children:P.createElement(P.Fragment,null,P.createElement(dt.Z.Item,{label:"\u6807\u8BC6",name:"id"},P.createElement(pi.Z,{readOnly:!0})),P.createElement(dt.Z.Item,{label:"\u540D\u79F0",name:"name"},P.createElement(pi.Z,null)),((0,Pt.aY)(f.current)=="UserTask"||(0,Pt.aY)(f.current)=="ScriptTask"||(0,Pt.aY)(f.current)=="ServiceTask")&&P.createElement(dt.Z.Item,{label:"\u8DF3\u8FC7\u6761\u4EF6",name:"skipExpression",rules:[{validator:function(He,Je){return(0,Pt.dv)(Je)}}]},P.createElement(pi.Z,null)))}],Le={key:"special",label:"\u7279\u6709\u5C5E\u6027",children:null};return(0,Pt.aY)(f.current)=="SequenceFlow"?Le.children=P.createElement(dt.Z.Item,{label:"\u8868\u8FBE\u5F0F",name:["conditionExpression","body"],tooltip:"\u6761\u4EF6\u8868\u8FBE\u5F0F\u4E3AUEL\u8868\u8FBE\u5F0F\uFF0C\u7ED3\u679C\u9700\u4E3Atrue/false",rules:[{validator:function(He,Je){return(0,Pt.dv)(Je)}}]},P.createElement(Ga,null)):(0,Pt.aY)(f.current)=="UserTask"&&!g.show?Le.children=P.createElement(P.Fragment,null,P.createElement(dt.Z.Item,{label:"\u7528\u6237\u7C7B\u578B"},P.createElement(Xc.ZP.Group,{defaultValue:I,onChange:function(He){return T(He.target.value)},options:[{label:"\u56FA\u5B9A\u503C",value:"custom"},{label:"\u81EA\u5B9A\u4E49",value:"uel"}]})),P.createElement(dt.Z.Item,{label:"\u5206\u914D\u7528\u6237"},P.createElement(dt.Z.Item,null,P.createElement(Xc.ZP.Group,{defaultValue:E,onChange:function(He){return y(He.target.value)},options:M2})),P.createElement(dt.Z.Item,{name:E,noStyle:!0},I=="uel"?P.createElement(pi.Z,null):E=="candidateGroups"?P.createElement(v0.Z,{options:ht,mode:"multiple",loading:W}):P.createElement(v0.Z,{mode:E==="candidateUsers"?"multiple":void 0,options:E==="candidateUsers"?F.slice(1):F,loading:ke})))):(0,Pt.aY)(f.current)=="UserTask"&&g.show?Le.children=P.createElement(P.Fragment,null,P.createElement(dt.Z.Item,null,P.createElement(g0.Z,{message:"\u5B9E\u4F8B\u7C7B\u578B\uFF1A".concat(g.text)})),P.createElement(dt.Z.Item,{label:"\u5206\u914D\u7528\u6237",name:"assignee"},P.createElement(pi.Z,{readOnly:!0})),P.createElement(dt.Z.Item,{label:"\u57FA\u6570",name:["loopCharacteristics","loopCardinality"],rules:[{validator:function(He,Je){return(0,Pt.oY)(Je)}}],tooltip:"\u591A\u5B9E\u4F8B\u7684\u6570\u91CF\u8BA1\u7B97\uFF0C\u6CE8\u610F\u5982\u679C\u4F7F\u7528el\u8868\u8FBE\u5F0F\u7ED3\u679C\u4E5F\u9700\u8981\u4E3A\u6574\u6570\u3002"},P.createElement(pi.Z,null)),P.createElement(dt.Z.Item,{label:"\u96C6\u5408",name:["loopCharacteristics","collection"],tooltip:"\u6B64\u5904\u96C6\u5408\u4E3A\u6267\u884C\u4EBA\u5217\u8868\uFF0C\u9700\u8981\u5728\u6D41\u7A0B\u542F\u7528\u6216\u8FD0\u884C\u65F6\u8BBE\u7F6E\u6D41\u7A0B\u53D8\u91CF\u3002"},P.createElement(pi.Z,null)),P.createElement(dt.Z.Item,{label:"\u53D8\u91CF\u540D",name:["loopCharacteristics","elementVariable"],tooltip:"\u96C6\u5408\u4E2D\u7684\u5143\u7D20\u7684\u53D8\u91CF\u540D\u3002"},P.createElement(pi.Z,null)),P.createElement(dt.Z.Item,{label:P.createElement(ui.Z,{placement:"topRight",title:"\u5B8C\u6210\u8868\u8FBE\u5F0F",content:P.createElement("div",{style:{width:"330px"}},"\u8BC4\u4F30\u662F\u5426\u7ED3\u675F\u591A\u5B9E\u4F8B\u7684\u8868\u8FBE\u5F0F, \u5982\u679C\u8868\u8FBE\u5F0F\u7ED3\u679C\u4E3Atrue, \u5219\u591A\u5B9E\u4F8B\u4E2D\u6240\u6709\u5269\u4F59\u7684\u5B9E\u4F8B\u5C06\u88AB\u9500\u6BC1, \u5E76\u4E14\u591A\u5B9E\u4F8B\u6D3B\u52A8\u7ED3\u675F, \u6D41\u7A0B\u79BB\u5F00\u5F53\u524D\u6D3B\u52A8\u7EE7\u7EED\u6267\u884C\u3002",P.createElement("br",null),"\u4EE5\u4E0B\u662F\u4E00\u4E9B",P.createElement("strong",null,"\u5B8C\u6210\u8868\u8FBE\u5F0F"),"\u53D8\u91CF\uFF1A",P.createElement(qc,{copyable:{text:"nrOfInstances",tooltips:!1}},"\u5B9E\u4F8B\u603B\u6570: nrOfInstances"),P.createElement(qc,{copyable:{text:"nrOfCompletedInstances",tooltips:!1}},"\u5F53\u524D\u8FD8\u6CA1\u6709\u5B8C\u6210\u7684\u5B9E\u4F8B: nrOfCompletedInstances"),P.createElement(qc,{copyable:{text:"loopCounter",tooltips:!1}},"\u5DF2\u7ECF\u5FAA\u73AF\u7684\u6B21\u6570: loopCounter"),P.createElement(qc,{copyable:{text:"loonrOfActiveInstancespCounter",tooltips:!1}},"\u5DF2\u7ECF\u5B8C\u6210\u7684\u5B9E\u4F8B\u4E2A\u6570: nrOfActiveInstances"))},"\u8868\u8FBE\u5F0F ",P.createElement(B2.Z,null)),name:["loopCharacteristics","completionCondition","body"],rules:[{validator:function(He,Je){return(0,Pt.dv)(Je)}}]},P.createElement(Ga,null))):(0,Pt.aY)(f.current)==="ServiceTask"?Le.children=P.createElement(P.Fragment,null,P.createElement(dt.Z.Item,{label:"\u670D\u52A1\u7C7B\u578B"},P.createElement(dt.Z.Item,null,P.createElement(Xc.ZP.Group,{defaultValue:E,onChange:function(He){var Je=He.target.value;y(Je),Je=="delegateExpression"?(u.setFieldValue("class",null),u.setFieldValue("expression",null)):Je=="expression"?(u.setFieldValue("delegateExpression",null),u.setFieldValue("class",null)):(u.setFieldValue("delegateExpression",null),u.setFieldValue("expression",null))},options:k2})),P.createElement(dt.Z.Item,{noStyle:!0},P.createElement(dt.Z.Item,{name:E,rules:E!="class"?[{validator:function(He,Je){return(0,Pt.dv)(Je)}}]:[]},P.createElement(Ga,{rows:4})),E=="expression"&&P.createElement(dt.Z.Item,{name:"resultVariable"},P.createElement(pi.Z,{addonAfter:"\u8FD4\u56DE\u503C"}))))):(0,Pt.aY)(f.current)==="SendTask"?Le.children=P.createElement(P.Fragment,null,P.createElement(dt.Z.Item,{label:"\u670D\u52A1\u7C7B\u578B",name:"class"},P.createElement(dt.Z.Item,{name:"class"},P.createElement(Ga,{rows:4})))):(0,Pt.aY)(f.current)==="ScriptTask"&&(Le.children=P.createElement(dt.Z.Item,null,P.createElement(dt.Z.Item,{label:"\u811A\u672C\u7C7B\u578B",name:"scriptFormat"},P.createElement(Xc.ZP.Group,{defaultValue:E||"JavaScript",onChange:function(He){var Je=He.target.value;y(Je),he("")},options:I2})),P.createElement(dt.Z.Item,{label:"\u811A\u672C"},P.createElement(f0(),{value:G,onValueChange:function(He){return he(He)},highlight:function(He){return Kc().highlight(He,Kc().languages.javascript,"js")},padding:10,style:{fontFamily:"monospace",height:"100px",border:"1px solid #d9d9d9",borderRadius:"10px"}})),E!="juel"?P.createElement(dt.Z.Item,{label:"\u662F\u5426\u4FDD\u7559\u811A\u672C\u7ED3\u679C",name:"autoStoreVariables"},P.createElement(R2.Z,{defaultChecked:!1})):P.createElement(dt.Z.Item,{label:"\u811A\u672C\u7ED3\u679C\u63A5\u6536\u53C2\u6570",name:"resultVariable"},P.createElement(pi.Z,{addonAfter:"\u8FD4\u56DE\u503C"})))),Le.children!=null&&xe.push(Le),(0,Pt.aY)(f.current)=="UserTask"&&xe.push({key:"action",label:"\u62D3\u5C55\u64CD\u4F5C",children:P.createElement(dt.Z.Item,{label:"\u64CD\u4F5C",name:"actions"},P.createElement(y0.Z.Group,null,P.createElement(A2.Z,null,Pt.N.map(function(me){return P.createElement(T2.Z,{key:me.value,span:8},P.createElement(ui.Z,{title:me.label,content:P.createElement(Jp.Z,{renderItem:function(Je,bt){return P.createElement(Jp.Z.Item,{key:bt},P.createElement(Jp.Z.Item.Meta,{description:P.createElement("span",null,Je.description,me.note&&P.createElement("span",{style:{color:"#ff9c6e"}},P.createElement("br",null),"\u6CE8: ",me.note))}))},size:"small",bordered:!0,dataSource:[{title:me.label,description:me.description}]})},P.createElement(y0.Z,{value:me.value,disabled:me.disabled},P.createElement("p",null,me.label))))}))))}),xe.push({key:"description",label:"\u6587\u6863",children:P.createElement(dt.Z.Item,{label:"\u63CF\u8FF0",name:"documentation"},P.createElement(Ga,null))}),xe};return P.createElement(dt.Z,{onValuesChange:Te,form:u,labelCol:{span:5}},P.createElement(g0.Z,{message:"\u5F53\u524D\u5BF9\u8C61: ".concat((0,Pt.aY)(f.current))}),P.createElement(D2.Z,{style:{height:"".concat(a.height,"vh"),overflowY:"auto",overflowX:"hidden",scrollbarWidth:"thin",marginTop:"1px"},expandIconPosition:"end",items:wn(),defaultActiveKey:["base","special","description","action"]}))},F2=L2,j2={"Activate hand tool":"\u6FC0\u6D3B\u6293\u624B\u5DE5\u5177","Activate lasso tool":"\u6FC0\u6D3B\u5957\u7D22\u5DE5\u5177","Activate global connect tool":"\u5168\u5C40\u8282\u70B9\u8FDE\u63A5\u5DE5\u5177","Activate create/remove space tool":"\u6FC0\u6D3B\u521B\u5EFA/\u5220\u9664\u7A7A\u95F4\u5DE5\u5177","Create start event":"\u521B\u5EFA\u5F00\u59CB\u4E8B\u4EF6","Create end event":"\u521B\u5EFA\u7ED3\u675F\u4E8B\u4EF6","Create gateway":"\u521B\u5EFA\u7F51\u5173","Create expanded sub-process":"\u521B\u5EFA\u53EF\u6298\u53E0\u5B50\u6D41\u7A0B","Create intermediate/boundary event":"\u521B\u5EFA\u4E2D\u95F4\u629B\u51FA/\u8FB9\u754C\u4E8B\u4EF6","Create pool/participant":"\u521B\u5EFA\u6C60/\u53C2\u4E0E\u8005","Create task":"\u521B\u5EFA\u4EFB\u52A1","Create data object reference":"\u521B\u5EFA\u6570\u636E\u5BF9\u8C61\u5F15\u7528","Create data store reference":"\u521B\u5EFA\u6570\u636E\u5B58\u50A8\u5F15\u7528","Create group":"\u521B\u5EFA\u7EC4","Append end event":"\u8FFD\u52A0\u7ED3\u675F\u4E8B\u4EF6","Append gateway":"\u8FFD\u52A0\u7F51\u5173","Append task":"\u8FFD\u52A0\u4EFB\u52A1","Append mail task":"\u8FFD\u52A0\u90AE\u4EF6\u4EFB\u52A1","Add text annotation":"\u6587\u672C\u6CE8\u91CA","Connect to other element":"\u8FDE\u63A5\u5176\u4ED6\u8282\u70B9","Change element":"\u5207\u6362\u8282\u70B9","Append intermediate/boundary event":"\u8FFD\u52A0\u4E2D\u95F4/\u8FB9\u754C\u4E8B\u4EF6",Delete:"\u5220\u9664\u8282\u70B9","Parallel multi-instance":"\u5E76\u884C\u591A\u5B9E\u4F8B","Sequential multi-instance":"\u4E32\u884C\u591A\u5B9E\u4F8B",Loop:"\u5FAA\u73AF",Task:"\u4EFB\u52A1","Send task":"\u53D1\u9001\u4EFB\u52A1","Mail task":"\u90AE\u4EF6\u4EFB\u52A1","Receive task":"\u63A5\u6536\u4EFB\u52A1","User task":"\u7528\u6237\u4EFB\u52A1","Manual task":"\u624B\u52A8\u4EFB\u52A1","Business rule task":"\u4E1A\u52A1\u89C4\u5219\u4EFB\u52A1","Service task":"\u670D\u52A1\u4EFB\u52A1","Script task":"\u811A\u672C\u4EFB\u52A1","Call activity":"\u5F15\u7528\u6D41\u7A0B","Sub-process (collapsed)":"\u53EF\u6298\u53E0\u5B50\u6D41\u7A0B","Sub-process (expanded)":"\u53EF\u5C55\u5F00\u5B50\u6D41\u7A0B","Intermediate throw event":"\u4E2D\u95F4\u629B\u51FA\u4E8B\u4EF6","End event":"\u7ED3\u675F\u4E8B\u4EF6","Message start event":"\u6D88\u606F\u542F\u52A8\u4E8B\u4EF6","Timer start event":"\u5B9A\u65F6\u542F\u52A8\u4E8B\u4EF6","Conditional start event":"\u6761\u4EF6\u542F\u52A8\u4E8B\u4EF6","Signal start event":"\u4FE1\u53F7\u542F\u52A8\u4E8B\u4EF6","Start event":"\u5F00\u59CB\u4E8B\u4EF6","Message end event":"\u7ED3\u675F\u6D88\u606F\u4E8B\u4EF6","Escalation end event":"\u7ED3\u675F\u5347\u7EA7\u4E8B\u4EF6","Error end event":"\u7ED3\u675F\u9519\u8BEF\u4E8B\u4EF6","Compensation end event":"\u7ED3\u675F\u8865\u507F\u4E8B\u4EF6","Signal end event":"\u7ED3\u675F\u4FE1\u53F7\u4E8B\u4EF6","Terminate end event":"\u7EC8\u6B62\u8FB9\u754C\u4E8B\u4EF6","Message intermediate catch event":"\u4E2D\u95F4\u6D88\u606F\u6355\u83B7\u4E8B\u4EF6","Message intermediate throw event":"\u4E2D\u95F4\u6D88\u606F\u629B\u51FA\u4E8B\u4EF6","Timer intermediate catch event":"\u4E2D\u95F4\u5B9A\u65F6\u6355\u83B7\u4E8B\u4EF6","Escalation intermediate throw event":"\u4E2D\u95F4\u5347\u7EA7\u629B\u51FA\u4E8B\u4EF6","Conditional intermediate catch event":"\u4E2D\u95F4\u6761\u4EF6\u6355\u83B7\u4E8B\u4EF6","Link intermediate catch event":"\u4E2D\u95F4\u94FE\u63A5\u6355\u83B7\u4E8B\u4EF6","Link intermediate throw event":"\u4E2D\u95F4\u94FE\u63A5\u629B\u51FA\u4E8B\u4EF6","Compensation intermediate throw event":"\u4E2D\u95F4\u8865\u507F\u629B\u51FA\u4E8B\u4EF6","Signal intermediate catch event":"\u4E2D\u95F4\u4FE1\u53F7\u6355\u83B7\u4E8B\u4EF6","Signal intermediate throw event":"\u4E2D\u95F4\u4FE1\u53F7\u629B\u51FA\u4E8B\u4EF6","Exclusive gateway":"\u4E32\u884C\u7F51\u5173","Parallel gateway":"\u5E76\u884C\u7F51\u5173","Inclusive gateway":"\u5305\u5BB9\u7F51\u5173","Complex gateway":"\u590D\u6742\u7F51\u5173","Event-based gateway":"\u4E8B\u4EF6\u7F51\u5173","Append receive task":"\u8FFD\u52A0\u63A5\u6536\u4EFB\u52A1","Append message intermediate catch event":"\u8FFD\u52A0\u4E2D\u95F4\u6D88\u606F\u6355\u83B7\u4E8B\u4EF6","Append timer intermediate catch event":"\u8FFD\u52A0\u4E2D\u95F4\u5B9A\u65F6\u6355\u83B7\u4E8B\u4EF6","Append conditional intermediate catch event":"\u8FFD\u52A0\u4E2D\u95F4\u6761\u4EF6\u6355\u83B7\u4E8B\u4EF6","Append signal intermediate catch event":"\u8FFD\u52A0\u4E2D\u95F4\u4FE1\u53F7\u6355\u83B7\u4E8B\u4EF6","Data store reference":"\u6570\u636E\u5B58\u50A8\u53C2\u8003","Data object reference":"\u6570\u636E\u5BF9\u8C61\u53C2\u8003","Connect using association":"\u6587\u672C\u5173\u8054","Connect using data input association":"\u8FDE\u63A5\u5230\u9700\u8981\u6570\u636E\u6E90\u7684\u5730\u65B9"},$2=function(t,n){return n=n||{},t=j2[t]||t,t.replace(/{([^}]+)}/g,function(i,r){return n[r]||"{"+r+"}"})},z2={translate:["value",$2]},ef=N(43144),tf=N(15671),_t=N(97326),nf=N(60136),rf=N(29388),H2=function(e){(0,nf.Z)(n,e);var t=(0,rf.Z)(n);function n(i,r,o,a,s,c,l,u,p,f,d,h,v){var m;return(0,tf.Z)(this,n),m=t.call(this,i,r,o,a,s,c,l,u,p,f,d,h,v),(0,ft.Z)((0,_t.Z)(m),"contextPad",void 0),(0,ft.Z)((0,_t.Z)(m),"modeling",void 0),(0,ft.Z)((0,_t.Z)(m),"elementFactory",void 0),(0,ft.Z)((0,_t.Z)(m),"connect",void 0),(0,ft.Z)((0,_t.Z)(m),"create",void 0),(0,ft.Z)((0,_t.Z)(m),"popupMenu",void 0),(0,ft.Z)((0,_t.Z)(m),"rules",void 0),(0,ft.Z)((0,_t.Z)(m),"translate",void 0),(0,ft.Z)((0,_t.Z)(m),"appendPreview",void 0),(0,ft.Z)((0,_t.Z)(m),"autoPlace",void 0),m.contextPad=a,m.modeling=s,m.elementFactory=c,m.connect=l,m.create=u,m.popupMenu=p,m.rules=d,m.translate=h,m.appendPreview=v,m}return(0,ef.Z)(n)}(Po),G2={contextPadProvider:["type",H2]},U2=function(e){(0,nf.Z)(n,e);var t=(0,rf.Z)(n);function n(i,r,o,a,s,c,l,u){var p;return(0,tf.Z)(this,n),p=t.call(this,i,r,o,a,s,c,l,u),(0,ft.Z)((0,_t.Z)(p),"popupMenu",void 0),(0,ft.Z)((0,_t.Z)(p),"bpmnFactory",void 0),(0,ft.Z)((0,_t.Z)(p),"modeling",void 0),(0,ft.Z)((0,_t.Z)(p),"moddle",void 0),(0,ft.Z)((0,_t.Z)(p),"bpmnReplace",void 0),(0,ft.Z)((0,_t.Z)(p),"rules",void 0),(0,ft.Z)((0,_t.Z)(p),"translate",void 0),(0,ft.Z)((0,_t.Z)(p),"moddleCopy",void 0),(0,ft.Z)((0,_t.Z)(p),"_getLoopCharacteristicsHeaderEntries",function(f){if(f.type!=="bpmn:UserTask")return p.modeling.updateProperties(f,{loopCharacteristics:void 0}),{};var d=function(y,w){if(w.active){p.modeling.updateProperties(f,{loopCharacteristics:void 0});return}var R=f.businessObject.get("loopCharacteristics"),I=p.moddle.create(w.options.loopCharacteristics);R&&p.moddleCopy.copyElement(R,I),I.set("isSequential",w.options.isSequential),p.modeling.updateProperties(f,{loopCharacteristics:I})},h=Q(f),v=h.loopCharacteristics,m,S,x;return v&&(m=v.isSequential,S=v.isSequential===void 0,x=v.isSequential!==void 0&&!v.isSequential),{"toggle-parallel-mi":{className:"bpmn-icon-parallel-mi-marker",title:p.translate("Parallel multi-instance"),active:x,action:d,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!1}},"toggle-sequential-mi":{className:"bpmn-icon-sequential-mi-marker",title:p.translate("Sequential multi-instance"),active:m,action:d,options:{loopCharacteristics:"bpmn:MultiInstanceLoopCharacteristics",isSequential:!0}}}}),p.bpmnFactory=i,p.popupMenu=r,p.modeling=o,p.moddle=a,p.bpmnReplace=s,p.rules=c,p.translate=l,p.moddleCopy=u,p}return(0,ef.Z)(n)}(On),V2={replaceMenuProvider:["type",U2]},Z2=function(e){(0,nf.Z)(n,e);var t=(0,rf.Z)(n);function n(i,r,o,a,s,c,l,u){var p;return(0,tf.Z)(this,n),p=t.call(this,i,r,o,a,s,c,l,u),(0,ft.Z)((0,_t.Z)(p),"palette",void 0),(0,ft.Z)((0,_t.Z)(p),"create",void 0),(0,ft.Z)((0,_t.Z)(p),"elementFactory",void 0),(0,ft.Z)((0,_t.Z)(p),"spaceTool",void 0),(0,ft.Z)((0,_t.Z)(p),"lassoTool",void 0),(0,ft.Z)((0,_t.Z)(p),"handTool",void 0),(0,ft.Z)((0,_t.Z)(p),"globalConnect",void 0),(0,ft.Z)((0,_t.Z)(p),"translate",void 0),p.palette=i,p.create=r,p.elementFactory=o,p.spaceTool=a,p.lassoTool=s,p.handTool=c,p.globalConnect=l,p.translate=u,p}return(0,ef.Z)(n)}(Uc),W2={paletteProvider:["type",Z2]},Y2=N(28459),K2=N(9361),X2=N(93967),xr=N.n(X2);const q2=(0,P.forwardRef)((e,t)=>{const{prefixCls:n,className:i,children:r,size:o,style:a={}}=e,s=xr()(`${n}-panel`,{[`${n}-panel-hidden`]:o===0},i),c=o!==void 0;return P.createElement("div",{ref:t,className:s,style:Object.assign(Object.assign({},a),{flexBasis:c?o:"auto",flexGrow:c?0:1})},r)});var Q2=()=>null,J2=N(9220),Qc=N(66680),eD=N(53124),tD=N(35792),nD=N(50344),iD=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};function rD(e){if(e&&typeof e=="object")return e;const t=!!e;return{start:t,end:t}}function oD(e){return P.useMemo(()=>(0,nD.Z)(e).filter(P.isValidElement).map(n=>{const{props:i}=n,{collapsible:r}=i,o=iD(i,["collapsible"]);return Object.assign(Object.assign({},o),{collapsible:rD(r)})}),[e])}function aD(e,t){return P.useMemo(()=>{const n=[];for(let i=0;i<e.length-1;i+=1){const r=e[i],o=e[i+1],a=t[i],s=t[i+1],{resizable:c=!0,min:l,collapsible:u}=r,{resizable:p=!0,min:f,collapsible:d}=o,h=c&&p&&(a!==0||!l)&&(s!==0||!f),v=u.end&&a>0||d.start&&s===0&&a>0,m=d.start&&s>0||u.end&&a===0&&s>0;n[i]={resizable:h,startCollapsible:!!v,endCollapsible:!!m}}return n},[t,e])}var sD=N(74902);function Jc(e){return Number(e.slice(0,-1))/100}function of(e){return typeof e=="string"&&e.endsWith("%")}function cD(e,t){const n=e.map(h=>h.size),i=e.length,r=t||0,o=h=>h*r,[a,s]=P.useState(()=>e.map(h=>h.defaultSize)),c=P.useMemo(()=>{var h;const v=[];for(let m=0;m<i;m+=1)v[m]=(h=n[m])!==null&&h!==void 0?h:a[m];return v},[i,a,n]),l=P.useMemo(()=>{let h=[],v=0;for(let S=0;S<i;S+=1){const x=c[S];if(of(x))h[S]=Jc(x);else if(x||x===0){const E=Number(x);Number.isNaN(E)||(h[S]=E/r)}else v+=1,h[S]=void 0}const m=h.reduce((S,x)=>S+(x||0),0);if(m>1||!v){const S=1/m;h=h.map(x=>x===void 0?0:x*S)}else{const S=(1-m)/v;h=h.map(x=>x===void 0?S:x)}return h},[c,r]),u=P.useMemo(()=>l.map(o),[l,r]),p=P.useMemo(()=>e.map(h=>of(h.min)?Jc(h.min):(h.min||0)/r),[e,r]),f=P.useMemo(()=>e.map(h=>of(h.max)?Jc(h.max):(h.max||r)/r),[e,r]);return[P.useMemo(()=>t?u:c,[u,t]),u,l,p,f,s]}function lD(e,t,n,i,r){const o=e.map(x=>[x.min,x.max]),a=i||0,s=x=>x*a;function c(x,E){return typeof x=="string"?s(Jc(x)):x!=null?x:E}const[l,u]=P.useState([]),[p,f]=P.useState(null),d=()=>n.map(s);return[x=>{u(d()),f({index:x,confirmed:!1})},(x,E)=>{var y;let w=null;if((!p||!p.confirmed)&&E!==0){if(E>0)w=x,f({index:x,confirmed:!0});else for(let oe=x;oe>=0;oe-=1)if(l[oe]>0&&t[oe].resizable){w=oe,f({index:oe,confirmed:!0});break}}const R=(y=w!=null?w:p==null?void 0:p.index)!==null&&y!==void 0?y:x,I=(0,sD.Z)(l),T=R+1,O=c(o[R][0],0),B=c(o[T][0],0),F=c(o[R][1],a),z=c(o[T][1],a);let H=E;return I[R]+H<O&&(H=O-I[R]),I[T]-H<B&&(H=I[T]-B),I[R]+H>F&&(H=F-I[R]),I[T]-H>z&&(H=I[T]-z),I[R]+=H,I[T]-=H,r(I),I},()=>{f(null)},(x,E)=>{const y=d(),w=E==="start"?x:x+1,R=E==="start"?x+1:x,I=y[w],T=y[R];if(I!==0&&T!==0)y[w]=0,y[R]+=I;else{const O=I+T,B=c(o[w][0],0),F=c(o[w][1],a),z=c(o[R][0],0),H=c(o[R][1],a),oe=Math.max(B,O-H),Ae=(Math.min(F,O-z)-oe)/2;y[w]-=Ae,y[R]+=Ae}return r(y),y},p==null?void 0:p.index]}var uD=N(80882),pD=N(6171),fD=N(90814),dD=N(48115);function af(e){return typeof e=="number"&&!Number.isNaN(e)?Math.round(e):0}var hD=e=>{const{prefixCls:t,vertical:n,index:i,active:r,ariaNow:o,ariaMin:a,ariaMax:s,resizable:c,startCollapsible:l,endCollapsible:u,onOffsetStart:p,onOffsetUpdate:f,onOffsetEnd:d,onCollapse:h}=e,v=`${t}-bar`,[m,S]=(0,P.useState)(null),x=R=>{c&&R.currentTarget&&(S([R.pageX,R.pageY]),p(i))},E=R=>{if(c&&R.touches.length===1){const I=R.touches[0];S([I.pageX,I.pageY]),p(i)}};P.useEffect(()=>{if(m){const R=B=>{const{pageX:F,pageY:z}=B,H=F-m[0],oe=z-m[1];f(i,H,oe)},I=()=>{S(null),d()},T=B=>{if(B.touches.length===1){const F=B.touches[0],z=F.pageX-m[0],H=F.pageY-m[1];f(i,z,H)}},O=()=>{S(null),d()};return window.addEventListener("touchmove",T),window.addEventListener("touchend",O),window.addEventListener("mousemove",R),window.addEventListener("mouseup",I),()=>{window.removeEventListener("mousemove",R),window.removeEventListener("mouseup",I),window.removeEventListener("touchmove",T),window.removeEventListener("touchend",O)}}},[m]);const y=n?dD.Z:pD.Z,w=n?uD.Z:fD.Z;return P.createElement("div",{className:v,role:"separator","aria-valuenow":af(o),"aria-valuemin":af(a),"aria-valuemax":af(s)},P.createElement("div",{className:xr()(`${v}-dragger`,{[`${v}-dragger-disabled`]:!c,[`${v}-dragger-active`]:r}),onMouseDown:x,onTouchStart:E}),l&&P.createElement("div",{className:xr()(`${v}-collapse-bar`,`${v}-collapse-bar-start`),onClick:()=>h(i,"start")},P.createElement(y,{className:xr()(`${v}-collapse-icon`,`${v}-collapse-start`)})),u&&P.createElement("div",{className:xr()(`${v}-collapse-bar`,`${v}-collapse-bar-end`),onClick:()=>h(i,"end")},P.createElement(w,{className:xr()(`${v}-collapse-icon`,`${v}-collapse-end`)})))},mD=N(14747),vD=N(83559);const gD=e=>{const{componentCls:t}=e;return{[`&-rtl${t}-horizontal`]:{[`> ${t}-bar`]:{[`${t}-bar-collapse-previous`]:{insetInlineEnd:0,insetInlineStart:"unset"},[`${t}-bar-collapse-next`]:{insetInlineEnd:"unset",insetInlineStart:0}}},[`&-rtl${t}-vertical`]:{[`> ${t}-bar`]:{[`${t}-bar-collapse-previous`]:{insetInlineEnd:"50%",insetInlineStart:"unset"},[`${t}-bar-collapse-next`]:{insetInlineEnd:"50%",insetInlineStart:"unset"}}}}},el={position:"absolute",top:"50%",left:{_skip_check_:!0,value:"50%"},transform:"translate(-50%, -50%)"},yD=e=>{const{componentCls:t,colorFill:n,splitBarDraggableSize:i,splitBarSize:r,splitTriggerSize:o,controlItemBgHover:a,controlItemBgActive:s,controlItemBgActiveHover:c}=e,l=`${t}-bar`,u=`${t}-mask`,p=`${t}-panel`,f=e.calc(o).div(2).equal();return{[t]:Object.assign(Object.assign(Object.assign({},(0,mD.Wf)(e)),{display:"flex",width:"100%",height:"100%",alignItems:"stretch",[`> ${l}`]:{flex:"none",position:"relative",userSelect:"none",[`${l}-dragger`]:Object.assign(Object.assign({},el),{zIndex:1,"&:before":Object.assign({content:'""',background:a},el),"&:after":Object.assign({content:'""',background:n},el),[`&:hover:not(${l}-dragger-active)`]:{"&:before":{background:s}},"&-active":{zIndex:2,"&:before":{background:c}},[`&-disabled${l}-dragger`]:{zIndex:0,"&, &:hover, &-active":{cursor:"default","&:before":{background:a}},"&:after":{display:"none"}}}),[`${l}-collapse-bar`]:Object.assign(Object.assign({},el),{zIndex:1,background:a,fontSize:e.fontSizeSM,borderRadius:e.borderRadiusXS,color:e.colorText,cursor:"pointer",opacity:0,display:"flex",alignItems:"center",justifyContent:"center","&:hover":{background:s},"&:active":{background:c}}),"&:hover, &:active":{[`${l}-collapse-bar`]:{opacity:1}}},[u]:{position:"fixed",zIndex:e.zIndexPopupBase,inset:0,"&-horizontal":{cursor:"col-resize"},"&-vertical":{cursor:"row-resize"}},"&-horizontal":{flexDirection:"row",[`> ${l}`]:{width:0,[`${l}-dragger`]:{cursor:"col-resize",height:"100%",width:o,"&:before":{height:"100%",width:r},"&:after":{height:i,width:r}},[`${l}-collapse-bar`]:{width:e.fontSizeSM,height:e.controlHeightSM,"&-start":{left:{_skip_check_:!0,value:"auto"},right:{_skip_check_:!0,value:f},transform:"translateY(-50%)"},"&-end":{left:{_skip_check_:!0,value:f},right:{_skip_check_:!0,value:"auto"},transform:"translateY(-50%)"}}}},"&-vertical":{flexDirection:"column",[`> ${l}`]:{height:0,[`${l}-dragger`]:{cursor:"row-resize",width:"100%",height:o,"&:before":{width:"100%",height:r},"&:after":{width:i,height:r}},[`${l}-collapse-bar`]:{height:e.fontSizeSM,width:e.controlHeightSM,"&-start":{top:"auto",bottom:f,transform:"translateX(-50%)"},"&-end":{top:f,bottom:"auto",transform:"translateX(-50%)"}}}},[p]:{overflow:"auto",padding:"0 1px",scrollbarWidth:"thin",boxSizing:"border-box","&-hidden":{padding:0,overflow:"hidden"},[`&:has(${t}:only-child)`]:{overflow:"hidden"}}}),gD(e))}},_D=e=>{var t;const n=e.splitBarSize||2,i=e.splitTriggerSize||6,r=e.resizeSpinnerSize||20,o=(t=e.splitBarDraggableSize)!==null&&t!==void 0?t:r;return{splitBarSize:n,splitTriggerSize:i,splitBarDraggableSize:o,resizeSpinnerSize:r}};var bD=(0,vD.I$)("Splitter",e=>[yD(e)],_D),ED=e=>{const{prefixCls:t,className:n,style:i,layout:r="horizontal",children:o,rootClassName:a,onResizeStart:s,onResize:c,onResizeEnd:l}=e,{getPrefixCls:u,direction:p,splitter:f}=P.useContext(eD.E_),d=u("splitter",t),h=(0,tD.Z)(d),[v,m,S]=bD(d,h),x=r==="vertical",E=p==="rtl",y=!x&&E,w=oD(o),[R,I]=(0,P.useState)(),T=D=>{const{offsetWidth:M,offsetHeight:G}=D,he=x?G:M;he!==0&&I(he)},[O,B,F,z,H,oe]=cD(w,R),ke=aD(w,B),[Ae,Se,It,ht,De]=lD(w,ke,F,R,oe),mt=(0,Qc.Z)(D=>{Ae(D),s==null||s(B)}),V=(0,Qc.Z)((D,M)=>{const G=Se(D,M);c==null||c(G)}),W=(0,Qc.Z)(()=>{It(),l==null||l(B)}),ue=(0,Qc.Z)((D,M)=>{const G=ht(D,M);c==null||c(G),l==null||l(G)}),Ve=xr()(d,n,`${d}-${r}`,{[`${d}-rtl`]:E},a,f==null?void 0:f.className,S,h,m),C=`${d}-mask`,g=P.useMemo(()=>{const D=[];let M=0;for(let G=0;G<w.length;G+=1)M+=F[G],D.push(M);return D},[F]),_=Object.assign(Object.assign({},f==null?void 0:f.style),i);return v(P.createElement(J2.Z,{onResize:T},P.createElement("div",{style:_,className:Ve},w.map((D,M)=>{const G=P.createElement(q2,Object.assign({},D,{prefixCls:d,size:O[M]}));let he=null;const fe=ke[M];if(fe){const Te=(g[M-1]||0)+z[M],lt=(g[M+1]||100)-H[M+1],wn=(g[M-1]||0)+H[M],at=(g[M+1]||100)-z[M+1];he=P.createElement(hD,{index:M,active:De===M,prefixCls:d,vertical:x,resizable:fe.resizable,ariaNow:g[M]*100,ariaMin:Math.max(Te,lt)*100,ariaMax:Math.min(wn,at)*100,startCollapsible:fe.startCollapsible,endCollapsible:fe.endCollapsible,onOffsetStart:mt,onOffsetUpdate:(xe,Le,me)=>{let He=x?me:Le;y&&(He=-He),V(xe,He)},onOffsetEnd:W,onCollapse:ue})}return P.createElement(P.Fragment,{key:`split-panel-${M}`},G,he)}),typeof De=="number"&&P.createElement("div",{"aria-hidden":!0,className:xr()(C,`${C}-${r}`)}))))};const _0=ED;_0.Panel=Q2;var sf=_0,xD=N(82925),wD=N(18253),SD=["height","locale","align","bpmnStyle"],CD=function(e){var t=e.height,n=t===void 0?60:t,i=e.locale,r=i===void 0?"zh-CN":i,o=e.align,a=o===void 0?"default":o,s=e.bpmnStyle,c=s===void 0?{}:s,l=(0,Ie.Z)(e,SD),u=P.useRef(null),p=P.useState(),f=(0,pe.Z)(p,2),d=f[0],h=f[1],v=P.useState(null),m=(0,pe.Z)(v,2),S=m[0],x=m[1],E=P.useState(),y=(0,pe.Z)(E,2),w=y[0],R=y[1],I=P.useState(n),T=(0,pe.Z)(I,2),O=T[0],B=T[1];P.useEffect(function(){if(S&&u.current){var z=new ci({container:u.current,height:"".concat(n,"vh"),additionalModules:[r=="zh-CN"?z2:{},V2,G2,W2],keyboard:{bindTo:document},bpmnRenderer:{defaultLabelColor:"#000",defaultFillColor:"#eef4ff",defaultStrokeColor:"#349afa"},textRenderer:{defaultStyle:{fontFamily:'"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"',fontSize:"14px",fontWeight:400,lineHeight:"20px"}}});return z.on("import.done",function(){var H=z.get("canvas");a==="center"&&H.zoom("fit-viewport","auto");var oe=H.getRootElement();R(oe)}),z.importXML(S).then(function(){l.loadAfter&&l.loadAfter(z)}).catch(function(H){l.loadError&&l.loadError(z,H)}),h(z),function(){return z&&z.destroy()}}},[S]);var F=function(){l.request&&l.request().then(function(H){x(H||u0(l.flowKey,l.flowName))})};return P.useEffect(function(){l.data||l.request?l.data&&l.request?F():(l.data&&x(l.data),l.request&&F()):x(u0(l.flowKey,l.flowName))},[]),P.createElement(Y2.ZP,{locale:r=="zh-CN"?xD.Z:wD.Z,theme:{algorithm:K2.Z.defaultAlgorithm}},P.createElement(sf,{onResize:function(H){return B(H[1]<=0?0:n)}},P.createElement(sf.Panel,{min:450},d&&l.toolbarRender!==!1&&(l.panelRender&&l.panelRender(d)||P.createElement(P2,(0,K.Z)({},l.toolbar,{modeler:d,uploadXml:function(H){return x(H)}}))),P.createElement("div",{id:"container",ref:u,style:(0,J.Z)((0,J.Z)({},VT),c)})),P.createElement(sf.Panel,{collapsible:!0,defaultSize:446},d&&w&&l.panelRender!==!1&&(l.panelRender&&l.panelRender(d)||P.createElement(F2,(0,K.Z)({},l.panel,{height:O,modeler:d,defaultElement:w}))))))},Mo=N(66309),PD=N(74330),ko=N(26412),RD={success:{stroke:"#52c41a",fill:"#f6ffed"},process:{stroke:"#4096ff",fill:"#e6f4ff",strokeDasharray:"5, 5"},danger:{stroke:"#ff4d4f",fill:"#fff1f0"},warning:{stroke:"#ffa940",fill:"#fff7e6"},cyan:{stroke:"#36cfc9",fill:"#e6fffb"},purple:{stroke:"#9254de",fill:"#f9f0ff"}},b0=`<?xml version="1.0" encoding="UTF-8"?>
<definitions id="definitions" xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
    xmlns:flowable="http://flowable.org/bpmn"
    typeLanguage="http://www.w3.org/2001/XMLSchema"
    expressionLanguage="http://www.w3.org/1999/XPath"
    targetNamespace="http://www.flowable.org/processdef">
<process id="easy-flowable" isExecutable="true">
</process>
<bpmndi:BPMNDiagram id="BpmnDiagram_1">
    <bpmndi:BPMNPlane id="BpmnPlane_1" bpmnElement="easy-flowable">
    </bpmndi:BPMNPlane>
</bpmndi:BPMNDiagram>
</definitions>`,E0=function(t){if(t){if(typeof t=="string")return t;var n=t.getFullYear(),i=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0"),o=String(t.getHours()).padStart(2,"0"),a=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return"".concat(n,"-").concat(i,"-").concat(r," ").concat(o,":").concat(a,":").concat(s)}return"-"},AD=["height","mode"],TD=function(e){var t=e.height,n=t===void 0?50:t,i=e.mode,r=i===void 0?"read":i,o=(0,Ie.Z)(e,AD),a=P.useRef(null),s=P.useState(null),c=(0,pe.Z)(s,2),l=c[0],u=c[1],p=P.useState(!1),f=(0,pe.Z)(p,2),d=f[0],h=f[1],v=P.useState(),m=(0,pe.Z)(v,2),S=m[0],x=m[1],E=P.useState({title:"",status:"",content:"",height:80,width:100,display:"none",top:0,left:0,noting:!1}),y=(0,pe.Z)(E,2),w=y[0],R=y[1],I=P.useState({}),T=(0,pe.Z)(I,2),O=T[0],B=T[1],F=function(ke,Ae,Se){if(ke&&ke.length){var It=Ae.get("elementRegistry"),ht=Ae.get("modeling"),De=Ae.get("canvas");ke.forEach(function(mt){var V=It.get(mt);V.type.endsWith("SequenceFlow")?ht.setColor([V],RD[Se]):De.addMarker(mt,Se)})}};P.useEffect(function(){if(l&&a.current){var oe=new ci({container:a.current,height:"".concat(n,"vh"),additionalModules:[{paletteProvider:["value",""],bendpoints:["value",""],contextPadProvider:["value"],labelEditingProvider:["value",""],move:["value",""]}],bpmnRenderer:r==="read"?{defaultLabelColor:"#000",defaultFillColor:"#eef4ff",defaultStrokeColor:"#349afa"}:{},textRenderer:{defaultStyle:{fontFamily:'"Inter, system-ui, Avenir, Helvetica, Arial, sans-serif"',fontSize:"12px",fontWeight:400,lineHeight:"20px"}}});oe.on("import.done",function(){var ht=oe.get("canvas");ht.zoom("fit-viewport","auto")});var ke,Ae=[],Se=[];typeof l!="string"?(ke=l.data,Ae=l.executeNode,Se=l.activeNode):(ke=l,o.active&&(Se=o.active.activeNode||[],Ae=o.active.executeNode||[]));var It=oe.get("eventBus");return It.on("element.click",function(ht){var De=ht.element,mt=!1;if(o.excludeType&&(mt=o.excludeType.some(function(Ve){return De.businessObject.$type.endsWith(Ve)})),!De.businessObject.$type.endsWith("Process")&&!mt){x(De);var V=oe.get("canvas"),W=V.getGraphics(De.id).getBoundingClientRect();if(o.onClick){var ue=Se.includes(De.id)?"\u5F85\u529E":Ae.includes(De.id)?"\u5DF2\u5B8C\u6210":"\u672A\u6267\u884C";R((0,J.Z)((0,J.Z)({},w),{},{status:ue,display:"block",width:W.width,height:W.height,title:De.businessObject.name||De.id,top:W.y,left:W.x,noting:Ae.includes(De.id)})),h(!0),o.onClick(De.id,De.type,De.businessObject).then(function(Ve){h(!1),B(Ve)})}}}),oe.importXML(ke).then(function(){if(r==="active"){var ht,De;F(Ae,oe,((ht=o.active)===null||ht===void 0?void 0:ht.executeColor)||"success"),F(Se,oe,((De=o.active)===null||De===void 0?void 0:De.activeColor)||"process")}}).catch(function(ht){return console.log("import xml error: ",ht)}),function(){return oe&&oe.destroy()}}},[l]);var z=function(ke){if(ke||ke===0){if(ke<1e3)return P.createElement(Mo.Z,{color:"success"},"\u8017\u65F6\uFF1A",ke,"\u6BEB\u79D2");if(ke>=1e3&&ke<60*1e3)return P.createElement(Mo.Z,{color:"success"},"\u8017\u65F6\uFF1A",ke/1e3,"\u79D2");if(ke>=60*1e3&&ke<60*60*1e3)return P.createElement(Mo.Z,{color:"success"},"\u8017\u65F6\uFF1A",(ke/(60*1e3)).toFixed(0),"\u5206\u949F");if(ke>=60*60*1e3&&ke<24*60*60*1e3)return P.createElement(Mo.Z,{color:"success"},"\u8017\u65F6\uFF1A",(ke/(60*60*1e3)).toFixed(2),"\u5C0F\u65F6");if(ke>=24*60*60*1e3)return P.createElement(Mo.Z,{color:"warning"},"\u8017\u65F6\uFF1A",(ke/(24*60*60*1e3)).toFixed(2),"\u5929")}return P.createElement(Mo.Z,{color:"processing"},"\u5F85\u529E")},H=function(){o.request&&o.request().then(function(ke){u(ke||b0)})};return P.useEffect(function(){o.data||o.request?o.data&&o.request?H():(o.data&&u(o.data),o.request&&H()):u(b0)},[]),P.createElement("div",{id:"easy-flowable-viewer",ref:a},P.createElement(ui.Z,{placement:"top",title:O.title||w.title,content:P.createElement(PD.Z,{spinning:d},S&&o.tipRender&&o.tipRender(S.id,S==null?void 0:S.type,S)||P.createElement(ko.Z,{style:{maxWidth:"15vw"},column:1},P.createElement(ko.Z.Item,{label:"\u6267\u884C\u4EBA"},O.users),P.createElement(ko.Z.Item,{label:"\u8282\u70B9\u72B6\u6001"},O.status||w.status),P.createElement(ko.Z.Item,{label:"\u8017\u65F6"},w.noting?z(O.duration):"-"),P.createElement(ko.Z.Item,{label:"\u5F00\u59CB\u65F6\u95F4"},w.noting?E0(O.startTime):"-"),P.createElement(ko.Z.Item,{label:"\u7ED3\u675F\u65F6\u95F4"},w.noting?E0(O.endTime):"-")))},P.createElement("div",{id:"popover",style:{width:"".concat(w.width,"px"),height:"".concat(w.height,"px"),display:"".concat(w.display),position:"absolute",zIndex:1e3,top:"".concat(w.top,"px"),left:"".concat(w.left,"px")}})))}},35433:function(){Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/}},39980:function(){Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Prism.languages.js=Prism.languages.javascript},62356:function(){(function(ge){var re=ge.util.clone(ge.languages.javascript),N=/(?:\s|\/\/.*(?!.)|\/\*(?:[^*]|\*(?!\/))\*\/)/.source,J=/(?:\{(?:\{(?:\{[^{}]*\}|[^{}])*\}|[^{}])*\})/.source,K=/(?:\{<S>*\.{3}(?:[^{}]|<BRACES>)*\})/.source;function pe(j,Z){return j=j.replace(/<S>/g,function(){return N}).replace(/<BRACES>/g,function(){return J}).replace(/<SPREAD>/g,function(){return K}),RegExp(j,Z)}K=pe(K).source,ge.languages.jsx=ge.languages.extend("markup",re),ge.languages.jsx.tag.pattern=pe(/<\/?(?:[\w.:-]+(?:<S>+(?:[\w.:$-]+(?:=(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s{'"/>=]+|<BRACES>))?|<SPREAD>))*<S>*\/?)?>/.source),ge.languages.jsx.tag.inside.tag.pattern=/^<\/?[^\s>\/]*/,ge.languages.jsx.tag.inside["attr-value"].pattern=/=(?!\{)(?:"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*'|[^\s'">]+)/,ge.languages.jsx.tag.inside.tag.inside["class-name"]=/^[A-Z]\w*(?:\.[A-Z]\w*)*$/,ge.languages.jsx.tag.inside.comment=re.comment,ge.languages.insertBefore("inside","attr-name",{spread:{pattern:pe(/<SPREAD>/.source),inside:ge.languages.jsx}},ge.languages.jsx.tag),ge.languages.insertBefore("inside","special-attr",{script:{pattern:pe(/=<BRACES>/.source),alias:"language-javascript",inside:{"script-punctuation":{pattern:/^=(?=\{)/,alias:"punctuation"},rest:ge.languages.jsx}}},ge.languages.jsx.tag);var Ie=function(j){return j?typeof j=="string"?j:typeof j.content=="string"?j.content:j.content.map(Ie).join(""):""},P=function(j){for(var Z=[],Fe=0;Fe<j.length;Fe++){var Ze=j[Fe],Sn=!1;if(typeof Ze!="string"&&(Ze.type==="tag"&&Ze.content[0]&&Ze.content[0].type==="tag"?Ze.content[0].content[0].content==="</"?Z.length>0&&Z[Z.length-1].tagName===Ie(Ze.content[0].content[1])&&Z.pop():Ze.content[Ze.content.length-1].content==="/>"||Z.push({tagName:Ie(Ze.content[0].content[1]),openedBraces:0}):Z.length>0&&Ze.type==="punctuation"&&Ze.content==="{"?Z[Z.length-1].openedBraces++:Z.length>0&&Z[Z.length-1].openedBraces>0&&Ze.type==="punctuation"&&Ze.content==="}"?Z[Z.length-1].openedBraces--:Sn=!0),(Sn||typeof Ze=="string")&&Z.length>0&&Z[Z.length-1].openedBraces===0){var Yt=Ie(Ze);Fe<j.length-1&&(typeof j[Fe+1]=="string"||j[Fe+1].type==="plain-text")&&(Yt+=Ie(j[Fe+1]),j.splice(Fe+1,1)),Fe>0&&(typeof j[Fe-1]=="string"||j[Fe-1].type==="plain-text")&&(Yt=Ie(j[Fe-1])+Yt,j.splice(Fe-1,1),Fe--),j[Fe]=new ge.Token("plain-text",Yt,null,Yt)}Ze.content&&typeof Ze.content!="string"&&P(Ze.content)}};ge.hooks.add("after-tokenize",function(j){j.language!=="jsx"&&j.language!=="tsx"||P(j.tokens)})})(Prism)},24335:function(){Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity,Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup,Prism.hooks.add("wrap",function(ge){ge.type==="entity"&&(ge.attributes.title=ge.content.replace(/&amp;/,"&"))}),Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(re,N){var J={};J["language-"+N]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[N]},J.cdata=/^<!\[CDATA\[|\]\]>$/i;var K={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:J}};K["language-"+N]={pattern:/[\s\S]+/,inside:Prism.languages[N]};var pe={};pe[re]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return re}),"i"),lookbehind:!0,greedy:!0,inside:K},Prism.languages.insertBefore("markup","cdata",pe)}}),Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(ge,re){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+ge+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[re,"language-"+re],inside:Prism.languages[re]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Prism.languages.html=Prism.languages.markup,Prism.languages.mathml=Prism.languages.markup,Prism.languages.svg=Prism.languages.markup,Prism.languages.xml=Prism.languages.extend("markup",{}),Prism.languages.ssml=Prism.languages.xml,Prism.languages.atom=Prism.languages.xml,Prism.languages.rss=Prism.languages.xml},15660:function(ge,re,N){var J=typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope?self:{};var K=function(pe){var Ie=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,P=0,j={},Z={manual:pe.Prism&&pe.Prism.manual,disableWorkerMessageHandler:pe.Prism&&pe.Prism.disableWorkerMessageHandler,util:{encode:function $(L){return L instanceof Fe?new Fe(L.type,$(L.content),L.alias):Array.isArray(L)?L.map($):L.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function($){return Object.prototype.toString.call($).slice(8,-1)},objId:function($){return $.__id||Object.defineProperty($,"__id",{value:++P}),$.__id},clone:function $(L,q){q=q||{};var ee,Y;switch(Z.util.type(L)){case"Object":if(Y=Z.util.objId(L),q[Y])return q[Y];ee={},q[Y]=ee;for(var U in L)L.hasOwnProperty(U)&&(ee[U]=$(L[U],q));return ee;case"Array":return Y=Z.util.objId(L),q[Y]?q[Y]:(ee=[],q[Y]=ee,L.forEach(function(te,ae){ee[ae]=$(te,q)}),ee);default:return L}},getLanguage:function($){for(;$;){var L=Ie.exec($.className);if(L)return L[1].toLowerCase();$=$.parentElement}return"none"},setLanguage:function($,L){$.className=$.className.replace(RegExp(Ie,"gi"),""),$.classList.add("language-"+L)},currentScript:function(){if(typeof document=="undefined")return null;if("currentScript"in document)return document.currentScript;try{throw new Error}catch(ee){var $=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(ee.stack)||[])[1];if($){var L=document.getElementsByTagName("script");for(var q in L)if(L[q].src==$)return L[q]}return null}},isActive:function($,L,q){for(var ee="no-"+L;$;){var Y=$.classList;if(Y.contains(L))return!0;if(Y.contains(ee))return!1;$=$.parentElement}return!!q}},languages:{plain:j,plaintext:j,text:j,txt:j,extend:function($,L){var q=Z.util.clone(Z.languages[$]);for(var ee in L)q[ee]=L[ee];return q},insertBefore:function($,L,q,ee){ee=ee||Z.languages;var Y=ee[$],U={};for(var te in Y)if(Y.hasOwnProperty(te)){if(te==L)for(var ae in q)q.hasOwnProperty(ae)&&(U[ae]=q[ae]);q.hasOwnProperty(te)||(U[te]=Y[te])}var ne=ee[$];return ee[$]=U,Z.languages.DFS(Z.languages,function(A,Cn){Cn===ne&&A!=$&&(this[A]=U)}),U},DFS:function $(L,q,ee,Y){Y=Y||{};var U=Z.util.objId;for(var te in L)if(L.hasOwnProperty(te)){q.call(L,te,L[te],ee||te);var ae=L[te],ne=Z.util.type(ae);ne==="Object"&&!Y[U(ae)]?(Y[U(ae)]=!0,$(ae,q,null,Y)):ne==="Array"&&!Y[U(ae)]&&(Y[U(ae)]=!0,$(ae,q,te,Y))}}},plugins:{},highlightAll:function($,L){Z.highlightAllUnder(document,$,L)},highlightAllUnder:function($,L,q){var ee={callback:q,container:$,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};Z.hooks.run("before-highlightall",ee),ee.elements=Array.prototype.slice.apply(ee.container.querySelectorAll(ee.selector)),Z.hooks.run("before-all-elements-highlight",ee);for(var Y=0,U;U=ee.elements[Y++];)Z.highlightElement(U,L===!0,ee.callback)},highlightElement:function($,L,q){var ee=Z.util.getLanguage($),Y=Z.languages[ee];Z.util.setLanguage($,ee);var U=$.parentElement;U&&U.nodeName.toLowerCase()==="pre"&&Z.util.setLanguage(U,ee);var te=$.textContent,ae={element:$,language:ee,grammar:Y,code:te};function ne(Cn){ae.highlightedCode=Cn,Z.hooks.run("before-insert",ae),ae.element.innerHTML=ae.highlightedCode,Z.hooks.run("after-highlight",ae),Z.hooks.run("complete",ae),q&&q.call(ae.element)}if(Z.hooks.run("before-sanity-check",ae),U=ae.element.parentElement,U&&U.nodeName.toLowerCase()==="pre"&&!U.hasAttribute("tabindex")&&U.setAttribute("tabindex","0"),!ae.code){Z.hooks.run("complete",ae),q&&q.call(ae.element);return}if(Z.hooks.run("before-highlight",ae),!ae.grammar){ne(Z.util.encode(ae.code));return}if(L&&pe.Worker){var A=new Worker(Z.filename);A.onmessage=function(Cn){ne(Cn.data)},A.postMessage(JSON.stringify({language:ae.language,code:ae.code,immediateClose:!0}))}else ne(Z.highlight(ae.code,ae.grammar,ae.language))},highlight:function($,L,q){var ee={code:$,grammar:L,language:q};if(Z.hooks.run("before-tokenize",ee),!ee.grammar)throw new Error('The language "'+ee.language+'" has no grammar.');return ee.tokens=Z.tokenize(ee.code,ee.grammar),Z.hooks.run("after-tokenize",ee),Fe.stringify(Z.util.encode(ee.tokens),ee.language)},tokenize:function($,L){var q=L.rest;if(q){for(var ee in q)L[ee]=q[ee];delete L.rest}var Y=new Yt;return fn(Y,Y.head,$),Sn($,Y,L,Y.head,0),Jt(Y)},hooks:{all:{},add:function($,L){var q=Z.hooks.all;q[$]=q[$]||[],q[$].push(L)},run:function($,L){var q=Z.hooks.all[$];if(!(!q||!q.length))for(var ee=0,Y;Y=q[ee++];)Y(L)}},Token:Fe};pe.Prism=Z;function Fe($,L,q,ee){this.type=$,this.content=L,this.alias=q,this.length=(ee||"").length|0}Fe.stringify=function $(L,q){if(typeof L=="string")return L;if(Array.isArray(L)){var ee="";return L.forEach(function(ne){ee+=$(ne,q)}),ee}var Y={type:L.type,content:$(L.content,q),tag:"span",classes:["token",L.type],attributes:{},language:q},U=L.alias;U&&(Array.isArray(U)?Array.prototype.push.apply(Y.classes,U):Y.classes.push(U)),Z.hooks.run("wrap",Y);var te="";for(var ae in Y.attributes)te+=" "+ae+'="'+(Y.attributes[ae]||"").replace(/"/g,"&quot;")+'"';return"<"+Y.tag+' class="'+Y.classes.join(" ")+'"'+te+">"+Y.content+"</"+Y.tag+">"};function Ze($,L,q,ee){$.lastIndex=L;var Y=$.exec(q);if(Y&&ee&&Y[1]){var U=Y[1].length;Y.index+=U,Y[0]=Y[0].slice(U)}return Y}function Sn($,L,q,ee,Y,U){for(var te in q)if(!(!q.hasOwnProperty(te)||!q[te])){var ae=q[te];ae=Array.isArray(ae)?ae:[ae];for(var ne=0;ne<ae.length;++ne){if(U&&U.cause==te+","+ne)return;var A=ae[ne],Cn=A.inside,Ot=!!A.lookbehind,An=!!A.greedy,yn=A.alias;if(An&&!A.pattern.global){var Tt=A.pattern.toString().match(/[imsuy]*$/)[0];A.pattern=RegExp(A.pattern.source,Tt+"g")}for(var ti=A.pattern||A,Bt=ee.next,on=Y;Bt!==L.tail&&!(U&&on>=U.reach);on+=Bt.value.length,Bt=Bt.next){var _n=Bt.value;if(L.length>$.length)return;if(!(_n instanceof Fe)){var ni=1,an;if(An){if(an=Ze(ti,on,$,Ot),!an||an.index>=$.length)break;var Oe=an.index,dn=an.index+an[0].length,de=on;for(de+=Bt.value.length;Oe>=de;)Bt=Bt.next,de+=Bt.value.length;if(de-=Bt.value.length,on=de,Bt.value instanceof Fe)continue;for(var _e=Bt;_e!==L.tail&&(de<dn||typeof _e.value=="string");_e=_e.next)ni++,de+=_e.value.length;ni--,_n=$.slice(on,de),an.index-=on}else if(an=Ze(ti,0,_n,Ot),!an)continue;var Oe=an.index,Ce=an[0],nt=_n.slice(0,Oe),Dt=_n.slice(Oe+Ce.length),en=on+_n.length;U&&en>U.reach&&(U.reach=en);var rt=Bt.prev;nt&&(rt=fn(L,rt,nt),on+=nt.length),fi(L,rt,ni);var k=new Fe(te,Cn?Z.tokenize(Ce,Cn):Ce,yn,Ce);if(Bt=fn(L,rt,k),Dt&&fn(L,Bt,Dt),ni>1){var Kt={cause:te+","+ne,reach:en};Sn($,L,q,Bt.prev,on,Kt),U&&Kt.reach>U.reach&&(U.reach=Kt.reach)}}}}}}function Yt(){var $={value:null,prev:null,next:null},L={value:null,prev:$,next:null};$.next=L,this.head=$,this.tail=L,this.length=0}function fn($,L,q){var ee=L.next,Y={value:q,prev:L,next:ee};return L.next=Y,ee.prev=Y,$.length++,Y}function fi($,L,q){for(var ee=L.next,Y=0;Y<q&&ee!==$.tail;Y++)ee=ee.next;L.next=ee,ee.prev=L,$.length-=Y}function Jt($){for(var L=[],q=$.head.next;q!==$.tail;)L.push(q.value),q=q.next;return L}if(!pe.document)return pe.addEventListener&&(Z.disableWorkerMessageHandler||pe.addEventListener("message",function($){var L=JSON.parse($.data),q=L.language,ee=L.code,Y=L.immediateClose;pe.postMessage(Z.highlight(ee,Z.languages[q],q)),Y&&pe.close()},!1)),Z;var Ge=Z.util.currentScript();Ge&&(Z.filename=Ge.src,Ge.hasAttribute("data-manual")&&(Z.manual=!0));function tt(){Z.manual||Z.highlightAll()}if(!Z.manual){var se=document.readyState;se==="loading"||se==="interactive"&&Ge&&Ge.defer?document.addEventListener("DOMContentLoaded",tt):window.requestAnimationFrame?window.requestAnimationFrame(tt):window.setTimeout(tt,16)}return Z}(J);ge.exports&&(ge.exports=K),typeof N.g!="undefined"&&(N.g.Prism=K),K.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},K.languages.markup.tag.inside["attr-value"].inside.entity=K.languages.markup.entity,K.languages.markup.doctype.inside["internal-subset"].inside=K.languages.markup,K.hooks.add("wrap",function(pe){pe.type==="entity"&&(pe.attributes.title=pe.content.replace(/&amp;/,"&"))}),Object.defineProperty(K.languages.markup.tag,"addInlined",{value:function(Ie,P){var j={};j["language-"+P]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:K.languages[P]},j.cdata=/^<!\[CDATA\[|\]\]>$/i;var Z={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:j}};Z["language-"+P]={pattern:/[\s\S]+/,inside:K.languages[P]};var Fe={};Fe[Ie]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return Ie}),"i"),lookbehind:!0,greedy:!0,inside:Z},K.languages.insertBefore("markup","cdata",Fe)}}),Object.defineProperty(K.languages.markup.tag,"addAttribute",{value:function(pe,Ie){K.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+pe+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[Ie,"language-"+Ie],inside:K.languages[Ie]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),K.languages.html=K.languages.markup,K.languages.mathml=K.languages.markup,K.languages.svg=K.languages.markup,K.languages.xml=K.languages.extend("markup",{}),K.languages.ssml=K.languages.xml,K.languages.atom=K.languages.xml,K.languages.rss=K.languages.xml,function(pe){var Ie=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;pe.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+Ie.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+Ie.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+Ie.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+Ie.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:Ie,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},pe.languages.css.atrule.inside.rest=pe.languages.css;var P=pe.languages.markup;P&&(P.tag.addInlined("style","css"),P.tag.addAttribute("style","css"))}(K),K.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},K.languages.javascript=K.languages.extend("clike",{"class-name":[K.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),K.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,K.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:K.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:K.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:K.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:K.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:K.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),K.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:K.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),K.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),K.languages.markup&&(K.languages.markup.tag.addInlined("script","javascript"),K.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),K.languages.js=K.languages.javascript,function(){if(typeof K=="undefined"||typeof document=="undefined")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var pe="Loading\u2026",Ie=function(Ge,tt){return"\u2716 Error "+Ge+" while fetching file: "+tt},P="\u2716 Error: File does not exist or is empty",j={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},Z="data-src-status",Fe="loading",Ze="loaded",Sn="failed",Yt="pre[data-src]:not(["+Z+'="'+Ze+'"]):not(['+Z+'="'+Fe+'"])';function fn(Ge,tt,se){var $=new XMLHttpRequest;$.open("GET",Ge,!0),$.onreadystatechange=function(){$.readyState==4&&($.status<400&&$.responseText?tt($.responseText):$.status>=400?se(Ie($.status,$.statusText)):se(P))},$.send(null)}function fi(Ge){var tt=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(Ge||"");if(tt){var se=Number(tt[1]),$=tt[2],L=tt[3];return $?L?[se,Number(L)]:[se,void 0]:[se,se]}}K.hooks.add("before-highlightall",function(Ge){Ge.selector+=", "+Yt}),K.hooks.add("before-sanity-check",function(Ge){var tt=Ge.element;if(tt.matches(Yt)){Ge.code="",tt.setAttribute(Z,Fe);var se=tt.appendChild(document.createElement("CODE"));se.textContent=pe;var $=tt.getAttribute("data-src"),L=Ge.language;if(L==="none"){var q=(/\.(\w+)$/.exec($)||[,"none"])[1];L=j[q]||q}K.util.setLanguage(se,L),K.util.setLanguage(tt,L);var ee=K.plugins.autoloader;ee&&ee.loadLanguages(L),fn($,function(Y){tt.setAttribute(Z,Ze);var U=fi(tt.getAttribute("data-range"));if(U){var te=Y.split(/\r\n?|\n/g),ae=U[0],ne=U[1]==null?te.length:U[1];ae<0&&(ae+=te.length),ae=Math.max(0,Math.min(ae-1,te.length)),ne<0&&(ne+=te.length),ne=Math.max(0,Math.min(ne,te.length)),Y=te.slice(ae,ne).join(`
`),tt.hasAttribute("data-start")||tt.setAttribute("data-start",String(ae+1))}se.textContent=Y,K.highlightElement(se)},function(Y){tt.setAttribute(Z,Sn),se.textContent=Y})}}),K.plugins.fileHighlight={highlight:function(tt){for(var se=(tt||document).querySelectorAll(Yt),$=0,L;L=se[$++];)K.highlightElement(L)}};var Jt=!1;K.fileHighlight=function(){Jt||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),Jt=!0),K.plugins.fileHighlight.highlight.apply(this,arguments)}}()},62273:function(ge,re){"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var N={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},J=re.default=N},74219:function(ge,re){"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var N={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"},J=re.default=N},26114:function(ge,re){"use strict";Object.defineProperty(re,"__esModule",{value:!0}),re.commonLocale=void 0;var N=re.commonLocale={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0}},27590:function(ge,re,N){"use strict";var J=N(64836).default;Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var K=J(N(42122)),pe=N(26114),Ie=(0,K.default)((0,K.default)({},pe.commonLocale),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"}),P=re.default=Ie},85369:function(ge,re,N){"use strict";var J=N(64836).default;Object.defineProperty(re,"__esModule",{value:!0}),re.default=void 0;var K=J(N(42122)),pe=N(26114),Ie=(0,K.default)((0,K.default)({},pe.commonLocale),{},{locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA",yearFormat:"YYYY\u5E74",cellDateFormat:"D",monthBeforeYear:!1}),P=re.default=Ie},40460:function(ge,re,N){"use strict";var J=this&&this.__assign||function(){return J=Object.assign||function(Y){for(var U,te=1,ae=arguments.length;te<ae;te++){U=arguments[te];for(var ne in U)Object.prototype.hasOwnProperty.call(U,ne)&&(Y[ne]=U[ne])}return Y},J.apply(this,arguments)},K=this&&this.__createBinding||(Object.create?function(Y,U,te,ae){ae===void 0&&(ae=te);var ne=Object.getOwnPropertyDescriptor(U,te);(!ne||("get"in ne?!U.__esModule:ne.writable||ne.configurable))&&(ne={enumerable:!0,get:function(){return U[te]}}),Object.defineProperty(Y,ae,ne)}:function(Y,U,te,ae){ae===void 0&&(ae=te),Y[ae]=U[te]}),pe=this&&this.__setModuleDefault||(Object.create?function(Y,U){Object.defineProperty(Y,"default",{enumerable:!0,value:U})}:function(Y,U){Y.default=U}),Ie=this&&this.__importStar||function(Y){if(Y&&Y.__esModule)return Y;var U={};if(Y!=null)for(var te in Y)te!=="default"&&Object.prototype.hasOwnProperty.call(Y,te)&&K(U,Y,te);return pe(U,Y),U},P=this&&this.__rest||function(Y,U){var te={};for(var ae in Y)Object.prototype.hasOwnProperty.call(Y,ae)&&U.indexOf(ae)<0&&(te[ae]=Y[ae]);if(Y!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ne=0,ae=Object.getOwnPropertySymbols(Y);ne<ae.length;ne++)U.indexOf(ae[ne])<0&&Object.prototype.propertyIsEnumerable.call(Y,ae[ne])&&(te[ae[ne]]=Y[ae[ne]]);return te};Object.defineProperty(re,"__esModule",{value:!0});var j=Ie(N(67294)),Z=89,Fe=90,Ze=77,Sn=57,Yt=219,fn=222,fi=192,Jt=100,Ge=3e3,tt=typeof window!="undefined"&&"navigator"in window&&/Win/i.test(navigator.platform),se=typeof window!="undefined"&&"navigator"in window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform),$="npm__react-simple-code-editor__textarea",L=`
/**
 * Reset the text fill color so that placeholder is visible
 */
.`.concat($,`:empty {
  -webkit-text-fill-color: inherit !important;
}

/**
 * Hack to apply on some CSS on IE10 and IE11
 */
@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {
  /**
    * IE doesn't support '-webkit-text-fill-color'
    * So we use 'color: transparent' to make the text transparent on IE
    * Unlike other browsers, it doesn't affect caret color in IE
    */
  .`).concat($,` {
    color: transparent !important;
  }

  .`).concat($,`::selection {
    background-color: #accef7 !important;
    color: transparent !important;
  }
}
`),q=j.forwardRef(function(U,te){var ae=U.autoFocus,ne=U.disabled,A=U.form,Cn=U.highlight,Ot=U.ignoreTabKey,An=Ot===void 0?!1:Ot,yn=U.insertSpaces,Tt=yn===void 0?!0:yn,ti=U.maxLength,Bt=U.minLength,on=U.name,_n=U.onBlur,ni=U.onClick,an=U.onFocus,dn=U.onKeyDown,de=U.onKeyUp,_e=U.onValueChange,Oe=U.padding,Ce=Oe===void 0?0:Oe,nt=U.placeholder,Dt=U.preClassName,en=U.readOnly,rt=U.required,k=U.style,Kt=U.tabSize,di=Kt===void 0?2:Kt,Nt=U.textareaClassName,Ut=U.textareaId,ii=U.value,tn=P(U,["autoFocus","disabled","form","highlight","ignoreTabKey","insertSpaces","maxLength","minLength","name","onBlur","onClick","onFocus","onKeyDown","onKeyUp","onValueChange","padding","placeholder","preClassName","readOnly","required","style","tabSize","textareaClassName","textareaId","value"]),ut=j.useRef({stack:[],offset:-1}),Tn=j.useRef(null),wr=j.useState(!0),Oo=wr[0],Bo=wr[1],Gi={paddingTop:typeof Ce=="object"?Ce.top:Ce,paddingRight:typeof Ce=="object"?Ce.right:Ce,paddingBottom:typeof Ce=="object"?Ce.bottom:Ce,paddingLeft:typeof Ce=="object"?Ce.left:Ce},Sr=Cn(ii),zn=function(ie,it){return ie.substring(0,it).split(`
`)},Rt=j.useCallback(function(ie,it){var $e,We,At;it===void 0&&(it=!1);var nn=ut.current,be=nn.stack,Lt=nn.offset;if(be.length&&Lt>-1){ut.current.stack=be.slice(0,Lt+1);var sn=ut.current.stack.length;if(sn>Jt){var ri=sn-Jt;ut.current.stack=be.slice(ri,sn),ut.current.offset=Math.max(ut.current.offset-ri,0)}}var vt=Date.now();if(it){var hi=ut.current.stack[ut.current.offset];if(hi&&vt-hi.timestamp<Ge){var Zi=/[^a-z0-9]([a-z0-9]+)$/i,cn=($e=zn(hi.value,hi.selectionStart).pop())===null||$e===void 0?void 0:$e.match(Zi),gt=(We=zn(ie.value,ie.selectionStart).pop())===null||We===void 0?void 0:We.match(Zi);if(cn!=null&&cn[1]&&(!((At=gt==null?void 0:gt[1])===null||At===void 0)&&At.startsWith(cn[1]))){ut.current.stack[ut.current.offset]=J(J({},ie),{timestamp:vt});return}}}ut.current.stack.push(J(J({},ie),{timestamp:vt})),ut.current.offset++},[]),Vt=j.useCallback(function(){var ie=Tn.current;if(ie){var it=ie.value,$e=ie.selectionStart,We=ie.selectionEnd;Rt({value:it,selectionStart:$e,selectionEnd:We})}},[Rt]),Ye=function(ie){var it=Tn.current;it&&(it.value=ie.value,it.selectionStart=ie.selectionStart,it.selectionEnd=ie.selectionEnd,_e==null||_e(ie.value))},Ne=function(ie){var it=Tn.current,$e=ut.current.stack[ut.current.offset];$e&&it&&(ut.current.stack[ut.current.offset]=J(J({},$e),{selectionStart:it.selectionStart,selectionEnd:it.selectionEnd})),Rt(ie),Ye(ie)},Hn=function(){var ie=ut.current,it=ie.stack,$e=ie.offset,We=it[$e-1];We&&(Ye(We),ut.current.offset=Math.max($e-1,0))},Ui=function(){var ie=ut.current,it=ie.stack,$e=ie.offset,We=it[$e+1];We&&(Ye(We),ut.current.offset=Math.min($e+1,it.length-1))},Gn=function(ie){if(!(dn&&(dn(ie),ie.defaultPrevented))){ie.key==="Escape"&&ie.currentTarget.blur();var it=ie.currentTarget,$e=it.value,We=it.selectionStart,At=it.selectionEnd,nn=(Tt?" ":"	").repeat(di);if(ie.key==="Tab"&&!An&&Oo)if(ie.preventDefault(),ie.shiftKey){var be=zn($e,We),Lt=be.length-1,sn=zn($e,At).length-1,ri=$e.split(`
`).map(function(bn,Yr){return Yr>=Lt&&Yr<=sn&&bn.startsWith(nn)?bn.substring(nn.length):bn}).join(`
`);if($e!==ri){var vt=be[Lt];Ne({value:ri,selectionStart:vt!=null&&vt.startsWith(nn)?We-nn.length:We,selectionEnd:At-($e.length-ri.length)})}}else if(We!==At){var be=zn($e,We),hi=be.length-1,Zi=zn($e,At).length-1,vt=be[hi];Ne({value:$e.split(`
`).map(function(No,we){return we>=hi&&we<=Zi?nn+No:No}).join(`
`),selectionStart:vt&&/\S/.test(vt)?We+nn.length:We,selectionEnd:At+nn.length*(Zi-hi+1)})}else{var cn=We+nn.length;Ne({value:$e.substring(0,We)+nn+$e.substring(At),selectionStart:cn,selectionEnd:cn})}else if(ie.key==="Backspace"){var gt=We!==At,il=$e.substring(0,We);if(il.endsWith(nn)&&!gt){ie.preventDefault();var cn=We-nn.length;Ne({value:$e.substring(0,We-nn.length)+$e.substring(At),selectionStart:cn,selectionEnd:cn})}}else if(ie.key==="Enter"){if(We===At){var st=zn($e,We).pop(),Si=st==null?void 0:st.match(/^\s+/);if(Si!=null&&Si[0]){ie.preventDefault();var ot=`
`+Si[0],cn=We+ot.length;Ne({value:$e.substring(0,We)+ot+$e.substring(At),selectionStart:cn,selectionEnd:cn})}}}else if(ie.keyCode===Sn||ie.keyCode===Yt||ie.keyCode===fn||ie.keyCode===fi){var Bn=void 0;ie.keyCode===Sn&&ie.shiftKey?Bn=["(",")"]:ie.keyCode===Yt?ie.shiftKey?Bn=["{","}"]:Bn=["[","]"]:ie.keyCode===fn?ie.shiftKey?Bn=['"','"']:Bn=["'","'"]:ie.keyCode===fi&&!ie.shiftKey&&(Bn=["`","`"]),We!==At&&Bn&&(ie.preventDefault(),Ne({value:$e.substring(0,We)+Bn[0]+$e.substring(We,At)+Bn[1]+$e.substring(At),selectionStart:We,selectionEnd:At+2}))}else(se?ie.metaKey&&ie.keyCode===Fe:ie.ctrlKey&&ie.keyCode===Fe)&&!ie.shiftKey&&!ie.altKey?(ie.preventDefault(),Hn()):(se?ie.metaKey&&ie.keyCode===Fe&&ie.shiftKey:tt?ie.ctrlKey&&ie.keyCode===Z:ie.ctrlKey&&ie.keyCode===Fe&&ie.shiftKey)&&!ie.altKey?(ie.preventDefault(),Ui()):ie.keyCode===Ze&&ie.ctrlKey&&(!se||ie.shiftKey)&&(ie.preventDefault(),Bo(function(bn){return!bn}))}},Vi=function(ie){var it=ie.currentTarget,$e=it.value,We=it.selectionStart,At=it.selectionEnd;Rt({value:$e,selectionStart:We,selectionEnd:At},!0),_e($e)};return j.useEffect(function(){Vt()},[Vt]),j.useImperativeHandle(te,function(){return{get session(){return{history:ut.current}},set session(ie){ut.current=ie.history}}},[]),j.createElement("div",J({},tn,{style:J(J({},ee.container),k)}),j.createElement("pre",J({className:Dt,"aria-hidden":"true",style:J(J(J({},ee.editor),ee.highlight),Gi)},typeof Sr=="string"?{dangerouslySetInnerHTML:{__html:Sr+"<br />"}}:{children:Sr})),j.createElement("textarea",{ref:function(ie){return Tn.current=ie},style:J(J(J({},ee.editor),ee.textarea),Gi),className:$+(Nt?" ".concat(Nt):""),id:Ut,value:ii,onChange:Vi,onKeyDown:Gn,onClick:ni,onKeyUp:de,onFocus:an,onBlur:_n,disabled:ne,form:A,maxLength:ti,minLength:Bt,name:on,placeholder:nt,readOnly:en,required:rt,autoFocus:ae,autoCapitalize:"off",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"data-gramm":!1}),j.createElement("style",{dangerouslySetInnerHTML:{__html:L}}))}),ee={container:{position:"relative",textAlign:"left",boxSizing:"border-box",padding:0,overflow:"hidden"},textarea:{position:"absolute",top:0,left:0,height:"100%",width:"100%",resize:"none",color:"inherit",overflow:"hidden",MozOsxFontSmoothing:"grayscale",WebkitFontSmoothing:"antialiased",WebkitTextFillColor:"transparent"},highlight:{position:"relative",pointerEvents:"none"},editor:{margin:0,border:0,background:"none",boxSizing:"inherit",display:"inherit",fontFamily:"inherit",fontSize:"inherit",fontStyle:"inherit",fontVariantLigatures:"inherit",fontWeight:"inherit",letterSpacing:"inherit",lineHeight:"inherit",tabSize:"inherit",textIndent:"inherit",textRendering:"inherit",textTransform:"inherit",whiteSpace:"pre-wrap",wordBreak:"keep-all",overflowWrap:"break-word"}};re.default=q}}]);
