"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[371],{51103:function(Y,$,e){e.r($),e.d($,{default:function(){return V}});var D=e(15009),l=e.n(D),N=e(99289),h=e.n(N),A=e(5574),b=e.n(A),H=e(74273),G=e(90930),K=e(38345),M=e(51390),f=e(67294),B=e(97857),k=e.n(B),T=e(66309),C=e(59530),F=function(){return(0,C.request)("/easy-flowable/processInstance/statics")},O=function(u){return(0,C.request)("/easy-flowable/processInstance/todoTaskPage",{method:"POST",data:u})},y=[{title:"\u6D41\u7A0B\u540D\u79F0",dataIndex:"processName"},{title:"\u8282\u70B9\u540D\u79F0",dataIndex:"nodeName"},{title:"\u5F00\u59CB\u65F6\u95F4",dataIndex:"startTime"}],Z=[{title:"\u7ED3\u675F\u65F6\u95F4",dataIndex:"endTime"},{title:"\u6D41\u7A0B\u72B6\u6001",dataIndex:"status",align:"center",render:function(u,a){var r=a.status;return r===1?f.createElement(T.Z,{color:"success"},"\u5DF2\u5B8C\u6210"):r===2?f.createElement(T.Z,{color:"red"},"\u5DF2\u4F5C\u5E9F"):f.createElement(T.Z,{color:"processing"},"\u8FDB\u884C\u4E2D")}}],U=function(){var i=h()(l()().mark(function u(){var a,r,v;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,F();case 2:if(a=t.sent,r=a.success,v=a.result,!r){t.next=7;break}return t.abrupt("return",v);case 7:return t.abrupt("return",!1);case 8:case"end":return t.stop()}},u)}));return function(){return i.apply(this,arguments)}}(),w=function(){var i=h()(l()().mark(function u(a){var r,v,m,t;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return r={current:a.current||1,size:a.pageSize||10},o.next=3,O(k()(k()({},a),r));case 3:return v=o.sent,m=v.success,t=v.result,o.abrupt("return",{success:m,total:t.total||0,data:t.records||[]});case 7:case"end":return o.stop()}},u)}));return function(a){return i.apply(this,arguments)}}(),x=[{key:"todo",title:"\u5F85\u529E",status:"processing",value:10,columns:y,total:!0},{key:"done",title:"\u5DF2\u529E",status:"success",value:5,columns:y.concat(Z),total:!0},{key:"meTodo",title:"\u6211\u7684\u5F85\u529E",status:"default",value:1,columns:y},{key:"meDone",title:"\u6211\u7684\u5DF2\u529E",status:"default",value:1,columns:y.concat(Z)}],z=e(60849),J=e(78957),d=e(85893),L=H.Z.Statistic,Q=function(){var u=(0,C.useModel)("@@initialState"),a=u.initialState,r=a.users,v=a.groups,m=f.useRef();console.log(r);var t=f.useState(x),j=b()(t,2),o=j[0],W=j[1],X=function(g){return[{title:"\u5F85\u529E\u4EBA",dataIndex:"assignee",valueType:"select",request:function(){var I=h()(l()().mark(function c(){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r);case 1:case"end":return s.stop()}},c)}));function S(){return I.apply(this,arguments)}return S}()},{title:"\u6D41\u7A0B\u53D1\u8D77\u4EBA",dataIndex:"startUserId",valueType:"select",request:function(){var I=h()(l()().mark(function c(){return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.abrupt("return",r);case 1:case"end":return s.stop()}},c)}));function S(){return I.apply(this,arguments)}return S}()},{title:"\u64CD\u4F5C",hideInTable:g==="todo",align:"center",render:function(S,c){var p=c.comments,s=c.nodeName,E=c.processInstanceId,R=c.taskId;return(0,d.jsxs)(J.Z,{children:[p&&p.length?(0,d.jsx)(z.K,{comments:p,taskName:s}):null,R&&E?(0,d.jsx)(z.z,{link:!0,processInstanceId:E,taskId:R,reload:function(){var P;return(P=m.current)===null||P===void 0?void 0:P.reloadAndRest()}}):null]})}}]};return f.useEffect(function(){U().then(function(n){n&&W(x.filter(function(g){return g.value=n[g.key],!0}))})},[]),(0,d.jsx)(G._z,{title:"\u9996\u9875\u7EDF\u8BA1",children:(0,d.jsx)(K.Z,{tabs:{items:o.map(function(n){return{key:n.key,style:{width:"100%"},label:(0,d.jsx)(L,{layout:"vertical",title:n.title,value:n.value,status:n.status,style:{width:120,borderInlineEnd:n.total?"1px solid #f0f0f0":void 0}}),children:(0,d.jsx)(M.Z,{search:!1,size:"small",params:{params:n.key},pagination:{pageSize:10},scroll:{y:520},request:w,rowKey:"id",columns:n.columns.concat(X(n.key))})}})}})})},V=Q}}]);
